function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function onBackKeyDown(e){e.preventDefault(),SceneManager.main.currentScene.OnBlur()}!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PIXI=e()}}(function(){var e;return function e(t,i,n){function r(s,o){if(!i[s]){if(!t[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){var i=t[s][1][e];return r(i||e)},h,h.exports,e,t,i,n)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){"use strict";"use restrict";function n(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}i.INT_BITS=32,i.INT_MAX=2147483647,i.INT_MIN=-1<<31,i.sign=function(e){return(e>0)-(e<0)},i.abs=function(e){var t=e>>31;return(e^t)-t},i.min=function(e,t){return t^(e^t)&-(e<t)},i.max=function(e,t){return e^(e^t)&-(e<t)},i.isPow2=function(e){return!(e&e-1||!e)},i.log2=function(e){var t,i;return t=(e>65535)<<4,e>>>=t,i=(e>255)<<3,e>>>=i,t|=i,i=(e>15)<<2,e>>>=i,t|=i,i=(e>3)<<1,e>>>=i,(t|=i)|e>>1},i.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},i.popCount=function(e){return e-=e>>>1&1431655765,16843009*((e=(858993459&e)+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},i.countTrailingZeros=n,i.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},i.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},i.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var r=new Array(256);!function(e){for(var t=0;t<256;++t){var i=t,n=t,r=7;for(i>>>=1;i;i>>>=1)n<<=1,n|=1&i,--r;e[t]=n<<r&255}}(r),i.reverse=function(e){return r[255&e]<<24|r[e>>>8&255]<<16|r[e>>>16&255]<<8|r[e>>>24&255]},i.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},i.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),(e=65535&(e|e>>>16))<<16>>16},i.interleave3=function(e,t,i){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,i&=1023,i=4278190335&(i|i<<16),i=251719695&(i|i<<8),i=3272356035&(i|i<<4),i=1227133513&(i|i<<2),e|i<<2},i.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),(e=1023&(e|e>>>16))<<22>>22},i.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},{}],2:[function(e,t,i){"use strict";function n(e,t,i){i=i||2;var n=t&&t.length,a=n?t[0]*i:e.length,o=r(e,0,a,i,!0),u=[];if(!o)return u;var l,h,d,p,f,g,m;if(n&&(o=c(e,t,o,i)),e.length>80*i){l=d=e[0],h=p=e[1];for(var v=i;v<a;v+=i)f=e[v],g=e[v+1],f<l&&(l=f),g<h&&(h=g),f>d&&(d=f),g>p&&(p=g);m=Math.max(d-l,p-h)}return s(o,u,i,l,h,m),u}function r(e,t,i,n,r){var a,s;if(r===A(e,t,i,n)>0)for(a=t;a<i;a+=n)s=M(a,e[a],e[a+1],s);else for(a=i-n;a>=t;a-=n)s=M(a,e[a],e[a+1],s);return s&&x(s,s.next)&&(E(s),s=s.next),s}function a(e,t){if(!e)return e;t||(t=e);var i,n=e;do{if(i=!1,n.steiner||!x(n,n.next)&&0!==w(n.prev,n,n.next))n=n.next;else{if(E(n),(n=t=n.prev)===n.next)return null;i=!0}}while(i||n!==t);return t}function s(e,t,i,n,r,c,d){if(e){!d&&c&&g(e,n,r,c);for(var p,f,m=e;e.prev!==e.next;)if(p=e.prev,f=e.next,c?u(e,n,r,c):o(e))t.push(p.i/i),t.push(e.i/i),t.push(f.i/i),E(e),e=f.next,m=f.next;else if((e=f)===m){d?1===d?(e=l(e,t,i),s(e,t,i,n,r,c,2)):2===d&&h(e,t,i,n,r,c):s(a(e),t,i,n,r,c,1);break}}}function o(e){var t=e.prev,i=e,n=e.next;if(w(t,i,n)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(b(t.x,t.y,i.x,i.y,n.x,n.y,r.x,r.y)&&w(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function u(e,t,i,n){var r=e.prev,a=e,s=e.next;if(w(r,a,s)>=0)return!1;for(var o=r.x<a.x?r.x<s.x?r.x:s.x:a.x<s.x?a.x:s.x,u=r.y<a.y?r.y<s.y?r.y:s.y:a.y<s.y?a.y:s.y,l=r.x>a.x?r.x>s.x?r.x:s.x:a.x>s.x?a.x:s.x,h=r.y>a.y?r.y>s.y?r.y:s.y:a.y>s.y?a.y:s.y,c=v(o,u,t,i,n),d=v(l,h,t,i,n),p=e.nextZ;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&b(r.x,r.y,a.x,a.y,s.x,s.y,p.x,p.y)&&w(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=e.prevZ;p&&p.z>=c;){if(p!==e.prev&&p!==e.next&&b(r.x,r.y,a.x,a.y,s.x,s.y,p.x,p.y)&&w(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function l(e,t,i){var n=e;do{var r=n.prev,a=n.next.next;!x(r,a)&&T(r,n,n.next,a)&&I(r,a)&&I(a,r)&&(t.push(r.i/i),t.push(n.i/i),t.push(a.i/i),E(n),E(n.next),n=e=a),n=n.next}while(n!==e);return n}function h(e,t,i,n,r,o){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&_(u,l)){var h=C(u,l);return u=a(u,u.next),h=a(h,h.next),s(u,t,i,n,r,o),void s(h,t,i,n,r,o)}l=l.next}u=u.next}while(u!==e)}function c(e,t,i,n){var s,o,u,l,h,c=[];for(s=0,o=t.length;s<o;s++)u=t[s]*n,l=s<o-1?t[s+1]*n:e.length,(h=r(e,u,l,n,!1))===h.next&&(h.steiner=!0),c.push(y(h));for(c.sort(d),s=0;s<c.length;s++)p(c[s],i),i=a(i,i.next);return i}function d(e,t){return e.x-t.x}function p(e,t){if(t=f(e,t)){var i=C(t,e);a(i,i.next)}}function f(e,t){var i,n=t,r=e.x,a=e.y,s=-1/0;do{if(a<=n.y&&a>=n.next.y){var o=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=r&&o>s){if(s=o,o===r){if(a===n.y)return n;if(a===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!i)return null;if(r===s)return i.prev;var u,l=i,h=i.x,c=i.y,d=1/0;for(n=i.next;n!==l;)r>=n.x&&n.x>=h&&b(a<c?r:s,a,h,c,a<c?s:r,a,n.x,n.y)&&((u=Math.abs(a-n.y)/(r-n.x))<d||u===d&&n.x>i.x)&&I(n,e)&&(i=n,d=u),n=n.next;return i}function g(e,t,i,n){var r=e;do{null===r.z&&(r.z=v(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,m(r)}function m(e){var t,i,n,r,a,s,o,u,l=1;do{for(i=e,e=null,a=null,s=0;i;){for(s++,n=i,o=0,t=0;t<l&&(o++,n=n.nextZ);t++);for(u=l;o>0||u>0&&n;)0===o?(r=n,n=n.nextZ,u--):0!==u&&n?i.z<=n.z?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,u--):(r=i,i=i.nextZ,o--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;i=n}a.nextZ=null,l*=2}while(s>1);return e}function v(e,t,i,n,r){return e=32767*(e-i)/r,t=32767*(t-n)/r,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function y(e){var t=e,i=e;do{t.x<i.x&&(i=t),t=t.next}while(t!==e);return i}function b(e,t,i,n,r,a,s,o){return(r-s)*(t-o)-(e-s)*(a-o)>=0&&(e-s)*(n-o)-(i-s)*(t-o)>=0&&(i-s)*(a-o)-(r-s)*(n-o)>=0}function _(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!S(e,t)&&I(e,t)&&I(t,e)&&P(e,t)}function w(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function x(e,t){return e.x===t.x&&e.y===t.y}function T(e,t,i,n){return!!(x(e,t)&&x(i,n)||x(e,n)&&x(i,t))||w(e,t,i)>0!=w(e,t,n)>0&&w(i,n,e)>0!=w(i,n,t)>0}function S(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&T(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function I(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function P(e,t){var i=e,n=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{i.y>a!=i.next.y>a&&r<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}function C(e,t){var i=new k(e.i,e.x,e.y),n=new k(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function M(e,t,i,n){var r=new k(e,t,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function E(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function k(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(e,t,i,n){for(var r=0,a=t,s=i-n;a<i;a+=n)r+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return r}t.exports=n,n.deviation=function(e,t,i,n){var r=t&&t.length,a=r?t[0]*i:e.length,s=Math.abs(A(e,0,a,i));if(r)for(var o=0,u=t.length;o<u;o++){var l=t[o]*i,h=o<u-1?t[o+1]*i:e.length;s-=Math.abs(A(e,l,h,i))}var c=0;for(o=0;o<n.length;o+=3){var d=n[o]*i,p=n[o+1]*i,f=n[o+2]*i;c+=Math.abs((e[d]-e[f])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[f+1]-e[d+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},n.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},n=0,r=0;r<e.length;r++){for(var a=0;a<e[r].length;a++)for(var s=0;s<t;s++)i.vertices.push(e[r][a][s]);r>0&&(n+=e[r-1].length,i.holes.push(n))}return i}},{}],3:[function(e,t,i){"use strict";function n(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function a(){this._events=new n,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,o="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(o=!1)),a.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)s.call(e,t)&&i.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e,t){var i=o?o+e:e,n=this._events[i];if(t)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,s=new Array(a);r<a;r++)s[r]=n[r].fn;return s},a.prototype.emit=function(e,t,i,n,r,a){var s=o?o+e:e;if(!this._events[s])return!1;var u,l,h=this._events[s],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,i),!0;case 4:return h.fn.call(h.context,t,i,n),!0;case 5:return h.fn.call(h.context,t,i,n,r),!0;case 6:return h.fn.call(h.context,t,i,n,r,a),!0}for(l=1,u=new Array(c-1);l<c;l++)u[l-1]=arguments[l];h.fn.apply(h.context,u)}else{var d,p=h.length;for(l=0;l<p;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),c){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,i);break;case 4:h[l].fn.call(h[l].context,t,i,n);break;default:if(!u)for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];h[l].fn.apply(h[l].context,u)}}return!0},a.prototype.on=function(e,t,i){var n=new r(t,i||this),a=o?o+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],n]:this._events[a].push(n):(this._events[a]=n,this._eventsCount++),this},a.prototype.once=function(e,t,i){var n=new r(t,i||this,!0),a=o?o+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],n]:this._events[a].push(n):(this._events[a]=n,this._eventsCount++),this},a.prototype.removeListener=function(e,t,i,r){var a=o?o+e:e;if(!this._events[a])return this;if(!t)return 0==--this._eventsCount?this._events=new n:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==t||r&&!s.once||i&&s.context!==i||(0==--this._eventsCount?this._events=new n:delete this._events[a]);else{for(var u=0,l=[],h=s.length;u<h;u++)(s[u].fn!==t||r&&!s[u].once||i&&s[u].context!==i)&&l.push(s[u]);l.length?this._events[a]=1===l.length?l[0]:l:0==--this._eventsCount?this._events=new n:delete this._events[a]}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=o?o+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new n:delete this._events[t])):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=o,a.EventEmitter=a,void 0!==t&&(t.exports=a)},{}],4:[function(e,t,i){!function(e){var i=/iPhone/i,n=/iPod/i,r=/iPad/i,a=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,s=/Android/i,o=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,u=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,l=/IEMobile/i,h=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,c=/BlackBerry/i,d=/BB10/i,p=/Opera Mini/i,f=/(CriOS|Chrome)(?=.*\bMobile\b)/i,g=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,m=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),v=function(e,t){return e.test(t)},y=function(e){var t=e||navigator.userAgent,y=t.split("[FBAN");if(void 0!==y[1]&&(t=y[0]),void 0!==(y=t.split("Twitter"))[1]&&(t=y[0]),this.apple={phone:v(i,t),ipod:v(n,t),tablet:!v(i,t)&&v(r,t),device:v(i,t)||v(n,t)||v(r,t)},this.amazon={phone:v(o,t),tablet:!v(o,t)&&v(u,t),device:v(o,t)||v(u,t)},this.android={phone:v(o,t)||v(a,t),tablet:!v(o,t)&&!v(a,t)&&(v(u,t)||v(s,t)),device:v(o,t)||v(u,t)||v(a,t)||v(s,t)},this.windows={phone:v(l,t),tablet:v(h,t),device:v(l,t)||v(h,t)},this.other={blackberry:v(c,t),blackberry10:v(d,t),opera:v(p,t),firefox:v(g,t),chrome:v(f,t),device:v(c,t)||v(d,t)||v(p,t)||v(g,t)||v(f,t)},this.seven_inch=v(m,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},b=function(){var e=new y;return e.Class=y,e};void 0!==t&&t.exports&&"undefined"==typeof window?t.exports=y:void 0!==t&&t.exports&&"undefined"!=typeof window?t.exports=b():e.isMobile=b()}(this)},{}],5:[function(e,t,i){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,o,u=n(e),l=1;l<arguments.length;l++){i=Object(arguments[l]);for(var h in i)a.call(i,h)&&(u[h]=i[h]);if(r){o=r(i);for(var c=0;c<o.length;c++)s.call(i,o[c])&&(u[o[c]]=i[o[c]])}}return u}},{}],6:[function(e,t,i){var n=new ArrayBuffer(0),r=function(e,t,i,r){this.gl=e,this.buffer=e.createBuffer(),this.type=t||e.ARRAY_BUFFER,this.drawType=r||e.STATIC_DRAW,this.data=n,i&&this.upload(i)};r.prototype.upload=function(e,t,i){i||this.bind();var n=this.gl;e=e||this.data,t=t||0,this.data.byteLength>=e.byteLength?n.bufferSubData(this.type,t,e):n.bufferData(this.type,e,this.drawType),this.data=e},r.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(e,t,i){return new r(e,e.ARRAY_BUFFER,t,i)},r.createIndexBuffer=function(e,t,i){return new r(e,e.ELEMENT_ARRAY_BUFFER,t,i)},r.create=function(e,t,i,n){return new r(e,t,i,n)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=r},{}],7:[function(e,t,i){var n=e("./GLTexture"),r=function(e,t,i){this.gl=e,this.framebuffer=e.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=i||100};r.prototype.enableTexture=function(e){var t=this.gl;this.texture=e||new n(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)},r.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},r.prototype.clear=function(e,t,i,n){this.bind();var r=this.gl;r.clearColor(e,t,i,n),r.clear(r.COLOR_BUFFER_BIT)},r.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},r.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},r.prototype.resize=function(e,t){var i=this.gl;this.width=e,this.height=t,this.texture&&this.texture.uploadData(null,e,t),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,t))},r.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},r.createRGBA=function(e,t,i,a){var s=n.fromData(e,null,t,i);s.enableNearestScaling(),s.enableWrapClamp();var o=new r(e,t,i);return o.enableTexture(s),o.unbind(),o},r.createFloat32=function(e,t,i,a){var s=new n.fromData(e,a,t,i);s.enableNearestScaling(),s.enableWrapClamp();var o=new r(e,t,i);return o.enableTexture(s),o.unbind(),o},t.exports=r},{"./GLTexture":9}],8:[function(e,t,i){var n=e("./shader/compileProgram"),r=e("./shader/extractAttributes"),a=e("./shader/extractUniforms"),s=e("./shader/generateUniformAccessObject"),o=function(e,t,i){this.gl=e,this.program=n(e,t,i),this.attributes=r(e,this.program);var o=a(e,this.program);this.uniforms=s(e,o)};o.prototype.bind=function(){this.gl.useProgram(this.program)},o.prototype.destroy=function(){},t.exports=o},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18}],9:[function(e,t,i){var n=function(e,t,i,n,r){this.gl=e,this.texture=e.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=t||-1,this.height=i||-1,this.format=n||e.RGBA,this.type=r||e.UNSIGNED_BYTE};n.prototype.upload=function(e){this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=e.videoWidth||e.width,n=e.videoHeight||e.height;n!==this.height||i!==this.width?t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,e):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,e),this.width=i,this.height=n};var r=!1;n.prototype.uploadData=function(e,t,i){this.bind();var n=this.gl;if(e instanceof Float32Array){if(!r){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");r=!0}this.type=n.FLOAT}else this.type=n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t!==this.width||i!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,t,i,0,this.format,this.type,e||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,i,this.format,this.type,e||null),this.width=t,this.height=i},n.prototype.bind=function(e){var t=this.gl;void 0!==e&&t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)},n.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)},n.prototype.minFilter=function(e){var t=this.gl;this.bind(),this.mipmap?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR:t.NEAREST)},n.prototype.magFilter=function(e){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e?t.LINEAR:t.NEAREST)},n.prototype.enableMipmap=function(){var e=this.gl;this.bind(),this.mipmap=!0,e.generateMipmap(e.TEXTURE_2D)},n.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},n.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},n.prototype.enableWrapClamp=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},n.prototype.enableWrapRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)},n.prototype.enableWrapMirrorRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)},n.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},n.fromSource=function(e,t,i){var r=new n(e);return r.premultiplyAlpha=i||!1,r.upload(t),r},n.fromData=function(e,t,i,r){var a=new n(e);return a.uploadData(t,i,r),a},t.exports=n},{}],10:[function(e,t,i){function n(e,t){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=t,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=e.getParameter(e.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=e,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var r=e("./setVertexAttribArrays");n.prototype.constructor=n,t.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var e=this.gl,t=null,i=0;i<this.attributes.length;i++){var n=this.attributes[i];t!==n.buffer&&(n.buffer.bind(),t=n.buffer),e.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||e.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return r(e,this.attributes,this.nativeState),this.indexBuffer.bind(),this},n.prototype.addAttribute=function(e,t,i,n,r,a){return this.attributes.push({buffer:e,attribute:t,location:t.location,type:i||this.gl.FLOAT,normalized:n||!1,stride:r||0,start:a||0}),this.dirty=!0,this},n.prototype.addIndex=function(e){return this.indexBuffer=e,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(e,t,i){var n=this.gl;return n.drawElements(e,t,n.UNSIGNED_SHORT,i||0),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null}},{"./setVertexAttribArrays":13}],11:[function(e,t,i){t.exports=function(e,t){var i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i}},{}],12:[function(e,t,i){var n={createContext:e("./createContext"),setVertexAttribArrays:e("./setVertexAttribArrays"),GLBuffer:e("./GLBuffer"),GLFramebuffer:e("./GLFramebuffer"),GLShader:e("./GLShader"),GLTexture:e("./GLTexture"),VertexArrayObject:e("./VertexArrayObject"),shader:e("./shader")};void 0!==t&&t.exports&&(t.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(e,t,i){t.exports=function(e,t,i){var n;if(i){var r=i.tempAttribState,a=i.attribState;for(n=0;n<r.length;n++)r[n]=!1;for(n=0;n<t.length;n++)r[t[n].attribute.location]=!0;for(n=0;n<a.length;n++)a[n]!==r[n]&&(a[n]=r[n],i.attribState[n]?e.enableVertexAttribArray(n):e.disableVertexAttribArray(n))}else for(n=0;n<t.length;n++){var s=t[n];e.enableVertexAttribArray(s.attribute.location)}}},{}],14:[function(e,t,i){var n=function(e,t,i){var n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:null};t.exports=function(e,t,i){var r=n(e,e.VERTEX_SHADER,t),a=n(e,e.FRAGMENT_SHADER,i),s=e.createProgram();return e.attachShader(s,r),e.attachShader(s,a),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||(e.getProgramInfoLog(s),e.deleteProgram(s),s=null),e.deleteShader(r),e.deleteShader(a),s}},{}],15:[function(e,t,i){var n=function(e){for(var t=new Array(e),i=0;i<t.length;i++)t[i]=!1;return t};t.exports=function(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return n(2*t);case"bvec3":return n(3*t);case"bvec4":return n(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},{}],16:[function(e,t,i){var n=e("./mapType"),r=e("./mapSize"),a=function(e,t,i,n){gl.vertexAttribPointer(this.location,this.size,e||gl.FLOAT,t||!1,i||0,n||0)};t.exports=function(e,t){for(var i={},s=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<s;o++){var u=e.getActiveAttrib(t,o),l=n(e,u.type);i[u.name]={type:l,size:r(l),location:e.getAttribLocation(t,u.name),pointer:a}}return i}},{"./mapSize":20,"./mapType":21}],17:[function(e,t,i){var n=e("./mapType"),r=e("./defaultValue");t.exports=function(e,t){for(var i={},a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s=0;s<a;s++){var o=e.getActiveUniform(t,s),u=o.name.replace(/\[.*?\]/,""),l=n(e,o.type);i[u]={type:l,size:o.size,location:e.getUniformLocation(t,u),value:r(l,o.size)}}return i}},{"./defaultValue":15,"./mapType":21}],18:[function(e,t,i){var n=function(e){var t=s.replace("%%",e);return new Function(t)},r=function(e,t){var i,n=o.replace(/%%/g,e);return(i=1===t.size?u[t.type]:l[t.type])&&(n+="\nthis.gl."+i+";"),new Function("value",n)},a=function(e,t){for(var i=t,n=0;n<e.length-1;n++){var r=i[e[n]]||{data:{}};i[e[n]]=r,i=r}return i},s=["return this.data.%%.value;"].join("\n"),o=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),u={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},l={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};t.exports=function(e,t){var i={data:{}};i.gl=e;for(var s=Object.keys(t),o=0;o<s.length;o++){var u=s[o],l=u.split("."),h=l[l.length-1],c=a(l,i),d=t[u];c.data[h]=d,c.gl=e,Object.defineProperty(c,h,{get:n(h),set:r(h,d)})}return i}},{}],19:[function(e,t,i){t.exports={compileProgram:e("./compileProgram"),defaultValue:e("./defaultValue"),extractAttributes:e("./extractAttributes"),extractUniforms:e("./extractUniforms"),generateUniformAccessObject:e("./generateUniformAccessObject"),mapSize:e("./mapSize"),mapType:e("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21}],20:[function(e,t,i){var n={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=function(e){return n[e]}},{}],21:[function(e,t,i){var n=null,r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=function(e,t){if(!n){var i=Object.keys(r);n={};for(var a=0;a<i.length;++a){var s=i[a];n[e[s]]=r[s]}}return n[t]}},{}],22:[function(e,t,i){(function(e){function t(e,t){for(var i=0,n=e.length-1;n>=0;n--){var r=e[n];"."===r?e.splice(n,1):".."===r?(e.splice(n,1),i++):i&&(e.splice(n,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var i=[],n=0;n<e.length;n++)t(e[n],n,e)&&i.push(e[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(e){return r.exec(e).slice(1)};i.resolve=function(){for(var i="",r=!1,a=arguments.length-1;a>=-1&&!r;a--){var s=a>=0?arguments[a]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(i=s+"/"+i,r="/"===s.charAt(0))}return i=t(n(i.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+i||"."},i.normalize=function(e){var r=i.isAbsolute(e),a="/"===s(e,-1);return(e=t(n(e.split("/"),function(e){return!!e}),!r).join("/"))||r||(e="."),e&&a&&(e+="/"),(r?"/":"")+e},i.isAbsolute=function(e){return"/"===e.charAt(0)},i.join=function(){var e=Array.prototype.slice.call(arguments,0);return i.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},i.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var i=e.length-1;i>=0&&""===e[i];i--);return t>i?[]:e.slice(t,i-t+1)}e=i.resolve(e).substr(1),t=i.resolve(t).substr(1);for(var r=n(e.split("/")),a=n(t.split("/")),s=Math.min(r.length,a.length),o=s,u=0;u<s;u++)if(r[u]!==a[u]){o=u;break}for(var l=[],u=o;u<r.length;u++)l.push("..");return(l=l.concat(a.slice(o))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(e){var t=a(e),i=t[0],n=t[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},i.basename=function(e,t){var i=a(e)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},i.extname=function(e){return a(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return t<0&&(t=e.length+t),e.substr(t,i)}}).call(this,e("_process"))},{_process:23}],23:[function(e,t,i){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function s(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function o(){m&&f&&(m=!1,f.length?g=f.concat(g):v=-1,g.length&&u())}function u(){if(!m){var e=a(o);m=!0;for(var t=g.length;t;){for(f=g,g=[];++v<t;)f&&f[v].run();v=-1,t=g.length}f=null,m=!1,s(e)}}function l(e,t){this.fun=e,this.array=t}function h(){}var c,d,p=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var f,g=[],m=!1,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];g.push(new l(e,t)),1!==g.length||m||a(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=h,p.addListener=h,p.once=h,p.off=h,p.removeListener=h,p.removeAllListeners=h,p.emit=h,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],24:[function(t,i,n){(function(t){!function(r){function a(e){throw new RangeError(O[e])}function s(e,t){for(var i=e.length,n=[];i--;)n[i]=t(e[i]);return n}function o(e,t){var i=e.split("@"),n="";return i.length>1&&(n=i[0]+"@",e=i[1]),n+s((e=e.replace(A,".")).split("."),t).join(".")}function u(e){for(var t,i,n=[],r=0,a=e.length;r<a;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<a?56320==(64512&(i=e.charCodeAt(r++)))?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),r--):n.push(t);return n}function l(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=D(e>>>10&1023|55296),e=56320|1023&e),t+=D(e)}).join("")}function h(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:w}function c(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,i){var n=0;for(e=i?B(e/I):e>>1,e+=B(e/t);e>R*T>>1;n+=w)e=B(e/R);return B(n+(R+1)*e/(e+S))}function p(e){var t,i,n,r,s,o,u,c,p,f,g=[],m=e.length,v=0,y=C,b=P;for((i=e.lastIndexOf(M))<0&&(i=0),n=0;n<i;++n)e.charCodeAt(n)>=128&&a("not-basic"),g.push(e.charCodeAt(n));for(r=i>0?i+1:0;r<m;){for(s=v,o=1,u=w;r>=m&&a("invalid-input"),((c=h(e.charCodeAt(r++)))>=w||c>B((_-v)/o))&&a("overflow"),v+=c*o,p=u<=b?x:u>=b+T?T:u-b,!(c<p);u+=w)f=w-p,o>B(_/f)&&a("overflow"),o*=f;b=d(v-s,t=g.length+1,0==s),B(v/t)>_-y&&a("overflow"),y+=B(v/t),v%=t,g.splice(v++,0,y)}return l(g)}function f(e){var t,i,n,r,s,o,l,h,p,f,g,m,v,y,b,S=[];for(m=(e=u(e)).length,t=C,i=0,s=P,o=0;o<m;++o)(g=e[o])<128&&S.push(D(g));for(n=r=S.length,r&&S.push(M);n<m;){for(l=_,o=0;o<m;++o)(g=e[o])>=t&&g<l&&(l=g);for(l-t>B((_-i)/(v=n+1))&&a("overflow"),i+=(l-t)*v,t=l,o=0;o<m;++o)if((g=e[o])<t&&++i>_&&a("overflow"),g==t){for(h=i,p=w;f=p<=s?x:p>=s+T?T:p-s,!(h<f);p+=w)b=h-f,y=w-f,S.push(D(c(f+b%y,0))),h=B(b/y);S.push(D(c(h,0))),s=d(i,v,n==r),i=0,++n}++i,++t}return S.join("")}var g="object"==typeof n&&n&&!n.nodeType&&n,m="object"==typeof i&&i&&!i.nodeType&&i,v="object"==typeof t&&t;v.global!==v&&v.window!==v&&v.self!==v||(r=v);var y,b,_=2147483647,w=36,x=1,T=26,S=38,I=700,P=72,C=128,M="-",E=/^xn--/,k=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=w-x,B=Math.floor,D=String.fromCharCode;if(y={version:"1.4.1",ucs2:{decode:u,encode:l},decode:p,encode:f,toASCII:function(e){return o(e,function(e){return k.test(e)?"xn--"+f(e):e})},toUnicode:function(e){return o(e,function(e){return E.test(e)?p(e.slice(4).toLowerCase()):e})}},1)if(g&&m)if(i.exports==g)m.exports=y;else for(b in y)y.hasOwnProperty(b)&&(g[b]=y[b]);else r.punycode=y;else e("punycode",function(){return y})}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(e,t,i){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,i,a){t=t||"&",i=i||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var h=0;h<l;++h){var c,d,p,f,g=e[h].replace(o,"%20"),m=g.indexOf(i);m>=0?(c=g.substr(0,m),d=g.substr(m+1)):(c=g,d=""),p=decodeURIComponent(c),f=decodeURIComponent(d),n(s,p)?r(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],26:[function(e,t,i){"use strict";function n(e,t){if(e.map)return e.map(t);for(var i=[],n=0;n<e.length;n++)i.push(t(e[n],n));return i}var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,i,o){return t=t||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?n(s(e),function(s){var o=encodeURIComponent(r(s))+i;return a(e[s])?n(e[s],function(e){return o+encodeURIComponent(r(e))}).join(t):o+encodeURIComponent(r(e[s]))}).join(t):o?encodeURIComponent(r(o))+i+encodeURIComponent(r(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t}},{}],27:[function(e,t,i){"use strict";i.decode=i.parse=e("./decode"),i.encode=i.stringify=e("./encode")},{"./decode":25,"./encode":26}],28:[function(e,t,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(e,t,i){if(e&&s.isObject(e)&&e instanceof n)return e;var r=new n;return r.parse(e,t,i),r}var a=e("punycode"),s=e("./util");i.parse=r,i.resolve=function(e,t){return r(e,!1,!0).resolve(t)},i.resolveObject=function(e,t){return e?r(e,!1,!0).resolveObject(t):t},i.format=function(e){return s.isString(e)&&(e=r(e)),e instanceof n?e.format():n.prototype.format.call(e)},i.Url=n;var o=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(h),d=["%","/","?",";","#"].concat(c),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=e("querystring");n.prototype.parse=function(e,t,i){if(!s.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),r=-1!==n&&n<e.indexOf("#")?"?":"#",u=e.split(r);u[0]=u[0].replace(/\\/g,"/");var h=e=u.join(r);if(h=h.trim(),!i&&1===e.split("#").length){var _=l.exec(h);if(_)return this.path=h,this.href=h,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=o.exec(h);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,h=h.substr(w.length)}if(i||w||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===h.substr(0,2);!T||w&&v[w]||(h=h.substr(2),this.slashes=!0)}if(!v[w]&&(T||w&&!y[w])){for(var S=-1,I=0;I<p.length;I++)-1!==(M=h.indexOf(p[I]))&&(-1===S||M<S)&&(S=M);var P,C;-1!==(C=-1===S?h.lastIndexOf("@"):h.lastIndexOf("@",S))&&(P=h.slice(0,C),h=h.slice(C+1),this.auth=decodeURIComponent(P)),S=-1;for(I=0;I<d.length;I++){var M=h.indexOf(d[I]);-1!==M&&(-1===S||M<S)&&(S=M)}-1===S&&(S=h.length),this.host=h.slice(0,S),h=h.slice(S),this.parseHost(),this.hostname=this.hostname||"";var E="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!E)for(var k=this.hostname.split(/\./),I=0,A=k.length;I<A;I++){var O=k[I];if(O&&!O.match(f)){for(var R="",B=0,D=O.length;B<D;B++)R+=O.charCodeAt(B)>127?"x":O[B];if(!R.match(f)){var X=k.slice(0,I),F=k.slice(I+1),L=O.match(g);L&&(X.push(L[1]),F.unshift(L[2])),F.length&&(h="/"+F.join(".")+h),this.hostname=X.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=a.toASCII(this.hostname));var N=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+N,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!m[x])for(var I=0,A=c.length;I<A;I++){var G=c[I];if(-1!==h.indexOf(G)){var j=encodeURIComponent(G);j===G&&(j=escape(G)),h=h.split(G).join(j)}}var V=h.indexOf("#");-1!==V&&(this.hash=h.substr(V),h=h.slice(0,V));var W=h.indexOf("?");if(-1!==W?(this.search=h.substr(W),this.query=h.substr(W+1),t&&(this.query=b.parse(this.query)),h=h.slice(0,W)):t&&(this.search="",this.query={}),h&&(this.pathname=h),y[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var N=this.pathname||"",H=this.search||"";this.path=N+H}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,a="";this.host?r=e+this.host:this.hostname&&(r=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(a=b.stringify(this.query));var o=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),i=i.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace("#","%23"),t+r+i+o+n},n.prototype.resolve=function(e){return this.resolveObject(r(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(s.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var i=new n,r=Object.keys(this),a=0;a<r.length;a++){var o=r[a];i[o]=this[o]}if(i.hash=e.hash,""===e.href)return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),l=0;l<u.length;l++){var h=u[l];"protocol"!==h&&(i[h]=e[h])}return y[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!y[e.protocol]){for(var c=Object.keys(e),d=0;d<c.length;d++){var p=c[d];i[p]=e[p]}return i.href=i.format(),i}if(i.protocol=e.protocol,e.host||v[e.protocol])i.pathname=e.pathname;else{for(T=(e.pathname||"").split("/");T.length&&!(e.host=T.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==T[0]&&T.unshift(""),T.length<2&&T.unshift(""),i.pathname=T.join("/")}if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var f=i.pathname||"",g=i.search||"";i.path=f+g}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var m=i.pathname&&"/"===i.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=b||m||i.host&&e.pathname,w=_,x=i.pathname&&i.pathname.split("/")||[],T=e.pathname&&e.pathname.split("/")||[],S=i.protocol&&!y[i.protocol];if(S&&(i.hostname="",i.port=null,i.host&&(""===x[0]?x[0]=i.host:x.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===T[0]?T[0]=e.host:T.unshift(e.host)),e.host=null),_=_&&(""===T[0]||""===x[0])),b)i.host=e.host||""===e.host?e.host:i.host,i.hostname=e.hostname||""===e.hostname?e.hostname:i.hostname,i.search=e.search,i.query=e.query,x=T;else if(T.length)x||(x=[]),x.pop(),x=x.concat(T),i.search=e.search,i.query=e.query;else if(!s.isNullOrUndefined(e.search))return S&&(i.hostname=i.host=x.shift(),(k=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=k.shift(),i.host=i.hostname=k.shift())),i.search=e.search,i.query=e.query,s.isNull(i.pathname)&&s.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!x.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var I=x.slice(-1)[0],P=(i.host||e.host||x.length>1)&&("."===I||".."===I)||""===I,C=0,M=x.length;M>=0;M--)"."===(I=x[M])?x.splice(M,1):".."===I?(x.splice(M,1),C++):C&&(x.splice(M,1),C--);if(!_&&!w)for(;C--;C)x.unshift("..");!_||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),P&&"/"!==x.join("/").substr(-1)&&x.push("");var E=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(S){i.hostname=i.host=E?"":x.length?x.shift():"";var k=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");k&&(i.auth=k.shift(),i.host=i.hostname=k.shift())}return(_=_||i.host&&x.length)&&!E&&x.unshift(""),x.length?i.pathname=x.join("/"):(i.pathname=null,i.path=null),s.isNull(i.pathname)&&s.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":29,punycode:24,querystring:27}],29:[function(e,t,i){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],30:[function(e,t,i){"use strict";t.exports=function(e,t,i){var n,r=e.length;if(!(t>=r||0===i)){var a=r-(i=t+i>r?r-t:i);for(n=t;n<a;++n)e[n]=e[n+i];e.length=a}}},{}],31:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(e("mini-signals")),o=n(e("parse-uri")),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./async")),l=n(e("./Resource")),h=/(#[\w-]+)?$/,c=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;r(this,e),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,i){return t._loadResource(e,i)},this._queue=u.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new s.default,this.onError=new s.default,this.onLoad=new s.default,this.onStart=new s.default,this.onComplete=new s.default}return e.prototype.add=function(e,t,i,n){if(Array.isArray(e)){for(var r=0;r<e.length;++r)this.add(e[r]);return this}if("object"===(void 0===e?"undefined":a(e))&&(n=t||e.callback||e.onComplete,i=e,t=e.url,e=e.name||e.key||e.url),"string"!=typeof t&&(n=i,i=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new l.default(e,t,i),"function"==typeof n&&this.resources[e].onAfterMiddleware.once(n),this.loading){for(var s=i.parentResource,o=[],u=0;u<s.children.length;++u)s.children[u].isComplete||o.push(s.children[u]);var h=s.progressChunk*(o.length+1)/(o.length+2);s.children.push(this.resources[e]),s.progressChunk=h;for(var c=0;c<o.length;++c)o[c].progressChunk=h;this.resources[e].progressChunk=h}return this._queue.push(this.resources[e]),this},e.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},e.prototype.use=function(e){return this._afterMiddleware.push(e),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},e.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;for(var t=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=t;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},e.prototype._prepareUrl=function(e){var t=(0,o.default)(e,{strictMode:!0}),i=void 0;if(i=t.protocol||!t.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var n=h.exec(i)[0];i=i.substr(0,i.length-n.length),i+=-1!==i.indexOf("?")?"&"+this.defaultQueryString:"?"+this.defaultQueryString,i+=n}return i},e.prototype._loadResource=function(e,t){var i=this;e._dequeue=t,u.eachSeries(this._beforeMiddleware,function(t,n){t.call(i,e,function(){n(e.isComplete?{}:null)})},function(){e.isComplete?i._onLoad(e):(e._onLoadBinding=e.onComplete.once(i._onLoad,i),e.load())})},e.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,e._dequeue(),this._resourcesParsing.push(e),u.eachSeries(this._afterMiddleware,function(i,n){i.call(t,e,n)},function(){e.onAfterMiddleware.dispatch(e),t.progress+=e.progressChunk,t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&(t.progress=100,t._onComplete())})},e}();i.default=c},{"./Resource":32,"./async":33,"mini-signals":37,"parse-uri":38}],32:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){}function s(e,t,i){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=i)}function o(e){return e.toString().replace("object ","")}i.__esModule=!0;var u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=n(e("parse-uri")),h=n(e("mini-signals")),c=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),d=null,p=function(){function e(t,i,n){if(r(this,e),"string"!=typeof t||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=t,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=a,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new h.default,this.onProgress=new h.default,this.onComplete=new h.default,this.onAfterMiddleware=new h.default}return e.setExtensionLoadType=function(t,i){s(e._loadTypeMap,t,i)},e.setExtensionXhrType=function(t,i){s(e._xhrTypeMap,t,i)},e.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},e.prototype.load=function(t){var i=this;if(!this.isLoading){if(this.isComplete)return void(t&&setTimeout(function(){return t(i)},1));switch(t&&this.onComplete.once(t),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:c&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},e.prototype._hasFlag=function(e){return!!(this._flags&e)},e.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},e.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},e.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(e),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=0;t<this.url.length;++t)this.data.appendChild(this._createSource(e,this.url[t]));else this.data.appendChild(this._createSource(e,this.url));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element: "+e)},e.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXdrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},e.prototype._createSource=function(e,t,i){i||(i=e+"/"+t.substr(t.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=t,n.type=i,n},e.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},e.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},e.prototype._xhrOnError=function(){var e=this.xhr;this.abort(o(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},e.prototype._xhrOnAbort=function(){this.abort(o(this.xhr)+" Request was aborted by the user.")},e.prototype._xdrOnTimeout=function(){this.abort(o(this.xhr)+" Request timed out.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,i=void 0===t.status?t.status:200;if(200===i||204===i||0===i&&t.responseText.length>0){if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=t.responseText,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t.responseText),this.type=e.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(t.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=t.responseText,this.data=r}this.type=e.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=t.response||t.responseText;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},e.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";t=t||window.location,d||(d=document.createElement("a")),d.href=e;var i=!(e=(0,l.default)(d.href,{strictMode:!0})).port&&""===t.port||e.port===t.port,n=e.protocol?e.protocol+":":"";return e.host===t.hostname&&i&&n===t.protocol?"":"anonymous"},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(){var e=this.url,t="";if(this.isDataUrl){var i=e.indexOf("/");t=e.substring(i+1,e.indexOf(";",i))}else{var n=e.indexOf("?");-1!==n&&(e=e.substring(0,n)),t=e.substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},u(e,[{key:"isDataUrl",get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}();i.default=p,p.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},p.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},p.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},p.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},p._loadTypeMap={gif:p.LOAD_TYPE.IMAGE,png:p.LOAD_TYPE.IMAGE,bmp:p.LOAD_TYPE.IMAGE,jpg:p.LOAD_TYPE.IMAGE,jpeg:p.LOAD_TYPE.IMAGE,tif:p.LOAD_TYPE.IMAGE,tiff:p.LOAD_TYPE.IMAGE,webp:p.LOAD_TYPE.IMAGE,tga:p.LOAD_TYPE.IMAGE,svg:p.LOAD_TYPE.IMAGE,"svg+xml":p.LOAD_TYPE.IMAGE,mp3:p.LOAD_TYPE.AUDIO,ogg:p.LOAD_TYPE.AUDIO,wav:p.LOAD_TYPE.AUDIO,mp4:p.LOAD_TYPE.VIDEO,webm:p.LOAD_TYPE.VIDEO},p._xhrTypeMap={xhtml:p.XHR_RESPONSE_TYPE.DOCUMENT,html:p.XHR_RESPONSE_TYPE.DOCUMENT,htm:p.XHR_RESPONSE_TYPE.DOCUMENT,xml:p.XHR_RESPONSE_TYPE.DOCUMENT,tmx:p.XHR_RESPONSE_TYPE.DOCUMENT,svg:p.XHR_RESPONSE_TYPE.DOCUMENT,tsx:p.XHR_RESPONSE_TYPE.DOCUMENT,gif:p.XHR_RESPONSE_TYPE.BLOB,png:p.XHR_RESPONSE_TYPE.BLOB,bmp:p.XHR_RESPONSE_TYPE.BLOB,jpg:p.XHR_RESPONSE_TYPE.BLOB,jpeg:p.XHR_RESPONSE_TYPE.BLOB,tif:p.XHR_RESPONSE_TYPE.BLOB,tiff:p.XHR_RESPONSE_TYPE.BLOB,webp:p.XHR_RESPONSE_TYPE.BLOB,tga:p.XHR_RESPONSE_TYPE.BLOB,json:p.XHR_RESPONSE_TYPE.JSON,text:p.XHR_RESPONSE_TYPE.TEXT,txt:p.XHR_RESPONSE_TYPE.TEXT,ttf:p.XHR_RESPONSE_TYPE.BUFFER,otf:p.XHR_RESPONSE_TYPE.BUFFER},p.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":37,"parse-uri":38}],33:[function(e,t,i){"use strict";function n(){}function r(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}i.__esModule=!0,i.eachSeries=function(e,t,i){var n=0,r=e.length;!function a(s){return s||n===r?void(i&&i(s)):void t(e[n++],a)}()},i.queue=function(e,t){function i(e,t,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(o.started=!0,null==e&&o.idle())setTimeout(function(){return o.drain()},1);else{var r={data:e,callback:"function"==typeof i?i:n};t?o._tasks.unshift(r):o._tasks.push(r),setTimeout(function(){return o.process()},1)}}function a(e){return function(){s-=1,e.callback.apply(e,arguments),null!=arguments[0]&&o.error(arguments[0],e.data),s<=o.concurrency-o.buffer&&o.unsaturated(),o.idle()&&o.drain(),o.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var s=0,o={_tasks:[],concurrency:t,saturated:n,unsaturated:n,buffer:t/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(e,t){i(e,!1,t)},kill:function(){s=0,o.drain=n,o.started=!1,o._tasks=[]},unshift:function(e,t){i(e,!0,t)},process:function(){for(;!o.paused&&s<o.concurrency&&o._tasks.length;){var t=o._tasks.shift();0===o._tasks.length&&o.empty(),(s+=1)===o.concurrency&&o.saturated(),e(t.data,r(a(t)))}},length:function(){return o._tasks.length},running:function(){return s},idle:function(){return o._tasks.length+s===0},pause:function(){!0!==o.paused&&(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1;for(var e=1;e<=o.concurrency;e++)o.process()}}};return o}},{}],34:[function(e,t,i){"use strict";i.__esModule=!0,i.encodeBinary=function(e){for(var t="",i=0;i<e.length;){for(var r=[0,0,0],a=[0,0,0,0],s=0;s<r.length;++s)i<e.length?r[s]=255&e.charCodeAt(i++):r[s]=0;switch(a[0]=r[0]>>2,a[1]=(3&r[0])<<4|r[1]>>4,a[2]=(15&r[1])<<2|r[2]>>6,a[3]=63&r[2],i-(e.length-1)){case 2:a[3]=64,a[2]=64;break;case 1:a[3]=64}for(var o=0;o<a.length;++o)t+=n.charAt(a[o])}return t};var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],35:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0;var a=r(e("./Loader")),s=r(e("./Resource")),o=n(e("./async")),u=n(e("./b64"));a.default.Resource=s.default,a.default.async=o,a.default.base64=u,t.exports=a.default,i.default=a.default},{"./Loader":31,"./Resource":32,"./async":33,"./b64":34}],36:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.blobMiddlewareFactory=function(){return function(e,t){if(e.data){if(e.xhr&&e.xhrType===a.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var i=function(){var i=o.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=i,e.type=a.default.TYPE.IMAGE,e.data.onload=function(){o.revokeObjectURL(i),e.data.onload=null,t()},{v:void 0}}();if("object"===(void 0===i?"undefined":r(i)))return i.v}}else{var n=e.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return e.data=new Image,e.data.src="data:"+n+";base64,"+s.default.encodeBinary(e.xhr.responseText),e.type=a.default.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}else t()}};var a=n(e("../../Resource")),s=n(e("../../b64")),o=window.URL||window.webkitURL},{"../../Resource":32,"../../b64":34}],37:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i,r){void 0===i&&(i=!1),n(this,e),this._fn=t,this._once=i,this._thisArg=r,this._next=this._prev=this._owner=null}return a(e,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),e}(),o=function(){function e(){n(this,e),this._head=this._tail=void 0}return a(e,[{key:"handlers",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=this._head;if(e)return!!t;for(var i=[];t;)i.push(t),t=t._next;return i}},{key:"has",value:function(e){if(!(e instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return e._owner===this}},{key:"dispatch",value:function(){var e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}},{key:"add",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return r(this,new s(e,!1,t))}},{key:"once",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return r(this,new s(e,!0,t))}},{key:"detach",value:function(e){if(!(e instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)}},{key:"detachAll",value:function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}]),e}();o.MiniSignalBinding=s,i.default=o,t.exports=i.default},{}],38:[function(e,t,i){"use strict";t.exports=function(e,t){t=t||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[t.strictMode?"strict":"loose"].exec(e),r={},a=14;a--;)r[i.key[a]]=n[a]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,function(e,t,n){t&&(r[i.q.name][t]=n)}),r}},{}],39:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../core")),s=n(e("ismobilejs")),o=n(e("./accessibleTarget"));a.utils.mixins.delayMixin(a.DisplayObject.prototype,o.default);var u=100,l=0,h=0,c=2,d=function(){function e(t){r(this,e),!s.default.tablet&&!s.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width=u+"px",i.style.height=u+"px",i.style.position="absolute",i.style.top=l+"px",i.style.left=h+"px",i.style.zIndex=c,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return e.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2,t.style.backgroundColor="#FF0000",t.title="HOOK DIV",t.addEventListener("focus",function(){e.isMobileAccessabillity=!0,e.activate(),document.body.removeChild(t)}),document.body.appendChild(t)},e.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,i=t.length-1;i>=0;i--)this.updateAccessibleObjects(t[i])}},e.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,i=e.height/this.renderer.height,n=this.div;n.style.left=e.left+"px",n.style.top=e.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var r=0;r<this.children.length;r++){var s=this.children[r];if(s.renderId!==this.renderId)s._accessibleActive=!1,a.utils.removeItems(this.children,r,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,r--,0===this.children.length&&this.deactivate();else{n=s._accessibleDiv;var o=s.hitArea,u=s.worldTransform;s.hitArea?(n.style.left=(u.tx+o.x*u.a)*t+"px",n.style.top=(u.ty+o.y*u.d)*i+"px",n.style.width=o.width*u.a*t+"px",n.style.height=o.height*u.d*i+"px"):(o=s.getBounds(),this.capHitArea(o),n.style.left=o.x*t+"px",n.style.top=o.y*i+"px",n.style.width=o.width*t+"px",n.style.height=o.height*i+"px")}}this.renderId++}},e.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},e.prototype.addChild=function(e){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=u+"px",t.style.height=u+"px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=c,t.style.borderStyle="none",t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleTitle||e.accessibleHint||(t.title="displayObject "+this.tabIndex),e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData)},e.prototype._onFocus=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},e.prototype._onFocusOut=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},e.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},e.prototype._onMouseMove=function(){this.deactivate()},e.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();i.default=d,a.WebGLRenderer.registerPlugin("accessibility",d),a.CanvasRenderer.registerPlugin("accessibility",d)},{"../core":64,"./accessibleTarget":40,ismobilejs:4}],40:[function(e,t,i){"use strict";i.__esModule=!0,i.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],41:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0;var r=e("./accessibleTarget");Object.defineProperty(i,"accessibleTarget",{enumerable:!0,get:function(){return n(r).default}});var a=e("./AccessibilityManager");Object.defineProperty(i,"AccessibilityManager",{enumerable:!0,get:function(){return n(a).default}})},{"./AccessibilityManager":39,"./accessibleTarget":40}],42:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("./autoDetectRenderer"),o=n(e("./display/Container")),u=e("./ticker"),l=n(e("./settings")),h=e("./const"),c=function(){function e(t,i,n,a,h){r(this,e),"number"==typeof t&&(t=Object.assign({width:t,height:i||l.default.RENDER_OPTIONS.height,forceCanvas:!!a,sharedTicker:!!h},n)),this._options=t=Object.assign({sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,s.autoDetectRenderer)(t),this.stage=new o.default,this._ticker=null,this.ticker=t.sharedTicker?u.shared:new u.Ticker,this.start()}return e.prototype.render=function(){this.renderer.render(this.stage)},e.prototype.stop=function(){this._ticker.stop()},e.prototype.start=function(){this._ticker.start()},e.prototype.destroy=function(e){var t=this._ticker;this.ticker=null,t.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(e),this.renderer=null,this._options=null},a(e,[{key:"ticker",set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,h.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),e}();i.default=c},{"./autoDetectRenderer":44,"./const":45,"./display/Container":47,"./settings":100,"./ticker":119}],43:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(e instanceof Array){if("precision"!==e[0].substring(0,9)){var i=e.slice(0);return i.unshift("precision "+t+" float;"),i}}else if("precision"!==e.substring(0,9))return"precision "+t+" float;\n"+e;return e}i.__esModule=!0;var o=e("pixi-gl-core"),u=function(e){return e&&e.__esModule?e:{default:e}}(e("./settings")),l=function(e){function t(i,a,o){return n(this,t),r(this,e.call(this,i,s(a,u.default.PRECISION_VERTEX),s(o,u.default.PRECISION_FRAGMENT)))}return a(t,e),t}(o.GLShader);i.default=l},{"./settings":100,"pixi-gl-core":12}],44:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0,i.autoDetectRenderer=function(e,t,i,n){var o=e&&e.forceCanvas;return void 0!==n&&(o=n),!o&&r.isWebGLSupported()?new s.default(e,t,i):new a.default(e,t,i)};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./utils")),a=n(e("./renderers/canvas/CanvasRenderer")),s=n(e("./renderers/webgl/WebGLRenderer"))},{"./renderers/canvas/CanvasRenderer":76,"./renderers/webgl/WebGLRenderer":83,"./utils":123}],45:[function(e,t,i){"use strict";i.__esModule=!0,i.VERSION="4.5.3",i.PI_2=2*Math.PI,i.RAD_TO_DEG=180/Math.PI,i.DEG_TO_RAD=Math.PI/180,i.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},i.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},i.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},i.SCALE_MODES={LINEAR:0,NEAREST:1},i.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},i.GC_MODES={AUTO:0,MANUAL:1},i.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,i.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,i.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,i.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},i.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},i.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},i.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},i.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],46:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=e("../math"),a=function(){function e(){n(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:(e=e||new r.Rectangle(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},e.prototype.addQuad=function(e){var t=this.minX,i=this.minY,n=this.maxX,r=this.maxY,a=e[0],s=e[1];t=a<t?a:t,i=s<i?s:i,n=a>n?a:n,r=s>r?s:r,a=e[2],s=e[3],t=a<t?a:t,i=s<i?s:i,n=a>n?a:n,r=s>r?s:r,a=e[4],s=e[5],t=a<t?a:t,i=s<i?s:i,n=a>n?a:n,r=s>r?s:r,a=e[6],s=e[7],t=a<t?a:t,i=s<i?s:i,n=a>n?a:n,r=s>r?s:r,this.minX=t,this.minY=i,this.maxX=n,this.maxY=r},e.prototype.addFrame=function(e,t,i,n,r){var a=e.worldTransform,s=a.a,o=a.b,u=a.c,l=a.d,h=a.tx,c=a.ty,d=this.minX,p=this.minY,f=this.maxX,g=this.maxY,m=s*t+u*i+h,v=o*t+l*i+c;d=m<d?m:d,p=v<p?v:p,f=m>f?m:f,g=v>g?v:g,v=o*n+l*i+c,d=(m=s*n+u*i+h)<d?m:d,p=v<p?v:p,f=m>f?m:f,g=v>g?v:g,v=o*t+l*r+c,d=(m=s*t+u*r+h)<d?m:d,p=v<p?v:p,f=m>f?m:f,g=v>g?v:g,v=o*n+l*r+c,d=(m=s*n+u*r+h)<d?m:d,p=v<p?v:p,f=m>f?m:f,g=v>g?v:g,this.minX=d,this.minY=p,this.maxX=f,this.maxY=g},e.prototype.addVertices=function(e,t,i,n){for(var r=e.worldTransform,a=r.a,s=r.b,o=r.c,u=r.d,l=r.tx,h=r.ty,c=this.minX,d=this.minY,p=this.maxX,f=this.maxY,g=i;g<n;g+=2){var m=t[g],v=t[g+1],y=a*m+o*v+l,b=u*v+s*m+h;c=y<c?y:c,d=b<d?b:d,p=y>p?y:p,f=b>f?b:f}this.minX=c,this.minY=d,this.maxX=p,this.maxY=f},e.prototype.addBounds=function(e){var t=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>r?e.maxY:r},e.prototype.addBoundsMask=function(e,t){var i=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,r=e.maxX<t.maxX?e.maxX:t.maxX,a=e.maxY<t.maxY?e.maxY:t.maxY;if(i<=r&&n<=a){var s=this.minX,o=this.minY,u=this.maxX,l=this.maxY;this.minX=i<s?i:s,this.minY=n<o?n:o,this.maxX=r>u?r:u,this.maxY=a>l?a:l}},e.prototype.addBoundsArea=function(e,t){var i=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,r=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(i<=r&&n<=a){var s=this.minX,o=this.minY,u=this.maxX,l=this.maxY;this.minX=i<s?i:s,this.minY=n<o?n:o,this.maxX=r>u?r:u,this.maxY=a>l?a:l}},e}();i.default=a},{"../math":69}],47:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("../utils"),u=function(e){function t(){n(this,t);var i=r(this,e.call(this));return i.children=[],i}return a(t,e),t.prototype.onChildrenChange=function(){},t.prototype.addChild=function(e){var t=arguments.length;if(t>1)for(var i=0;i<t;i++)this.addChild(arguments[i]);else e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),e.emit("added",this);return e},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),e},t.prototype.swapChildren=function(e,t){if(e!==t){var i=this.getChildIndex(e),n=this.getChildIndex(t);this.children[i]=t,this.children[n]=e,this.onChildrenChange(i<n?i:n)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(e);(0,o.removeItems)(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(e){var t=arguments.length;if(t>1)for(var i=0;i<t;i++)this.removeChild(arguments[i]);else{var n=this.children.indexOf(e);if(-1===n)return null;e.parent=null,e.transform._parentID=-1,(0,o.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this)}return e},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,(0,o.removeItems)(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),t},t.prototype.removeChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],i=e,n="number"==typeof t?t:this.children.length,r=n-i,a=void 0;if(r>0&&r<=n){a=this.children.splice(i,r);for(var s=0;s<a.length;++s)a[s].parent=null,a[s].transform&&(a[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var o=0;o<a.length;++o)a[o].emit("removed",this);return a}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var i=this.children[e];i.visible&&i.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];t.visible&&t.renderable&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds))}this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.renderWebGL=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(e);else{this._renderWebGL(e);for(var t=0,i=this.children.length;t<i;++t)this.children[t].renderWebGL(e)}},t.prototype.renderAdvancedWebGL=function(e){e.flush();var t=this._filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<t.length;n++)t[n].enabled&&this._enabledFilters.push(t[n]);this._enabledFilters.length&&e.filterManager.pushFilter(this,this._enabledFilters)}i&&e.maskManager.pushMask(this,this._mask),this._renderWebGL(e);for(var r=0,a=this.children.length;r<a;r++)this.children[r].renderWebGL(e);e.flush(),i&&e.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filterManager.popFilter()},t.prototype._renderWebGL=function(e){},t.prototype._renderCanvas=function(e){},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);for(var t=0,i=this.children.length;t<i;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},t.prototype.destroy=function(t){e.prototype.destroy.call(this);var i="boolean"==typeof t?t:t&&t.children,n=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<n.length;++r)n[r].destroy(t)},s(t,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(e("./DisplayObject")).default);i.default=u,u.prototype.containerUpdateTransform=u.prototype.updateTransform},{"../utils":123,"./DisplayObject":48}],48:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=n(e("eventemitter3")),l=e("../const"),h=n(e("../settings")),c=n(e("./TransformStatic")),d=n(e("./Transform")),p=n(e("./Bounds")),f=e("../math"),g=function(e){function t(){r(this,t);var i=a(this,e.call(this)),n=h.default.TRANSFORM_MODE===l.TRANSFORM_MODE.STATIC?c.default:d.default;return i.tempDisplayObjectParent=null,i.transform=new n,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new p.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._destroyed=!1,i}return s(t,e),t.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),t||(this._boundsRect||(this._boundsRect=new f.Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(e){var t=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,e||(this._localBoundsRect||(this._localBoundsRect=new f.Rectangle),e=this._localBoundsRect);var n=this.getBounds(!1,e);return this.parent=i,this.transform=t,n},t.prototype.toGlobal=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},t.prototype.toLocal=function(e,t,i,n){return t&&(e=t.toGlobal(e,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)},t.prototype.renderWebGL=function(e){},t.prototype.renderCanvas=function(e){},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=e,this.position.y=t,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r,this.skew.x=a,this.skew.y=s,this.pivot.x=o,this.pivot.y=u,this},t.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},o(t,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new t),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(e){this.transform.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.transform.position.y=e}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(e){this.transform.position.copy(e)}},{key:"scale",get:function(){return this.transform.scale},set:function(e){this.transform.scale.copy(e)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copy(e)}},{key:"skew",get:function(){return this.transform.skew},set:function(e){this.transform.skew.copy(e)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e}},{key:"worldVisible",get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},{key:"mask",get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0),this._mask=e,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}]),t}(u.default);i.default=g,g.prototype.displayObjectUpdateTransform=g.prototype.updateTransform},{"../const":45,"../math":69,"../settings":100,"./Bounds":46,"./Transform":49,"./TransformStatic":51,eventemitter3:3}],49:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("../math"),u=function(e){function t(){n(this,t);var i=r(this,e.call(this));return i.position=new o.Point(0,0),i.scale=new o.Point(1,1),i.skew=new o.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new o.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return a(t,e),t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},t.prototype.updateLocalTransform=function(){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d)},t.prototype.updateTransform=function(e){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);var i=e.worldTransform,n=this.worldTransform;n.a=t.a*i.a+t.b*i.c,n.b=t.a*i.b+t.b*i.d,n.c=t.c*i.a+t.d*i.c,n.d=t.c*i.b+t.d*i.d,n.tx=t.tx*i.a+t.ty*i.c+i.tx,n.ty=t.tx*i.b+t.ty*i.d+i.ty,this._worldID++},t.prototype.setFromMatrix=function(e){e.decompose(this)},s(t,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(e("./TransformBase")).default);i.default=u},{"../math":69,"./TransformBase":50}],50:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=e("../math"),a=function(){function e(){n(this,e),this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0,this._parentID=0}return e.prototype.updateLocalTransform=function(){},e.prototype.updateTransform=function(e){var t=e.worldTransform,i=this.worldTransform,n=this.localTransform;i.a=n.a*t.a+n.b*t.c,i.b=n.a*t.b+n.b*t.d,i.c=n.c*t.a+n.d*t.c,i.d=n.c*t.b+n.d*t.d,i.tx=n.tx*t.a+n.ty*t.c+t.tx,i.ty=n.tx*t.b+n.ty*t.d+t.ty,this._worldID++},e}();i.default=a,a.prototype.updateWorldTransform=a.prototype.updateTransform,a.IDENTITY=new a},{"../math":69}],51:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("../math"),u=function(e){function t(){n(this,t);var i=r(this,e.call(this));return i.position=new o.ObservablePoint(i.onChange,i,0,0),i.scale=new o.ObservablePoint(i.onChange,i,1,1),i.pivot=new o.ObservablePoint(i.onChange,i,0,0),i.skew=new o.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return a(t,e),t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var i=e.worldTransform,n=this.worldTransform;n.a=t.a*i.a+t.b*i.c,n.b=t.a*i.b+t.b*i.d,n.c=t.c*i.a+t.d*i.c,n.d=t.c*i.b+t.d*i.d,n.tx=t.tx*i.a+t.ty*i.c+i.tx,n.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},s(t,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(e("./TransformBase")).default);i.default=u},{"../math":69,"./TransformBase":50}],52:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=n(e("../display/Container")),u=n(e("../textures/RenderTexture")),l=n(e("../textures/Texture")),h=n(e("./GraphicsData")),c=n(e("../sprites/Sprite")),d=e("../math"),p=e("../utils"),f=e("../const"),g=n(e("../display/Bounds")),m=n(e("./utils/bezierCurveTo")),v=n(e("../renderers/canvas/CanvasRenderer")),y=void 0,b=new d.Matrix,_=new d.Point,w=new Float32Array(4),x=new Float32Array(4),T=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r(this,t);var n=a(this,e.call(this));return n.fillAlpha=1,n.lineWidth=0,n.nativeLines=i,n.lineColor=0,n.graphicsData=[],n.tint=16777215,n._prevTint=16777215,n.blendMode=f.BLEND_MODES.NORMAL,n.currentPath=null,n._webGL={},n.isMask=!1,n.boundsPadding=0,n._localBounds=new g.default,n.dirty=0,n.fastRectDirty=-1,n.clearDirty=0,n.boundsDirty=-1,n.cachedSpriteDirty=!1,n._spriteRect=null,n._fastRect=!1,n}return s(t,e),t.prototype.clone=function(){var e=new t;e.renderable=this.renderable,e.fillAlpha=this.fillAlpha,e.lineWidth=this.lineWidth,e.lineColor=this.lineColor,e.tint=this.tint,e.blendMode=this.blendMode,e.isMask=this.isMask,e.boundsPadding=this.boundsPadding,e.dirty=0,e.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)e.graphicsData.push(this.graphicsData[i].clone());return e.currentPath=e.graphicsData[e.graphicsData.length-1],e.updateLocalBounds(),e},t.prototype.lineStyle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=e,this.lineColor=t,this.lineAlpha=i,this.currentPath)if(this.currentPath.shape.points.length){var n=new d.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},t.prototype.moveTo=function(e,t){var i=new d.Polygon([e,t]);return i.closed=!1,this.drawShape(i),this},t.prototype.lineTo=function(e,t){return this.currentPath.shape.points.push(e,t),this.dirty++,this},t.prototype.quadraticCurveTo=function(e,t,i,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r=this.currentPath.shape.points,a=0,s=0;0===r.length&&this.moveTo(0,0);for(var o=r[r.length-2],u=r[r.length-1],l=1;l<=20;++l){var h=l/20;a=o+(e-o)*h,s=u+(t-u)*h,r.push(a+(e+(i-e)*h-a)*h,s+(t+(n-t)*h-s)*h)}return this.dirty++,this},t.prototype.bezierCurveTo=function(e,t,i,n,r,a){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,o=s[s.length-2],u=s[s.length-1];return s.length-=2,(0,m.default)(o,u,e,t,i,n,r,a,s),this.dirty++,this},t.prototype.arcTo=function(e,t,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var a=this.currentPath.shape.points,s=a[a.length-2],o=a[a.length-1]-t,u=s-e,l=n-t,h=i-e,c=Math.abs(o*h-u*l);if(c<1e-8||0===r)a[a.length-2]===e&&a[a.length-1]===t||a.push(e,t);else{var d=o*o+u*u,p=l*l+h*h,f=o*l+u*h,g=r*Math.sqrt(d)/c,m=r*Math.sqrt(p)/c,v=g*f/d,y=m*f/p,b=g*h+m*u,_=g*l+m*o,w=u*(m+v),x=o*(m+v),T=h*(g+y),S=l*(g+y),I=Math.atan2(x-_,w-b),P=Math.atan2(S-_,T-b);this.arc(b+e,_+t,r,I,P,u*l>h*o)}return this.dirty++,this},t.prototype.arc=function(e,t,i,n,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n===r)return this;!a&&r<=n?r+=2*Math.PI:a&&n<=r&&(n+=2*Math.PI);var s=r-n,o=40*Math.ceil(Math.abs(s)/(2*Math.PI));if(0===s)return this;var u=e+Math.cos(n)*i,l=t+Math.sin(n)*i,h=this.currentPath?this.currentPath.shape.points:null;h?h[h.length-2]===u&&h[h.length-1]===l||h.push(u,l):(this.moveTo(u,l),h=this.currentPath.shape.points);for(var c=s/(2*o),d=2*c,p=Math.cos(c),f=Math.sin(c),g=o-1,m=g%1/g,v=0;v<=g;++v){var y=c+n+d*(v+m*v),b=Math.cos(y),_=-Math.sin(y);h.push((p*b+f*_)*i+e,(p*-_+f*b)*i+t)}return this.dirty++,this},t.prototype.beginFill=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=e,this.fillAlpha=t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},t.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},t.prototype.drawRect=function(e,t,i,n){return this.drawShape(new d.Rectangle(e,t,i,n)),this},t.prototype.drawRoundedRect=function(e,t,i,n,r){return this.drawShape(new d.RoundedRectangle(e,t,i,n,r)),this},t.prototype.drawCircle=function(e,t,i){return this.drawShape(new d.Circle(e,t,i)),this},t.prototype.drawEllipse=function(e,t,i,n){return this.drawShape(new d.Ellipse(e,t,i,n)),this},t.prototype.drawPolygon=function(e){var t=e,i=!0;if(t instanceof d.Polygon&&(i=t.closed,t=t.points),!Array.isArray(t)){t=new Array(arguments.length);for(var n=0;n<t.length;++n)t[n]=arguments[n]}var r=new d.Polygon(t);return r.closed=i,this.drawShape(r),this},t.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},t.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===f.SHAPES.RECT&&!this.graphicsData[0].lineWidth},t.prototype._renderWebGL=function(e){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(e):(e.setObjectRenderer(e.plugins.graphics),e.plugins.graphics.render(this))},t.prototype._renderSpriteRect=function(e){var t=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new c.default(new l.default(l.default.WHITE)));var i=this._spriteRect;if(16777215===this.tint)i.tint=this.graphicsData[0].fillColor;else{var n=w,r=x;(0,p.hex2rgb)(this.graphicsData[0].fillColor,n),(0,p.hex2rgb)(this.tint,r),n[0]*=r[0],n[1]*=r[1],n[2]*=r[2],i.tint=(0,p.rgb2hex)(n)}i.alpha=this.graphicsData[0].fillAlpha,i.worldAlpha=this.worldAlpha*i.alpha,i.blendMode=this.blendMode,i._texture._frame.width=t.width,i._texture._frame.height=t.height,i.transform.worldTransform=this.transform.worldTransform,i.anchor.set(-t.x/t.width,-t.y/t.height),i._onAnchorUpdate(),i._renderWebGL(e)},t.prototype._renderCanvas=function(e){!0!==this.isMask&&e.plugins.graphics.render(this)},t.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var e=this._localBounds;this._bounds.addFrame(this.transform,e.minX,e.minY,e.maxX,e.maxY)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,_);for(var t=this.graphicsData,i=0;i<t.length;++i){var n=t[i];if(n.fill&&n.shape&&n.shape.contains(_.x,_.y)){if(n.holes)for(var r=0;r<n.holes.length;r++)if(n.holes[r].contains(_.x,_.y))return!1;return!0}}return!1},t.prototype.updateLocalBounds=function(){var e=1/0,t=-1/0,i=1/0,n=-1/0;if(this.graphicsData.length)for(var r=0,a=0,s=0,o=0,u=0,l=0;l<this.graphicsData.length;l++){var h=this.graphicsData[l],c=h.type,d=h.lineWidth;if(r=h.shape,c===f.SHAPES.RECT||c===f.SHAPES.RREC)a=r.x-d/2,s=r.y-d/2,o=r.width+d,u=r.height+d,e=a<e?a:e,t=a+o>t?a+o:t,i=s<i?s:i,n=s+u>n?s+u:n;else if(c===f.SHAPES.CIRC)a=r.x,s=r.y,o=r.radius+d/2,u=r.radius+d/2,e=a-o<e?a-o:e,t=a+o>t?a+o:t,i=s-u<i?s-u:i,n=s+u>n?s+u:n;else if(c===f.SHAPES.ELIP)a=r.x,s=r.y,o=r.width+d/2,u=r.height+d/2,e=a-o<e?a-o:e,t=a+o>t?a+o:t,i=s-u<i?s-u:i,n=s+u>n?s+u:n;else for(var p=r.points,g=0,m=0,v=0,y=0,b=0,_=0,w=0,x=0,T=0;T+2<p.length;T+=2)a=p[T],s=p[T+1],g=p[T+2],m=p[T+3],v=Math.abs(g-a),y=Math.abs(m-s),u=d,(o=Math.sqrt(v*v+y*y))<1e-9||(b=(u/o*y+v)/2,_=(u/o*v+y)/2,w=(g+a)/2,x=(m+s)/2,e=w-b<e?w-b:e,t=w+b>t?w+b:t,i=x-_<i?x-_:i,n=x+_>n?x+_:n)}else e=0,t=0,i=0,n=0;var S=this.boundsPadding;this._localBounds.minX=e-S,this._localBounds.maxX=t+S,this._localBounds.minY=i-S,this._localBounds.maxY=n+S},t.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var t=new h.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,e);return this.graphicsData.push(t),t.type===f.SHAPES.POLY&&(t.shape.closed=t.shape.closed||this.filling,this.currentPath=t),this.dirty++,t},t.prototype.generateCanvasTexture=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getLocalBounds(),n=u.default.create(i.width,i.height,e,t);y||(y=new v.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(b),b.invert(),b.tx-=i.x,b.ty-=i.y,y.render(this,n,!0,b);var r=l.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,e,"graphics");return r.baseTexture.resolution=t,r.baseTexture.update(),r},t.prototype.closePath=function(){var e=this.currentPath;return e&&e.shape&&e.shape.close(),this},t.prototype.addHole=function(){var e=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(e.shape),this.currentPath=null,this},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var n in this._webgl)for(var r=0;r<this._webgl[n].data.length;++r)this._webgl[n].data[r].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},t}(o.default);i.default=T,T._SPRITE_TEXTURE=null},{"../const":45,"../display/Bounds":46,"../display/Container":47,"../math":69,"../renderers/canvas/CanvasRenderer":76,"../sprites/Sprite":101,"../textures/RenderTexture":112,"../textures/Texture":114,"../utils":123,"./GraphicsData":53,"./utils/bezierCurveTo":55}],53:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(t,i,r,a,s,o,u,l){n(this,e),this.lineWidth=t,this.nativeLines=u,this.lineColor=i,this.lineAlpha=r,this._lineTint=i,this.fillColor=a,this.fillAlpha=s,this._fillTint=a,this.fill=o,this.holes=[],this.shape=l,this.type=l.type}return e.prototype.clone=function(){return new e(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},e.prototype.addHole=function(e){this.holes.push(e)},e.prototype.destroy=function(){this.shape=null,this.holes=null},e}();i.default=r},{}],54:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("../../renderers/canvas/CanvasRenderer")),a=e("../../const"),s=function(){function e(t){n(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,i=t.context,n=e.worldAlpha,r=e.transform.worldTransform,s=t.resolution;this._prevTint!==this.tint&&(this.dirty=!0),i.setTransform(r.a*s,r.b*s,r.c*s,r.d*s,r.tx*s,r.ty*s),e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1),t.setBlendMode(e.blendMode);for(var o=0;o<e.graphicsData.length;o++){var u=e.graphicsData[o],l=u.shape,h=u._fillTint,c=u._lineTint;if(i.lineWidth=u.lineWidth,u.type===a.SHAPES.POLY){i.beginPath(),this.renderPolygon(l.points,l.closed,i);for(var d=0;d<u.holes.length;d++)this.renderPolygon(u.holes[d].points,!0,i);u.fill&&(i.globalAlpha=u.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),u.lineWidth&&(i.globalAlpha=u.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(u.type===a.SHAPES.RECT)(u.fillColor||0===u.fillColor)&&(i.globalAlpha=u.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fillRect(l.x,l.y,l.width,l.height)),u.lineWidth&&(i.globalAlpha=u.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.strokeRect(l.x,l.y,l.width,l.height));else if(u.type===a.SHAPES.CIRC)i.beginPath(),i.arc(l.x,l.y,l.radius,0,2*Math.PI),i.closePath(),u.fill&&(i.globalAlpha=u.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),u.lineWidth&&(i.globalAlpha=u.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke());else if(u.type===a.SHAPES.ELIP){var p=2*l.width,f=2*l.height,g=l.x-p/2,m=l.y-f/2;i.beginPath();var v=.5522848,y=p/2*v,b=f/2*v,_=g+p,w=m+f,x=g+p/2,T=m+f/2;i.moveTo(g,T),i.bezierCurveTo(g,T-b,x-y,m,x,m),i.bezierCurveTo(x+y,m,_,T-b,_,T),i.bezierCurveTo(_,T+b,x+y,w,x,w),i.bezierCurveTo(x-y,w,g,T+b,g,T),i.closePath(),u.fill&&(i.globalAlpha=u.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),u.lineWidth&&(i.globalAlpha=u.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(u.type===a.SHAPES.RREC){var S=l.x,I=l.y,P=l.width,C=l.height,M=l.radius,E=Math.min(P,C)/2|0;M=M>E?E:M,i.beginPath(),i.moveTo(S,I+M),i.lineTo(S,I+C-M),i.quadraticCurveTo(S,I+C,S+M,I+C),i.lineTo(S+P-M,I+C),i.quadraticCurveTo(S+P,I+C,S+P,I+C-M),i.lineTo(S+P,I+M),i.quadraticCurveTo(S+P,I,S+P-M,I),i.lineTo(S+M,I),i.quadraticCurveTo(S,I,S,I+M),i.closePath(),(u.fillColor||0===u.fillColor)&&(i.globalAlpha=u.fillAlpha*n,i.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.fill()),u.lineWidth&&(i.globalAlpha=u.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}}},e.prototype.updateGraphicsTint=function(e){e._prevTint=e.tint;for(var t=(e.tint>>16&255)/255,i=(e.tint>>8&255)/255,n=(255&e.tint)/255,r=0;r<e.graphicsData.length;++r){var a=e.graphicsData[r],s=0|a.fillColor,o=0|a.lineColor;a._fillTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*i*255<<8)+(255&s)/255*n*255,a._lineTint=((o>>16&255)/255*t*255<<16)+((o>>8&255)/255*i*255<<8)+(255&o)/255*n*255}},e.prototype.renderPolygon=function(e,t,i){i.moveTo(e[0],e[1]);for(var n=1;n<e.length/2;++n)i.lineTo(e[2*n],e[2*n+1]);t&&i.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();i.default=s,r.default.registerPlugin("graphics",s)},{"../../const":45,"../../renderers/canvas/CanvasRenderer":76}],55:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e,t,i,n,r,a,s,o){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],l=0,h=0,c=0,d=0,p=0;u.push(e,t);for(var f=1,g=0;f<=20;++f)g=f/20,l=1-g,h=l*l,c=h*l,d=g*g,p=d*g,u.push(c*e+3*h*g*i+3*l*d*r+p*s,c*t+3*h*g*n+3*l*d*a+p*o);return u}},{}],56:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=e("../../utils"),u=e("../../const"),l=n(e("../../renderers/webgl/utils/ObjectRenderer")),h=n(e("../../renderers/webgl/WebGLRenderer")),c=n(e("./WebGLGraphicsData")),d=n(e("./shaders/PrimitiveShader")),p=n(e("./utils/buildPoly")),f=n(e("./utils/buildRectangle")),g=n(e("./utils/buildRoundedRectangle")),m=n(e("./utils/buildCircle")),v=function(e){function t(i){r(this,t);var n=a(this,e.call(this,i));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=i.gl,n.CONTEXT_UID=0,n}return s(t,e),t.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new d.default(this.gl)},t.prototype.destroy=function(){l.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},t.prototype.render=function(e){var t=this.renderer,i=t.gl,n=void 0,r=e._webGL[this.CONTEXT_UID];r&&e.dirty===r.dirty||(this.updateGraphics(e),r=e._webGL[this.CONTEXT_UID]);var a=this.primitiveShader;t.bindShader(a),t.state.setBlendMode(e.blendMode);for(var s=0,u=r.data.length;s<u;s++){var l=(n=r.data[s]).shader;t.bindShader(l),l.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),l.uniforms.tint=(0,o.hex2rgb)(e.tint),l.uniforms.alpha=e.worldAlpha,t.bindVao(n.vao),n.nativeLines?i.drawArrays(i.LINES,0,n.points.length/6):n.vao.draw(i.TRIANGLE_STRIP,n.indices.length)}},t.prototype.updateGraphics=function(e){var t=this.renderer.gl,i=e._webGL[this.CONTEXT_UID];if(i||(i=e._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:t,clearDirty:-1,dirty:-1}),i.dirty=e.dirty,e.clearDirty!==i.clearDirty){i.clearDirty=e.clearDirty;for(var n=0;n<i.data.length;n++)this.graphicsDataPool.push(i.data[n]);i.data.length=0,i.lastIndex=0}for(var r=void 0,a=void 0,s=i.lastIndex;s<e.graphicsData.length;s++){var o=e.graphicsData[s];r=this.getWebGLData(i,0),o.nativeLines&&o.lineWidth&&(a=this.getWebGLData(i,0,!0),i.lastIndex++),o.type===u.SHAPES.POLY&&(0,p.default)(o,r,a),o.type===u.SHAPES.RECT?(0,f.default)(o,r,a):o.type===u.SHAPES.CIRC||o.type===u.SHAPES.ELIP?(0,m.default)(o,r,a):o.type===u.SHAPES.RREC&&(0,g.default)(o,r,a),i.lastIndex++}this.renderer.bindVao(null);for(var l=0;l<i.data.length;l++)(r=i.data[l]).dirty&&r.upload()},t.prototype.getWebGLData=function(e,t,i){var n=e.data[e.data.length-1];return(!n||n.nativeLines!==i||n.points.length>32e4)&&(n=this.graphicsDataPool.pop()||new c.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),n.nativeLines=i,n.reset(t),e.data.push(n)),n.dirty=!0,n},t}(l.default);i.default=v,h.default.registerPlugin("graphics",v)},{"../../const":45,"../../renderers/webgl/WebGLRenderer":83,"../../renderers/webgl/utils/ObjectRenderer":93,"../../utils":123,"./WebGLGraphicsData":57,"./shaders/PrimitiveShader":58,"./utils/buildCircle":59,"./utils/buildPoly":61,"./utils/buildRectangle":62,"./utils/buildRoundedRectangle":63}],57:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("pixi-gl-core")),a=function(){function e(t,i,a){n(this,e),this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=r.default.GLBuffer.createVertexBuffer(t),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new r.default.VertexArrayObject(t,a).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,t.FLOAT,!1,24,8)}return e.prototype.reset=function(){this.points.length=0,this.indices.length=0},e.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},e.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},e}();i.default=a},{"pixi-gl-core":12}],58:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(e){function t(i){return n(this,t),r(this,e.call(this,i,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return a(t,e),t}(function(e){return e&&e.__esModule?e:{default:e}}(e("../../../Shader")).default);i.default=s},{"../../../Shader":43}],59:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e,t,i){var s=e.shape,o=s.x,u=s.y,l=void 0,h=void 0;if(e.type===r.SHAPES.CIRC?(l=s.radius,h=s.radius):(l=s.width,h=s.height),0!==l&&0!==h){var c=Math.floor(30*Math.sqrt(s.radius))||Math.floor(15*Math.sqrt(s.width+s.height)),d=2*Math.PI/c;if(e.fill){var p=(0,a.hex2rgb)(e.fillColor),f=e.fillAlpha,g=p[0]*f,m=p[1]*f,v=p[2]*f,y=t.points,b=t.indices,_=y.length/6;b.push(_);for(var w=0;w<c+1;w++)y.push(o,u,g,m,v,f),y.push(o+Math.sin(d*w)*l,u+Math.cos(d*w)*h,g,m,v,f),b.push(_++,_++);b.push(_-1)}if(e.lineWidth){var x=e.points;e.points=[];for(var T=0;T<c+1;T++)e.points.push(o+Math.sin(d*T)*l,u+Math.cos(d*T)*h);(0,n.default)(e,t,i),e.points=x}}};var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./buildLine")),r=e("../../../const"),a=e("../../../utils")},{"../../../const":45,"../../../utils":123,"./buildLine":60}],60:[function(e,t,i){"use strict";function n(e,t){var i=e.points;if(0!==i.length){var n=new a.Point(i[0],i[1]),r=new a.Point(i[i.length-2],i[i.length-1]);if(n.x===r.x&&n.y===r.y){(i=i.slice()).pop(),i.pop();var o=(r=new a.Point(i[i.length-2],i[i.length-1])).x+.5*(n.x-r.x),u=r.y+.5*(n.y-r.y);i.unshift(o,u),i.push(o,u)}var l=t.points,h=t.indices,c=i.length/2,d=i.length,p=l.length/6,f=e.lineWidth/2,g=(0,s.hex2rgb)(e.lineColor),m=e.lineAlpha,v=g[0]*m,y=g[1]*m,b=g[2]*m,_=i[0],w=i[1],x=i[2],T=i[3],S=0,I=0,P=-(w-T),C=_-x,M=0,E=0,k=0,A=0,O=Math.sqrt(P*P+C*C);P/=O,C/=O,P*=f,C*=f,l.push(_-P,w-C,v,y,b,m),l.push(_+P,w+C,v,y,b,m);for(var R=1;R<c-1;++R){_=i[2*(R-1)],w=i[2*(R-1)+1],x=i[2*R],T=i[2*R+1],S=i[2*(R+1)],I=i[2*(R+1)+1],P=-(w-T),C=_-x,P/=O=Math.sqrt(P*P+C*C),C/=O,P*=f,C*=f,M=-(T-I),E=x-S,M/=O=Math.sqrt(M*M+E*E),E/=O;var B=-C+w-(-C+T),D=-P+x-(-P+_),X=(-P+_)*(-C+T)-(-P+x)*(-C+w),F=-(E*=f)+I-(-E+T),L=-(M*=f)+x-(-M+S),N=(-M+S)*(-E+T)-(-M+x)*(-E+I),U=B*L-F*D;if(Math.abs(U)<.1)U+=10.1,l.push(x-P,T-C,v,y,b,m),l.push(x+P,T+C,v,y,b,m);else{var G=(D*N-L*X)/U,j=(F*X-B*N)/U;(G-x)*(G-x)+(j-T)*(j-T)>196*f*f?(k=P-M,A=C-E,O=Math.sqrt(k*k+A*A),k/=O,A/=O,k*=f,A*=f,l.push(x-k,T-A),l.push(v,y,b,m),l.push(x+k,T+A),l.push(v,y,b,m),l.push(x-k,T-A),l.push(v,y,b,m),d++):(l.push(G,j),l.push(v,y,b,m),l.push(x-(G-x),T-(j-T)),l.push(v,y,b,m))}}_=i[2*(c-2)],w=i[2*(c-2)+1],x=i[2*(c-1)],P=-(w-(T=i[2*(c-1)+1])),C=_-x,P/=O=Math.sqrt(P*P+C*C),C/=O,P*=f,C*=f,l.push(x-P,T-C),l.push(v,y,b,m),l.push(x+P,T+C),l.push(v,y,b,m),h.push(p);for(var V=0;V<d;++V)h.push(p++);h.push(p-1)}}function r(e,t){var i=0,n=e.points;if(0!==n.length){var r=t.points,a=n.length/2,o=(0,s.hex2rgb)(e.lineColor),u=e.lineAlpha,l=o[0]*u,h=o[1]*u,c=o[2]*u;for(i=1;i<a;i++){var d=n[2*(i-1)],p=n[2*(i-1)+1],f=n[2*i],g=n[2*i+1];r.push(d,p),r.push(l,h,c,u),r.push(f,g),r.push(l,h,c,u)}}}i.__esModule=!0,i.default=function(e,t,i){e.nativeLines?r(e,i):n(e,t)};var a=e("../../../math"),s=e("../../../utils")},{"../../../math":69,"../../../utils":123}],61:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0,i.default=function(e,t,i){e.points=e.shape.points.slice();var n=e.points;if(e.fill&&n.length>=6){for(var o=[],u=e.holes,l=0;l<u.length;l++){var h=u[l];o.push(n.length/2),n=n.concat(h.points)}var c=t.points,d=t.indices,p=n.length/2,f=(0,a.hex2rgb)(e.fillColor),g=e.fillAlpha,m=f[0]*g,v=f[1]*g,y=f[2]*g,b=(0,s.default)(n,o,2);if(!b)return;for(var _=c.length/6,w=0;w<b.length;w+=3)d.push(b[w]+_),d.push(b[w]+_),d.push(b[w+1]+_),d.push(b[w+2]+_),d.push(b[w+2]+_);for(var x=0;x<p;x++)c.push(n[2*x],n[2*x+1],m,v,y,g)}e.lineWidth>0&&(0,r.default)(e,t,i)};var r=n(e("./buildLine")),a=e("../../../utils"),s=n(e("earcut"))},{"../../../utils":123,"./buildLine":60,earcut:2}],62:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e,t,i){var a=e.shape,s=a.x,o=a.y,u=a.width,l=a.height;if(e.fill){var h=(0,r.hex2rgb)(e.fillColor),c=e.fillAlpha,d=h[0]*c,p=h[1]*c,f=h[2]*c,g=t.points,m=t.indices,v=g.length/6;g.push(s,o),g.push(d,p,f,c),g.push(s+u,o),g.push(d,p,f,c),g.push(s,o+l),g.push(d,p,f,c),g.push(s+u,o+l),g.push(d,p,f,c),m.push(v,v,v+1,v+2,v+3,v+3)}if(e.lineWidth){var y=e.points;e.points=[s,o,s+u,o,s+u,o+l,s,o+l,s,o],(0,n.default)(e,t,i),e.points=y}};var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./buildLine")),r=e("../../../utils")},{"../../../utils":123,"./buildLine":60}],63:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i){return e+(t-e)*i}function a(e,t,i,n,a,s){for(var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=0,l=0,h=0,c=0,d=0,p=0,f=0,g=0;f<=20;++f)g=f/20,u=r(e,i,g),l=r(t,n,g),h=r(i,a,g),c=r(n,s,g),d=r(u,h,g),p=r(l,c,g),o.push(d,p);return o}i.__esModule=!0,i.default=function(e,t,i){var n=e.shape,r=n.x,l=n.y,h=n.width,c=n.height,d=n.radius,p=[];if(p.push(r,l+d),a(r,l+c-d,r,l+c,r+d,l+c,p),a(r+h-d,l+c,r+h,l+c,r+h,l+c-d,p),a(r+h,l+d,r+h,l,r+h-d,l,p),a(r+d,l,r,l,r,l+d+1e-10,p),e.fill){for(var f=(0,u.hex2rgb)(e.fillColor),g=e.fillAlpha,m=f[0]*g,v=f[1]*g,y=f[2]*g,b=t.points,_=t.indices,w=b.length/6,x=(0,s.default)(p,null,2),T=0,S=x.length;T<S;T+=3)_.push(x[T]+w),_.push(x[T]+w),_.push(x[T+1]+w),_.push(x[T+2]+w),_.push(x[T+2]+w);for(var I=0,P=p.length;I<P;I++)b.push(p[I],p[++I],m,v,y,g)}if(e.lineWidth){var C=e.points;e.points=p,(0,o.default)(e,t,i),e.points=C}};var s=n(e("earcut")),o=n(e("./buildLine")),u=e("../../../utils")},{"../../../utils":123,"./buildLine":60,earcut:2}],64:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0,i.autoDetectRenderer=i.Application=i.Filter=i.SpriteMaskFilter=i.Quad=i.RenderTarget=i.ObjectRenderer=i.WebGLManager=i.Shader=i.CanvasRenderTarget=i.TextureUvs=i.VideoBaseTexture=i.BaseRenderTexture=i.RenderTexture=i.BaseTexture=i.Texture=i.Spritesheet=i.CanvasGraphicsRenderer=i.GraphicsRenderer=i.GraphicsData=i.Graphics=i.TextMetrics=i.TextStyle=i.Text=i.SpriteRenderer=i.CanvasTinter=i.CanvasSpriteRenderer=i.Sprite=i.TransformBase=i.TransformStatic=i.Transform=i.Container=i.DisplayObject=i.Bounds=i.glCore=i.WebGLRenderer=i.CanvasRenderer=i.ticker=i.utils=i.settings=void 0;var a=e("./const");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(i,e,{enumerable:!0,get:function(){return a[e]}})});var s=e("./math");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(i,e,{enumerable:!0,get:function(){return s[e]}})});var o=e("pixi-gl-core");Object.defineProperty(i,"glCore",{enumerable:!0,get:function(){return r(o).default}});var u=e("./display/Bounds");Object.defineProperty(i,"Bounds",{enumerable:!0,get:function(){return r(u).default}});var l=e("./display/DisplayObject");Object.defineProperty(i,"DisplayObject",{enumerable:!0,get:function(){return r(l).default}});var h=e("./display/Container");Object.defineProperty(i,"Container",{enumerable:!0,get:function(){return r(h).default}});var c=e("./display/Transform");Object.defineProperty(i,"Transform",{enumerable:!0,get:function(){return r(c).default}});var d=e("./display/TransformStatic");Object.defineProperty(i,"TransformStatic",{enumerable:!0,get:function(){return r(d).default}});var p=e("./display/TransformBase");Object.defineProperty(i,"TransformBase",{enumerable:!0,get:function(){return r(p).default}});var f=e("./sprites/Sprite");Object.defineProperty(i,"Sprite",{enumerable:!0,get:function(){return r(f).default}});var g=e("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(i,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return r(g).default}});var m=e("./sprites/canvas/CanvasTinter");Object.defineProperty(i,"CanvasTinter",{enumerable:!0,get:function(){return r(m).default}});var v=e("./sprites/webgl/SpriteRenderer");Object.defineProperty(i,"SpriteRenderer",{enumerable:!0,get:function(){return r(v).default}});var y=e("./text/Text");Object.defineProperty(i,"Text",{enumerable:!0,get:function(){return r(y).default}});var b=e("./text/TextStyle");Object.defineProperty(i,"TextStyle",{enumerable:!0,get:function(){return r(b).default}});var _=e("./text/TextMetrics");Object.defineProperty(i,"TextMetrics",{enumerable:!0,get:function(){return r(_).default}});var w=e("./graphics/Graphics");Object.defineProperty(i,"Graphics",{enumerable:!0,get:function(){return r(w).default}});var x=e("./graphics/GraphicsData");Object.defineProperty(i,"GraphicsData",{enumerable:!0,get:function(){return r(x).default}});var T=e("./graphics/webgl/GraphicsRenderer");Object.defineProperty(i,"GraphicsRenderer",{enumerable:!0,get:function(){return r(T).default}});var S=e("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(i,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return r(S).default}});var I=e("./textures/Spritesheet");Object.defineProperty(i,"Spritesheet",{enumerable:!0,get:function(){return r(I).default}});var P=e("./textures/Texture");Object.defineProperty(i,"Texture",{enumerable:!0,get:function(){return r(P).default}});var C=e("./textures/BaseTexture");Object.defineProperty(i,"BaseTexture",{enumerable:!0,get:function(){return r(C).default}});var M=e("./textures/RenderTexture");Object.defineProperty(i,"RenderTexture",{enumerable:!0,get:function(){return r(M).default}});var E=e("./textures/BaseRenderTexture");Object.defineProperty(i,"BaseRenderTexture",{enumerable:!0,get:function(){return r(E).default}});var k=e("./textures/VideoBaseTexture");Object.defineProperty(i,"VideoBaseTexture",{enumerable:!0,get:function(){return r(k).default}});var A=e("./textures/TextureUvs");Object.defineProperty(i,"TextureUvs",{enumerable:!0,get:function(){return r(A).default}});var O=e("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(i,"CanvasRenderTarget",{enumerable:!0,get:function(){return r(O).default}});var R=e("./Shader");Object.defineProperty(i,"Shader",{enumerable:!0,get:function(){return r(R).default}});var B=e("./renderers/webgl/managers/WebGLManager");Object.defineProperty(i,"WebGLManager",{enumerable:!0,get:function(){return r(B).default}});var D=e("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(i,"ObjectRenderer",{enumerable:!0,get:function(){return r(D).default}});var X=e("./renderers/webgl/utils/RenderTarget");Object.defineProperty(i,"RenderTarget",{enumerable:!0,get:function(){return r(X).default}});var F=e("./renderers/webgl/utils/Quad");Object.defineProperty(i,"Quad",{enumerable:!0,get:function(){return r(F).default}});var L=e("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(i,"SpriteMaskFilter",{enumerable:!0,get:function(){return r(L).default}});var N=e("./renderers/webgl/filters/Filter");Object.defineProperty(i,"Filter",{enumerable:!0,get:function(){return r(N).default}});var U=e("./Application");Object.defineProperty(i,"Application",{enumerable:!0,get:function(){return r(U).default}});var G=e("./autoDetectRenderer");Object.defineProperty(i,"autoDetectRenderer",{enumerable:!0,get:function(){return G.autoDetectRenderer}});var j=n(e("./utils")),V=n(e("./ticker")),W=r(e("./settings")),H=r(e("./renderers/canvas/CanvasRenderer")),q=r(e("./renderers/webgl/WebGLRenderer"));i.settings=W.default,i.utils=j,i.ticker=V,i.CanvasRenderer=H.default,i.WebGLRenderer=q.default},{"./Application":42,"./Shader":43,"./autoDetectRenderer":44,"./const":45,"./display/Bounds":46,"./display/Container":47,"./display/DisplayObject":48,"./display/Transform":49,"./display/TransformBase":50,"./display/TransformStatic":51,"./graphics/Graphics":52,"./graphics/GraphicsData":53,"./graphics/canvas/CanvasGraphicsRenderer":54,"./graphics/webgl/GraphicsRenderer":56,"./math":69,"./renderers/canvas/CanvasRenderer":76,"./renderers/canvas/utils/CanvasRenderTarget":78,"./renderers/webgl/WebGLRenderer":83,"./renderers/webgl/filters/Filter":85,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":88,"./renderers/webgl/managers/WebGLManager":92,"./renderers/webgl/utils/ObjectRenderer":93,"./renderers/webgl/utils/Quad":94,"./renderers/webgl/utils/RenderTarget":95,"./settings":100,"./sprites/Sprite":101,"./sprites/canvas/CanvasSpriteRenderer":102,"./sprites/canvas/CanvasTinter":103,"./sprites/webgl/SpriteRenderer":105,"./text/Text":107,"./text/TextMetrics":108,"./text/TextStyle":109,"./textures/BaseRenderTexture":110,"./textures/BaseTexture":111,"./textures/RenderTexture":112,"./textures/Spritesheet":113,"./textures/Texture":114,"./textures/TextureUvs":115,"./textures/VideoBaseTexture":116,"./ticker":119,"./utils":123,"pixi-gl-core":12}],65:[function(e,t,i){"use strict";function n(e){return e<0?-1:e>0?1:0}i.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("./Matrix")),a=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],s=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],o=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],h=[];!function(){for(var e=0;e<16;e++){var t=[];h.push(t);for(var i=0;i<16;i++)for(var c=n(a[e]*a[i]+o[e]*s[i]),d=n(s[e]*a[i]+u[e]*s[i]),p=n(a[e]*o[i]+o[e]*u[i]),f=n(s[e]*o[i]+u[e]*u[i]),g=0;g<16;g++)if(a[g]===c&&s[g]===d&&o[g]===p&&u[g]===f){t.push(g);break}}for(var m=0;m<16;m++){var v=new r.default;v.set(a[m],s[m],o[m],u[m],0,0),l.push(v)}}();var c={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(e){return a[e]},uY:function(e){return s[e]},vX:function(e){return o[e]},vY:function(e){return u[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return h[e][t]},sub:function(e,t){return h[e][c.inv(t)]},rotate180:function(e){return 4^e},isSwapWidthHeight:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?c.S:c.N:2*Math.abs(t)<=Math.abs(e)?e>0?c.E:c.W:t>0?e>0?c.SE:c.SW:e>0?c.NE:c.NW},matrixAppendRotationInv:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=l[c.inv(t)];r.tx=i,r.ty=n,e.append(r)}};i.default=c},{"./Matrix":66}],66:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(e("./Point")),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n(this,e),this.a=t,this.b=i,this.c=r,this.d=a,this.tx=s,this.ty=o,this.array=null}return e.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},e.prototype.set=function(e,t,i,n,r,a){return this.a=e,this.b=t,this.c=i,this.d=n,this.tx=r,this.ty=a,this},e.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},e.prototype.apply=function(e,t){t=t||new a.default;var i=e.x,n=e.y;return t.x=this.a*i+this.c*n+this.tx,t.y=this.b*i+this.d*n+this.ty,t},e.prototype.applyInverse=function(e,t){t=t||new a.default;var i=1/(this.a*this.d+this.c*-this.b),n=e.x,r=e.y;return t.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,t},e.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},e.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},e.prototype.rotate=function(e){var t=Math.cos(e),i=Math.sin(e),n=this.a,r=this.c,a=this.tx;return this.a=n*t-this.b*i,this.b=n*i+this.b*t,this.c=r*t-this.d*i,this.d=r*i+this.d*t,this.tx=a*t-this.ty*i,this.ty=a*i+this.ty*t,this},e.prototype.append=function(e){var t=this.a,i=this.b,n=this.c,r=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*i+e.b*r,this.c=e.c*t+e.d*n,this.d=e.c*i+e.d*r,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*i+e.ty*r+this.ty,this},e.prototype.setTransform=function(e,t,i,n,r,a,s,o,u){var l=Math.sin(s),h=Math.cos(s),c=Math.cos(u),d=Math.sin(u),p=-Math.sin(o),f=Math.cos(o),g=h*r,m=l*r,v=-l*a,y=h*a;return this.a=c*g+d*v,this.b=c*m+d*y,this.c=p*g+f*v,this.d=p*m+f*y,this.tx=e+(i*g+n*v),this.ty=t+(i*m+n*y),this},e.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var i=this.a,n=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},e.prototype.decompose=function(e){var t=this.a,i=this.b,n=this.c,r=this.d,a=-Math.atan2(-n,r),s=Math.atan2(i,t);return Math.abs(a+s)<1e-5?(e.rotation=s,t<0&&r>=0&&(e.rotation+=e.rotation<=0?Math.PI:-Math.PI),e.skew.x=e.skew.y=0):(e.skew.x=a,e.skew.y=s),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(n*n+r*r),e.position.x=this.tx,e.position.y=this.ty,e},e.prototype.invert=function(){var e=this.a,t=this.b,i=this.c,n=this.d,r=this.tx,a=e*n-t*i;return this.a=n/a,this.b=-t/a,this.c=-i/a,this.d=e/a,this.tx=(i*this.ty-n*r)/a,this.ty=-(e*this.ty-t*r)/a,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copy=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},r(e,null,[{key:"IDENTITY",get:function(){return new e}},{key:"TEMP_MATRIX",get:function(){return new e}}]),e}();i.default=s},{"./Point":68}],67:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,e),this._x=r,this._y=a,this.cb=t,this.scope=i}return e.prototype.set=function(e,t){var i=e||0,n=t||(0!==t?i:0);this._x===i&&this._y===n||(this._x=i,this._y=n,this.cb.call(this.scope))},e.prototype.copy=function(e){this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope))},r(e,[{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}]),e}();i.default=a},{}],68:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.x=t,this.y=i}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copy=function(e){this.set(e.x,e.y)},e.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},e.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)},e}();i.default=r},{}],69:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0;var r=e("./Point");Object.defineProperty(i,"Point",{enumerable:!0,get:function(){return n(r).default}});var a=e("./ObservablePoint");Object.defineProperty(i,"ObservablePoint",{enumerable:!0,get:function(){return n(a).default}});var s=e("./Matrix");Object.defineProperty(i,"Matrix",{enumerable:!0,get:function(){return n(s).default}});var o=e("./GroupD8");Object.defineProperty(i,"GroupD8",{enumerable:!0,get:function(){return n(o).default}});var u=e("./shapes/Circle");Object.defineProperty(i,"Circle",{enumerable:!0,get:function(){return n(u).default}});var l=e("./shapes/Ellipse");Object.defineProperty(i,"Ellipse",{enumerable:!0,get:function(){return n(l).default}});var h=e("./shapes/Polygon");Object.defineProperty(i,"Polygon",{enumerable:!0,get:function(){return n(h).default}});var c=e("./shapes/Rectangle");Object.defineProperty(i,"Rectangle",{enumerable:!0,get:function(){return n(c).default}});var d=e("./shapes/RoundedRectangle");Object.defineProperty(i,"RoundedRectangle",{enumerable:!0,get:function(){return n(d).default}})},{"./GroupD8":65,"./Matrix":66,"./ObservablePoint":67,"./Point":68,"./shapes/Circle":70,"./shapes/Ellipse":71,"./shapes/Polygon":72,"./shapes/Rectangle":73,"./shapes/RoundedRectangle":74}],70:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("./Rectangle")),a=e("../../const"),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n(this,e),this.x=t,this.y=i,this.radius=r,this.type=a.SHAPES.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(e,t){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-e,r=this.y-t;return n*=n,r*=r,n+r<=i},e.prototype.getBounds=function(){return new r.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e}();i.default=s},{"../../const":45,"./Rectangle":73}],71:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("./Rectangle")),a=e("../../const"),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,e),this.x=t,this.y=i,this.width=r,this.height=s,this.type=a.SHAPES.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var i=(e-this.x)/this.width,n=(t-this.y)/this.height;return i*=i,n*=n,i+n<=1},e.prototype.getBounds=function(){return new r.default(this.x-this.width,this.y-this.height,this.width,this.height)},e}();i.default=s},{"../../const":45,"./Rectangle":73}],72:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("../Point")),a=e("../../const"),s=function(){function e(){for(var t=arguments.length,i=Array(t),s=0;s<t;s++)i[s]=arguments[s];if(n(this,e),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof r.default){for(var o=[],u=0,l=i.length;u<l;u++)o.push(i[u].x,i[u].y);i=o}this.closed=!0,this.points=i,this.type=a.SHAPES.POLY}return e.prototype.clone=function(){return new e(this.points.slice())},e.prototype.close=function(){var e=this.points;e[0]===e[e.length-2]&&e[1]===e[e.length-1]||e.push(e[0],e[1])},e.prototype.contains=function(e,t){for(var i=!1,n=this.points.length/2,r=0,a=n-1;r<n;a=r++){var s=this.points[2*r],o=this.points[2*r+1],u=this.points[2*a],l=this.points[2*a+1];o>t!=l>t&&e<(t-o)/(l-o)*(u-s)+s&&(i=!i)}return i},e}();i.default=s},{"../../const":45,"../Point":68}],73:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("../../const"),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,e),this.x=t,this.y=i,this.width=r,this.height=s,this.type=a.SHAPES.RECT}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},e.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},e.prototype.pad=function(e,t){e=e||0,t=t||(0!==t?e:0),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t},e.prototype.fit=function(e){this.x<e.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=e.x),this.y<e.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=e.y),this.x+this.width>e.x+e.width&&(this.width=e.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>e.y+e.height&&(this.height=e.height-this.y,this.height<0&&(this.height=0))},e.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),r=Math.max(this.y+this.height,e.y+e.height);this.x=t,this.width=i-t,this.y=n,this.height=r-n},r(e,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new e(0,0,0,0)}}]),e}();i.default=s},{"../../const":45}],74:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=e("../../const"),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;n(this,e),this.x=t,this.y=i,this.width=a,this.height=s,this.radius=o,this.type=r.SHAPES.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var i=e-(this.x+this.radius),n=t-(this.y+this.radius),r=this.radius*this.radius;if(i*i+n*n<=r)return!0;if((i=e-(this.x+this.width-this.radius))*i+n*n<=r)return!0;if(n=t-(this.y+this.height-this.radius),i*i+n*n<=r)return!0;if((i=e-(this.x+this.radius))*i+n*n<=r)return!0}return!1},e}();i.default=a},{"../../const":45}],75:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e("../utils"),l=e("../math"),h=e("../const"),c=n(e("../settings")),d=n(e("../display/Container")),p=n(e("../textures/RenderTexture")),f=n(e("eventemitter3")),g=new l.Matrix,m=function(e){function t(i,n,s,o){r(this,t);var p=a(this,e.call(this));return(0,u.sayHello)(i),"number"==typeof n&&(n=Object.assign({width:n,height:s||c.default.RENDER_OPTIONS.height},o)),n=Object.assign({},c.default.RENDER_OPTIONS,n),p.options=n,p.type=h.RENDERER_TYPE.UNKNOWN,p.screen=new l.Rectangle(0,0,n.width,n.height),p.view=n.view||document.createElement("canvas"),p.resolution=n.resolution||c.default.RESOLUTION,p.transparent=n.transparent,p.autoResize=n.autoResize||!1,p.blendModes=null,p.preserveDrawingBuffer=n.preserveDrawingBuffer,p.clearBeforeRender=n.clearBeforeRender,p.roundPixels=n.roundPixels,p._backgroundColor=0,p._backgroundColorRgba=[0,0,0,0],p._backgroundColorString="#000000",p.backgroundColor=n.backgroundColor||p._backgroundColor,p._tempDisplayObjectParent=new d.default,p._lastObjectRendered=p._tempDisplayObjectParent,p}return s(t,e),t.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=e+"px",this.view.style.height=t+"px")},t.prototype.generateTexture=function(e,t,i){var n=e.getLocalBounds(),r=p.default.create(0|n.width,0|n.height,t,i);return g.tx=-n.x,g.ty=-n.y,this.render(e,r,!1,g,!0),r},t.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=h.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},o(t,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=(0,u.hex2string)(e),(0,u.hex2rgb)(e,this._backgroundColorRgba)}}]),t}(f.default);i.default=m},{"../const":45,"../display/Container":47,"../math":69,"../settings":100,"../textures/RenderTexture":112,"../utils":123,eventemitter3:3}],76:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=n(e("../SystemRenderer")),u=n(e("./utils/CanvasMaskManager")),l=n(e("./utils/CanvasRenderTarget")),h=n(e("./utils/mapCanvasBlendModesToPixi")),c=e("../../utils"),d=e("../../const"),p=n(e("../../settings")),f=function(e){function t(i,n,s){r(this,t);var o=a(this,e.call(this,"Canvas",i,n,s));return o.type=d.RENDERER_TYPE.CANVAS,o.rootContext=o.view.getContext("2d",{alpha:o.transparent}),o.context=o.rootContext,o.refresh=!0,o.maskManager=new u.default(o),o.smoothProperty="imageSmoothingEnabled",o.rootContext.imageSmoothingEnabled||(o.rootContext.webkitImageSmoothingEnabled?o.smoothProperty="webkitImageSmoothingEnabled":o.rootContext.mozImageSmoothingEnabled?o.smoothProperty="mozImageSmoothingEnabled":o.rootContext.oImageSmoothingEnabled?o.smoothProperty="oImageSmoothingEnabled":o.rootContext.msImageSmoothingEnabled&&(o.smoothProperty="msImageSmoothingEnabled")),o.initPlugins(),o.blendModes=(0,h.default)(),o._activeBlendMode=null,o.renderingToScreen=!1,o.resize(o.options.width,o.options.height),o}return s(t,e),t.prototype.render=function(e,t,i,n,r){if(this.view){this.renderingToScreen=!t,this.emit("prerender");var a=this.resolution;t?((t=t.baseTexture||t)._canvasRenderTarget||(t._canvasRenderTarget=new l.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext;var s=this.context;if(t||(this._lastObjectRendered=e),!r){var o=e.parent,u=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(u),this._tempDisplayObjectParent.transform._worldID=-1):u.identity(),e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=o}s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,s.globalCompositeOperation=this.blendModes[d.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(s.fillStyle="black",s.clear()),(void 0!==i?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?s.clearRect(0,0,this.width,this.height):(s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height)));var h=this.context;this.context=s,e.renderCanvas(this),this.context=h,this.resolution=a,this.emit("postrender")}},t.prototype.clear=function(e){var t=this.context;e=e||this._backgroundColorString,!this.transparent&&e?(t.fillStyle=e,t.fillRect(0,0,this.width,this.height)):t.clearRect(0,0,this.width,this.height)},t.prototype.setBlendMode=function(e){this._activeBlendMode!==e&&(this._activeBlendMode=e,this.context.globalCompositeOperation=this.blendModes[e])},t.prototype.destroy=function(t){this.destroyPlugins(),e.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},t.prototype.resize=function(t,i){e.prototype.resize.call(this,t,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=p.default.SCALE_MODE===d.SCALE_MODES.LINEAR)},t}(o.default);i.default=f,c.pluginTarget.mixin(f)},{"../../const":45,"../../settings":100,"../../utils":123,"../SystemRenderer":75,"./utils/CanvasMaskManager":77,"./utils/CanvasRenderTarget":78,"./utils/mapCanvasBlendModesToPixi":80}],77:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=e("../../../const"),a=function(){function e(t){n(this,e),this.renderer=t}return e.prototype.pushMask=function(e){var t=this.renderer;t.context.save();var i=e.alpha,n=e.transform.worldTransform,r=t.resolution;t.context.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),e._texture||(this.renderGraphicsShape(e),t.context.clip()),e.worldAlpha=i},e.prototype.renderGraphicsShape=function(e){var t=this.renderer.context,i=e.graphicsData.length;if(0!==i){t.beginPath();for(var n=0;n<i;n++){var a=e.graphicsData[n],s=a.shape;if(a.type===r.SHAPES.POLY){var o=s.points;t.moveTo(o[0],o[1]);for(var u=1;u<o.length/2;u++)t.lineTo(o[2*u],o[2*u+1]);o[0]===o[o.length-2]&&o[1]===o[o.length-1]&&t.closePath()}else if(a.type===r.SHAPES.RECT)t.rect(s.x,s.y,s.width,s.height),t.closePath();else if(a.type===r.SHAPES.CIRC)t.arc(s.x,s.y,s.radius,0,2*Math.PI),t.closePath();else if(a.type===r.SHAPES.ELIP){var l=2*s.width,h=2*s.height,c=s.x-l/2,d=s.y-h/2,p=.5522848,f=l/2*p,g=h/2*p,m=c+l,v=d+h,y=c+l/2,b=d+h/2;t.moveTo(c,b),t.bezierCurveTo(c,b-g,y-f,d,y,d),t.bezierCurveTo(y+f,d,m,b-g,m,b),t.bezierCurveTo(m,b+g,y+f,v,y,v),t.bezierCurveTo(y-f,v,c,b+g,c,b),t.closePath()}else if(a.type===r.SHAPES.RREC){var _=s.x,w=s.y,x=s.width,T=s.height,S=s.radius,I=Math.min(x,T)/2|0;S=S>I?I:S,t.moveTo(_,w+S),t.lineTo(_,w+T-S),t.quadraticCurveTo(_,w+T,_+S,w+T),t.lineTo(_+x-S,w+T),t.quadraticCurveTo(_+x,w+T,_+x,w+T-S),t.lineTo(_+x,w+S),t.quadraticCurveTo(_+x,w,_+x-S,w),t.lineTo(_+S,w),t.quadraticCurveTo(_,w,_,w+S),t.closePath()}}}},e.prototype.popMask=function(e){e.context.restore()},e.prototype.destroy=function(){},e}();i.default=a},{"../../../const":45}],78:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(e("../../../settings")),s=function(){function e(t,i,r){n(this,e),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||a.default.RESOLUTION,this.resize(t,i)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},e.prototype.destroy=function(){this.context=null,this.canvas=null},r(e,[{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),e}();i.default=s},{"../../../settings":100}],79:[function(e,t,i){"use strict";function n(e){var t=document.createElement("canvas");t.width=6,t.height=1;var i=t.getContext("2d");return i.fillStyle=e,i.fillRect(0,0,6,1),t}i.__esModule=!0,i.default=function(){if("undefined"==typeof document)return!1;var e=n("#ff00ff"),t=n("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var r=i.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(e,0,0),r.drawImage(t,2,0);var a=r.getImageData(2,0,1,1);if(!a)return!1;var s=a.data;return 255===s[0]&&0===s[1]&&0===s[2]}},{}],80:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,r.default)()?(e[n.BLEND_MODES.NORMAL]="source-over",e[n.BLEND_MODES.ADD]="lighter",e[n.BLEND_MODES.MULTIPLY]="multiply",e[n.BLEND_MODES.SCREEN]="screen",e[n.BLEND_MODES.OVERLAY]="overlay",e[n.BLEND_MODES.DARKEN]="darken",e[n.BLEND_MODES.LIGHTEN]="lighten",e[n.BLEND_MODES.COLOR_DODGE]="color-dodge",e[n.BLEND_MODES.COLOR_BURN]="color-burn",e[n.BLEND_MODES.HARD_LIGHT]="hard-light",e[n.BLEND_MODES.SOFT_LIGHT]="soft-light",e[n.BLEND_MODES.DIFFERENCE]="difference",e[n.BLEND_MODES.EXCLUSION]="exclusion",e[n.BLEND_MODES.HUE]="hue",e[n.BLEND_MODES.SATURATION]="saturate",e[n.BLEND_MODES.COLOR]="color",e[n.BLEND_MODES.LUMINOSITY]="luminosity"):(e[n.BLEND_MODES.NORMAL]="source-over",e[n.BLEND_MODES.ADD]="lighter",e[n.BLEND_MODES.MULTIPLY]="source-over",e[n.BLEND_MODES.SCREEN]="source-over",e[n.BLEND_MODES.OVERLAY]="source-over",e[n.BLEND_MODES.DARKEN]="source-over",e[n.BLEND_MODES.LIGHTEN]="source-over",e[n.BLEND_MODES.COLOR_DODGE]="source-over",e[n.BLEND_MODES.COLOR_BURN]="source-over",e[n.BLEND_MODES.HARD_LIGHT]="source-over",e[n.BLEND_MODES.SOFT_LIGHT]="source-over",e[n.BLEND_MODES.DIFFERENCE]="source-over",e[n.BLEND_MODES.EXCLUSION]="source-over",e[n.BLEND_MODES.HUE]="source-over",e[n.BLEND_MODES.SATURATION]="source-over",e[n.BLEND_MODES.COLOR]="source-over",e[n.BLEND_MODES.LUMINOSITY]="source-over"),e[n.BLEND_MODES.NORMAL_NPM]=e[n.BLEND_MODES.NORMAL],e[n.BLEND_MODES.ADD_NPM]=e[n.BLEND_MODES.ADD],e[n.BLEND_MODES.SCREEN_NPM]=e[n.BLEND_MODES.SCREEN],e};var n=e("../../../const"),r=function(e){return e&&e.__esModule?e:{default:e}}(e("./canUseNewCanvasBlendModes"))},{"../../../const":45,"./canUseNewCanvasBlendModes":79}],81:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=e("../../const"),a=function(e){return e&&e.__esModule?e:{default:e}}(e("../../settings")),s=function(){function e(t){n(this,e),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=a.default.GC_MAX_IDLE,this.checkCountMax=a.default.GC_MAX_CHECK_COUNT,this.mode=a.default.GC_MODE}return e.prototype.update=function(){this.count++,this.mode!==r.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},e.prototype.run=function(){for(var e=this.renderer.textureManager,t=e._managedTextures,i=!1,n=0;n<t.length;n++){var r=t[n];!r._glRenderTargets&&this.count-r.touched>this.maxIdle&&(e.destroyTexture(r,!0),t[n]=null,i=!0)}if(i){for(var a=0,s=0;s<t.length;s++)null!==t[s]&&(t[a++]=t[s]);t.length=a}},e.prototype.unload=function(e){var t=this.renderer.textureManager;e._texture&&e._texture._glRenderTargets&&t.destroyTexture(e._texture,!0);for(var i=e.children.length-1;i>=0;i--)this.unload(e.children[i])},e}();i.default=s},{"../../const":45,"../../settings":100}],82:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=e("pixi-gl-core"),a=e("../../const"),s=function(e){return e&&e.__esModule?e:{default:e}}(e("./utils/RenderTarget")),o=e("../../utils"),u=function(){function e(t){n(this,e),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}return e.prototype.bindTexture=function(){},e.prototype.getTexture=function(){},e.prototype.updateTexture=function(e,t){var i=this.gl,n=!!e._glRenderTargets;if(!e.hasLoaded)return null;var o=this.renderer.boundTextures;if(void 0===t){t=0;for(var u=0;u<o.length;++u)if(o[u]===e){t=u;break}}o[t]=e,i.activeTexture(i.TEXTURE0+t);var l=e._glTextures[this.renderer.CONTEXT_UID];if(l)n?e._glRenderTargets[this.renderer.CONTEXT_UID].resize(e.width,e.height):l.upload(e.source);else{if(n){var h=new s.default(this.gl,e.width,e.height,e.scaleMode,e.resolution);h.resize(e.width,e.height),e._glRenderTargets[this.renderer.CONTEXT_UID]=h,l=h.texture}else(l=new r.GLTexture(this.gl,null,null,null,null)).bind(t),l.premultiplyAlpha=!0,l.upload(e.source);e._glTextures[this.renderer.CONTEXT_UID]=l,e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e),e.isPowerOfTwo?(e.mipmap&&l.enableMipmap(),e.wrapMode===a.WRAP_MODES.CLAMP?l.enableWrapClamp():e.wrapMode===a.WRAP_MODES.REPEAT?l.enableWrapRepeat():l.enableWrapMirrorRepeat()):l.enableWrapClamp(),e.scaleMode===a.SCALE_MODES.NEAREST?l.enableNearestScaling():l.enableLinearScaling()}return l},e.prototype.destroyTexture=function(e,t){if((e=e.baseTexture||e).hasLoaded&&e._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(e),e._glTextures[this.renderer.CONTEXT_UID].destroy(),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.renderer.CONTEXT_UID],!t)){var i=this._managedTextures.indexOf(e);-1!==i&&(0,o.removeItems)(this._managedTextures,i,1)}},e.prototype.removeAll=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];t._glTextures[this.renderer.CONTEXT_UID]&&delete t._glTextures[this.renderer.CONTEXT_UID]}},e.prototype.destroy=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];this.destroyTexture(t,!0),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this)}this._managedTextures=null},e}();i.default=u},{"../../const":45,"../../utils":123,"./utils/RenderTarget":95,"pixi-gl-core":12}],83:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=n(e("../SystemRenderer")),u=n(e("./managers/MaskManager")),l=n(e("./managers/StencilManager")),h=n(e("./managers/FilterManager")),c=n(e("./utils/RenderTarget")),d=n(e("./utils/ObjectRenderer")),p=n(e("./TextureManager")),f=n(e("../../textures/BaseTexture")),g=n(e("./TextureGarbageCollector")),m=n(e("./WebGLState")),v=n(e("./utils/mapWebGLDrawModesToPixi")),y=n(e("./utils/validateContext")),b=e("../../utils"),_=n(e("pixi-gl-core")),w=e("../../const"),x=0,T=function(e){function t(i,n,s){r(this,t);var o=a(this,e.call(this,"WebGL",i,n,s));return o.legacy=o.options.legacy,o.legacy&&(_.default.VertexArrayObject.FORCE_NATIVE=!0),o.type=w.RENDERER_TYPE.WEBGL,o.handleContextLost=o.handleContextLost.bind(o),o.handleContextRestored=o.handleContextRestored.bind(o),o.view.addEventListener("webglcontextlost",o.handleContextLost,!1),o.view.addEventListener("webglcontextrestored",o.handleContextRestored,!1),o._contextOptions={alpha:o.transparent,antialias:o.options.antialias,premultipliedAlpha:o.transparent&&"notMultiplied"!==o.transparent,stencil:!0,preserveDrawingBuffer:o.options.preserveDrawingBuffer},o._backgroundColorRgba[3]=o.transparent?0:1,o.maskManager=new u.default(o),o.stencilManager=new l.default(o),o.emptyRenderer=new d.default(o),o.currentRenderer=o.emptyRenderer,o.initPlugins(),o.options.context&&(0,y.default)(o.options.context),o.gl=o.options.context||_.default.createContext(o.view,o._contextOptions),o.CONTEXT_UID=x++,o.state=new m.default(o.gl),o.renderingToScreen=!0,o.boundTextures=null,o._activeShader=null,o._activeVao=null,o._activeRenderTarget=null,o._initContext(),o.filterManager=new h.default(o),o.drawModes=(0,v.default)(o.gl),o._nextTextureLocation=0,o.setBlendMode(0),o}return s(t,e),t.prototype._initContext=function(){var e=this.gl;e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext();var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(t),this.emptyTextures=new Array(t),this.textureManager=new p.default(this),this.textureGC=new g.default(this),this.state.resetToDefault(),this.rootRenderTarget=new c.default(e,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var i=new _.default.GLTexture.fromData(e,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var r=0;r<t;r++){var a=new f.default;a._glTextures[this.CONTEXT_UID]=i,this.boundTextures[r]=n,this.emptyTextures[r]=a,this.bindTexture(null,r)}this.emit("context",e),this.resize(this.screen.width,this.screen.height)},t.prototype.render=function(e,t,i,n,r){if(this.renderingToScreen=!t,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=e),!r){var a=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=a}this.bindRenderTexture(t,n),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),e.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.resize=function(e,t){o.default.prototype.resize.call(this,e,t),this.rootRenderTarget.resize(e,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},t.prototype.setBlendMode=function(e){this.state.setBlendMode(e)},t.prototype.clear=function(e){this._activeRenderTarget.clear(e)},t.prototype.setTransform=function(e){this._activeRenderTarget.transform=e},t.prototype.clearRenderTexture=function(e,t){var i=e.baseTexture._glRenderTargets[this.CONTEXT_UID];return i&&i.clear(t),this},t.prototype.bindRenderTexture=function(e,t){var i=void 0;if(e){var n=e.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),(i=n._glRenderTargets[this.CONTEXT_UID]).setFrame(e.frame)}else i=this.rootRenderTarget;return i.transform=t,this.bindRenderTarget(i),this},t.prototype.bindRenderTarget=function(e){return e!==this._activeRenderTarget&&(this._activeRenderTarget=e,e.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this},t.prototype.bindShader=function(e,t){return this._activeShader!==e&&(this._activeShader=e,e.bind(),!1!==t&&(e.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},t.prototype.bindTexture=function(e,t,i){if(e=e||this.emptyTextures[t],e=e.baseTexture||e,e.touched=this.textureGC.count,i)t=t||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===e)return n;void 0===t&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}var r=this.gl,a=e._glTextures[this.CONTEXT_UID];return a?(this.boundTextures[t]=e,r.activeTexture(r.TEXTURE0+t),r.bindTexture(r.TEXTURE_2D,a.texture)):this.textureManager.updateTexture(e,t),t},t.prototype.unbindTexture=function(e){var t=this.gl;e=e.baseTexture||e;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===e&&(this.boundTextures[i]=this.emptyTextures[i],t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture));return this},t.prototype.createVao=function(){return new _.default.VertexArrayObject(this.gl,this.state.attribState)},t.prototype.bindVao=function(e){return this._activeVao===e?this:(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e,this)},t.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this._initContext()},t.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},t}(o.default);i.default=T,b.pluginTarget.mixin(T)},{"../../const":45,"../../textures/BaseTexture":111,"../../utils":123,"../SystemRenderer":75,"./TextureGarbageCollector":81,"./TextureManager":82,"./WebGLState":84,"./managers/FilterManager":89,"./managers/MaskManager":90,"./managers/StencilManager":91,"./utils/ObjectRenderer":93,"./utils/RenderTarget":95,"./utils/mapWebGLDrawModesToPixi":98,"./utils/validateContext":99,"pixi-gl-core":12}],84:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("./utils/mapWebGLBlendModesToPixi")),a=function(){function e(t){n(this,e),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,r.default)(t),this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")}return e.prototype.push=function(){var e=this.stack[this.stackIndex];e||(e=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var t=0;t<this.activeState.length;t++)e[t]=this.activeState[t]},e.prototype.pop=function(){var e=this.stack[--this.stackIndex];this.setState(e)},e.prototype.setState=function(e){this.setBlend(e[0]),this.setDepthTest(e[1]),this.setFrontFace(e[2]),this.setCullFace(e[3]),this.setBlendMode(e[4])},e.prototype.setBlend=function(e){e=e?1:0,this.activeState[0]!==e&&(this.activeState[0]=e,this.gl[e?"enable":"disable"](this.gl.BLEND))},e.prototype.setBlendMode=function(e){if(e!==this.activeState[4]){this.activeState[4]=e;var t=this.blendModes[e];2===t.length?this.gl.blendFunc(t[0],t[1]):this.gl.blendFuncSeparate(t[0],t[1],t[2],t[3])}},e.prototype.setDepthTest=function(e){e=e?1:0,this.activeState[1]!==e&&(this.activeState[1]=e,this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST))},e.prototype.setCullFace=function(e){e=e?1:0,this.activeState[3]!==e&&(this.activeState[3]=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE))},e.prototype.setFrontFace=function(e){e=e?1:0,this.activeState[2]!==e&&(this.activeState[2]=e,this.gl.frontFace(this.gl[e?"CW":"CCW"]))},e.prototype.resetAttributes=function(){for(var e=0;e<this.attribState.tempAttribState.length;e++)this.attribState.tempAttribState[e]=0;for(var t=0;t<this.attribState.attribState.length;t++)this.attribState.attribState[t]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},e.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var e=0;e<this.activeState.length;++e)this.activeState[e]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},e}();i.default=a},{"./utils/mapWebGLBlendModesToPixi":97}],85:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=n(e("./extractUniformsFromSrc")),o=e("../../../utils"),u=e("../../../const"),l=n(e("../../../settings")),h={},c=function(){function e(t,i,n){r(this,e),this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=i||e.defaultFragmentSrc,this.blendMode=u.BLEND_MODES.NORMAL,this.uniformData=n||(0,s.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var a in this.uniformData)this.uniforms[a]=this.uniformData[a].value;this.glShaders={},h[this.vertexSrc+this.fragmentSrc]||(h[this.vertexSrc+this.fragmentSrc]=(0,o.uid)()),this.glShaderKey=h[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=l.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return e.prototype.apply=function(e,t,i,n,r){e.applyFilter(this,t,i,n)},a(e,null,[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),e}();i.default=c},{"../../../const":45,"../../../settings":100,"../../../utils":123,"./extractUniformsFromSrc":86}],86:[function(e,t,i){"use strict";function n(e){for(var t=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),i={},n=void 0,a=e.replace(/\s+/g," ").split(/\s*;\s*/),s=0;s<a.length;s++){var o=a[s].trim();if(o.indexOf("uniform")>-1){var u=o.split(" "),l=u[1],h=u[2],c=1;h.indexOf("[")>-1&&(n=h.split(/\[|]/),h=n[0],c*=Number(n[1])),h.match(t)||(i[h]={value:r(l,c),name:h,type:l})}}return i}i.__esModule=!0,i.default=function(e,t,i){var r=n(e),a=n(t);return Object.assign(r,a)};var r=function(e){return e&&e.__esModule?e:{default:e}}(e("pixi-gl-core")).default.shader.defaultValue},{"pixi-gl-core":12}],87:[function(e,t,i){"use strict";i.__esModule=!0,i.calculateScreenSpaceMatrix=function(e,t,i){var n=e.identity();return n.translate(t.x/i.width,t.y/i.height),n.scale(i.width,i.height),n},i.calculateNormalizedScreenSpaceMatrix=function(e,t,i){var n=e.identity();n.translate(t.x/i.width,t.y/i.height);var r=i.width/t.width,a=i.height/t.height;return n.scale(r,a),n},i.calculateSpriteMatrix=function(e,t,i,r){var a=r.worldTransform.copy(n.Matrix.TEMP_MATRIX),s=r._texture.baseTexture,o=e.identity(),u=i.height/i.width;o.translate(t.x/i.width,t.y/i.height),o.scale(1,u);var l=i.width/s.width,h=i.height/s.height;return a.tx/=s.width*l,a.ty/=s.width*l,a.invert(),o.prepend(a),o.scale(1,1/u),o.scale(l,h),o.translate(r.anchor.x,r.anchor.y),o};var n=e("../../../math")},{"../../../math":69}],88:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(e){return e&&e.__esModule?e:{default:e}}(e("../Filter")),o=e("../../../../math"),u=(e("path"),function(e){function t(i){n(this,t);var a=new o.Matrix,s=r(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,s.maskSprite=i,s.maskMatrix=a,s}return a(t,e),t.prototype.apply=function(e,t,i){var n=this.maskSprite;this.uniforms.mask=n._texture,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,n),this.uniforms.alpha=n.worldAlpha,e.applyFilter(this,t,i)},t}(s.default));i.default=u},{"../../../../math":69,"../Filter":85,path:22}],89:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var o=n(e("./WebGLManager")),u=n(e("../utils/RenderTarget")),l=n(e("../utils/Quad")),h=e("../../../math"),c=n(e("../../../Shader")),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../filters/filterTransforms")),p=n(e("bit-twiddle")),f=function e(){s(this,e),this.renderTarget=null,this.sourceFrame=new h.Rectangle,this.destinationFrame=new h.Rectangle,this.filters=[],this.target=null,this.resolution=1},g=function(e){function t(i){s(this,t);var n=r(this,e.call(this,i));return n.gl=n.renderer.gl,n.quad=new l.default(n.gl,i.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n}return a(t,e),t.prototype.pushFilter=function(e,t){var i=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var r=new f;r.sourceFrame=r.destinationFrame=this.renderer._activeRenderTarget.size,r.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[r]},this.filterData=n}var a=n.stack[++n.index];a||(a=n.stack[n.index]=new f);var s=t[0].resolution,o=0|t[0].padding,u=e.filterArea||e.getBounds(!0),l=a.sourceFrame,h=a.destinationFrame;l.x=(u.x*s|0)/s,l.y=(u.y*s|0)/s,l.width=(u.width*s|0)/s,l.height=(u.height*s|0)/s,n.stack[0].renderTarget.transform||t[0].autoFit&&l.fit(n.stack[0].destinationFrame),l.pad(o),h.width=l.width,h.height=l.height;var c=this.getPotRenderTarget(i.gl,l.width,l.height,s);a.target=e,a.filters=t,a.resolution=s,a.renderTarget=c,c.setFrame(h,l),i.bindRenderTarget(c),c.clear()},t.prototype.popFilter=function(){var e=this.filterData,t=e.stack[e.index-1],i=e.stack[e.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var n=i.filters;if(1===n.length)n[0].apply(this,i.renderTarget,t.renderTarget,!1,i),this.freePotRenderTarget(i.renderTarget);else{var r=i.renderTarget,a=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);a.setFrame(i.destinationFrame,i.sourceFrame),a.clear();var s=0;for(s=0;s<n.length-1;++s){n[s].apply(this,r,a,!0,i);var o=r;r=a,a=o}n[s].apply(this,r,t.renderTarget,!1,i),this.freePotRenderTarget(r),this.freePotRenderTarget(a)}e.index--,0===e.index&&(this.filterData=null)},t.prototype.applyFilter=function(e,t,i,n){var r=this.renderer,a=r.gl,s=e.glShaders[r.CONTEXT_UID];s||(e.glShaderKey?(s=this.shaderCache[e.glShaderKey])||(s=new c.default(this.gl,e.vertexSrc,e.fragmentSrc),e.glShaders[r.CONTEXT_UID]=this.shaderCache[e.glShaderKey]=s):s=e.glShaders[r.CONTEXT_UID]=new c.default(this.gl,e.vertexSrc,e.fragmentSrc),r.bindVao(null),this.quad.initVao(s)),r.bindVao(this.quad.vao),r.bindRenderTarget(i),n&&(a.disable(a.SCISSOR_TEST),r.clear(),a.enable(a.SCISSOR_TEST)),i===r.maskManager.scissorRenderTarget&&r.maskManager.pushScissorMask(null,r.maskManager.scissorData),r.bindShader(s);var o=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=o,this.syncUniforms(s,e),r.state.setBlendMode(e.blendMode),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),a.bindTexture(a.TEXTURE_2D,o._glTextures[this.renderer.CONTEXT_UID].texture)},t.prototype.syncUniforms=function(e,t){var i=t.uniformData,n=t.uniforms,r=1,a=void 0;if(e.uniforms.filterArea){a=this.filterData.stack[this.filterData.index];var s=e.uniforms.filterArea;s[0]=a.renderTarget.size.width,s[1]=a.renderTarget.size.height,s[2]=a.sourceFrame.x,s[3]=a.sourceFrame.y,e.uniforms.filterArea=s}if(e.uniforms.filterClamp){a=a||this.filterData.stack[this.filterData.index];var o=e.uniforms.filterClamp;o[0]=0,o[1]=0,o[2]=(a.sourceFrame.width-1)/a.renderTarget.size.width,o[3]=(a.sourceFrame.height-1)/a.renderTarget.size.height,e.uniforms.filterClamp=o}for(var u in i)if("sampler2D"===i[u].type&&0!==n[u]){if(n[u].baseTexture)e.uniforms[u]=this.renderer.bindTexture(n[u].baseTexture,r);else{e.uniforms[u]=r;var l=this.renderer.gl;this.renderer.boundTextures[r]=this.renderer.emptyTextures[r],l.activeTexture(l.TEXTURE0+r),n[u].texture.bind()}r++}else if("mat3"===i[u].type)void 0!==n[u].a?e.uniforms[u]=n[u].toArray(!0):e.uniforms[u]=n[u];else if("vec2"===i[u].type)if(void 0!==n[u].x){var h=e.uniforms[u]||new Float32Array(2);h[0]=n[u].x,h[1]=n[u].y,e.uniforms[u]=h}else e.uniforms[u]=n[u];else"float"===i[u].type?e.uniforms.data[u].value!==i[u]&&(e.uniforms[u]=n[u]):e.uniforms[u]=n[u]},t.prototype.getRenderTarget=function(e,t){var i=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,t||i.resolution);return n.setFrame(i.destinationFrame,i.sourceFrame),n},t.prototype.returnRenderTarget=function(e){this.freePotRenderTarget(e)},t.prototype.calculateScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return d.calculateScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size)},t.prototype.calculateNormalizedScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return d.calculateNormalizedScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size,t.destinationFrame)},t.prototype.calculateSpriteMatrix=function(e,t){var i=this.filterData.stack[this.filterData.index];return d.calculateSpriteMatrix(e,i.sourceFrame,i.renderTarget.size,t)},t.prototype.destroy=function(){this.shaderCache={},this.emptyPool()},t.prototype.getPotRenderTarget=function(e,t,i,n){var r=(65535&(t=p.default.nextPow2(t*n)))<<16|65535&(i=p.default.nextPow2(i*n));this.pool[r]||(this.pool[r]=[]);var a=this.pool[r].pop();if(!a){var s=this.renderer.boundTextures[0];e.activeTexture(e.TEXTURE0),a=new u.default(e,t,i,null,1),e.bindTexture(e.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)}return a.resolution=n,a.defaultFrame.width=a.size.width=t/n,a.defaultFrame.height=a.size.height=i/n,a},t.prototype.emptyPool=function(){for(var e in this.pool){var t=this.pool[e];if(t)for(var i=0;i<t.length;i++)t[i].destroy(!0)}this.pool={}},t.prototype.freePotRenderTarget=function(e){var t=(65535&e.size.width*e.resolution)<<16|65535&e.size.height*e.resolution;this.pool[t].push(e)},t}(o.default);i.default=g},{"../../../Shader":43,"../../../math":69,"../filters/filterTransforms":87,"../utils/Quad":94,"../utils/RenderTarget":95,"./WebGLManager":92,"bit-twiddle":1}],90:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=n(e("./WebGLManager")),u=n(e("../filters/spriteMask/SpriteMaskFilter")),l=function(e){function t(i){r(this,t);var n=a(this,e.call(this,i));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return s(t,e),t.prototype.pushMask=function(e,t){if(t.texture)this.pushSpriteMask(e,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var i=t.worldTransform,n=Math.atan2(i.b,i.a);(n=Math.round(n*(180/Math.PI)))%90?this.pushStencilMask(t):this.pushScissorMask(e,t)}else this.pushStencilMask(t)},t.prototype.popMask=function(e,t){t.texture?this.popSpriteMask(e,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(e,t):this.popStencilMask(e,t)},t.prototype.pushSpriteMask=function(e,t){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new u.default(t)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=t,e.filterArea=t.getBounds(!0),this.renderer.filterManager.pushFilter(e,i),this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},t.prototype.pushStencilMask=function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)},t.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},t.prototype.pushScissorMask=function(e,t){t.renderable=!0;var i=this.renderer._activeRenderTarget,n=t.getBounds();n.fit(i.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var r=this.renderer.resolution;this.renderer.gl.scissor(n.x*r,(i.root?i.size.height-n.y-n.height:n.y)*r,n.width*r,n.height*r),this.scissorRenderTarget=i,this.scissorData=t,this.scissor=!0},t.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},t}(o.default);i.default=l},{"../filters/spriteMask/SpriteMaskFilter":88,"./WebGLManager":92}],91:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(e){return e&&e.__esModule?e:{default:e}}(e("./WebGLManager")),o=function(e){function t(i){n(this,t);var a=r(this,e.call(this,i));return a.stencilMaskStack=null,a}return a(t,e),t.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},t.prototype.pushStencil=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,i=this.stencilMaskStack;0===i.length&&(t.enable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.stencilFunc(t.ALWAYS,1,1)),i.push(e),t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(e),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,i.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},t.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,t=this.stencilMaskStack,i=t.pop();0===t.length?e.disable(e.STENCIL_TEST):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(i),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,t.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP))},t.prototype.destroy=function(){s.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},t}(s.default);i.default=o},{"./WebGLManager":92}],92:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(t){n(this,e),this.renderer=t,this.renderer.on("context",this.onContextChange,this)}return e.prototype.onContextChange=function(){},e.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},e}();i.default=r},{}],93:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(e){},t}(function(e){return e&&e.__esModule?e:{default:e}}(e("../managers/WebGLManager")).default);i.default=s},{"../managers/WebGLManager":92}],94:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var a=n(e("pixi-gl-core")),s=n(e("../../../utils/createIndicesForQuads")),o=function(){function e(t,i){r(this,e),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var n=0;n<4;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,s.default)(1),this.vertexBuffer=a.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new a.default.VertexArrayObject(t,i)}return e.prototype.initVao=function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},e.prototype.map=function(e,t){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+t.width/e.width,this.uvs[3]=n,this.uvs[4]=i+t.width/e.width,this.uvs[5]=n+t.height/e.height,this.uvs[6]=i,this.uvs[7]=n+t.height/e.height,i=t.x,n=t.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+t.width,this.vertices[3]=n,this.vertices[4]=i+t.width,this.vertices[5]=n+t.height,this.vertices[6]=i,this.vertices[7]=n+t.height,this},e.prototype.upload=function(){for(var e=0;e<4;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this},e.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},e}();i.default=o},{"../../../utils/createIndicesForQuads":121,"pixi-gl-core":12}],95:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=e("../../../math"),a=e("../../../const"),s=function(e){return e&&e.__esModule?e:{default:e}}(e("../../../settings")),o=e("pixi-gl-core"),u=function(){function e(t,i,u,l,h,c){n(this,e),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new r.Rectangle(0,0,1,1),this.resolution=h||s.default.RESOLUTION,this.projectionMatrix=new r.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new r.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==l?l:s.default.SCALE_MODE,this.root=c,this.root?(this.frameBuffer=new o.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=o.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===a.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,u)}return e.prototype.clear=function(e){var t=e||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])},e.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},e.prototype.setFrame=function(e,t){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||this.destinationFrame},e.prototype.activate=function(){var e=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(e.enable(e.SCISSOR_TEST),e.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):e.disable(e.SCISSOR_TEST),e.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},e.prototype.calculateProjection=function(e,t){var i=this.projectionMatrix;t=t||e,i.identity(),this.root?(i.a=1/e.width*2,i.d=-1/e.height*2,i.tx=-1-t.x*i.a,i.ty=1-t.y*i.d):(i.a=1/e.width*2,i.d=1/e.height*2,i.tx=-1-t.x*i.a,i.ty=-1-t.y*i.d)},e.prototype.resize=function(e,t){if(e|=0,t|=0,this.size.width!==e||this.size.height!==t){this.size.width=e,this.size.height=t,this.defaultFrame.width=e,this.defaultFrame.height=t,this.frameBuffer.resize(e*this.resolution,t*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},e.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},e}();i.default=u},{"../../../const":45,"../../../math":69,"../../../settings":100,"pixi-gl-core":12}],96:[function(e,t,i){"use strict";function n(e){for(var t="",i=0;i<e;++i)i>0&&(t+="\nelse "),i<e-1&&(t+="if(test == "+i+".0){}");return t}i.__esModule=!0,i.default=function(e,t){var i=!t;if(i){var s=document.createElement("canvas");s.width=1,s.height=1,t=r.default.createContext(s)}for(var o=t.createShader(t.FRAGMENT_SHADER);;){var u=a.replace(/%forloop%/gi,n(e));if(t.shaderSource(o,u),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS))break;e=e/2|0}return i&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").loseContext(),e};var r=function(e){return e&&e.__esModule?e:{default:e}}(e("pixi-gl-core")),a=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":12}],97:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[n.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.ADD]=[e.ONE,e.DST_ALPHA],t[n.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR],t[n.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.DST_ALPHA,e.ONE,e.DST_ALPHA],t[n.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_COLOR],t};var n=e("../../../const")},{"../../../const":45}],98:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t[n.DRAW_MODES.POINTS]=e.POINTS,t[n.DRAW_MODES.LINES]=e.LINES,t[n.DRAW_MODES.LINE_LOOP]=e.LINE_LOOP,t[n.DRAW_MODES.LINE_STRIP]=e.LINE_STRIP,t[n.DRAW_MODES.TRIANGLES]=e.TRIANGLES,t[n.DRAW_MODES.TRIANGLE_STRIP]=e.TRIANGLE_STRIP,t[n.DRAW_MODES.TRIANGLE_FAN]=e.TRIANGLE_FAN,t};var n=e("../../../const")},{"../../../const":45}],99:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e){e.getContextAttributes().stencil}},{}],100:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0;var r=n(e("./utils/maxRecommendedTextures")),a=n(e("./utils/canUploadSameBuffer"));i.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,r.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,a.default)()}},{"./utils/canUploadSameBuffer":120,"./utils/maxRecommendedTextures":125}],101:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e("../math"),l=e("../utils"),h=e("../const"),c=n(e("../textures/Texture")),d=n(e("../display/Container")),p=new u.Point,f=function(e){function t(i){r(this,t);var n=a(this,e.call(this));return n._anchor=new u.ObservablePoint(n._onAnchorUpdate,n),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=h.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=i||c.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.pluginName="sprite",n}return s(t,e),t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._width&&(this.scale.x=(0,l.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,l.sign)(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var e=this._texture,t=this.transform.worldTransform,i=t.a,n=t.b,r=t.c,a=t.d,s=t.tx,o=t.ty,u=this.vertexData,l=e.trim,h=e.orig,c=this._anchor,d=0,p=0,f=0,g=0;l?(p=l.x-c._x*h.width,d=p+l.width,g=l.y-c._y*h.height,f=g+l.height):(p=-c._x*h.width,d=p+h.width,g=-c._y*h.height,f=g+h.height),u[0]=i*p+r*g+s,u[1]=a*g+n*p+o,u[2]=i*d+r*g+s,u[3]=a*g+n*d+o,u[4]=i*d+r*f+s,u[5]=a*f+n*d+o,u[6]=i*p+r*f+s,u[7]=a*f+n*p+o}},t.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,i=e.orig,n=this._anchor,r=this.transform.worldTransform,a=r.a,s=r.b,o=r.c,u=r.d,l=r.tx,h=r.ty,c=-n._x*i.width,d=c+i.width,p=-n._y*i.height,f=p+i.height;t[0]=a*c+o*p+l,t[1]=u*p+s*c+h,t[2]=a*d+o*p+l,t[3]=u*p+s*d+h,t[4]=a*d+o*f+l,t[5]=u*f+s*d+h,t[6]=a*c+o*f+l,t[7]=u*f+s*c+h},t.prototype._renderWebGL=function(e){this.calculateVertices(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),t||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,p);var t=this._texture.orig.width,i=this._texture.orig.height,n=-t*this.anchor.x,r=0;return p.x>=n&&p.x<n+t&&(r=-i*this.anchor.y,p.y>=r&&p.y<r+i)},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var i="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},t.from=function(e){return new t(c.default.from(e))},t.fromFrame=function(e){var i=l.TextureCache[e];if(!i)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return new t(i)},t.fromImage=function(e,i,n){return new t(c.default.fromImage(e,i,n))},o(t,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=(0,l.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=(0,l.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor.copy(e)}},{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}]),t}(d.default);i.default=f},{"../const":45,"../display/Container":47,"../math":69,"../textures/Texture":114,"../utils":123}],102:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var a=n(e("../../renderers/canvas/CanvasRenderer")),s=e("../../const"),o=e("../../math"),u=n(e("./CanvasTinter")),l=new o.Matrix,h=function(){function e(t){r(this,e),this.renderer=t}return e.prototype.render=function(e){var t=e._texture,i=this.renderer,n=t._frame.width,r=t._frame.height,a=e.transform.worldTransform,h=0,c=0;if(!(t.orig.width<=0||t.orig.height<=0)&&t.baseTexture.source&&(i.setBlendMode(e.blendMode),t.valid)){i.context.globalAlpha=e.worldAlpha;var d=t.baseTexture.scaleMode===s.SCALE_MODES.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==d&&(i.context[i.smoothProperty]=d),t.trim?(h=t.trim.width/2+t.trim.x-e.anchor.x*t.orig.width,c=t.trim.height/2+t.trim.y-e.anchor.y*t.orig.height):(h=(.5-e.anchor.x)*t.orig.width,c=(.5-e.anchor.y)*t.orig.height),t.rotate&&(a.copy(l),a=l,o.GroupD8.matrixAppendRotationInv(a,t.rotate,h,c),h=0,c=0),h-=n/2,c-=r/2,i.roundPixels?(i.context.setTransform(a.a,a.b,a.c,a.d,a.tx*i.resolution|0,a.ty*i.resolution|0),h|=0,c|=0):i.context.setTransform(a.a,a.b,a.c,a.d,a.tx*i.resolution,a.ty*i.resolution);var p=t.baseTexture.resolution;16777215!==e.tint?(e.cachedTint===e.tint&&e.tintedTexture.tintId===e._texture._updateID||(e.cachedTint=e.tint,e.tintedTexture=u.default.getTintedTexture(e,e.tint)),i.context.drawImage(e.tintedTexture,0,0,n*p,r*p,h*i.resolution,c*i.resolution,n*i.resolution,r*i.resolution)):i.context.drawImage(t.baseTexture.source,t._frame.x*p,t._frame.y*p,n*p,r*p,h*i.resolution,c*i.resolution,n*i.resolution,r*i.resolution)}},e.prototype.destroy=function(){this.renderer=null},e}();i.default=h,a.default.registerPlugin("sprite",h)},{"../../const":45,"../../math":69,"../../renderers/canvas/CanvasRenderer":76,"./CanvasTinter":103}],103:[function(e,t,i){"use strict";i.__esModule=!0;var n=e("../../utils"),r={getTintedTexture:function(e,t){var i=e._texture,n="#"+("00000"+(0|(t=r.roundColor(t))).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var a=i.tintCache[n],s=void 0;if(a){if(a.tintId===i._updateID)return i.tintCache[n];s=i.tintCache[n]}else s=r.canvas||document.createElement("canvas");if(r.tintMethod(i,t,s),s.tintId=i._updateID,r.convertTintToImage){var o=new Image;o.src=s.toDataURL(),i.tintCache[n]=o}else i.tintCache[n]=s,r.canvas=null;return s},tintWithMultiply:function(e,t,i){var n=i.getContext("2d"),r=e._frame.clone(),a=e.baseTexture.resolution;r.x*=a,r.y*=a,r.width*=a,r.height*=a,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},tintWithOverlay:function(e,t,i){var n=i.getContext("2d"),r=e._frame.clone(),a=e.baseTexture.resolution;r.x*=a,r.y*=a,r.width*=a,r.height*=a,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},tintWithPerPixel:function(e,t,i){var r=i.getContext("2d"),a=e._frame.clone(),s=e.baseTexture.resolution;a.x*=s,a.y*=s,a.width*=s,a.height*=s,i.width=Math.ceil(a.width),i.height=Math.ceil(a.height),r.globalCompositeOperation="copy",r.drawImage(e.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height);for(var o=(0,n.hex2rgb)(t),u=o[0],l=o[1],h=o[2],c=r.getImageData(0,0,a.width,a.height),d=c.data,p=0;p<d.length;p+=4)d[p+0]*=u,d[p+1]*=l,d[p+2]*=h;r.putImageData(c,0,0)},roundColor:function(e){var t=r.cacheStepsPerColorChannel,i=(0,n.hex2rgb)(e);return i[0]=Math.min(255,i[0]/t*t),i[1]=Math.min(255,i[1]/t*t),i[2]=Math.min(255,i[2]/t*t),(0,n.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,function(e){return e&&e.__esModule?e:{default:e}}(e("../../renderers/canvas/utils/canUseNewCanvasBlendModes")).default)(),tintMethod:0};r.tintMethod=r.canUseMultiply?r.tintWithMultiply:r.tintWithPerPixel,i.default=r},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":79,"../../utils":123}],104:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(t){n(this,e),this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return e.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},e}();i.default=r},{}],105:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=n(e("../../renderers/webgl/utils/ObjectRenderer")),u=n(e("../../renderers/webgl/WebGLRenderer")),l=n(e("../../utils/createIndicesForQuads")),h=n(e("./generateMultiTextureShader")),c=n(e("../../renderers/webgl/utils/checkMaxIfStatmentsInShader")),d=n(e("./BatchBuffer")),p=n(e("../../settings")),f=e("../../utils"),g=n(e("pixi-gl-core")),m=n(e("bit-twiddle")),v=0,y=0,b=function(e){function t(i){r(this,t);var n=a(this,e.call(this,i));n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=p.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var s=1;s<=m.default.nextPow2(n.size);s*=2)n.buffers.push(new d.default(4*s*n.vertByteSize));n.indices=(0,l.default)(n.size),n.shader=null,n.currentIndex=0,n.groups=[];for(var o=0;o<n.size;o++)n.groups[o]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return s(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),p.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,c.default)(this.MAX_TEXTURES,e)),this.shader=(0,h.default)(e,this.MAX_TEXTURES),this.indexBuffer=g.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.renderer.bindVao(null);for(var t=this.shader.attributes,i=0;i<this.vaoMax;i++){var n=this.vertexBuffers[i]=g.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),r=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,t.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(n,t.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,t.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);t.aTextureId&&r.addAttribute(n,t.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[i]=r}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},t.prototype.onPrerender=function(){this.vertexCount=0},t.prototype.render=function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)},t.prototype.flush=function(){if(0!==this.currentIndex){var e=this.renderer.gl,t=this.MAX_TEXTURES,i=m.default.nextPow2(this.currentIndex),n=m.default.log2(i),r=this.buffers[n],a=this.sprites,s=this.groups,o=r.float32View,u=r.uint32View,l=this.boundTextures,h=this.renderer.boundTextures,c=this.renderer.textureGC.count,d=0,b=void 0,_=void 0,w=1,x=0,T=s[0],S=void 0,I=void 0,P=f.premultiplyBlendMode[a[0]._texture.baseTexture.premultipliedAlpha?1:0][a[0].blendMode];T.textureCount=0,T.start=0,T.blend=P,v++;var C=void 0;for(C=0;C<t;++C)l[C]=h[C],l[C]._virtalBoundId=C;for(C=0;C<this.currentIndex;++C){var M=a[C];b=M._texture.baseTexture;var E=f.premultiplyBlendMode[Number(b.premultipliedAlpha)][M.blendMode];if(P!==E&&(P=E,_=null,x=t,v++),_!==b&&(_=b,b._enabled!==v)){if(x===t&&(v++,T.size=C-T.start,x=0,T=s[w++],T.blend=P,T.textureCount=0,T.start=C),b.touched=c,-1===b._virtalBoundId)for(var k=0;k<t;++k){var A=(k+y)%t,O=l[A];if(O._enabled!==v){y++,O._virtalBoundId=-1,b._virtalBoundId=A,l[A]=b;break}}b._enabled=v,T.textureCount++,T.ids[x]=b._virtalBoundId,T.textures[x++]=b}if(S=M.vertexData,I=M._texture._uvs.uvsUint32,this.renderer.roundPixels){var R=this.renderer.resolution;o[d]=(S[0]*R|0)/R,o[d+1]=(S[1]*R|0)/R,o[d+5]=(S[2]*R|0)/R,o[d+6]=(S[3]*R|0)/R,o[d+10]=(S[4]*R|0)/R,o[d+11]=(S[5]*R|0)/R,o[d+15]=(S[6]*R|0)/R,o[d+16]=(S[7]*R|0)/R}else o[d]=S[0],o[d+1]=S[1],o[d+5]=S[2],o[d+6]=S[3],o[d+10]=S[4],o[d+11]=S[5],o[d+15]=S[6],o[d+16]=S[7];u[d+2]=I[0],u[d+7]=I[1],u[d+12]=I[2],u[d+17]=I[3];var B=Math.min(M.worldAlpha,1),D=B<1&&b.premultipliedAlpha?(0,f.premultiplyTint)(M._tintRGB,B):M._tintRGB+(255*B<<24);u[d+3]=u[d+8]=u[d+13]=u[d+18]=D,o[d+4]=o[d+9]=o[d+14]=o[d+19]=b._virtalBoundId,d+=20}if(T.size=C-T.start,p.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var X=this.shader.attributes,F=this.vertexBuffers[this.vertexCount]=g.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),L=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(F,X.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(F,X.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(F,X.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);X.aTextureId&&L.addAttribute(F,X.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=L}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!1),this.vertexCount++}for(C=0;C<t;++C)h[C]._virtalBoundId=-1;for(C=0;C<w;++C){for(var N=s[C],U=N.textureCount,G=0;G<U;G++)_=N.textures[G],h[N.ids[G]]!==_&&this.renderer.bindTexture(_,N.ids[G],!0),_._virtalBoundId=-1;this.renderer.state.setBlendMode(N.blend),e.drawElements(e.TRIANGLES,6*N.size,e.UNSIGNED_SHORT,6*N.start*2)}this.currentIndex=0}},t.prototype.start=function(){this.renderer.bindShader(this.shader),p.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},t}(o.default);i.default=b,u.default.registerPlugin("sprite",b)},{"../../renderers/webgl/WebGLRenderer":83,"../../renderers/webgl/utils/ObjectRenderer":93,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":96,"../../settings":100,"../../utils":123,"../../utils/createIndicesForQuads":121,"./BatchBuffer":104,"./generateMultiTextureShader":106,"bit-twiddle":1,"pixi-gl-core":12}],106:[function(e,t,i){"use strict";function n(e){var t="";t+="\n",t+="\n";for(var i=0;i<e;i++)i>0&&(t+="\nelse "),i<e-1&&(t+="if(textureId == "+i+".0)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",t+="\n}";return t+="\n",t+="\n"}i.__esModule=!0,i.default=function(e,t){var i=a;i=(i=i.replace(/%count%/gi,t)).replace(/%forloop%/gi,n(t));for(var s=new r.default(e,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",i),o=[],u=0;u<t;u++)o[u]=u;return s.bind(),s.uniforms.uSamplers=o,s};var r=function(e){return e&&e.__esModule?e:{default:e}}(e("../../Shader")),a=(e("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":43,path:22}],107:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=n(e("../sprites/Sprite")),l=n(e("../textures/Texture")),h=e("../math"),c=e("../utils"),d=e("../const"),p=n(e("../settings")),f=n(e("./TextStyle")),g=n(e("./TextMetrics")),m=n(e("../utils/trimCanvas")),v={texture:!0,children:!1,baseTexture:!0},y=function(e){function t(i,n,s){r(this,t),(s=s||document.createElement("canvas")).width=3,s.height=3;var o=l.default.fromCanvas(s,p.default.SCALE_MODE,"text");o.orig=new h.Rectangle,o.trim=new h.Rectangle;var u=a(this,e.call(this,o));return l.default.addToCache(u._texture,u._texture.baseTexture.textureCacheIds[0]),u.canvas=s,u.context=u.canvas.getContext("2d"),u.resolution=p.default.RESOLUTION,u._text=null,u._style=null,u._styleListener=null,u._font="",u.text=i,u.style=n,u.localStyleID=-1,u}return s(t,e),t.prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var i=this.context,n=g.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),r=n.width,a=n.height,s=n.lines,o=n.lineHeight,u=n.lineWidths,l=n.maxLineWidth,h=n.fontProperties;this.canvas.width=Math.ceil((r+2*t.padding)*this.resolution),this.canvas.height=Math.ceil((a+2*t.padding)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=t.stroke,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit;var c=void 0,d=void 0;if(t.dropShadow){i.fillStyle=t.dropShadowColor,i.globalAlpha=t.dropShadowAlpha,i.shadowBlur=t.dropShadowBlur,t.dropShadowBlur>0&&(i.shadowColor=t.dropShadowColor);for(var p=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,f=Math.sin(t.dropShadowAngle)*t.dropShadowDistance,m=0;m<s.length;m++)c=t.strokeThickness/2,d=t.strokeThickness/2+m*o+h.ascent,"right"===t.align?c+=l-u[m]:"center"===t.align&&(c+=(l-u[m])/2),t.fill&&(this.drawLetterSpacing(s[m],c+p+t.padding,d+f+t.padding),t.stroke&&t.strokeThickness&&(i.strokeStyle=t.dropShadowColor,this.drawLetterSpacing(s[m],c+p+t.padding,d+f+t.padding,!0),i.strokeStyle=t.stroke))}i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(t,s);for(var v=0;v<s.length;v++)c=t.strokeThickness/2,d=t.strokeThickness/2+v*o+h.ascent,"right"===t.align?c+=l-u[v]:"center"===t.align&&(c+=(l-u[v])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(s[v],c+t.padding,d+t.padding,!0),t.fill&&this.drawLetterSpacing(s[v],c+t.padding,d+t.padding);this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this._style.letterSpacing;if(0!==r)for(var a=String.prototype.split.call(e,""),s=t,o=0,u="";o<e.length;)u=a[o++],n?this.context.strokeText(u,s,i):this.context.fillText(u,s,i),s+=this.context.measureText(u).width+r;else n?this.context.strokeText(e,t,i):this.context.fillText(e,t,i)},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var t=(0,m.default)(e);e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0)}var i=this._texture,n=this._style,r=n.trim?0:n.padding,a=i.baseTexture;a.hasLoaded=!0,a.resolution=this.resolution,a.realWidth=e.width,a.realHeight=e.height,a.width=e.width/this.resolution,a.height=e.height/this.resolution,i.trim.width=i._frame.width=e.width/this.resolution,i.trim.height=i._frame.height=e.height/this.resolution,i.trim.x=-r,i.trim.y=-r,i.orig.width=i._frame.width-2*r,i.orig.height=i._frame.height-2*r,this._onTextureUpdate(),a.emit("update",a),this.dirty=!1},t.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype.renderWebGL.call(this,t)},t.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._renderCanvas.call(this,t)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._onStyleChange=function(){this.dirty=!0},t.prototype._generateFillStyle=function(e,t){if(!Array.isArray(e.fill))return e.fill;if(navigator.isCocoonJS)return e.fill[0];var i=void 0,n=void 0,r=void 0,a=void 0,s=this.canvas.width/this.resolution,o=this.canvas.height/this.resolution,u=e.fill.slice(),l=e.fillGradientStops.slice();if(!l.length)for(var h=u.length+1,c=1;c<h;++c)l.push(c/h);if(u.unshift(e.fill[0]),l.unshift(0),u.push(e.fill[e.fill.length-1]),l.push(1),e.fillGradientType===d.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(s/2,0,s/2,o),n=(u.length+1)*t.length,r=0;for(var p=0;p<t.length;p++){r+=1;for(var f=0;f<u.length;f++)a="number"==typeof l[f]?l[f]/t.length+p/t.length:r/n,i.addColorStop(a,u[f]),r++}}else{i=this.context.createLinearGradient(0,o/2,s,o/2),n=u.length+1,r=1;for(var g=0;g<u.length;g++)a="number"==typeof l[g]?l[g]:r/n,i.addColorStop(a,u[g]),r++}return i},t.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},v,t),e.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},o(t,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=(0,c.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=(0,c.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"style",get:function(){return this._style},set:function(e){(e=e||{})instanceof f.default?this._style=e:this._style=new f.default(e),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(e){e=String(""===e||null===e||void 0===e?" ":e),this._text!==e&&(this._text=e,this.dirty=!0)}}]),t}(u.default);i.default=y},{"../const":45,"../math":69,"../settings":100,"../sprites/Sprite":101,"../textures/Texture":114,"../utils":123,"../utils/trimCanvas":128,"./TextMetrics":108,"./TextStyle":109}],108:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(t,i,r,a,s,o,u,l,h){n(this,e),this.text=t,this.style=i,this.width=r,this.height=a,this.lines=s,this.lineWidths=o,this.lineHeight=u,this.maxLineWidth=l,this.fontProperties=h}return e.measureText=function(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e._canvas;n=n||i.wordWrap;var a=i.toFontString(),s=e.measureFont(a),o=r.getContext("2d");o.font=a;for(var u=(n?e.wordWrap(t,i,r):t).split(/(?:\r\n|\r|\n)/),l=new Array(u.length),h=0,c=0;c<u.length;c++){var d=o.measureText(u[c]).width+(u[c].length-1)*i.letterSpacing;l[c]=d,h=Math.max(h,d)}var p=h+i.strokeThickness;i.dropShadow&&(p+=i.dropShadowDistance);var f=i.lineHeight||s.fontSize+i.strokeThickness,g=Math.max(f,s.fontSize+i.strokeThickness)+(u.length-1)*f;return i.dropShadow&&(g+=i.dropShadowDistance),new e(t,i,p,g,u,l,f,h,s)},e.wordWrap=function(t,i){for(var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e._canvas).getContext("2d"),r="",a=t.split("\n"),s=i.wordWrapWidth,o={},u=0;u<a.length;u++){for(var l=s,h=a[u].split(" "),c=0;c<h.length;c++){var d=n.measureText(h[c]).width;if(i.breakWords&&d>s)for(var p=h[c].split(""),f=0;f<p.length;f++){var g=p[f],m=o[g];void 0===m&&(m=n.measureText(g).width,o[g]=m),m>l?(r+="\n"+g,l=s-m):(0===f&&(r+=" "),r+=g,l-=m)}else{var v=d+n.measureText(" ").width;0===c||v>l?(c>0&&(r+="\n"),r+=h[c],l=s-d):(l-=v,r+=" "+h[c])}}u<a.length-1&&(r+="\n")}return r},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var i={},n=e._canvas,r=e._context;r.font=t;var a=Math.ceil(r.measureText("|Mq").width),s=Math.ceil(r.measureText("M").width),o=2*s;s=1.4*s|0,n.width=a,n.height=o,r.fillStyle="#f00",r.fillRect(0,0,a,o),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText("|Mq",0,s);var u=r.getImageData(0,0,a,o).data,l=u.length,h=4*a,c=0,d=0,p=!1;for(c=0;c<s;++c){for(var f=0;f<h;f+=4)if(255!==u[d+f]){p=!0;break}if(p)break;d+=h}for(i.ascent=s-c,d=l-h,p=!1,c=o;c>s;--c){for(var g=0;g<h;g+=4)if(255!==u[d+g]){p=!0;break}if(p)break;d-=h}return i.descent=c-s,i.fontSize=i.ascent+i.descent,e._fonts[t]=i,i},e}();i.default=r;var a=document.createElement("canvas");a.width=a.height=10,r._canvas=a,r._context=a.getContext("2d"),r._fonts={}},{}],109:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return"number"==typeof e?(0,l.hex2string)(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function a(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=r(e[t]);return e}return r(e)}function s(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}i.__esModule=!0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e("../const"),l=e("../utils"),h={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:u.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100},c=function(){function e(t){n(this,e),this.styleID=0,Object.assign(this,h,t)}return e.prototype.clone=function(){var t={};for(var i in h)t[i]=this[i];return new e(t)},e.prototype.reset=function(){Object.assign(this,h)},e.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var i=t.length-1;i>=0;i--){var n=t[i].trim();/([\"\'])[^\'\"]+\1/.test(n)||(n='"'+n+'"'),t[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},o(e,[{key:"align",get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(e){var t=a(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(e){var t=a(e);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(e){s(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(e){var t=a(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}}]),e}();i.default=c},{"../const":45,"../utils":123}],110:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=n(e("./BaseTexture")),u=n(e("../settings")),l=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments[2],o=arguments[3];r(this,t);var l=a(this,e.call(this,null,s));return l.resolution=o||u.default.RESOLUTION,l.width=i,l.height=n,l.realWidth=l.width*l.resolution,l.realHeight=l.height*l.resolution,l.scaleMode=void 0!==s?s:u.default.SCALE_MODE,l.hasLoaded=!0,l._glRenderTargets={},l._canvasRenderTarget=null,l.valid=!1,l}return s(t,e),t.prototype.resize=function(e,t){e===this.width&&t===this.height||(this.valid=e>0&&t>0,this.width=e,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},t.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null},t}(o.default);i.default=l},{"../settings":100,"./BaseTexture":111}],111:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=e("../utils"),l=n(e("../settings")),h=n(e("eventemitter3")),c=n(e("../utils/determineCrossOrigin")),d=n(e("bit-twiddle")),p=function(e){function t(i,n,s){r(this,t);var o=a(this,e.call(this));return o.uid=(0,u.uid)(),o.touched=0,o.resolution=s||l.default.RESOLUTION,o.width=100,o.height=100,o.realWidth=100,o.realHeight=100,o.scaleMode=void 0!==n?n:l.default.SCALE_MODE,o.hasLoaded=!1,o.isLoading=!1,o.source=null,o.origSource=null,o.imageType=null,o.sourceScale=1,o.premultipliedAlpha=!0,o.imageUrl=null,o.isPowerOfTwo=!1,o.mipmap=l.default.MIPMAP_TEXTURES,o.wrapMode=l.default.WRAP_MODE,o._glTextures={},o._enabled=0,o._virtalBoundId=-1,o._destroyed=!1,o.textureCacheIds=[],i&&o.loadSource(i),o}return s(t,e),t.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},t.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=d.default.isPow2(this.realWidth)&&d.default.isPow2(this.realHeight)},t.prototype.loadSource=function(e){var t=this,i=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,i&&this.source&&(this.source.onload=null,this.source.onerror=null);var n=!this.source;if(this.source=e,(e.src&&e.complete||e.getContext)&&e.width&&e.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),n&&this.emit("loaded",this);else if(!e.getContext){var r=function(){t.isLoading=!0;var n=t;if(e.onload=function(){if(n._updateImageType(),e.onload=null,e.onerror=null,n.isLoading)return n.isLoading=!1,n._sourceLoaded(),"svg"===n.imageType?void n._loadSvgSource():void n.emit("loaded",n)},e.onerror=function(){e.onload=null,e.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},e.complete&&e.src){if(e.onload=null,e.onerror=null,"svg"===n.imageType)return n._loadSvgSource(),{v:void 0};t.isLoading=!1,e.width&&e.height?(t._sourceLoaded(),i&&t.emit("loaded",t)):i&&t.emit("error",t)}}();if("object"===(void 0===r?"undefined":o(r)))return r.v}},t.prototype._updateImageType=function(){if(this.imageUrl){var e=(0,u.decomposeDataUri)(this.imageUrl),t=void 0;if(e&&"image"===e.mediaType){var i=e.subType.split("+")[0];if(!(t=(0,u.getUrlFileExtension)("."+i)))throw new Error("Invalid image type in data URI.")}else(t=(0,u.getUrlFileExtension)(this.imageUrl))||(t="png");this.imageType=t}},t.prototype._loadSvgSource=function(){if("svg"===this.imageType){var e=(0,u.decomposeDataUri)(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}},t.prototype._loadSvgSourceUsingDataUri=function(e){var t=void 0;if("base64"===e.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");t=atob(e.data)}else t=e.data;this._loadSvgSourceUsingString(t)},t.prototype._loadSvgSourceUsingXhr=function(){var e=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error("Failed to load SVG using XHR.");e._loadSvgSourceUsingString(t.response)},t.onerror=function(){return e.emit("error",e)},t.open("GET",this.imageUrl,!0),t.send()},t.prototype._loadSvgSourceUsingString=function(e){var i=(0,u.getSvgSize)(e),n=i.width,r=i.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(n*this.sourceScale),this.realHeight=Math.round(r*this.sourceScale),this._updateDimensions();var a=document.createElement("canvas");a.width=this.realWidth,a.height=this.realHeight,a._pixiId="canvas_"+(0,u.uid)(),a.getContext("2d").drawImage(this.source,0,0,n,r,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=a,t.addToCache(this,a._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},t.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},t.prototype.destroy=function(){this.imageUrl&&(delete u.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},t.fromImage=function(e,i,n,r){var a=u.BaseTextureCache[e];if(!a){var s=new Image;void 0===i&&0!==e.indexOf("data:")?s.crossOrigin=(0,c.default)(e):i&&(s.crossOrigin="string"==typeof i?i:"anonymous"),(a=new t(s,n)).imageUrl=e,r&&(a.sourceScale=r),a.resolution=(0,u.getResolutionOfUrl)(e),s.src=e,t.addToCache(a,e)}return a},t.fromCanvas=function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";e._pixiId||(e._pixiId=n+"_"+(0,u.uid)());var r=u.BaseTextureCache[e._pixiId];return r||(r=new t(e,i),t.addToCache(r,e._pixiId)),r},t.from=function(e,i,n){if("string"==typeof e)return t.fromImage(e,void 0,i,n);if(e instanceof HTMLImageElement){var r=e.src,a=u.BaseTextureCache[r];return a||(a=new t(e,i),a.imageUrl=r,n&&(a.sourceScale=n),a.resolution=(0,u.getResolutionOfUrl)(r),t.addToCache(a,r)),a}return e instanceof HTMLCanvasElement?t.fromCanvas(e,i):e},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),u.BaseTextureCache[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=u.BaseTextureCache[e];if(t){var i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete u.BaseTextureCache[e],t}}else if(e&&e.textureCacheIds){for(var n=0;n<e.textureCacheIds.length;++n)delete u.BaseTextureCache[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null},t}(h.default);i.default=p},{"../settings":100,"../utils":123,"../utils/determineCrossOrigin":122,"bit-twiddle":1,eventemitter3:3}],112:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=n(e("./BaseRenderTexture")),u=function(e){function t(i,n){r(this,t);var s=null;if(!(i instanceof o.default)){var u=arguments[1],l=arguments[2],h=arguments[3],c=arguments[4];s=arguments[0],n=null,i=new o.default(u,l,h,c)}var d=a(this,e.call(this,i,n));return d.legacyRenderer=s,d.valid=!0,d._updateUvs(),d}return s(t,e),t.prototype.resize=function(e,t,i){this.valid=e>0&&t>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,i||this.baseTexture.resize(e,t),this._updateUvs()},t.create=function(e,i,n,r){return new t(new o.default(e,i,n,r))},t}(n(e("./Texture")).default);i.default=u},{"./BaseRenderTexture":110,"./Texture":114}],113:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("../"),s=e("../utils"),o=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,e),this.baseTexture=t,this.textures={},this.data=i,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(e,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),e.prototype._updateResolution=function(e){var t=this.data.meta.scale,i=(0,s.getResolutionOfUrl)(e,null);return null===i&&(i=void 0!==t?parseFloat(t):1),1!==i&&(this.baseTexture.resolution=i,this.baseTexture.update()),i},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var i=t,n=e.BATCH_SIZE;i-t<n&&i<this._frameKeys.length;){var r=this._frameKeys[i],s=this._frames[r].frame;if(s){var o=null,u=null,l=new a.Rectangle(0,0,this._frames[r].sourceSize.w/this.resolution,this._frames[r].sourceSize.h/this.resolution);o=this._frames[r].rotated?new a.Rectangle(s.x/this.resolution,s.y/this.resolution,s.h/this.resolution,s.w/this.resolution):new a.Rectangle(s.x/this.resolution,s.y/this.resolution,s.w/this.resolution,s.h/this.resolution),this._frames[r].trimmed&&(u=new a.Rectangle(this._frames[r].spriteSourceSize.x/this.resolution,this._frames[r].spriteSourceSize.y/this.resolution,s.w/this.resolution,s.h/this.resolution)),this.textures[r]=new a.Texture(this.baseTexture,o,l,u,this._frames[r].rotated?2:0),a.Texture.addToCache(this.textures[r],r)}i++}},e.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():t._parseComplete()},0)},e.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&this.baseTexture.destroy(),this.baseTexture=null},e}();i.default=o},{"../":64,"../utils":123}],114:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}i.__esModule=!0;var u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=n(e("./BaseTexture")),h=n(e("./VideoBaseTexture")),c=n(e("./TextureUvs")),d=n(e("eventemitter3")),p=e("../math"),f=e("../utils"),g=n(e("../settings")),m=function(e){function t(i,n,s,o,u){r(this,t);var l=a(this,e.call(this));if(l.noFrame=!1,n||(l.noFrame=!0,n=new p.Rectangle(0,0,1,1)),i instanceof t&&(i=i.baseTexture),l.baseTexture=i,l._frame=n,l.trim=o,l.valid=!1,l.requiresUpdate=!1,l._uvs=null,l.orig=s||n,l._rotate=Number(u||0),!0===u)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.hasLoaded?(l.noFrame&&(n=new p.Rectangle(0,0,i.width,i.height),i.on("update",l.onBaseTextureUpdated,l)),l.frame=n):i.once("loaded",l.onBaseTextureLoaded,l),l._updateID=0,l.transform=null,l.textureCacheIds=[],l}return s(t,e),t.prototype.update=function(){this.baseTexture.update()},t.prototype.onBaseTextureLoaded=function(e){this._updateID++,this.noFrame?this.frame=new p.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},t.prototype.onBaseTextureUpdated=function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},t.prototype.destroy=function(e){this.baseTexture&&(e&&(f.TextureCache[this.baseTexture.imageUrl]&&t.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},t.prototype._updateUvs=function(){this._uvs||(this._uvs=new c.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.fromImage=function(e,i,n,r){var a=f.TextureCache[e];return a||(a=new t(l.default.fromImage(e,i,n,r)),t.addToCache(a,e)),a},t.fromFrame=function(e){var t=f.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t},t.fromCanvas=function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new t(l.default.fromCanvas(e,i,n))},t.fromVideo=function(e,i){return"string"==typeof e?t.fromVideoUrl(e,i):new t(h.default.fromVideo(e,i))},t.fromVideoUrl=function(e,i){return new t(h.default.fromUrl(e,i))},t.from=function(e){if("string"==typeof e){var i=f.TextureCache[e];return i||(null!==e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?t.fromVideoUrl(e):t.fromImage(e))}return e instanceof HTMLImageElement?new t(l.default.from(e)):e instanceof HTMLCanvasElement?t.fromCanvas(e,g.default.SCALE_MODE,"HTMLCanvasElement"):e instanceof HTMLVideoElement?t.fromVideo(e):e instanceof l.default?new t(e):e},t.fromLoader=function(e,i,n){var r=new l.default(e,void 0,(0,f.getResolutionOfUrl)(i)),a=new t(r);return r.imageUrl=i,n||(n=i),l.default.addToCache(a.baseTexture,n),t.addToCache(a,n),n!==i&&(l.default.addToCache(a.baseTexture,i),t.addToCache(a,i)),a},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),f.TextureCache[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=f.TextureCache[e];if(t){var i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete f.TextureCache[e],t}}else if(e&&e.textureCacheIds){for(var n=0;n<e.textureCacheIds.length;++n)delete f.TextureCache[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null},u(t,[{key:"frame",get:function(){return this._frame},set:function(e){if(this._frame=e,this.noFrame=!1,e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: X: "+e.x+" + "+e.width+" > "+this.baseTexture.width+" Y: "+e.y+" + "+e.height+" > "+this.baseTexture.height);this.valid=e&&e.width&&e.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=e),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),t}(d.default);i.default=m,m.EMPTY=new m(new l.default),o(m.EMPTY),o(m.EMPTY.baseTexture),m.WHITE=function(){var e=document.createElement("canvas");e.width=10,e.height=10;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,10,10),new m(new l.default(e))}(),o(m.WHITE),o(m.WHITE.baseTexture)},{"../math":69,"../settings":100,"../utils":123,"./BaseTexture":111,"./TextureUvs":115,"./VideoBaseTexture":116,eventemitter3:3}],115:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("../math/GroupD8")),a=function(){function e(){n(this,e),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return e.prototype.set=function(e,t,i){var n=t.width,a=t.height;if(i){var s=e.width/2/n,o=e.height/2/a,u=e.x/n+s,l=e.y/a+o;i=r.default.add(i,r.default.NW),this.x0=u+s*r.default.uX(i),this.y0=l+o*r.default.uY(i),i=r.default.add(i,2),this.x1=u+s*r.default.uX(i),this.y1=l+o*r.default.uY(i),i=r.default.add(i,2),this.x2=u+s*r.default.uX(i),this.y2=l+o*r.default.uY(i),i=r.default.add(i,2),this.x3=u+s*r.default.uX(i),this.y3=l+o*r.default.uY(i)}else this.x0=e.x/n,this.y0=e.y/a,this.x1=(e.x+e.width)/n,this.y1=e.y/a,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/a,this.x3=e.x/n,this.y3=(e.y+e.height)/a;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},e}();i.default=a},{"../math/GroupD8":65}],116:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){t||(t="video/"+e.substr(e.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=e,i.type=t,i}i.__esModule=!0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=function(e){return e&&e.__esModule?e:{default:e}}(e("./BaseTexture")),l=e("../utils"),h=e("../ticker"),c=e("../const"),d=function(e){function t(i,a){if(n(this,t),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var s=r(this,e.call(this,i,a));return s.width=i.videoWidth,s.height=i.videoHeight,s._autoUpdate=!0,s._isAutoUpdating=!1,s.autoPlay=!0,s.update=s.update.bind(s),s._onCanPlay=s._onCanPlay.bind(s),i.addEventListener("play",s._onPlayStart.bind(s)),i.addEventListener("pause",s._onPlayStop.bind(s)),s.hasLoaded=!1,s.__loaded=!1,s._isSourceReady()?s._onCanPlay():(i.addEventListener("canplay",s._onCanPlay),i.addEventListener("canplaythrough",s._onCanPlay)),s}return a(t,e),t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},t.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},t.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(h.shared.add(this.update,this,c.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},t.prototype._onPlayStop=function(){this._isAutoUpdating&&(h.shared.remove(this.update,this),this._isAutoUpdating=!1)},t.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},t.prototype.destroy=function(){this._isAutoUpdating&&h.shared.remove(this.update,this),this.source&&this.source._pixiId&&(u.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),e.prototype.destroy.call(this)},t.fromVideo=function(e,i){e._pixiId||(e._pixiId="video_"+(0,l.uid)());var n=l.BaseTextureCache[e._pixiId];return n||(n=new t(e,i),u.default.addToCache(n,e._pixiId)),n},t.fromUrl=function(e,i){var n=document.createElement("video");if(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),Array.isArray(e))for(var r=0;r<e.length;++r)n.appendChild(s(e[r].src||e[r],e[r].mime));else n.appendChild(s(e.src||e,e.mime));return n.load(),t.fromVideo(n,i)},o(t,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(h.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(h.shared.add(this.update,this,c.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),t}(u.default);i.default=d,d.fromUrls=d.fromUrl},{"../const":45,"../ticker":119,"../utils":123,"./BaseTexture":111}],117:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=n(e("../settings")),o=e("../const"),u=n(e("./TickerListener")),l=function(){function e(){var t=this;r(this,e),this._head=new u.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/s.default.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(e,t,i))},e.prototype.addOnce=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(e,t,i,!0))},e.prototype._addListener=function(e){var t=this._head.next,i=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}else e.connect(i);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var i=this._head.next;i;)i=i.match(e,t)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null},e.prototype.update=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),t=void 0;if(e>this.lastTime){(t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*s.default.TARGET_FPMS*this.speed;for(var i=this._head,n=i.next;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=e},a(e,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,s.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),e}();i.default=l},{"../const":45,"../settings":100,"./TickerListener":118}],118:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n(this,e),this.fn=t,this.context=i,this.priority=r,this.once=a,this.next=null,this.previous=null,this._destroyed=!1}return e.prototype.match=function(e,t){return t=t||null,this.fn===e&&this.context===t},e.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},e.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.previous;return this.next=e?null:t,this.previous=null,t},e}();i.default=r},{}],119:[function(e,t,i){"use strict";i.__esModule=!0,i.Ticker=i.shared=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./Ticker")),r=new n.default;r.autoStart=!0,r.destroy=function(){},i.shared=r,i.Ticker=n.default},{"./Ticker":117}],120:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],121:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e){for(var t=6*e,i=new Uint16Array(t),n=0,r=0;n<t;n+=6,r+=4)i[n+0]=r+0,i[n+1]=r+1,i[n+2]=r+2,i[n+3]=r+0,i[n+4]=r+2,i[n+5]=r+3;return i}},{}],122:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===e.indexOf("data:"))return"";t=t||window.location,r||(r=document.createElement("a")),r.href=e;var i=!(e=n.default.parse(r.href)).port&&""===t.port||e.port===t.port;return e.hostname===t.hostname&&i&&e.protocol===t.protocol?"":"anonymous"};var n=function(e){return e&&e.__esModule?e:{default:e}}(e("url")),r=void 0},{url:28}],123:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0,i.premultiplyBlendMode=i.BaseTextureCache=i.TextureCache=i.mixins=i.pluginTarget=i.EventEmitter=i.removeItems=i.isMobile=void 0,i.uid=function(){return++p},i.hex2rgb=function(e,t){return t=t||[],t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t},i.hex2string=function(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)},i.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},i.getResolutionOfUrl=function(e,t){var i=s.default.RETINA_PREFIX.exec(e);return i?parseFloat(i[1]):void 0!==t?t:1},i.decomposeDataUri=function(e){var t=a.DATA_URI.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,encoding:t[3]?t[3].toLowerCase():void 0,data:t[4]}},i.getUrlFileExtension=function(e){var t=a.URL_FILE_EXTENSION.exec(e);if(t)return t[1].toLowerCase()},i.getSvgSize=function(e){var t=a.SVG_SIZE.exec(e),i={};return t&&(i[t[1]]=Math.round(parseFloat(t[3])),i[t[5]]=Math.round(parseFloat(t[7]))),i},i.skipHello=function(){f=!0},i.sayHello=function(e){if(!f){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["\n %c %c %c Pixi.js "+a.VERSION+" -  "+e+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("Pixi.js "+a.VERSION+" - "+e+" - http://www.pixijs.com/");f=!0}},i.isWebGLSupported=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),n=!(!i||!i.getContextAttributes().stencil);if(i){var r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,n}catch(e){return!1}},i.sign=function(e){return 0===e?0:e<0?-1:1},i.destroyTextureCache=function(){var e=void 0;for(e in g)g[e].destroy();for(e in m)m[e].destroy()},i.clearTextureCache=function(){var e=void 0;for(e in g)delete g[e];for(e in m)delete m[e]},i.correctBlendMode=function(e,t){return v[t?1:0][e]},i.premultiplyTint=function(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var i=e>>16&255,n=e>>8&255,r=255&e;return i=i*t+.5|0,n=n*t+.5|0,r=r*t+.5|0,(255*t<<24)+(i<<16)+(n<<8)+r},i.premultiplyRgba=function(e,t,i,n){return i=i||new Float32Array(4),n||void 0===n?(i[0]=e[0]*t,i[1]=e[1]*t,i[2]=e[2]*t):(i[0]=e[0],i[1]=e[1],i[2]=e[2]),i[3]=t,i},i.premultiplyTintToRgba=function(e,t,i,n){return i=i||new Float32Array(4),i[0]=(e>>16&255)/255,i[1]=(e>>8&255)/255,i[2]=(255&e)/255,(n||void 0===n)&&(i[0]*=t,i[1]*=t,i[2]*=t),i[3]=t,i};var a=e("../const"),s=r(e("../settings")),o=r(e("eventemitter3")),u=r(e("./pluginTarget")),l=n(e("./mixin")),h=n(e("ismobilejs")),c=r(e("remove-array-items")),d=r(e("./mapPremultipliedBlendModes")),p=0,f=!1;i.isMobile=h,i.removeItems=c.default,i.EventEmitter=o.default,i.pluginTarget=u.default,i.mixins=l;var g=i.TextureCache=Object.create(null),m=i.BaseTextureCache=Object.create(null),v=i.premultiplyBlendMode=(0,d.default)()},{"../const":45,"../settings":100,"./mapPremultipliedBlendModes":124,"./mixin":126,"./pluginTarget":127,eventemitter3:3,ismobilejs:4,"remove-array-items":30}],124:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(){for(var e=[],t=[],i=0;i<32;i++)e[i]=i,t[i]=i;e[n.BLEND_MODES.NORMAL_NPM]=n.BLEND_MODES.NORMAL,e[n.BLEND_MODES.ADD_NPM]=n.BLEND_MODES.ADD,e[n.BLEND_MODES.SCREEN_NPM]=n.BLEND_MODES.SCREEN,t[n.BLEND_MODES.NORMAL]=n.BLEND_MODES.NORMAL_NPM,t[n.BLEND_MODES.ADD]=n.BLEND_MODES.ADD_NPM,t[n.BLEND_MODES.SCREEN]=n.BLEND_MODES.SCREEN_NPM;var r=[];return r.push(t),r.push(e),r};var n=e("../const")},{"../const":45}],125:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e){return n.default.tablet||n.default.phone?4:e};var n=function(e){return e&&e.__esModule?e:{default:e}}(e("ismobilejs"))},{ismobilejs:4}],126:[function(e,t,i){"use strict";function n(e,t){if(e&&t)for(var i=Object.keys(t),n=0;n<i.length;++n){var r=i[n];Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}}i.__esModule=!0,i.mixin=n,i.delayMixin=function(e,t){r.push(e,t)},i.performMixins=function(){for(var e=0;e<r.length;e+=2)n(r[e],r[e+1]);r.length=0};var r=[]},{}],127:[function(e,t,i){"use strict";function n(e){e.__plugins={},e.registerPlugin=function(t,i){e.__plugins[t]=i},e.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var t in e.__plugins)this.plugins[t]=new e.__plugins[t](this)},e.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}i.__esModule=!0,i.default={mixin:function(e){n(e)}}},{}],128:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e){var t=e.width,i=e.height,n=e.getContext("2d"),r=n.getImageData(0,0,t,i).data,a=r.length,s={top:null,left:null,right:null,bottom:null},o=void 0,u=void 0,l=void 0;for(o=0;o<a;o+=4)0!==r[o+3]&&(u=o/4%t,l=~~(o/4/t),null===s.top&&(s.top=l),null===s.left?s.left=u:u<s.left&&(s.left=u),null===s.right?s.right=u+1:s.right<u&&(s.right=u+1),null===s.bottom?s.bottom=l:s.bottom<l&&(s.bottom=l));return t=s.right-s.left,{height:i=s.bottom-s.top+1,width:t,data:n.getImageData(s.left,s.top,t,i)}}},{}],129:[function(e,t,i){"use strict";function n(e){}i.__esModule=!0,i.default=function(e){var t=e.mesh,i=e.particles,r=e.extras,a=e.filters,s=e.prepare,o=e.loaders,u=e.interaction;Object.defineProperties(e,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return n("You do not need to use a PIXI Stage any more, you can simply render any container."),e.Container}},DisplayObjectContainer:{get:function(){return n("DisplayObjectContainer has been shortened to Container, please use Container from now on."),e.Container}},Strip:{get:function(){return n("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),t.Mesh}},Rope:{get:function(){return n("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),t.Rope}},ParticleContainer:{get:function(){return n("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),i.ParticleContainer}},MovieClip:{get:function(){return n("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),r.AnimatedSprite}},TilingSprite:{get:function(){return n("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),r.TilingSprite}},BitmapText:{get:function(){return n("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),r.BitmapText}},blendModes:{get:function(){return n("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),e.BLEND_MODES}},scaleModes:{get:function(){return n("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),e.SCALE_MODES}},BaseTextureCache:{get:function(){return n("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),e.utils.BaseTextureCache}},TextureCache:{get:function(){return n("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),e.utils.TextureCache}},math:{get:function(){return n("The math namespace is deprecated, please access members already accessible on PIXI."),e}},AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.Filter}},TransformManual:{get:function(){return n("TransformManual has been renamed to TransformBase, please update your pixi-spine"),e.TransformBase}},TARGET_FPMS:{get:function(){return n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS},set:function(t){n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION},set:function(t){n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION},set:function(t){n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES},set:function(t){n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE},set:function(t){n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES},set:function(t){n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX},set:function(t){n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return n("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),e.settings.RENDER_OPTIONS}}});for(var l=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],h=function(t){var i=l[t];Object.defineProperty(e[i.parent],"DEFAULT",{get:function(){return n("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),e.settings[i.target]},set:function(t){n("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),e.settings[i.target]=t}})},c=0;c<l.length;c++)h(c);Object.defineProperties(e.settings,{PRECISION:{get:function(){return n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT},set:function(t){n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT=t}}}),r.AnimatedSprite&&Object.defineProperties(r,{MovieClip:{get:function(){return n("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),r.AnimatedSprite}}}),e.DisplayObject.prototype.generateTexture=function(e,t,i){return n("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),e.generateTexture(this,t,i)},e.Graphics.prototype.generateTexture=function(e,t){return n("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(e,t)},e.RenderTexture.prototype.render=function(e,t,i,r){this.legacyRenderer.render(e,this,i,t,!r),n("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},e.RenderTexture.prototype.getImage=function(e){return n("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(e)},e.RenderTexture.prototype.getBase64=function(e){return n("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(e)},e.RenderTexture.prototype.getCanvas=function(e){return n("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(e)},e.RenderTexture.prototype.getPixels=function(e){return n("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(e)},e.Sprite.prototype.setTexture=function(e){this.texture=e,n("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},r.BitmapText&&(r.BitmapText.prototype.setText=function(e){this.text=e,n("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),e.Text.prototype.setText=function(e){this.text=e,n("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},e.Text.calculateFontProperties=function(t){return n("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),e.TextMetrics.measureFont(t)},Object.defineProperties(e.Text,{fontPropertiesCache:{get:function(){return n("Text.fontPropertiesCache is deprecated"),e.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return n("Text.fontPropertiesCanvas is deprecated"),e.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return n("Text.fontPropertiesContext is deprecated"),e.TextMetrics._context}}}),e.Text.prototype.setStyle=function(e){this.style=e,n("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},e.Text.prototype.determineFontProperties=function(t){return n("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),e.TextMetrics.measureFont(t)},e.Text.getFontStyle=function(t){return n("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(t=t||{})instanceof e.TextStyle||(t=new e.TextStyle(t)),t.toFontString()},Object.defineProperties(e.TextStyle.prototype,{font:{get:function(){n("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var e="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+e+" "+this._fontFamily},set:function(e){n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),e.indexOf("italic")>1?this._fontStyle="italic":e.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",e.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var t=e.split(" "),i=-1;this._fontSize=26;for(var r=0;r<t.length;++r)if(t[r].match(/(px|pt|em|%)/)){i=r,this._fontSize=t[r];break}this._fontWeight="normal";for(var a=0;a<i;++a)if(t[a].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=t[a];break}if(i>-1&&i<t.length-1){this._fontFamily="";for(var s=i+1;s<t.length;++s)this._fontFamily+=t[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),e.Texture.prototype.setFrame=function(e){this.frame=e,n("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},e.Texture.addTextureToCache=function(t,i){e.Texture.addToCache(t,i),n("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},e.Texture.removeTextureFromCache=function(t){return n("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),e.BaseTexture.removeFromCache(t),e.Texture.removeFromCache(t)},Object.defineProperties(a,{AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.AbstractFilter}},SpriteMaskFilter:{get:function(){return n("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),e.SpriteMaskFilter}}}),e.utils.uuid=function(){return n("utils.uuid() is deprecated, please use utils.uid() from now on."),e.utils.uid()},e.utils.canUseNewCanvasBlendModes=function(){return n("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),e.CanvasTinter.canUseMultiply};var d=!0;Object.defineProperty(e.utils,"_saidHello",{set:function(e){e&&(n("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),d=e},get:function(){return d}}),s.BasePrepare&&(s.BasePrepare.prototype.register=function(e,t){return n("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),e&&this.registerFindHook(e),t&&this.registerUploadHook(t),this}),s.canvas&&Object.defineProperty(s.canvas,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),s.webgl&&Object.defineProperty(s.webgl,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),o.Loader&&function(){var e=o.Resource,t=o.Loader;Object.defineProperties(e.prototype,{isJson:{get:function(){return n("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===e.TYPE.JSON}},isXml:{get:function(){return n("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===e.TYPE.XML}},isImage:{get:function(){return n("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===e.TYPE.IMAGE}},isAudio:{get:function(){return n("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===e.TYPE.AUDIO}},isVideo:{get:function(){return n("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===e.TYPE.VIDEO}}}),Object.defineProperties(t.prototype,{before:{get:function(){return n("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return n("The after() method is deprecated, please use use()."),this.use}}})}(),u.interactiveTarget&&Object.defineProperty(u.interactiveTarget,"defaultCursor",{set:function(e){n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=e},get:function(){return n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),u.InteractionManager&&(Object.defineProperty(u.InteractionManager,"defaultCursorStyle",{set:function(e){n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=e},get:function(){return n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(u.InteractionManager,"currentCursorStyle",{set:function(e){n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=e},get:function(){return n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}},{}],130:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),a=new r.Rectangle,s=function(){function e(t){n(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var t=this.renderer,i=void 0,n=void 0,s=void 0,o=void 0;e&&(o=e instanceof r.RenderTexture?e:t.generateTexture(e)),o?(i=o.baseTexture._canvasRenderTarget.context,n=o.baseTexture._canvasRenderTarget.resolution,s=o.frame):(i=t.rootContext,s=a,s.width=this.renderer.width,s.height=this.renderer.height);var u=s.width*n,l=s.height*n,h=new r.CanvasRenderTarget(u,l),c=i.getImageData(s.x*n,s.y*n,u,l);return h.context.putImageData(c,0,0),h.canvas},e.prototype.pixels=function(e){var t=this.renderer,i=void 0,n=void 0,s=void 0,o=void 0;return e&&(o=e instanceof r.RenderTexture?e:t.generateTexture(e)),o?(i=o.baseTexture._canvasRenderTarget.context,n=o.baseTexture._canvasRenderTarget.resolution,s=o.frame):(i=t.rootContext,s=a,s.width=t.width,s.height=t.height),i.getImageData(0,0,s.width*n,s.height*n).data},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();i.default=s,r.CanvasRenderer.registerPlugin("extract",s)},{"../../core":64}],131:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0;var r=e("./webgl/WebGLExtract");Object.defineProperty(i,"webgl",{enumerable:!0,get:function(){return n(r).default}});var a=e("./canvas/CanvasExtract");Object.defineProperty(i,"canvas",{enumerable:!0,get:function(){return n(a).default}})},{"./canvas/CanvasExtract":130,"./webgl/WebGLExtract":132}],132:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),a=new r.Rectangle,s=function(){function e(t){n(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var t=this.renderer,i=void 0,n=void 0,s=void 0,o=!1,u=void 0;e&&(u=e instanceof r.RenderTexture?e:this.renderer.generateTexture(e)),u?(i=u.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=i.resolution,s=u.frame,o=!1):(i=this.renderer.rootRenderTarget,n=i.resolution,o=!0,s=a,s.width=i.size.width,s.height=i.size.height);var l=s.width*n,h=s.height*n,c=new r.CanvasRenderTarget(l,h);if(i){t.bindRenderTarget(i);var d=new Uint8Array(4*l*h),p=t.gl;p.readPixels(s.x*n,s.y*n,l,h,p.RGBA,p.UNSIGNED_BYTE,d);var f=c.context.getImageData(0,0,l,h);f.data.set(d),c.context.putImageData(f,0,0),o&&(c.context.scale(1,-1),c.context.drawImage(c.canvas,0,-h))}return c.canvas},e.prototype.pixels=function(e){var t=this.renderer,i=void 0,n=void 0,s=void 0,o=void 0;e&&(o=e instanceof r.RenderTexture?e:this.renderer.generateTexture(e)),o?(i=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=i.resolution,s=o.frame):(i=this.renderer.rootRenderTarget,n=i.resolution,s=a,s.width=i.size.width,s.height=i.size.height);var u=s.width*n,l=s.height*n,h=new Uint8Array(4*u*l);if(i){t.bindRenderTarget(i);var c=t.gl;c.readPixels(s.x*n,s.y*n,u,l,c.RGBA,c.UNSIGNED_BYTE,h)}return h},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();i.default=s,r.WebGLRenderer.registerPlugin("extract",s)},{"../../core":64}],133:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../core")),u=function(e){function t(i,a){n(this,t);var s=r(this,e.call(this,i[0]instanceof o.Texture?i[0]:i[0].texture));return s._textures=null,s._durations=null,s.textures=i,s._autoUpdate=!1!==a,s.animationSpeed=1,s.loop=!0,s.onComplete=null,s.onFrameChange=null,s.onLoop=null,s._currentTime=0,s.playing=!1,s}return a(t,e),t.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&o.ticker.shared.remove(this.update,this))},t.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&o.ticker.shared.add(this.update,this,o.UPDATE_PRIORITY.HIGH))},t.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){var t=this.animationSpeed*e,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=t/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},t.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},t.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t)},t.fromFrames=function(e){for(var i=[],n=0;n<e.length;++n)i.push(o.Texture.fromFrame(e[n]));return new t(i)},t.fromImages=function(e){for(var i=[],n=0;n<e.length;++n)i.push(o.Texture.fromImage(e[n]));return new t(i)},s(t,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(e){if(e[0]instanceof o.Texture)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}}]),t}(o.Sprite);i.default=u},{"../core":64}],134:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../core")),l=n(e("../core/math/ObservablePoint")),h=n(e("../core/settings")),c=function(e){function t(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var s=a(this,e.call(this));return s._textWidth=0,s._textHeight=0,s._glyphs=[],s._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},s.font=n.font,s._text=i,s._maxWidth=0,s._maxLineHeight=0,s._anchor=new l.default(function(){s.dirty=!0},s,0,0),s.dirty=!1,s.updateText(),s}return s(t,e),t.prototype.updateText=function(){for(var e=t.fonts[this._font.name],i=this._font.size/e.size,n=new u.Point,r=[],a=[],s=null,o=0,l=0,h=0,c=-1,d=0,p=0,f=0,g=0;g<this.text.length;g++){var m=this.text.charCodeAt(g);if(/(\s)/.test(this.text.charAt(g))&&(c=g,d=o),/(?:\r\n|\r|\n)/.test(this.text.charAt(g)))a.push(o),l=Math.max(l,o),h++,n.x=0,n.y+=e.lineHeight,s=null;else if(-1!==c&&this._maxWidth>0&&n.x*i>this._maxWidth)u.utils.removeItems(r,c-p,g-c),g=c,c=-1,++p,a.push(d),l=Math.max(l,d),h++,n.x=0,n.y+=e.lineHeight,s=null;else{var v=e.chars[m];v&&(s&&v.kerning[s]&&(n.x+=v.kerning[s]),r.push({texture:v.texture,line:h,charCode:m,position:new u.Point(n.x+v.xOffset,n.y+v.yOffset)}),o=n.x+(v.texture.width+v.xOffset),n.x+=v.xAdvance,f=Math.max(f,v.yOffset+v.texture.height),s=m)}}a.push(o),l=Math.max(l,o);for(var y=[],b=0;b<=h;b++){var _=0;"right"===this._font.align?_=l-a[b]:"center"===this._font.align&&(_=(l-a[b])/2),y.push(_)}for(var w=r.length,x=this.tint,T=0;T<w;T++){var S=this._glyphs[T];S?S.texture=r[T].texture:(S=new u.Sprite(r[T].texture),this._glyphs.push(S)),S.position.x=(r[T].position.x+y[r[T].line])*i,S.position.y=r[T].position.y*i,S.scale.x=S.scale.y=i,S.tint=x,S.parent||this.addChild(S)}for(var I=w;I<this._glyphs.length;++I)this.removeChild(this._glyphs[I]);if(this._textWidth=l*i,this._textHeight=(n.y+e.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var P=0;P<w;P++)this._glyphs[P].x-=this._textWidth*this.anchor.x,this._glyphs[P].y-=this._textHeight*this.anchor.y;this._maxLineHeight=f*i},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},t.registerFont=function(e,i){var n={},r=e.getElementsByTagName("info")[0],a=e.getElementsByTagName("common")[0],s=i.baseTexture.resolution||h.default.RESOLUTION;n.font=r.getAttribute("face"),n.size=parseInt(r.getAttribute("size"),10),n.lineHeight=parseInt(a.getAttribute("lineHeight"),10)/s,n.chars={};for(var o=e.getElementsByTagName("char"),l=0;l<o.length;l++){var c=o[l],d=parseInt(c.getAttribute("id"),10),p=new u.Rectangle(parseInt(c.getAttribute("x"),10)/s+i.frame.x/s,parseInt(c.getAttribute("y"),10)/s+i.frame.y/s,parseInt(c.getAttribute("width"),10)/s,parseInt(c.getAttribute("height"),10)/s);n.chars[d]={xOffset:parseInt(c.getAttribute("xoffset"),10)/s,yOffset:parseInt(c.getAttribute("yoffset"),10)/s,xAdvance:parseInt(c.getAttribute("xadvance"),10)/s,kerning:{},texture:new u.Texture(i.baseTexture,p)}}for(var f=e.getElementsByTagName("kerning"),g=0;g<f.length;g++){var m=f[g],v=parseInt(m.getAttribute("first"),10)/s,y=parseInt(m.getAttribute("second"),10)/s,b=parseInt(m.getAttribute("amount"),10)/s;n.chars[y]&&(n.chars[y].kerning[v]=b)}return t.fonts[n.font]=n,n},o(t,[{key:"tint",get:function(){return this._font.tint},set:function(e){this._font.tint="number"==typeof e&&e>=0?e:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(e){this._font.align=e||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copy(e)}},{key:"font",get:function(){return this._font},set:function(e){e&&("string"==typeof e?(e=e.split(" "),this._font.name=1===e.length?e[0]:e.slice(1).join(" "),this._font.size=e.length>=2?parseInt(e[0],10):t.fonts[this._font.name].size):(this._font.name=e.name,this._font.size="number"==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),t}(u.Container);i.default=c,c.fonts={}},{"../core":64,"../core/math/ObservablePoint":67,"../core/settings":100}],135:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(e("../core/math/Matrix")),s=new a.default,o=function(){function e(t,i){n(this,e),this._texture=t,this.mapCoord=new a.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===i?.5:i}return e.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var i=this.mapCoord,n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];t[n]=r*i.a+a*i.c+i.tx,t[n+1]=r*i.b+a*i.d+i.ty}return t},e.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._lastTextureID===t._updateID)return!1;this._lastTextureID=t._updateID;var i=t._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=t.orig,r=t.trim;r&&(s.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(s));var a=t.baseTexture,o=this.uClampFrame,u=this.clampMargin/a.resolution,l=this.clampOffset;return o[0]=(t._frame.x+u+l)/a.width,o[1]=(t._frame.y+u+l)/a.height,o[2]=(t._frame.x+t._frame.width-u+l)/a.width,o[3]=(t._frame.y+t._frame.height-u+l)/a.height,this.uClampOffset[0]=l/a.realWidth,this.uClampOffset[1]=l/a.realHeight,!0},r(e,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this._lastTextureID=-1}}]),e}();i.default=o},{"../core/math/Matrix":66}],136:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../core")),l=n(e("../core/sprites/canvas/CanvasTinter")),h=n(e("./TextureTransform")),c=new u.Point,d=function(e){function t(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;r(this,t);var o=a(this,e.call(this,i));return o.tileTransform=new u.TransformStatic,o._width=n,o._height=s,o._canvasPattern=null,o.uvTransform=i.transform||new h.default(i),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return s(t,e),t.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},t.prototype._renderWebGL=function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._renderCanvas=function(e){var t=this._texture;if(t.baseTexture.hasLoaded){var i=e.context,n=this.worldTransform,r=e.resolution,a=t.baseTexture,s=a.resolution,o=this.tilePosition.x/this.tileScale.x%t._frame.width*s,h=this.tilePosition.y/this.tileScale.y%t._frame.height*s;if(!this._canvasPattern){var c=new u.CanvasRenderTarget(t._frame.width,t._frame.height,s);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=l.default.getTintedTexture(this,this.tint)),c.context.drawImage(this.tintedTexture,0,0)):c.context.drawImage(a.source,-t._frame.x*s,-t._frame.y*s),this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),e.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.scale(this.tileScale.x/s,this.tileScale.y/s);var d=this.anchor.x*-this._width,p=this.anchor.y*-this._height;this.uvRespectAnchor?(i.translate(o,h),i.fillRect(-o+d,-h+p,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)):(i.translate(o+d,h+p),i.fillRect(-o,-h,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s))}},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,i,n)},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),t||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,c);var t=this._width,i=this._height,n=-t*this.anchor._x;if(c.x>=n&&c.x<n+t){var r=-i*this.anchor._y;if(c.y>=r&&c.y<r+i)return!0}return!1},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvTransform=null},t.from=function(e,i,n){return new t(u.Texture.from(e),i,n)},t.fromFrame=function(e,i,n){var r=u.utils.TextureCache[e];if(!r)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return new t(r,i,n)},t.fromImage=function(e,i,n,r,a){return new t(u.Texture.fromImage(e,r,a),i,n)},o(t,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(e){this.uvTransform.clampMargin=e,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copy(e)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copy(e)}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}]),t}(u.Sprite);i.default=d},{"../core":64,"../core/sprites/canvas/CanvasTinter":103,"./TextureTransform":135}],137:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../core")),s=n(e("../core/textures/Texture")),o=n(e("../core/textures/BaseTexture")),u=e("../core/utils"),l=a.DisplayObject,h=new a.Matrix;l.prototype._cacheAsBitmap=!1,l.prototype._cacheData=!1;var c=function e(){r(this,e),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(l.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var t=void 0;e?(this._cacheData||(this._cacheData=new c),t=this._cacheData,t.originalRenderWebGL=this.renderWebGL,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this._calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=t.originalRenderWebGL,this.renderCanvas=t.originalRenderCanvas,this._calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}}),l.prototype._renderCachedWebGL=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(e))},l.prototype._initCachedDisplayObject=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,e.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters){var n=this._filters[0].padding;i.pad(n)}var r=e._activeRenderTarget,l=e.filterManager.filterStack,c=a.RenderTexture.create(0|i.width,0|i.height),d="cacheAsBitmap_"+(0,u.uid)();this._cacheData.textureCacheId=d,o.default.addToCache(c.baseTexture,d),s.default.addToCache(c,d);var p=h;p.tx=-i.x,p.ty=-i.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,e.render(this,c,!0,p,!0),e.bindRenderTarget(r),e.filterManager.filterStack=l,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var f=new a.Sprite(c);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-i.x/i.width,f.anchor.y=-i.y/i.height,f.alpha=t,f._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=f.containsPoint.bind(f)}},l.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(e))},l.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(),i=this.alpha;this.alpha=1;var n=e.context,r=a.RenderTexture.create(0|t.width,0|t.height),l="cacheAsBitmap_"+(0,u.uid)();this._cacheData.textureCacheId=l,o.default.addToCache(r.baseTexture,l),s.default.addToCache(r,l);var c=h;this.transform.localTransform.copy(c),c.invert(),c.tx-=t.x,c.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,r,!0,c,!1),e.context=n,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var d=new a.Sprite(r);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-t.x/t.width,d.anchor.y=-t.y/t.height,d._bounds=this._bounds,d.alpha=i,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=d,this.containsPoint=d.containsPoint.bind(d)}},l.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},l.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},l.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,o.default.removeFromCache(this._cacheData.textureCacheId),s.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},l.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)}},{"../core":64,"../core/textures/BaseTexture":111,"../core/textures/Texture":114,"../core/utils":123}],138:[function(e,t,i){"use strict";var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../core"));n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null}},{"../core":64}],139:[function(e,t,i){"use strict";var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../core"));n.DisplayObject.prototype.getGlobalPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n.Point,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e}},{"../core":64}],140:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0,i.BitmapText=i.TilingSpriteRenderer=i.TilingSprite=i.TextureTransform=i.AnimatedSprite=void 0;var r=e("./AnimatedSprite");Object.defineProperty(i,"AnimatedSprite",{enumerable:!0,get:function(){return n(r).default}});var a=e("./TextureTransform");Object.defineProperty(i,"TextureTransform",{enumerable:!0,get:function(){return n(a).default}});var s=e("./TilingSprite");Object.defineProperty(i,"TilingSprite",{enumerable:!0,get:function(){return n(s).default}});var o=e("./webgl/TilingSpriteRenderer");Object.defineProperty(i,"TilingSpriteRenderer",{enumerable:!0,get:function(){return n(o).default}});var u=e("./BitmapText");Object.defineProperty(i,"BitmapText",{enumerable:!0,get:function(){return n(u).default}}),e("./cacheAsBitmap"),e("./getChildByName"),e("./getGlobalPosition")},{"./AnimatedSprite":133,"./BitmapText":134,"./TextureTransform":135,"./TilingSprite":136,"./cacheAsBitmap":137,"./getChildByName":138,"./getGlobalPosition":139,"./webgl/TilingSpriteRenderer":141}],141:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),o=e("../../core/const"),u=(e("path"),new s.Matrix),l=function(e){function t(i){n(this,t);var a=r(this,e.call(this,i));return a.shader=null,a.simpleShader=null,a.quad=null,a}return a(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new s.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n    gl_FragColor = sample * color ;\n}\n"),this.simpleShader=new s.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n    gl_FragColor = sample * color;\n}\n"),this.renderer.bindVao(null),this.quad=new s.Quad(e,this.renderer.state.attribState),this.quad.initVao(this.shader)},t.prototype.render=function(e){var t=this.renderer,i=this.quad;t.bindVao(i.vao);var n=i.vertices;n[0]=n[6]=e._width*-e.anchor.x,n[1]=n[3]=e._height*-e.anchor.y,n[2]=n[4]=e._width*(1-e.anchor.x),n[5]=n[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&(n=i.uvs,n[0]=n[6]=-e.anchor.x,n[1]=n[3]=-e.anchor.y,n[2]=n[4]=1-e.anchor.x,n[5]=n[7]=1-e.anchor.y),i.upload();var r=e._texture,a=r.baseTexture,l=e.tileTransform.localTransform,h=e.uvTransform,c=a.isPowerOfTwo&&r.frame.width===a.width&&r.frame.height===a.height;c&&(a._glTextures[t.CONTEXT_UID]?c=a.wrapMode!==o.WRAP_MODES.CLAMP:a.wrapMode===o.WRAP_MODES.CLAMP&&(a.wrapMode=o.WRAP_MODES.REPEAT));var d=c?this.simpleShader:this.shader;t.bindShader(d);var p=r.width,f=r.height,g=e._width,m=e._height;u.set(l.a*p/g,l.b*p/m,l.c*f/g,l.d*f/m,l.tx/g,l.ty/m),u.invert(),c?u.prepend(h.mapCoord):(d.uniforms.uMapCoord=h.mapCoord.toArray(!0),d.uniforms.uClampFrame=h.uClampFrame,d.uniforms.uClampOffset=h.uClampOffset),d.uniforms.uTransform=u.toArray(!0),d.uniforms.uColor=s.utils.premultiplyTintToRgba(e.tint,e.worldAlpha,d.uniforms.uColor,a.premultipliedAlpha),d.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),d.uniforms.uSampler=t.bindTexture(r),t.setBlendMode(s.utils.correctBlendMode(e.blendMode,a.premultipliedAlpha)),i.vao.draw(this.renderer.gl.TRIANGLES,6,0)},t}(s.ObjectRenderer);i.default=l,s.WebGLRenderer.registerPlugin("tilingSprite",l)},{"../../core":64,"../../core/const":45,path:22}],142:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),l=n(e("./BlurXFilter")),h=n(e("./BlurYFilter")),c=function(e){function t(i,n,s,o){r(this,t);var c=a(this,e.call(this));return c.blurXFilter=new l.default(i,n,s,o),c.blurYFilter=new h.default(i,n,s,o),c.padding=0,c.resolution=s||u.settings.RESOLUTION,c.quality=n||4,c.blur=i||8,c}return s(t,e),t.prototype.apply=function(e,t,i){var n=e.getRenderTarget(!0);this.blurXFilter.apply(e,t,n,!0),this.blurYFilter.apply(e,n,i,!1),e.returnRenderTarget(n)},o(t,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),t}(u.Filter);i.default=c},{"../../core":64,"./BlurXFilter":143,"./BlurYFilter":144}],143:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),l=n(e("./generateBlurVertSource")),h=n(e("./generateBlurFragSource")),c=n(e("./getMaxBlurKernelSize")),d=function(e){function t(i,n,s,o){r(this,t),o=o||5;var c=(0,l.default)(o,!0),d=(0,h.default)(o),p=a(this,e.call(this,c,d));return p.resolution=s||u.settings.RESOLUTION,p._quality=0,p.quality=n||4,p.strength=i||8,p.firstRun=!0,p}return s(t,e),t.prototype.apply=function(e,t,i,n){if(this.firstRun){var r=e.renderer.gl,a=(0,c.default)(r);this.vertexSrc=(0,l.default)(a,!0),this.fragmentSrc=(0,h.default)(a),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/t.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,i,n);else{for(var s=e.getRenderTarget(!0),o=t,u=s,d=0;d<this.passes-1;d++){e.applyFilter(this,o,u,!0);var p=u;u=o,o=p}e.applyFilter(this,o,i,n),e.returnRenderTarget(s)}},o(t,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(u.Filter);i.default=d},{"../../core":64,"./generateBlurFragSource":145,"./generateBlurVertSource":146,"./getMaxBlurKernelSize":147}],144:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),l=n(e("./generateBlurVertSource")),h=n(e("./generateBlurFragSource")),c=n(e("./getMaxBlurKernelSize")),d=function(e){function t(i,n,s,o){r(this,t),o=o||5;var c=(0,l.default)(o,!1),d=(0,h.default)(o),p=a(this,e.call(this,c,d));return p.resolution=s||u.settings.RESOLUTION,p._quality=0,p.quality=n||4,p.strength=i||8,p.firstRun=!0,p}return s(t,e),t.prototype.apply=function(e,t,i,n){if(this.firstRun){var r=e.renderer.gl,a=(0,c.default)(r);this.vertexSrc=(0,l.default)(a,!1),this.fragmentSrc=(0,h.default)(a),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/t.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,i,n);else{for(var s=e.getRenderTarget(!0),o=t,u=s,d=0;d<this.passes-1;d++){e.applyFilter(this,o,u,!0);var p=u;u=o,o=p}e.applyFilter(this,o,i,n),e.returnRenderTarget(s)}},o(t,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(u.Filter);i.default=d},{"../../core":64,"./generateBlurFragSource":145,"./generateBlurVertSource":146,"./getMaxBlurKernelSize":147}],145:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e){for(var t=n[e],i=t.length,a=r,s="",o=void 0,u=0;u<e;u++){var l="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",u);o=u,u>=i&&(o=e-u-1),s+=l=l.replace("%value%",t[o]),s+="\n"}return a=a.replace("%blur%",s),a=a.replace("%size%",e)};var n={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},r=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],146:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e,t){var i=Math.ceil(e/2),r=n,a="",s=void 0;s=t?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<e;o++){var u=s.replace("%index%",o);a+=u=u.replace("%sampleIndex%",o-(i-1)+".0"),a+="\n"}return r=r.replace("%blur%",a),r=r.replace("%size%",e)};var n=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],147:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e){for(var t=e.getParameter(e.MAX_VARYING_VECTORS),i=15;i>t;)i-=2;return i}},{}],148:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),u=(e("path"),function(e){function t(){n(this,t);var i=r(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return i.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i.alpha=1,i}return a(t,e),t.prototype._loadMatrix=function(e){var t=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(t,this.uniforms.m,e),t=this._colorMatrix(t)),this.uniforms.m=t},t.prototype._multiply=function(e,t,i){return e[0]=t[0]*i[0]+t[1]*i[5]+t[2]*i[10]+t[3]*i[15],e[1]=t[0]*i[1]+t[1]*i[6]+t[2]*i[11]+t[3]*i[16],e[2]=t[0]*i[2]+t[1]*i[7]+t[2]*i[12]+t[3]*i[17],e[3]=t[0]*i[3]+t[1]*i[8]+t[2]*i[13]+t[3]*i[18],e[4]=t[0]*i[4]+t[1]*i[9]+t[2]*i[14]+t[3]*i[19]+t[4],e[5]=t[5]*i[0]+t[6]*i[5]+t[7]*i[10]+t[8]*i[15],e[6]=t[5]*i[1]+t[6]*i[6]+t[7]*i[11]+t[8]*i[16],e[7]=t[5]*i[2]+t[6]*i[7]+t[7]*i[12]+t[8]*i[17],e[8]=t[5]*i[3]+t[6]*i[8]+t[7]*i[13]+t[8]*i[18],e[9]=t[5]*i[4]+t[6]*i[9]+t[7]*i[14]+t[8]*i[19]+t[9],e[10]=t[10]*i[0]+t[11]*i[5]+t[12]*i[10]+t[13]*i[15],e[11]=t[10]*i[1]+t[11]*i[6]+t[12]*i[11]+t[13]*i[16],e[12]=t[10]*i[2]+t[11]*i[7]+t[12]*i[12]+t[13]*i[17],e[13]=t[10]*i[3]+t[11]*i[8]+t[12]*i[13]+t[13]*i[18],e[14]=t[10]*i[4]+t[11]*i[9]+t[12]*i[14]+t[13]*i[19]+t[14],e[15]=t[15]*i[0]+t[16]*i[5]+t[17]*i[10]+t[18]*i[15],e[16]=t[15]*i[1]+t[16]*i[6]+t[17]*i[11]+t[18]*i[16],e[17]=t[15]*i[2]+t[16]*i[7]+t[17]*i[12]+t[18]*i[17],e[18]=t[15]*i[3]+t[16]*i[8]+t[17]*i[13]+t[18]*i[18],e[19]=t[15]*i[4]+t[16]*i[9]+t[17]*i[14]+t[18]*i[19]+t[19],e},t.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},t.prototype.brightness=function(e,t){var i=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.greyscale=function(e,t){var i=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},t.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var i=Math.cos(e),n=Math.sin(e),r=1/3,a=(0,Math.sqrt)(r),s=[i+(1-i)*r,r*(1-i)-a*n,r*(1-i)+a*n,0,0,r*(1-i)+a*n,i+r*(1-i),r*(1-i)-a*n,0,0,r*(1-i)-a*n,r*(1-i)+a*n,i+r*(1-i),0,0,0,0,0,1,0];this._loadMatrix(s,t)},t.prototype.contrast=function(e,t){var i=(e||0)+1,n=-128*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,t)},t.prototype.saturate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],i=2*e/3+1,n=-.5*(i-1),r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,t)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],e)},t.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},t.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},t.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},t.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},t.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},t.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},t.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},t.prototype.colorTone=function(e,t,i,n,r){e=e||.2,t=t||.15;var a=((i=i||16770432)>>16&255)/255,s=(i>>8&255)/255,o=(255&i)/255,u=((n=n||3375104)>>16&255)/255,l=(n>>8&255)/255,h=(255&n)/255,c=[.3,.59,.11,0,0,a,s,o,e,0,u,l,h,t,0,a-u,s-l,o-h,0,0];this._loadMatrix(c,r)},t.prototype.night=function(e,t){var i=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.predator=function(e,t){var i=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},t.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},s(t,[{key:"matrix",get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),t}(o.Filter));i.default=u,u.prototype.grayscale=u.prototype.greyscale},{"../../core":64,path:22}],149:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),u=(e("path"),function(e){function t(i,a){n(this,t);var s=new o.Matrix;i.renderable=!1;var u=r(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return u.maskSprite=i,u.maskMatrix=s,u.uniforms.mapSampler=i._texture,u.uniforms.filterMatrix=s,u.uniforms.scale={x:1,y:1},null!==a&&void 0!==a||(a=20),u.scale=new o.Point(a,a),u}return a(t,e),t.prototype.apply=function(e,t,i){var n=1/i.destinationFrame.width*(i.size.width/t.size.width);this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*n,this.uniforms.scale.y=this.scale.y*n,e.applyFilter(this,t,i)},s(t,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),t}(o.Filter));i.default=u},{"../../core":64,path:22}],150:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),o=(e("path"),function(e){function t(){return n(this,t),r(this,e.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return a(t,e),t}(s.Filter));i.default=o},{"../../core":64,path:22}],151:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0;var r=e("./fxaa/FXAAFilter");Object.defineProperty(i,"FXAAFilter",{enumerable:!0,get:function(){return n(r).default}});var a=e("./noise/NoiseFilter");Object.defineProperty(i,"NoiseFilter",{enumerable:!0,get:function(){return n(a).default}});var s=e("./displacement/DisplacementFilter");Object.defineProperty(i,"DisplacementFilter",{enumerable:!0,get:function(){return n(s).default}});var o=e("./blur/BlurFilter");Object.defineProperty(i,"BlurFilter",{enumerable:!0,get:function(){return n(o).default}});var u=e("./blur/BlurXFilter");Object.defineProperty(i,"BlurXFilter",{enumerable:!0,get:function(){return n(u).default}});var l=e("./blur/BlurYFilter");Object.defineProperty(i,"BlurYFilter",{enumerable:!0,get:function(){return n(l).default}});var h=e("./colormatrix/ColorMatrixFilter");Object.defineProperty(i,"ColorMatrixFilter",{enumerable:!0,get:function(){return n(h).default}});var c=e("./void/VoidFilter");Object.defineProperty(i,"VoidFilter",{enumerable:!0,get:function(){return n(c).default}})},{"./blur/BlurFilter":142,"./blur/BlurXFilter":143,"./blur/BlurYFilter":144,"./colormatrix/ColorMatrixFilter":148,"./displacement/DisplacementFilter":149,"./fxaa/FXAAFilter":150,"./noise/NoiseFilter":152,"./void/VoidFilter":153}],152:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),u=(e("path"),function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();n(this,t);var s=r(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return s.noise=i,s.seed=a,s}return a(t,e),s(t,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),t}(o.Filter));i.default=u},{"../../core":64,path:22}],153:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),o=(e("path"),function(e){function t(){n(this,t);var i=r(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return i.glShaderKey="void",i}return a(t,e),t}(s.Filter));i.default=o},{"../../core":64,path:22}],154:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../core")),s=function(){function e(){n(this,e),this.global=new a.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return e.prototype.getLocalPosition=function(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)},e.prototype._copyEvent=function(e){e.isPrimary&&(this.isPrimary=!0),this.button=e.button,this.buttons=e.buttons,this.width=e.width,this.height=e.height,this.tiltX=e.tiltX,this.tiltY=e.tiltY,this.pointerType=e.pointerType,this.pressure=e.pressure,this.rotationAngle=e.rotationAngle,this.twist=e.twist||0,this.tangentialPressure=e.tangentialPressure||0},e.prototype._reset=function(){this.isPrimary=!1},r(e,[{key:"pointerId",get:function(){return this.identifier}}]),e}();i.default=s},{"../core":64}],155:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(){n(this,e),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0},e.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},e}();i.default=r},{}],156:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../core")),l=n(e("./InteractionData")),h=n(e("./InteractionEvent")),c=n(e("./InteractionTrackingData")),d=n(e("eventemitter3")),p=n(e("./interactiveTarget"));u.utils.mixins.delayMixin(u.DisplayObject.prototype,p.default);var f="MOUSE",g={target:null,data:{global:null}},m=function(e){function t(i,n){r(this,t);var s=a(this,e.call(this));return n=n||{},s.renderer=i,s.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,s.interactionFrequency=n.interactionFrequency||10,s.mouse=new l.default,s.mouse.identifier=f,s.mouse.global.set(-999999),s.activeInteractionData={},s.activeInteractionData[f]=s.mouse,s.interactionDataPool=[],s.eventData=new h.default,s.interactionDOMElement=null,s.moveWhenInside=!1,s.eventsAdded=!1,s.mouseOverRenderer=!1,s.supportsTouchEvents="ontouchstart"in window,s.supportsPointerEvents=!!window.PointerEvent,s.onPointerUp=s.onPointerUp.bind(s),s.processPointerUp=s.processPointerUp.bind(s),s.onPointerCancel=s.onPointerCancel.bind(s),s.processPointerCancel=s.processPointerCancel.bind(s),s.onPointerDown=s.onPointerDown.bind(s),s.processPointerDown=s.processPointerDown.bind(s),s.onPointerMove=s.onPointerMove.bind(s),s.processPointerMove=s.processPointerMove.bind(s),s.onPointerOut=s.onPointerOut.bind(s),s.processPointerOverOut=s.processPointerOverOut.bind(s),s.onPointerOver=s.onPointerOver.bind(s),s.cursorStyles={default:"inherit",pointer:"pointer"},s.currentCursorMode=null,s.cursor=null,s._tempPoint=new u.Point,s.resolution=1,s.setTargetElement(s.renderer.view,s.renderer.resolution),s}return s(t,e),t.prototype.hitTest=function(e,t){return g.target=null,g.data.global=e,t||(t=this.renderer._lastObjectRendered),this.processInteractive(g,t,null,!0),g.target},t.prototype.setTargetElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents()},t.prototype.addEvents=function(){this.interactionDOMElement&&(u.ticker.shared.add(this.update,this,u.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},t.prototype.removeEvents=function(){this.interactionDOMElement&&(u.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},t.prototype.update=function(e){if(this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var i=this.activeInteractionData[t];if(i.originalEvent&&"touch"!==i.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var t=this.cursorStyles[e];if(t)switch(void 0===t?"undefined":o(t)){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(e);break;case"object":Object.assign(this.interactionDOMElement.style,t)}else"string"!=typeof e||Object.prototype.hasOwnProperty.call(this.cursorStyles,e)||(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,t,i){i.stopped||(i.currentTarget=e,i.type=t,e.emit(t,i),e[t]&&e[t](i))},t.prototype.mapPositionToPoint=function(e,t,i){var n=void 0;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=navigator.isCocoonJS?this.resolution:1/this.resolution;e.x=(t-n.left)*(this.interactionDOMElement.width/n.width)*r,e.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},t.prototype.processInteractive=function(e,t,i,n,r){if(!t||!t.visible)return!1;var a=e.data.global,s=!1,o=r=t.interactive||r;if(t.hitArea?o=!1:n&&t._mask&&(t._mask.containsPoint(a)||(n=!1)),t.interactiveChildren&&t.children)for(var u=t.children,l=u.length-1;l>=0;l--){var h=u[l],c=this.processInteractive(e,h,i,n,o);if(c){if(!h.parent)continue;o=!1,c&&(e.target&&(n=!1),s=!0)}}return r&&(n&&!e.target&&(t.hitArea?(t.worldTransform.applyInverse(a,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(s=!0)):t.containsPoint&&t.containsPoint(a)&&(s=!0)),t.interactive&&(s&&!e.target&&(e.target=t),i&&i(e,t,!!s))),s},t.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&e.preventDefault();for(var i=t.length,n=0;n<i;n++){var r=t[n],a=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,a);if(s.data.originalEvent=e,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===r.pointerType)this.emit("touchstart",s);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;this.emit(o?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,t,i){var n=e.data,r=e.data.identifier;if(i)if(t.trackedPointers[r]||(t.trackedPointers[r]=new c.default(r)),this.dispatchEvent(t,"pointerdown",e),"touch"===n.pointerType)this.dispatchEvent(t,"touchstart",e);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;a?t.trackedPointers[r].rightDown=!0:t.trackedPointers[r].leftDown=!0,this.dispatchEvent(t,a?"rightdown":"mousedown",e)}},t.prototype.onPointerComplete=function(e,t,i){for(var n=this.normalizeToPointerData(e),r=n.length,a=e.target!==this.interactionDOMElement?"outside":"",s=0;s<r;s++){var o=n[s],u=this.getInteractionDataForPointerId(o),l=this.configureInteractionEventForDOMEvent(this.eventData,o,u);if(l.data.originalEvent=e,this.processInteractive(l,this.renderer._lastObjectRendered,i,t||!a),this.emit(t?"pointercancel":"pointerup"+a,l),"mouse"===o.pointerType||"pen"===o.pointerType){var h=2===o.button;this.emit(h?"rightup"+a:"mouseup"+a,l)}else"touch"===o.pointerType&&(this.emit(t?"touchcancel":"touchend"+a,l),this.releaseInteractionDataForPointerId(o.pointerId,u))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,t){var i=e.data,n=e.data.identifier;void 0!==t.trackedPointers[n]&&(delete t.trackedPointers[n],this.dispatchEvent(t,"pointercancel",e),"touch"===i.pointerType&&this.dispatchEvent(t,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,t,i){var n=e.data,r=e.data.identifier,a=t.trackedPointers[r],s="touch"===n.pointerType;if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button,u=c.default.FLAGS,l=o?u.RIGHT_DOWN:u.LEFT_DOWN,h=void 0!==a&&a.flags&l;i?(this.dispatchEvent(t,o?"rightup":"mouseup",e),h&&this.dispatchEvent(t,o?"rightclick":"click",e)):h&&this.dispatchEvent(t,o?"rightupoutside":"mouseupoutside",e),a&&(o?a.rightDown=!1:a.leftDown=!1)}i?(this.dispatchEvent(t,"pointerup",e),s&&this.dispatchEvent(t,"touchend",e),a&&(this.dispatchEvent(t,"pointertap",e),s&&(this.dispatchEvent(t,"tap",e),a.over=!1))):a&&(this.dispatchEvent(t,"pointerupoutside",e),s&&this.dispatchEvent(t,"touchendoutside",e)),a&&a.none&&delete t.trackedPointers[r]},t.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);"mouse"===t[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var i=t.length,n=0;n<i;n++){var r=t[n],a=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,a);s.data.originalEvent=e;var o="touch"!==r.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,o),this.emit("pointermove",s),"touch"===r.pointerType&&this.emit("touchmove",s),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",s)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,t,i){var n=e.data,r="touch"===n.pointerType,a="mouse"===n.pointerType||"pen"===n.pointerType;a&&this.processPointerOverOut(e,t,i),this.moveWhenInside&&!i||(this.dispatchEvent(t,"pointermove",e),r&&this.dispatchEvent(t,"touchmove",e),a&&this.dispatchEvent(t,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e)[0];"mouse"===t.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(t),n=this.configureInteractionEventForDOMEvent(this.eventData,t,i);n.data.originalEvent=t,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===t.pointerType||"pen"===t.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(i.identifier)}},t.prototype.processPointerOverOut=function(e,t,i){var n=e.data,r=e.data.identifier,a="mouse"===n.pointerType||"pen"===n.pointerType,s=t.trackedPointers[r];i&&!s&&(s=t.trackedPointers[r]=new c.default(r)),void 0!==s&&(i&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(t,"pointerover",e),a&&this.dispatchEvent(t,"mouseover",e)),a&&null===this.cursor&&(this.cursor=t.cursor)):s.over&&(s.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),a&&this.dispatchEvent(t,"mouseout",e),s.none&&delete t.trackedPointers[r]))},t.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e)[0],i=this.getInteractionDataForPointerId(t),n=this.configureInteractionEventForDOMEvent(this.eventData,t,i);n.data.originalEvent=t,"mouse"===t.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==t.pointerType&&"pen"!==t.pointerType||this.emit("mouseover",n)},t.prototype.getInteractionDataForPointerId=function(e){var t=e.pointerId,i=void 0;return t===f||"mouse"===e.pointerType?i=this.mouse:this.activeInteractionData[t]?i=this.activeInteractionData[t]:(i=this.interactionDataPool.pop()||new l.default,i.identifier=t,this.activeInteractionData[t]=i),i._copyEvent(e),i},t.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t._reset(),this.interactionDataPool.push(t))},t.prototype.configureInteractionEventForDOMEvent=function(e,t,i){return e.data=i,this.mapPositionToPoint(i.global,t.clientX,t.clientY),navigator.isCocoonJS&&"touch"===t.pointerType&&(i.global.x=i.global.x/this.resolution,i.global.y=i.global.y/this.resolution),"touch"===t.pointerType&&(t.globalX=i.global.x,t.globalY=i.global.y),i.originalEvent=t,e._reset(),e},t.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var i=0,n=e.changedTouches.length;i<n;i++){var r=e.changedTouches[i];void 0===r.button&&(r.button=e.touches.length?1:0),void 0===r.buttons&&(r.buttons=e.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),r.twist=0,r.tangentialPressure=0,void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,t.push(r)}else!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof window.PointerEvent?t.push(e):(void 0===e.isPrimary&&(e.isPrimary=!0),void 0===e.width&&(e.width=1),void 0===e.height&&(e.height=1),void 0===e.tiltX&&(e.tiltX=0),void 0===e.tiltY&&(e.tiltY=0),void 0===e.pointerType&&(e.pointerType="mouse"),void 0===e.pointerId&&(e.pointerId=f),void 0===e.pressure&&(e.pressure=.5),e.twist=0,e.tangentialPressure=0,e.isNormalized=!0,t.push(e));return t},t.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},t}(d.default);i.default=m,u.WebGLRenderer.registerPlugin("interaction",m),u.CanvasRenderer.registerPlugin("interaction",m)},{"../core":64,"./InteractionData":154,"./InteractionEvent":155,"./InteractionTrackingData":157,"./interactiveTarget":159,eventemitter3:3}],157:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},r(e,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(e){this._flags=e}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(e){this._doSet(this.constructor.FLAGS.OVER,e)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,e)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.LEFT_DOWN,e)}}]),e}();i.default=a,a.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],158:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0;var r=e("./InteractionData");Object.defineProperty(i,"InteractionData",{enumerable:!0,get:function(){return n(r).default}});var a=e("./InteractionManager");Object.defineProperty(i,"InteractionManager",{enumerable:!0,get:function(){return n(a).default}});var s=e("./interactiveTarget");Object.defineProperty(i,"interactiveTarget",{enumerable:!0,get:function(){return n(s).default}})},{"./InteractionData":154,"./InteractionManager":156,"./interactiveTarget":159}],159:[function(e,t,i){"use strict";i.__esModule=!0,i.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],160:[function(e,t,i){"use strict";function n(e,t){e.bitmapFont=o.BitmapText.registerFont(e.data,t)}i.__esModule=!0,i.parse=n,i.default=function(){return function(e,t){if(e.data&&e.type===s.Resource.TYPE.XML)if(0!==e.data.getElementsByTagName("page").length&&0!==e.data.getElementsByTagName("info").length&&null!==e.data.getElementsByTagName("info")[0].getAttribute("face")){var i=e.isDataUrl?"":r.dirname(e.url);e.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/"),i=i.replace(this.baseUrl,""))),i&&"/"!==i.charAt(i.length-1)&&(i+="/");var o=i+e.data.getElementsByTagName("page")[0].getAttribute("file");if(a.utils.TextureCache[o])n(e,a.utils.TextureCache[o]),t();else{var u={crossOrigin:e.crossOrigin,loadType:s.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e};this.add(e.name+"_image",o,u,function(i){n(e,i.texture),t()})}}else t();else t()}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("path")),a=e("../core"),s=e("resource-loader"),o=e("../extras")},{"../core":64,"../extras":140,path:22,"resource-loader":35}],161:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0,i.shared=i.Resource=i.textureParser=i.getResourcePath=i.spritesheetParser=i.parseBitmapFontData=i.bitmapFontParser=i.Loader=void 0;var r=e("./bitmapFontParser");Object.defineProperty(i,"bitmapFontParser",{enumerable:!0,get:function(){return n(r).default}}),Object.defineProperty(i,"parseBitmapFontData",{enumerable:!0,get:function(){return r.parse}});var a=e("./spritesheetParser");Object.defineProperty(i,"spritesheetParser",{enumerable:!0,get:function(){return n(a).default}}),Object.defineProperty(i,"getResourcePath",{enumerable:!0,get:function(){return a.getResourcePath}});var s=e("./textureParser");Object.defineProperty(i,"textureParser",{enumerable:!0,get:function(){return n(s).default}});var o=e("resource-loader");Object.defineProperty(i,"Resource",{enumerable:!0,get:function(){return o.Resource}});var u=n(e("../core/Application")),l=n(e("./loader"));i.Loader=l.default;var h=new l.default;h.destroy=function(){},i.shared=h;var c=u.default.prototype;c._loader=null,Object.defineProperty(c,"loader",{get:function(){if(!this._loader){var e=this._options.sharedLoader;this._loader=e?h:new l.default}return this._loader}}),c._parentDestroy=c.destroy,c.destroy=function(e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(e)}},{"../core/Application":42,"./bitmapFontParser":160,"./loader":162,"./spritesheetParser":163,"./textureParser":164,"resource-loader":35}],162:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=n(e("resource-loader")),u=e("resource-loader/lib/middlewares/parsing/blob"),l=n(e("eventemitter3")),h=n(e("./textureParser")),c=n(e("./spritesheetParser")),d=n(e("./bitmapFontParser")),p=function(e){function t(i,n){r(this,t);var s=a(this,e.call(this,i,n));l.default.call(s);for(var o=0;o<t._pixiMiddleware.length;++o)s.use(t._pixiMiddleware[o]());return s.onStart.add(function(e){return s.emit("start",e)}),s.onProgress.add(function(e,t){return s.emit("progress",e,t)}),s.onError.add(function(e,t,i){return s.emit("error",e,t,i)}),s.onLoad.add(function(e,t){return s.emit("load",e,t)}),s.onComplete.add(function(e,t){return s.emit("complete",e,t)}),s}return s(t,e),t.addPixiMiddleware=function(e){t._pixiMiddleware.push(e)},t.prototype.destroy=function(){this.removeAllListeners(),this.reset()},t}(o.default);i.default=p;for(var f in l.default.prototype)p.prototype[f]=l.default.prototype[f];p._pixiMiddleware=[u.blobMiddlewareFactory,h.default,c.default,d.default];var g=o.default.Resource;g.setExtensionXhrType("fnt",g.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":160,"./spritesheetParser":163,"./textureParser":164,eventemitter3:3,"resource-loader":35,"resource-loader/lib/middlewares/parsing/blob":36}],163:[function(e,t,i){"use strict";function n(e,t){return e.isDataUrl?e.data.meta.image:a.default.resolve(e.url.replace(t,""),e.data.meta.image)}i.__esModule=!0,i.default=function(){return function(e,t){var i=e.name+"_image";if(e.data&&e.type===r.Resource.TYPE.JSON&&e.data.frames&&!this.resources[i]){var a={crossOrigin:e.crossOrigin,loadType:r.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e},o=n(e,this.baseUrl);this.add(i,o,a,function(i){var n=new s.Spritesheet(i.texture.baseTexture,e.data,e.url);n.parse(function(){e.spritesheet=n,e.textures=n.textures,t()})})}else t()}},i.getResourcePath=n;var r=e("resource-loader"),a=function(e){return e&&e.__esModule?e:{default:e}}(e("url")),s=e("../core")},{"../core":64,"resource-loader":35,url:28}],164:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(){return function(e,t){e.data&&e.type===n.Resource.TYPE.IMAGE&&(e.texture=r.default.fromLoader(e.data,e.url,e.name)),t()}};var n=e("resource-loader"),r=function(e){return e&&e.__esModule?e:{default:e}}(e("../core/textures/Texture"))},{"../core/textures/Texture":114,"resource-loader":35}],165:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../core")),u=function(e){return e&&e.__esModule?e:{default:e}}(e("../extras/TextureTransform")),l=new o.Point,h=new o.Polygon,c=function(e){function t(i,a,s,l,h){n(this,t);var c=r(this,e.call(this));return c._texture=i,c.uvs=s||new Float32Array([0,0,1,0,1,1,0,1]),c.vertices=a||new Float32Array([0,0,100,0,100,100,0,100]),c.indices=l||new Uint16Array([0,1,3,2]),c.dirty=0,c.indexDirty=0,c.blendMode=o.BLEND_MODES.NORMAL,c.canvasPadding=0,c.drawMode=h||t.DRAW_MODES.TRIANGLE_MESH,c.shader=null,c.tintRgb=new Float32Array([1,1,1]),c._glDatas={},c._uvTransform=new u.default(i),c.uploadUvTransform=!1,c.pluginName="mesh",c}return a(t,e),t.prototype._renderWebGL=function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){this.refresh(),e.plugins[this.pluginName].render(this)},t.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},t.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},t.prototype.refresh=function(e){this._uvTransform.update(e)&&this._refresh()},t.prototype._refresh=function(){},t.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,l);for(var i=this.vertices,n=h.points,r=this.indices,a=this.indices.length,s=this.drawMode===t.DRAW_MODES.TRIANGLES?3:1,o=0;o+2<a;o+=s){var u=2*r[o],c=2*r[o+1],d=2*r[o+2];if(n[0]=i[u],n[1]=i[u+1],n[2]=i[c],n[3]=i[c+1],n[4]=i[d],n[5]=i[d+1],h.contains(l.x,l.y))return!0}return!1},s(t,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return o.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=o.utils.hex2rgb(e,this.tintRgb)}}]),t}(o.Container);i.default=c,c.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":64,"../extras/TextureTransform":135}],166:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=10,u=function(e){function t(i,a,s,u,l){n(this,t);var h=r(this,e.call(this,i,4,4));return h._origWidth=i.orig.width,h._origHeight=i.orig.height,h._width=h._origWidth,h._height=h._origHeight,h.leftWidth=void 0!==a?a:o,h.rightWidth=void 0!==u?u:o,h.topHeight=void 0!==s?s:o,h.bottomHeight=void 0!==l?l:o,h.refresh(!0),h}return a(t,e),t.prototype.updateHorizontalVertices=function(){var e=this.vertices;e[9]=e[11]=e[13]=e[15]=this._topHeight,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices;e[2]=e[10]=e[18]=e[26]=this._leftWidth,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._renderCanvas=function(e){var t=e.context;t.globalAlpha=this.worldAlpha;var i=this.worldTransform,n=e.resolution;e.roundPixels?t.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n|0,i.ty*n|0):t.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n);var r=this._texture.baseTexture,a=r.source,s=r.width,o=r.height;this.drawSegment(t,a,s,o,0,1,10,11),this.drawSegment(t,a,s,o,2,3,12,13),this.drawSegment(t,a,s,o,4,5,14,15),this.drawSegment(t,a,s,o,8,9,18,19),this.drawSegment(t,a,s,o,10,11,20,21),this.drawSegment(t,a,s,o,12,13,22,23),this.drawSegment(t,a,s,o,16,17,26,27),this.drawSegment(t,a,s,o,18,19,28,29),this.drawSegment(t,a,s,o,20,21,30,31)},t.prototype.drawSegment=function(e,t,i,n,r,a,s,o){var u=this.uvs,l=this.vertices,h=(u[s]-u[r])*i,c=(u[o]-u[a])*n,d=l[s]-l[r],p=l[o]-l[a];h<1&&(h=1),c<1&&(c=1),d<1&&(d=1),p<1&&(p=1),e.drawImage(t,u[r]*i,u[a]*n,h,c,l[r],l[a],d,p)},t.prototype._refresh=function(){e.prototype._refresh.call(this);var t=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var n=1/this._origWidth,r=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=n*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-n*this._rightWidth,t[9]=t[11]=t[13]=t[15]=r*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty=!0,this.multiplyUvs()},s(t,[{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._refresh()}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(e("./Plane")).default);i.default=u},{"./Plane":167}],167:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(e){return e&&e.__esModule?e:{default:e}}(e("./Mesh")),o=function(e){function t(i,a,o){n(this,t);var u=r(this,e.call(this,i));return u._ready=!0,u.verticesX=a||10,u.verticesY=o||10,u.drawMode=s.default.DRAW_MODES.TRIANGLES,u.refresh(),u}return a(t,e),t.prototype._refresh=function(){for(var e=this._texture,t=this.verticesX*this.verticesY,i=[],n=[],r=[],a=this.verticesX-1,s=this.verticesY-1,o=e.width/a,u=e.height/s,l=0;l<t;l++){var h=l%this.verticesX,c=l/this.verticesX|0;i.push(h*o,c*u),n.push(h/a,c/s)}for(var d=a*s,p=0;p<d;p++){var f=p%a,g=p/a|0,m=g*this.verticesX+f,v=g*this.verticesX+f+1,y=(g+1)*this.verticesX+f,b=(g+1)*this.verticesX+f+1;r.push(m,v,y),r.push(v,b,y)}this.vertices=new Float32Array(i),this.uvs=new Float32Array(n),this.colors=new Float32Array([]),this.indices=new Uint16Array(r),this.indexDirty=!0,this.multiplyUvs()},t.prototype._onTextureUpdate=function(){s.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},t}(s.default);i.default=o},{"./Mesh":165}],168:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(e){function t(i,a){n(this,t);var s=r(this,e.call(this,i));return s.points=a,s.vertices=new Float32Array(4*a.length),s.uvs=new Float32Array(4*a.length),s.colors=new Float32Array(2*a.length),s.indices=new Uint16Array(2*a.length),s.autoUpdate=!0,s.refresh(),s}return a(t,e),t.prototype._refresh=function(){var e=this.points;if(!(e.length<1)&&this._texture._uvs){this.vertices.length/4!==e.length&&(this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length));var t=this.uvs,i=this.indices,n=this.colors;t[0]=0,t[1]=0,t[2]=0,t[3]=1,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var r=e.length,a=1;a<r;a++){var s=4*a,o=a/(r-1);t[s]=o,t[s+1]=0,t[s+2]=o,t[s+3]=1,n[s=2*a]=1,n[s+1]=1,i[s=2*a]=s,i[s+1]=s+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},t.prototype.refreshVertices=function(){var e=this.points;if(!(e.length<1))for(var t=e[0],i=void 0,n=0,r=0,a=this.vertices,s=e.length,o=0;o<s;o++){var u=e[o],l=4*o;r=-((i=o<e.length-1?e[o+1]:u).x-t.x),n=i.y-t.y;var h=10*(1-o/(s-1));h>1&&(h=1);var c=Math.sqrt(n*n+r*r),d=this._texture.height/2;n/=c,r/=c,n*=d,r*=d,a[l]=u.x+n,a[l+1]=u.y+r,a[l+2]=u.x-n,a[l+3]=u.y-r,t=u}},t.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},t}(function(e){return e&&e.__esModule?e:{default:e}}(e("./Mesh")).default);i.default=s},{"./Mesh":165}],169:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),a=function(e){return e&&e.__esModule?e:{default:e}}(e("../Mesh")),s=function(){function e(t){n(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,i=t.context,n=e.worldTransform,r=t.resolution;t.roundPixels?i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r|0,n.ty*r|0):i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t.setBlendMode(e.blendMode),e.drawMode===a.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(e):this._renderTriangles(e)},e.prototype._renderTriangleMesh=function(e){for(var t=e.vertices.length/2,i=0;i<t-2;i++){var n=2*i;this._renderDrawTriangle(e,n,n+2,n+4)}},e.prototype._renderTriangles=function(e){for(var t=e.indices,i=t.length,n=0;n<i;n+=3){var r=2*t[n],a=2*t[n+1],s=2*t[n+2];this._renderDrawTriangle(e,r,a,s)}},e.prototype._renderDrawTriangle=function(e,t,i,n){var r=this.renderer.context,a=e.uvs,s=e.vertices,o=e._texture;if(o.valid){var u=o.baseTexture,l=u.source,h=u.width,c=u.height,d=void 0,p=void 0,f=void 0,g=void 0,m=void 0,v=void 0;if(e.uploadUvTransform){var y=e._uvTransform.mapCoord;d=(a[t]*y.a+a[t+1]*y.c+y.tx)*u.width,p=(a[i]*y.a+a[i+1]*y.c+y.tx)*u.width,f=(a[n]*y.a+a[n+1]*y.c+y.tx)*u.width,g=(a[t]*y.b+a[t+1]*y.d+y.ty)*u.height,m=(a[i]*y.b+a[i+1]*y.d+y.ty)*u.height,v=(a[n]*y.b+a[n+1]*y.d+y.ty)*u.height}else d=a[t]*u.width,p=a[i]*u.width,f=a[n]*u.width,g=a[t+1]*u.height,m=a[i+1]*u.height,v=a[n+1]*u.height;var b=s[t],_=s[i],w=s[n],x=s[t+1],T=s[i+1],S=s[n+1];if(e.canvasPadding>0){var I=e.canvasPadding/e.worldTransform.a,P=e.canvasPadding/e.worldTransform.d,C=(b+_+w)/3,M=(x+T+S)/3,E=b-C,k=x-M,A=Math.sqrt(E*E+k*k);b=C+E/A*(A+I),x=M+k/A*(A+P),k=T-M,_=C+(E=_-C)/(A=Math.sqrt(E*E+k*k))*(A+I),T=M+k/A*(A+P),k=S-M,w=C+(E=w-C)/(A=Math.sqrt(E*E+k*k))*(A+I),S=M+k/A*(A+P)}r.save(),r.beginPath(),r.moveTo(b,x),r.lineTo(_,T),r.lineTo(w,S),r.closePath(),r.clip();var O=d*m+g*f+p*v-m*f-g*p-d*v,R=b*m+g*w+_*v-m*w-g*_-b*v,B=d*_+b*f+p*w-_*f-b*p-d*w,D=d*m*w+g*_*f+b*p*v-b*m*f-g*p*w-d*_*v,X=x*m+g*S+T*v-m*S-g*T-x*v,F=d*T+x*f+p*S-T*f-x*p-d*S,L=d*m*S+g*T*f+x*p*v-x*m*f-g*p*S-d*T*v;r.transform(R/O,X/O,B/O,F/O,D/O,L/O),r.drawImage(l,0,0,h*u.resolution,c*u.resolution,0,0,h,c),r.restore()}},e.prototype.renderMeshFlat=function(e){var t=this.renderer.context,i=e.vertices,n=i.length/2;t.beginPath();for(var r=1;r<n-2;++r){var a=2*r,s=i[a],o=i[a+1],u=i[a+2],l=i[a+3],h=i[a+4],c=i[a+5];t.moveTo(s,o),t.lineTo(u,l),t.lineTo(h,c)}t.fillStyle="#FF0000",t.fill(),t.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();i.default=s,r.CanvasRenderer.registerPlugin("mesh",s)},{"../../core":64,"../Mesh":165}],170:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0;var r=e("./Mesh");Object.defineProperty(i,"Mesh",{enumerable:!0,get:function(){return n(r).default}});var a=e("./webgl/MeshRenderer");Object.defineProperty(i,"MeshRenderer",{enumerable:!0,get:function(){return n(a).default}});var s=e("./canvas/CanvasMeshRenderer");Object.defineProperty(i,"CanvasMeshRenderer",{enumerable:!0,get:function(){return n(s).default}});var o=e("./Plane");Object.defineProperty(i,"Plane",{enumerable:!0,get:function(){return n(o).default}});var u=e("./NineSlicePlane");Object.defineProperty(i,"NineSlicePlane",{enumerable:!0,get:function(){return n(u).default}});var l=e("./Rope");Object.defineProperty(i,"Rope",{enumerable:!0,get:function(){return n(l).default}})},{"./Mesh":165,"./NineSlicePlane":166,"./Plane":167,"./Rope":168,"./canvas/CanvasMeshRenderer":169,"./webgl/MeshRenderer":171}],171:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),u=n(e("pixi-gl-core")),l=n(e("../Mesh")),h=(e("path"),o.Matrix.IDENTITY),c=function(e){function t(i){r(this,t);var n=a(this,e.call(this,i));return n.shader=null,n}return s(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new o.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},t.prototype.render=function(e){var t=this.renderer,i=t.gl,n=e._texture;if(n.valid){var r=e._glDatas[t.CONTEXT_UID];r||(t.bindVao(null),r={shader:this.shader,vertexBuffer:u.default.GLBuffer.createVertexBuffer(i,e.vertices,i.STREAM_DRAW),uvBuffer:u.default.GLBuffer.createVertexBuffer(i,e.uvs,i.STREAM_DRAW),indexBuffer:u.default.GLBuffer.createIndexBuffer(i,e.indices,i.STATIC_DRAW),vao:null,dirty:e.dirty,indexDirty:e.indexDirty},r.vao=new u.default.VertexArrayObject(i).addIndex(r.indexBuffer).addAttribute(r.vertexBuffer,r.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(r.uvBuffer,r.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),e._glDatas[t.CONTEXT_UID]=r),t.bindVao(r.vao),e.dirty!==r.dirty&&(r.dirty=e.dirty,r.uvBuffer.upload(e.uvs)),e.indexDirty!==r.indexDirty&&(r.indexDirty=e.indexDirty,r.indexBuffer.upload(e.indices)),r.vertexBuffer.upload(e.vertices),t.bindShader(r.shader),r.shader.uniforms.uSampler=t.bindTexture(n),t.state.setBlendMode(o.utils.correctBlendMode(e.blendMode,n.baseTexture.premultipliedAlpha)),r.shader.uniforms.uTransform&&(e.uploadUvTransform?r.shader.uniforms.uTransform=e._uvTransform.mapCoord.toArray(!0):r.shader.uniforms.uTransform=h.toArray(!0)),r.shader.uniforms.translationMatrix=e.worldTransform.toArray(!0),r.shader.uniforms.uColor=o.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,r.shader.uniforms.uColor,n.baseTexture.premultipliedAlpha);var a=e.drawMode===l.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;r.vao.draw(a,e.indices.length,0)}},t}(o.ObjectRenderer);i.default=c,o.WebGLRenderer.registerPlugin("mesh",c)},{"../../core":64,"../Mesh":165,path:22,"pixi-gl-core":12}],172:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../core")),u=e("../core/utils"),l=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,a=arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384;n(this,t);var u=r(this,e.call(this));return s>16384&&(s=16384),s>i&&(s=i),u._properties=[!1,!0,!1,!1,!1],u._maxSize=i,u._batchSize=s,u._glBuffers={},u._bufferToUpdate=0,u.interactiveChildren=!1,u.blendMode=o.BLEND_MODES.NORMAL,u.roundPixels=!0,u.baseTexture=null,u.setProperties(a),u._tint=0,u.tintRgb=new Float32Array(4),u.tint=16777215,u}return a(t,e),t.prototype.setProperties=function(e){e&&(this._properties[0]="scale"in e?!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="alpha"in e?!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},t.prototype.renderWebGL=function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return t.onChildrenChange(0)})),e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){var t=Math.floor(e/this._batchSize);t<this._bufferToUpdate&&(this._bufferToUpdate=t)},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=e.context,i=this.worldTransform,n=!0,r=0,a=0,s=0,o=0,u=e.blendModes[this.blendMode];u!==t.globalCompositeOperation&&(t.globalCompositeOperation=u),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var h=this.children[l];if(h.visible){var c=h._texture.frame;if(t.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)==0)n&&(t.setTransform(i.a,i.b,i.c,i.d,i.tx*e.resolution,i.ty*e.resolution),n=!1),r=h.anchor.x*(-c.width*h.scale.x)+h.position.x+.5,a=h.anchor.y*(-c.height*h.scale.y)+h.position.y+.5,s=c.width*h.scale.x,o=c.height*h.scale.y;else{n||(n=!0),h.displayObjectUpdateTransform();var d=h.worldTransform;e.roundPixels?t.setTransform(d.a,d.b,d.c,d.d,d.tx*e.resolution|0,d.ty*e.resolution|0):t.setTransform(d.a,d.b,d.c,d.d,d.tx*e.resolution,d.ty*e.resolution),r=h.anchor.x*-c.width+.5,a=h.anchor.y*-c.height+.5,s=c.width,o=c.height}var p=h._texture.baseTexture.resolution;t.drawImage(h._texture.baseTexture.source,c.x*p,c.y*p,c.width*p,c.height*p,r*e.resolution,a*e.resolution,s*e.resolution,o*e.resolution)}}}},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null},s(t,[{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,(0,u.hex2rgb)(e,this.tintRgb)}}]),t}(o.Container);i.default=l},{"../core":64,"../core/utils":123}],173:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0;var r=e("./ParticleContainer");Object.defineProperty(i,"ParticleContainer",{enumerable:!0,get:function(){return n(r).default}});var a=e("./webgl/ParticleRenderer");Object.defineProperty(i,"ParticleRenderer",{enumerable:!0,get:function(){return n(a).default}})},{"./ParticleContainer":172,"./webgl/ParticleRenderer":175}],174:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var a=n(e("pixi-gl-core")),s=n(e("../../core/utils/createIndicesForQuads")),o=function(){function e(t,i,n,a){r(this,e),this.gl=t,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=a,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<i.length;++s){var o=i[s];o={attribute:o.attribute,size:o.size,uploadFunction:o.uploadFunction,offset:o.offset},n[s]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return e.prototype.initBuffers=function(){var e=this.gl,t=0;this.indices=(0,s.default)(this.size),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=t,t+=n.size,this.dynamicStride+=n.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=a.default.GLBuffer.createVertexBuffer(e,this.dynamicData,e.STREAM_DRAW);var r=0;this.staticStride=0;for(var o=0;o<this.staticProperties.length;++o){var u=this.staticProperties[o];u.offset=r,r+=u.size,this.staticStride+=u.size}this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=a.default.GLBuffer.createVertexBuffer(e,this.staticData,e.STATIC_DRAW),this.vao=new a.default.VertexArrayObject(e).addIndex(this.indexBuffer);for(var l=0;l<this.dynamicProperties.length;++l){var h=this.dynamicProperties[l];this.vao.addAttribute(this.dynamicBuffer,h.attribute,e.FLOAT,!1,4*this.dynamicStride,4*h.offset)}for(var c=0;c<this.staticProperties.length;++c){var d=this.staticProperties[c];this.vao.addAttribute(this.staticBuffer,d.attribute,e.FLOAT,!1,4*this.staticStride,4*d.offset)}},e.prototype.uploadDynamic=function(e,t,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(e,t,i,this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer.upload()},e.prototype.uploadStatic=function(e,t,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(e,t,i,this.staticData,this.staticStride,r.offset)}this.staticBuffer.upload()},e.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},e}();i.default=o},{"../../core/utils/createIndicesForQuads":121,"pixi-gl-core":12}],175:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),u=n(e("./ParticleShader")),l=n(e("./ParticleBuffer")),h=function(e){function t(i){r(this,t);var n=a(this,e.call(this,i));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new o.Matrix,n.CONTEXT_UID=0,n}return s(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new u.default(e),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},t.prototype.start=function(){this.renderer.bindShader(this.shader)},t.prototype.render=function(e){var t=e.children,i=e._maxSize,n=e._batchSize,r=this.renderer,a=t.length;if(0!==a){a>i&&(a=i);var s=e._glBuffers[r.CONTEXT_UID];s||(s=e._glBuffers[r.CONTEXT_UID]=this.generateBuffers(e));var u=t[0]._texture.baseTexture;this.renderer.setBlendMode(o.utils.correctBlendMode(e.blendMode,u.premultipliedAlpha));var l=r.gl,h=e.worldTransform.copy(this.tempMatrix);h.prepend(r._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=h.toArray(!0),this.shader.uniforms.uColor=o.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,u.premultipliedAlpha),this.shader.uniforms.uSampler=r.bindTexture(u);for(var c=0,d=0;c<a;c+=n,d+=1){var p=a-c;p>n&&(p=n);var f=s[d];f.uploadDynamic(t,c,p),e._bufferToUpdate===d&&(f.uploadStatic(t,c,p),e._bufferToUpdate=d+1),r.bindVao(f.vao),f.vao.draw(l.TRIANGLES,6*p)}}},t.prototype.generateBuffers=function(e){for(var t=this.renderer.gl,i=[],n=e._maxSize,r=e._batchSize,a=e._properties,s=0;s<n;s+=r)i.push(new l.default(t,this.properties,a,r));return i},t.prototype.uploadVertices=function(e,t,i,n,r,a){for(var s=0,o=0,u=0,l=0,h=0;h<i;++h){var c=e[t+h],d=c._texture,p=c.scale.x,f=c.scale.y,g=d.trim,m=d.orig;g?(o=g.x-c.anchor.x*m.width,s=o+g.width,l=g.y-c.anchor.y*m.height,u=l+g.height):(s=m.width*(1-c.anchor.x),o=m.width*-c.anchor.x,u=m.height*(1-c.anchor.y),l=m.height*-c.anchor.y),n[a]=o*p,n[a+1]=l*f,n[a+r]=s*p,n[a+r+1]=l*f,n[a+2*r]=s*p,n[a+2*r+1]=u*f,n[a+3*r]=o*p,n[a+3*r+1]=u*f,a+=4*r}},t.prototype.uploadPosition=function(e,t,i,n,r,a){for(var s=0;s<i;s++){var o=e[t+s].position;n[a]=o.x,n[a+1]=o.y,n[a+r]=o.x,n[a+r+1]=o.y,n[a+2*r]=o.x,n[a+2*r+1]=o.y,n[a+3*r]=o.x,n[a+3*r+1]=o.y,a+=4*r}},t.prototype.uploadRotation=function(e,t,i,n,r,a){for(var s=0;s<i;s++){var o=e[t+s].rotation;n[a]=o,n[a+r]=o,n[a+2*r]=o,n[a+3*r]=o,a+=4*r}},t.prototype.uploadUvs=function(e,t,i,n,r,a){for(var s=0;s<i;++s){var o=e[t+s]._texture._uvs;o?(n[a]=o.x0,n[a+1]=o.y0,n[a+r]=o.x1,n[a+r+1]=o.y1,n[a+2*r]=o.x2,n[a+2*r+1]=o.y2,n[a+3*r]=o.x3,n[a+3*r+1]=o.y3,a+=4*r):(n[a]=0,n[a+1]=0,n[a+r]=0,n[a+r+1]=0,n[a+2*r]=0,n[a+2*r+1]=0,n[a+3*r]=0,n[a+3*r+1]=0,a+=4*r)}},t.prototype.uploadAlpha=function(e,t,i,n,r,a){for(var s=0;s<i;s++){var o=e[t+s].alpha;n[a]=o,n[a+r]=o,n[a+2*r]=o,n[a+3*r]=o,a+=4*r}},t.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},t}(o.ObjectRenderer);i.default=h,o.WebGLRenderer.registerPlugin("particle",h)},{"../../core":64,"./ParticleBuffer":174,"./ParticleShader":176}],176:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i.__esModule=!0;var s=function(e){function t(i){return n(this,t),r(this,e.call(this,i,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform vec4 uColor;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uColor;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return a(t,e),t}(function(e){return e&&e.__esModule?e:{default:e}}(e("../../core/Shader")).default);i.default=s},{"../../core/Shader":43}],177:[function(e,t,i){"use strict";Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:e>0?1:-1})},{}],178:[function(e,t,i){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(e("object-assign"));Object.assign||(Object.assign=n.default)},{"object-assign":5}],179:[function(e,t,i){"use strict";e("./Object.assign"),e("./requestAnimationFrame"),e("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":177,"./Object.assign":178,"./requestAnimationFrame":180}],180:[function(e,t,i){(function(e){"use strict";Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),e.performance&&e.performance.now||function(){var t=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-t}}();for(var t=Date.now(),i=["ms","moz","webkit","o"],n=0;n<i.length&&!e.requestAnimationFrame;++n){var r=i[n];e.requestAnimationFrame=e[r+"RequestAnimationFrame"],e.cancelAnimationFrame=e[r+"CancelAnimationFrame"]||e[r+"CancelRequestAnimationFrame"]}e.requestAnimationFrame||(e.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var i=Date.now(),n=16+t-i;return n<0&&(n=0),t=i,setTimeout(function(){t=Date.now(),e(performance.now())},n)}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){return clearTimeout(e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],181:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){var i=!1;if(e&&e._textures&&e._textures.length)for(var n=0;n<e._textures.length;n++)if(e._textures[n]instanceof c.Texture){var r=e._textures[n].baseTexture;-1===t.indexOf(r)&&(t.push(r),i=!0)}return i}function a(e,t){return e instanceof c.BaseTexture&&(-1===t.indexOf(e)&&t.push(e),!0)}function s(e,t){if(e._texture&&e._texture instanceof c.Texture){var i=e._texture.baseTexture;return-1===t.indexOf(i)&&t.push(i),!0}return!1}function o(e,t){return t instanceof c.Text&&(t.updateText(!0),!0)}function u(e,t){if(t instanceof c.TextStyle){var i=t.toFontString();return c.TextMetrics.measureFont(i),!0}return!1}function l(e,t){if(e instanceof c.Text){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var i=e._texture.baseTexture;return-1===t.indexOf(i)&&t.push(i),!0}return!1}function h(e,t){return e instanceof c.TextStyle&&(-1===t.indexOf(e)&&t.push(e),!0)}i.__esModule=!0;var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../core")),d=function(e){return e&&e.__esModule?e:{default:e}}(e("./limiters/CountLimiter")),p=c.ticker.shared;c.settings.UPLOADS_PER_FRAME=4;var f=function(){function e(t){var i=this;n(this,e),this.limiter=new d.default(c.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.registerFindHook(l),this.registerFindHook(h),this.registerFindHook(r),this.registerFindHook(a),this.registerFindHook(s),this.registerUploadHook(o),this.registerUploadHook(u)}return e.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,p.addOnce(this.tick,this,c.UPDATE_PRIORITY.UTILITY))):t&&t()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)p.addOnce(this.tick,this,c.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(var a=0,s=r.length;a<s;a++)r[a]()}},e.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},e.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},e.prototype.add=function(e){for(var t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof c.Container)for(var n=e.children.length-1;n>=0;n--)this.add(e.children[n]);return this},e.prototype.destroy=function(){this.ticking&&p.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();i.default=f},{"../core":64,"./limiters/CountLimiter":184}],182:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(t instanceof o.BaseTexture){var i=t.source,n=0===i.width?e.canvas.width:Math.min(e.canvas.width,i.width),r=0===i.height?e.canvas.height:Math.min(e.canvas.height,i.height);return e.ctx.drawImage(i,0,0,n,r,0,0,e.canvas.width,e.canvas.height),!0}return!1}i.__esModule=!0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),u=16,l=function(e){function t(i){n(this,t);var a=r(this,e.call(this,i));return a.uploadHookHelper=a,a.canvas=document.createElement("canvas"),a.canvas.width=u,a.canvas.height=u,a.ctx=a.canvas.getContext("2d"),a.registerUploadHook(s),a}return a(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.ctx=null,this.canvas=null},t}(function(e){return e&&e.__esModule?e:{default:e}}(e("../BasePrepare")).default);i.default=l,o.CanvasRenderer.registerPlugin("prepare",l)},{"../../core":64,"../BasePrepare":181}],183:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0;var r=e("./webgl/WebGLPrepare");Object.defineProperty(i,"webgl",{enumerable:!0,get:function(){return n(r).default}});var a=e("./canvas/CanvasPrepare");Object.defineProperty(i,"canvas",{enumerable:!0,get:function(){return n(a).default}});var s=e("./BasePrepare");Object.defineProperty(i,"BasePrepare",{enumerable:!0,get:function(){return n(s).default}});var o=e("./limiters/CountLimiter");Object.defineProperty(i,"CountLimiter",{enumerable:!0,get:function(){return n(o).default}});var u=e("./limiters/TimeLimiter");Object.defineProperty(i,"TimeLimiter",{enumerable:!0,get:function(){return n(u).default}})},{"./BasePrepare":181,"./canvas/CanvasPrepare":182,"./limiters/CountLimiter":184,"./limiters/TimeLimiter":185,"./webgl/WebGLPrepare":186}],184:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(t){n(this,e),this.maxItemsPerFrame=t,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();i.default=r},{}],185:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var r=function(){function e(t){n(this,e),this.maxMilliseconds=t,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}();i.default=r},{}],186:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return t instanceof l.BaseTexture&&(t._glTextures[e.CONTEXT_UID]||e.textureManager.updateTexture(t),!0)}function o(e,t){return t instanceof l.Graphics&&((t.dirty||t.clearDirty||!t._webGL[e.plugins.graphics.CONTEXT_UID])&&e.plugins.graphics.updateGraphics(t),!0)}function u(e,t){return e instanceof l.Graphics&&(t.push(e),!0)}i.__esModule=!0;var l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../../core")),h=function(e){function t(i){n(this,t);var a=r(this,e.call(this,i));return a.uploadHookHelper=a.renderer,a.registerFindHook(u),a.registerUploadHook(s),a.registerUploadHook(o),a}return a(t,e),t}(function(e){return e&&e.__esModule?e:{default:e}}(e("../BasePrepare")).default);i.default=h,l.WebGLRenderer.registerPlugin("prepare",h)},{"../../core":64,"../BasePrepare":181}],187:[function(e,t,i){(function(t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}i.__esModule=!0,i.loader=i.prepare=i.particles=i.mesh=i.loaders=i.interaction=i.filters=i.extras=i.extract=i.accessibility=void 0;var r=e("./polyfill");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(i,e,{enumerable:!0,get:function(){return r[e]}})});var a=e("./core");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(i,e,{enumerable:!0,get:function(){return a[e]}})});var s=function(e){return e&&e.__esModule?e:{default:e}}(e("./deprecation")),o=n(e("./accessibility")),u=n(e("./extract")),l=n(e("./extras")),h=n(e("./filters")),c=n(e("./interaction")),d=n(e("./loaders")),p=n(e("./mesh")),f=n(e("./particles")),g=n(e("./prepare"));a.utils.mixins.performMixins();var m=d.shared||null;i.accessibility=o,i.extract=u,i.extras=l,i.filters=h,i.interaction=c,i.loaders=d,i.mesh=p,i.particles=f,i.prepare=g,i.loader=m,"function"==typeof s.default&&(0,s.default)(i),t.PIXI=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":41,"./core":64,"./deprecation":129,"./extract":131,"./extras":140,"./filters":151,"./interaction":158,"./loaders":161,"./mesh":170,"./particles":173,"./polyfill":179,"./prepare":183}]},{},[187])(187)}),function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){e.exports=i(6)},function(e,t){e.exports=PIXI},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={linear:function(){return function(e){return e}},inQuad:function(){return function(e){return e*e}},outQuad:function(){return function(e){return e*(2-e)}},inOutQuad:function(){return function(e){return 1>(e*=2)?.5*e*e:-.5*(--e*(e-2)-1)}},inCubic:function(){return function(e){return e*e*e}},outCubic:function(){return function(e){return--e*e*e+1}},inOutCubic:function(){return function(e){return 1>(e*=2)?.5*e*e*e:.5*((e-=2)*e*e+2)}},inQuart:function(){return function(e){return e*e*e*e}},outQuart:function(){return function(e){return 1- --e*e*e*e}},inOutQuart:function(){return function(e){return 1>(e*=2)?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},inQuint:function(){return function(e){return e*e*e*e*e}},outQuint:function(){return function(e){return--e*e*e*e*e+1}},inOutQuint:function(){return function(e){return 1>(e*=2)?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},inSine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},outSine:function(){return function(e){return Math.sin(e*Math.PI/2)}},inOutSine:function(){return function(e){return.5*(1-Math.cos(Math.PI*e))}},inExpo:function(){return function(e){return 0===e?0:Math.pow(1024,e-1)}},outExpo:function(){return function(e){return 1===e?1:1-Math.pow(2,-10*e)}},inOutExpo:function(){return function(e){return 0===e?0:1===e?1:1>(e*=2)?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},inCirc:function(){return function(e){return 1-Math.sqrt(1-e*e)}},outCirc:function(){return function(e){return Math.sqrt(1- --e*e)}},inOutCirc:function(){return function(e){return 1>(e*=2)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-2)*(e-2))+1)}},inElastic:function(){var e=arguments.length<=0||void 0===arguments[0]?.1:arguments[0],t=arguments.length<=1||void 0===arguments[1]?.4:arguments[1];return function(i){var n=void 0;return 0===i?0:1===i?1:(!e||1>e?(e=1,n=t/4):n=t*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(i-1))*Math.sin((i-1-n)*(2*Math.PI)/t))}},outElastic:function(){var e=arguments.length<=0||void 0===arguments[0]?.1:arguments[0],t=arguments.length<=1||void 0===arguments[1]?.4:arguments[1];return function(i){var n=void 0;return 0===i?0:1===i?1:(!e||1>e?(e=1,n=t/4):n=t*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*i)*Math.sin((i-n)*(2*Math.PI)/t)+1)}},inOutElastic:function(){var e=arguments.length<=0||void 0===arguments[0]?.1:arguments[0],t=arguments.length<=1||void 0===arguments[1]?.4:arguments[1];return function(i){var n=void 0;return 0===i?0:1===i?1:(!e||1>e?(e=1,n=t/4):n=t*Math.asin(1/e)/(2*Math.PI),1>(i*=2)?e*Math.pow(2,10*(i-1))*Math.sin((i-1-n)*(2*Math.PI)/t)*-.5:e*Math.pow(2,-10*(i-1))*Math.sin((i-1-n)*(2*Math.PI)/t)*.5+1)}},inBack:function(e){return function(t){var i=e||1.70158;return t*t*((i+1)*t-i)}},outBack:function(e){return function(t){var i=e||1.70158;return--t*t*((i+1)*t+i)+1}},inOutBack:function(e){return function(t){var i=1.525*(e||1.70158);return 1>(t*=2)?t*t*((i+1)*t-i)*.5:.5*((t-2)*(t-2)*((i+1)*(t-2)+i)+2)}},inBounce:function(){return function(e){return 1-i.outBounce()(1-e)}},outBounce:function(){return function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},inOutBounce:function(){return function(e){return.5>e?.5*i.inBounce()(2*e):.5*i.outBounce()(2*e-1)+.5}},customArray:function(e){return e?function(e){return e}:i.linear()}};t.default=i},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,i,n,r,a){for(var o in e)if(u(e[o]))s(e[o],t[o],i[o],n,r,a);else{var l=t[o],h=e[o]-t[o],c=r/n;i[o]=l+h*a(c)}}function o(e,t,i){for(var n in e)0===t[n]||t[n]||(u(i[n])?(t[n]=JSON.parse(JSON.stringify(i[n])),o(e[n],t[n],i[n])):t[n]=i[n])}function u(e){return"[object Object]"===Object.prototype.toString.call(e)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(1)),c=function(e){return e&&e.__esModule?e:{default:e}}(i(2)),d=function(e){function t(e,i){n(this,t);var a=r(this,Object.getPrototypeOf(t).call(this));return a.target=e,i&&a.addTo(i),a.clear(),a}return a(t,h.utils.EventEmitter),l(t,[{key:"addTo",value:function(e){return this.manager=e,this.manager.addTween(this),this}},{key:"chain",value:function(e){return e||(e=new t(this.target)),this._chainTween=e,e}},{key:"start",value:function(){return this.active=!0,this}},{key:"stop",value:function(){return this.active=!1,this.emit("stop"),this}},{key:"to",value:function(e){return this._to=e,this}},{key:"from",value:function(e){return this._from=e,this}},{key:"remove",value:function(){return this.manager?(this.manager.removeTween(this),this):this}},{key:"clear",value:function(){this.time=0,this.active=!1,this.easing=c.default.linear(),this.expire=!1,this.repeat=0,this.loop=!1,this.delay=0,this.pingPong=!1,this.isStarted=!1,this.isEnded=!1,this._to=null,this._from=null,this._delayTime=0,this._elapsedTime=0,this._repeat=0,this._pingPong=!1,this._chainTween=null,this.path=null,this.pathReverse=!1,this.pathFrom=0,this.pathTo=0}},{key:"reset",value:function(){if(this._elapsedTime=0,this._repeat=0,this._delayTime=0,this.isStarted=!1,this.isEnded=!1,this.pingPong&&this._pingPong){var e=this._to,t=this._from;this._to=t,this._from=e,this._pingPong=!1}return this}},{key:"update",value:function(e,t){if(this._canUpdate()||!this._to&&!this.path){var i=void 0,n=void 0;if(this.delay>this._delayTime)return void(this._delayTime+=t);this.isStarted||(this._parseData(),this.isStarted=!0,this.emit("start"));var r=this.pingPong?this.time/2:this.time;if(r>this._elapsedTime){var a=this._elapsedTime+t,s=a>=r;this._elapsedTime=s?r:a,this._apply(r);var o=this._pingPong?r+this._elapsedTime:this._elapsedTime;if(this.emit("update",o),s){if(this.pingPong&&!this._pingPong)return this._pingPong=!0,i=this._to,n=this._from,this._from=i,this._to=n,this.path&&(i=this.pathTo,n=this.pathFrom,this.pathTo=n,this.pathFrom=i),this.emit("pingpong"),void(this._elapsedTime=0);if(this.loop||this.repeat>this._repeat)return this._repeat++,this.emit("repeat",this._repeat),this._elapsedTime=0,void(this.pingPong&&this._pingPong&&(i=this._to,n=this._from,this._to=n,this._from=i,this.path&&(i=this.pathTo,n=this.pathFrom,this.pathTo=n,this.pathFrom=i),this._pingPong=!1));this.isEnded=!0,this.active=!1,this.emit("end"),this._chainTween&&(this._chainTween.addTo(this.manager),this._chainTween.start())}}}}},{key:"_parseData",value:function(){if(!this.isStarted&&(this._from||(this._from={}),o(this._to,this._from,this.target),this.path)){var e=this.path.totalDistance();this.pathReverse?(this.pathFrom=e,this.pathTo=0):(this.pathFrom=0,this.pathTo=e)}}},{key:"_apply",value:function(e){if(s(this._to,this._from,this.target,e,this._elapsedTime,this.easing),this.path){var t=this.pingPong?this.time/2:this.time,i=this.pathFrom,n=this.pathTo-this.pathFrom,r=t,a=this._elapsedTime/r,o=i+n*this.easing(a),u=this.path.getPointAtDistance(o);this.target.position.set(u.x,u.y)}}},{key:"_canUpdate",value:function(){return this.time&&this.active&&this.target}}]),t}();t.default=d},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(i(3)),s=function(){function e(){n(this,e),this.tweens=[],this._tweensToDelete=[],this._last=0}return r(e,[{key:"update",value:function(e){var t=void 0;e||0===e?t=1e3*e:(t=this._getDeltaMS(),e=t/1e3);for(n=0;n<this.tweens.length;n++){var i=this.tweens[n];i.active&&(i.update(e,t),i.isEnded&&i.expire&&i.remove())}if(this._tweensToDelete.length){for(var n=0;n<this._tweensToDelete.length;n++)this._remove(this._tweensToDelete[n]);this._tweensToDelete.length=0}}},{key:"getTweensForTarget",value:function(e){for(var t=[],i=0;i<this.tweens.length;i++)this.tweens[i].target===e&&t.push(this.tweens[i]);return t}},{key:"createTween",value:function(e){return new a.default(e,this)}},{key:"addTween",value:function(e){e.manager=this,this.tweens.push(e)}},{key:"removeTween",value:function(e){this._tweensToDelete.push(e)}},{key:"_remove",value:function(e){var t=this.tweens.indexOf(e);-1!==t&&this.tweens.splice(t,1)}},{key:"_getDeltaMS",value:function(){0===this._last&&(this._last=Date.now());var e=Date.now(),t=e-this._last;return this._last=e,t}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(1)),s=function(){function e(){n(this,e),this._colsed=!1,this.polygon=new a.Polygon,this.polygon.closed=!1,this._tmpPoint=new a.Point,this._tmpPoint2=new a.Point,this._tmpDistance=[],this.currentPath=null,this.graphicsData=[],this.dirty=!0}return r(e,[{key:"moveTo",value:function(e,t){return a.Graphics.prototype.moveTo.call(this,e,t),this.dirty=!0,this}},{key:"lineTo",value:function(e,t){return a.Graphics.prototype.lineTo.call(this,e,t),this.dirty=!0,this}},{key:"bezierCurveTo",value:function(e,t,i,n,r,s){return a.Graphics.prototype.bezierCurveTo.call(this,e,t,i,n,r,s),this.dirty=!0,this}},{key:"quadraticCurveTo",value:function(e,t,i,n){return a.Graphics.prototype.quadraticCurveTo.call(this,e,t,i,n),this.dirty=!0,this}},{key:"arcTo",value:function(e,t,i,n,r){return a.Graphics.prototype.arcTo.call(this,e,t,i,n,r),this.dirty=!0,this}},{key:"arc",value:function(e,t,i,n,r,s){return a.Graphics.prototype.arc.call(this,e,t,i,n,r,s),this.dirty=!0,this}},{key:"drawShape",value:function(e){return a.Graphics.prototype.drawShape.call(this,e),this.dirty=!0,this}},{key:"getPoint",value:function(e){this.parsePoints();var t=this.closed&&e>=this.length-1?0:2*e;return this._tmpPoint.set(this.polygon.points[t],this.polygon.points[t+1]),this._tmpPoint}},{key:"distanceBetween",value:function(e,t){this.parsePoints();var i=this.getPoint(e),n=i.x,r=i.y,a=this.getPoint(t),s=a.x-n,o=a.y-r;return Math.sqrt(s*s+o*o)}},{key:"totalDistance",value:function(){this.parsePoints(),this._tmpDistance.length=0,this._tmpDistance.push(0);for(var e=this.length,t=0,i=0;e-1>i;i++)t+=this.distanceBetween(i,i+1),this._tmpDistance.push(t);return t}},{key:"getPointAt",value:function(e){if(this.parsePoints(),e>this.length)return this.getPoint(this.length-1);if(e%1==0)return this.getPoint(e);this._tmpPoint2.set(0,0);var t=e%1,i=this.getPoint(Math.ceil(e)),n=i.x,r=i.y,a=this.getPoint(Math.floor(e)),s=a.x,o=a.y,u=-(s-n)*t,l=-(o-r)*t;return this._tmpPoint2.set(s+u,o+l),this._tmpPoint2}},{key:"getPointAtDistance",value:function(e){this.parsePoints(),this._tmpDistance||this.totalDistance();var t=this._tmpDistance.length,i=0,n=this._tmpDistance[this._tmpDistance.length-1];0>e?e=n+e:e>n&&(e-=n);for(var r=0;t>r&&(e>=this._tmpDistance[r]&&(i=r),!(e<this._tmpDistance[r]));r++);if(i===this.length-1)return this.getPointAt(i);var a=e-this._tmpDistance[i],s=this._tmpDistance[i+1]-this._tmpDistance[i];return this.getPointAt(i+a/s)}},{key:"parsePoints",value:function(){if(!this.dirty)return this;this.dirty=!1,this.polygon.points.length=0;for(var e=0;e<this.graphicsData.length;e++){var t=this.graphicsData[e].shape;t&&t.points&&(this.polygon.points=this.polygon.points.concat(t.points))}return this}},{key:"clear",value:function(){return this.graphicsData.length=0,this.currentPath=null,this.polygon.points.length=0,this._closed=!1,this.dirty=!1,this}},{key:"closed",get:function(){return this._closed},set:function(e){this._closed!==e&&(this.polygon.closed=e,this._closed=e,this.dirty=!0)}},{key:"length",get:function(){return this.polygon.points.length?this.polygon.points.length/2+(this._closed?1:0):0}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(1)),a=n(i(4)),s=n(i(3)),o=n(i(5)),u=n(i(2));r.Graphics.prototype.drawPath=function(e){return e.parsePoints(),this.drawShape(e.polygon),this};var l={TweenManager:a.default,Tween:s.default,Easing:u.default,TweenPath:o.default};r.tweenManager||(r.tweenManager=new a.default,r.tween=l),t.default=l}]);var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pixi_spine;!function(e){!function(e){var t=function(){function e(e,t,i){if(null==e)throw new Error("name cannot be null.");if(null==t)throw new Error("timelines cannot be null.");this.name=e,this.timelines=t,this.duration=i}return e.prototype.apply=function(e,t,i,n,r,a,s,o){if(null==e)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(i%=this.duration,t>0&&(t%=this.duration));for(var u=this.timelines,l=0,h=u.length;l<h;l++)u[l].apply(e,t,i,r,a,s,o)},e.binarySearch=function(e,t,i){void 0===i&&(i=1);var n=0,r=e.length/i-2;if(0==r)return i;for(var a=r>>>1;;){if(e[(a+1)*i]<=t?n=a+1:r=a,n==r)return(n+1)*i;a=n+r>>>1}},e.linearSearch=function(e,t,i){for(var n=0,r=e.length-i;n<=r;n+=i)if(e[n]>t)return n;return-1},e}();e.Animation=t;var i;!function(e){e[e.setup=0]="setup",e[e.current=1]="current",e[e.currentLayered=2]="currentLayered"}(i=e.MixPose||(e.MixPose={}));var n;!function(e){e[e.in=0]="in",e[e.out=1]="out"}(n=e.MixDirection||(e.MixDirection={}));var r;!function(e){e[e.rotate=0]="rotate",e[e.translate=1]="translate",e[e.scale=2]="scale",e[e.shear=3]="shear",e[e.attachment=4]="attachment",e[e.color=5]="color",e[e.deform=6]="deform",e[e.event=7]="event",e[e.drawOrder=8]="drawOrder",e[e.ikConstraint=9]="ikConstraint",e[e.transformConstraint=10]="transformConstraint",e[e.pathConstraintPosition=11]="pathConstraintPosition",e[e.pathConstraintSpacing=12]="pathConstraintSpacing",e[e.pathConstraintMix=13]="pathConstraintMix",e[e.twoColor=14]="twoColor"}(r=e.TimelineType||(e.TimelineType={}));var a=function(){function t(i){if(i<=0)throw new Error("frameCount must be > 0: "+i);this.curves=e.Utils.newFloatArray((i-1)*t.BEZIER_SIZE)}return t.prototype.getFrameCount=function(){return this.curves.length/t.BEZIER_SIZE+1},t.prototype.setLinear=function(e){this.curves[e*t.BEZIER_SIZE]=t.LINEAR},t.prototype.setStepped=function(e){this.curves[e*t.BEZIER_SIZE]=t.STEPPED},t.prototype.getCurveType=function(e){var i=e*t.BEZIER_SIZE;if(i==this.curves.length)return t.LINEAR;var n=this.curves[i];return n==t.LINEAR?t.LINEAR:n==t.STEPPED?t.STEPPED:t.BEZIER},t.prototype.setCurve=function(e,i,n,r,a){var s=.03*(2*-i+r),o=.03*(2*-n+a),u=.006*(3*(i-r)+1),l=.006*(3*(n-a)+1),h=2*s+u,c=2*o+l,d=.3*i+s+.16666667*u,p=.3*n+o+.16666667*l,f=e*t.BEZIER_SIZE,g=this.curves;g[f++]=t.BEZIER;for(var m=d,v=p,y=f+t.BEZIER_SIZE-1;f<y;f+=2)g[f]=m,g[f+1]=v,d+=h,p+=c,h+=u,c+=l,m+=d,v+=p},t.prototype.getCurvePercent=function(i,n){n=e.MathUtils.clamp(n,0,1);var r=this.curves,a=i*t.BEZIER_SIZE,s=r[a];if(s==t.LINEAR)return n;if(s==t.STEPPED)return 0;for(var o=0,u=++a,l=a+t.BEZIER_SIZE-1;a<l;a+=2)if((o=r[a])>=n){var h=void 0,c=void 0;return a==u?(h=0,c=0):(h=r[a-2],c=r[a-1]),c+(r[a+1]-c)*(n-h)/(o-h)}var d=r[a-1];return d+(1-d)*(n-o)/(1-o)},t}();a.LINEAR=0,a.STEPPED=1,a.BEZIER=2,a.BEZIER_SIZE=19,e.CurveTimeline=a;var s=function(n){function a(t){var i=n.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t<<1),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(r.rotate<<24)+this.boneIndex},a.prototype.setFrame=function(e,t,i){e<<=1,this.frames[e]=t,this.frames[e+a.ROTATION]=i},a.prototype.apply=function(e,n,r,s,o,u,l){var h=this.frames,c=e.bones[this.boneIndex];if(r<h[0])switch(u){case i.setup:return void(c.rotation=c.data.rotation);case i.current:var d=c.data.rotation-c.rotation;d-=360*(16384-(16384.499999999996-d/360|0)),c.rotation+=d*o}else if(r>=h[h.length-a.ENTRIES])if(u==i.setup)c.rotation=c.data.rotation+h[h.length+a.PREV_ROTATION]*o;else{var p=c.data.rotation+h[h.length+a.PREV_ROTATION]-c.rotation;p-=360*(16384-(16384.499999999996-p/360|0)),c.rotation+=p*o}else{var f=t.binarySearch(h,r,a.ENTRIES),g=h[f+a.PREV_ROTATION],m=h[f],v=this.getCurvePercent((f>>1)-1,1-(r-m)/(h[f+a.PREV_TIME]-m)),y=h[f+a.ROTATION]-g;y=g+(y-=360*(16384-(16384.499999999996-y/360|0)))*v,u==i.setup?(y-=360*(16384-(16384.499999999996-y/360|0)),c.rotation=c.data.rotation+y*o):(y=c.data.rotation+y-c.rotation,y-=360*(16384-(16384.499999999996-y/360|0)),c.rotation+=y*o)}},a}(a);s.ENTRIES=2,s.PREV_TIME=-2,s.PREV_ROTATION=-1,s.ROTATION=1,e.RotateTimeline=s;var o=function(n){function a(t){var i=n.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t*a.ENTRIES),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(r.translate<<24)+this.boneIndex},a.prototype.setFrame=function(e,t,i,n){e*=a.ENTRIES,this.frames[e]=t,this.frames[e+a.X]=i,this.frames[e+a.Y]=n},a.prototype.apply=function(e,n,r,s,o,u,l){var h=this.frames,c=e.bones[this.boneIndex];if(r<h[0])switch(u){case i.setup:return c.x=c.data.x,void(c.y=c.data.y);case i.current:c.x+=(c.data.x-c.x)*o,c.y+=(c.data.y-c.y)*o}else{var d=0,p=0;if(r>=h[h.length-a.ENTRIES])d=h[h.length+a.PREV_X],p=h[h.length+a.PREV_Y];else{var f=t.binarySearch(h,r,a.ENTRIES);d=h[f+a.PREV_X],p=h[f+a.PREV_Y];var g=h[f],m=this.getCurvePercent(f/a.ENTRIES-1,1-(r-g)/(h[f+a.PREV_TIME]-g));d+=(h[f+a.X]-d)*m,p+=(h[f+a.Y]-p)*m}u==i.setup?(c.x=c.data.x+d*o,c.y=c.data.y+p*o):(c.x+=(c.data.x+d-c.x)*o,c.y+=(c.data.y+p-c.y)*o)}},a}(a);o.ENTRIES=3,o.PREV_TIME=-3,o.PREV_X=-2,o.PREV_Y=-1,o.X=1,o.Y=2,e.TranslateTimeline=o;var u=function(a){function s(e){return a.call(this,e)||this}return __extends(s,a),s.prototype.getPropertyId=function(){return(r.scale<<24)+this.boneIndex},s.prototype.apply=function(r,a,o,u,l,h,c){var d=this.frames,p=r.bones[this.boneIndex];if(o<d[0])switch(h){case i.setup:return p.scaleX=p.data.scaleX,void(p.scaleY=p.data.scaleY);case i.current:p.scaleX+=(p.data.scaleX-p.scaleX)*l,p.scaleY+=(p.data.scaleY-p.scaleY)*l}else{var f=0,g=0;if(o>=d[d.length-s.ENTRIES])f=d[d.length+s.PREV_X]*p.data.scaleX,g=d[d.length+s.PREV_Y]*p.data.scaleY;else{var m=t.binarySearch(d,o,s.ENTRIES);f=d[m+s.PREV_X],g=d[m+s.PREV_Y];var v=d[m],y=this.getCurvePercent(m/s.ENTRIES-1,1-(o-v)/(d[m+s.PREV_TIME]-v));f=(f+(d[m+s.X]-f)*y)*p.data.scaleX,g=(g+(d[m+s.Y]-g)*y)*p.data.scaleY}if(1==l)p.scaleX=f,p.scaleY=g;else{var b=0,_=0;h==i.setup?(b=p.data.scaleX,_=p.data.scaleY):(b=p.scaleX,_=p.scaleY),c==n.out?(f=Math.abs(f)*e.MathUtils.signum(b),g=Math.abs(g)*e.MathUtils.signum(_)):(b=Math.abs(b)*e.MathUtils.signum(f),_=Math.abs(_)*e.MathUtils.signum(g)),p.scaleX=b+(f-b)*l,p.scaleY=_+(g-_)*l}}},s}(o);e.ScaleTimeline=u;var l=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.getPropertyId=function(){return(r.shear<<24)+this.boneIndex},n.prototype.apply=function(e,r,a,s,o,u,l){var h=this.frames,c=e.bones[this.boneIndex];if(a<h[0])switch(u){case i.setup:return c.shearX=c.data.shearX,void(c.shearY=c.data.shearY);case i.current:c.shearX+=(c.data.shearX-c.shearX)*o,c.shearY+=(c.data.shearY-c.shearY)*o}else{var d=0,p=0;if(a>=h[h.length-n.ENTRIES])d=h[h.length+n.PREV_X],p=h[h.length+n.PREV_Y];else{var f=t.binarySearch(h,a,n.ENTRIES);d=h[f+n.PREV_X],p=h[f+n.PREV_Y];var g=h[f],m=this.getCurvePercent(f/n.ENTRIES-1,1-(a-g)/(h[f+n.PREV_TIME]-g));d+=(h[f+n.X]-d)*m,p+=(h[f+n.Y]-p)*m}u==i.setup?(c.shearX=c.data.shearX+d*o,c.shearY=c.data.shearY+p*o):(c.shearX+=(c.data.shearX+d-c.shearX)*o,c.shearY+=(c.data.shearY+p-c.shearY)*o)}},n}(o);e.ShearTimeline=l;var h=function(n){function a(t){var i=n.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t*a.ENTRIES),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(r.color<<24)+this.slotIndex},a.prototype.setFrame=function(e,t,i,n,r,s){e*=a.ENTRIES,this.frames[e]=t,this.frames[e+a.R]=i,this.frames[e+a.G]=n,this.frames[e+a.B]=r,this.frames[e+a.A]=s},a.prototype.apply=function(e,n,r,s,o,u,l){var h=e.slots[this.slotIndex],c=this.frames;if(r<c[0])switch(u){case i.setup:return void h.color.setFromColor(h.data.color);case i.current:var d=h.color,p=h.data.color;d.add((p.r-d.r)*o,(p.g-d.g)*o,(p.b-d.b)*o,(p.a-d.a)*o)}else{var f=0,g=0,m=0,v=0;if(r>=c[c.length-a.ENTRIES]){var y=c.length;f=c[y+a.PREV_R],g=c[y+a.PREV_G],m=c[y+a.PREV_B],v=c[y+a.PREV_A]}else{var b=t.binarySearch(c,r,a.ENTRIES);f=c[b+a.PREV_R],g=c[b+a.PREV_G],m=c[b+a.PREV_B],v=c[b+a.PREV_A];var _=c[b],w=this.getCurvePercent(b/a.ENTRIES-1,1-(r-_)/(c[b+a.PREV_TIME]-_));f+=(c[b+a.R]-f)*w,g+=(c[b+a.G]-g)*w,m+=(c[b+a.B]-m)*w,v+=(c[b+a.A]-v)*w}if(1==o)h.color.set(f,g,m,v);else{d=h.color;u==i.setup&&d.setFromColor(h.data.color),d.add((f-d.r)*o,(g-d.g)*o,(m-d.b)*o,(v-d.a)*o)}}},a}(a);h.ENTRIES=5,h.PREV_TIME=-5,h.PREV_R=-4,h.PREV_G=-3,h.PREV_B=-2,h.PREV_A=-1,h.R=1,h.G=2,h.B=3,h.A=4,e.ColorTimeline=h;var c=function(n){function a(t){var i=n.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t*a.ENTRIES),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(r.twoColor<<24)+this.slotIndex},a.prototype.setFrame=function(e,t,i,n,r,s,o,u,l){e*=a.ENTRIES,this.frames[e]=t,this.frames[e+a.R]=i,this.frames[e+a.G]=n,this.frames[e+a.B]=r,this.frames[e+a.A]=s,this.frames[e+a.R2]=o,this.frames[e+a.G2]=u,this.frames[e+a.B2]=l},a.prototype.apply=function(e,n,r,s,o,u,l){var h=e.slots[this.slotIndex],c=this.frames;if(r<c[0])switch(u){case i.setup:return h.color.setFromColor(h.data.color),void h.darkColor.setFromColor(h.data.darkColor);case i.current:var d=h.color,p=h.darkColor,f=h.data.color,g=h.data.darkColor;d.add((f.r-d.r)*o,(f.g-d.g)*o,(f.b-d.b)*o,(f.a-d.a)*o),p.add((g.r-p.r)*o,(g.g-p.g)*o,(g.b-p.b)*o,0)}else{var m=0,v=0,y=0,b=0,_=0,w=0,x=0;if(r>=c[c.length-a.ENTRIES]){var T=c.length;m=c[T+a.PREV_R],v=c[T+a.PREV_G],y=c[T+a.PREV_B],b=c[T+a.PREV_A],_=c[T+a.PREV_R2],w=c[T+a.PREV_G2],x=c[T+a.PREV_B2]}else{var S=t.binarySearch(c,r,a.ENTRIES);m=c[S+a.PREV_R],v=c[S+a.PREV_G],y=c[S+a.PREV_B],b=c[S+a.PREV_A],_=c[S+a.PREV_R2],w=c[S+a.PREV_G2],x=c[S+a.PREV_B2];var I=c[S],P=this.getCurvePercent(S/a.ENTRIES-1,1-(r-I)/(c[S+a.PREV_TIME]-I));m+=(c[S+a.R]-m)*P,v+=(c[S+a.G]-v)*P,y+=(c[S+a.B]-y)*P,b+=(c[S+a.A]-b)*P,_+=(c[S+a.R2]-_)*P,w+=(c[S+a.G2]-w)*P,x+=(c[S+a.B2]-x)*P}if(1==o)h.color.set(m,v,y,b),h.darkColor.set(_,w,x,1);else{var d=h.color,p=h.darkColor;u==i.setup&&(d.setFromColor(h.data.color),p.setFromColor(h.data.darkColor)),d.add((m-d.r)*o,(v-d.g)*o,(y-d.b)*o,(b-d.a)*o),p.add((_-p.r)*o,(w-p.g)*o,(x-p.b)*o,0)}}},a}(a);c.ENTRIES=8,c.PREV_TIME=-8,c.PREV_R=-7,c.PREV_G=-6,c.PREV_B=-5,c.PREV_A=-4,c.PREV_R2=-3,c.PREV_G2=-2,c.PREV_B2=-1,c.R=1,c.G=2,c.B=3,c.A=4,c.R2=5,c.G2=6,c.B2=7,e.TwoColorTimeline=c;var d=function(){function a(t){this.frames=e.Utils.newFloatArray(t),this.attachmentNames=new Array(t)}return a.prototype.getPropertyId=function(){return(r.attachment<<24)+this.slotIndex},a.prototype.getFrameCount=function(){return this.frames.length},a.prototype.setFrame=function(e,t,i){this.frames[e]=t,this.attachmentNames[e]=i},a.prototype.apply=function(e,r,a,s,o,u,l){var h=e.slots[this.slotIndex];if(l!=n.out||u!=i.setup){var c=this.frames;if(a<c[0]){if(u==i.setup){var d=h.data.attachmentName;h.setAttachment(null==d?null:e.getAttachment(this.slotIndex,d))}}else{var p=0;p=a>=c[c.length-1]?c.length-1:t.binarySearch(c,a,1)-1;var f=this.attachmentNames[p];e.slots[this.slotIndex].setAttachment(null==f?null:e.getAttachment(this.slotIndex,f))}}else{var g=h.data.attachmentName;h.setAttachment(null==g?null:e.getAttachment(this.slotIndex,g))}},a}();e.AttachmentTimeline=d;var p=function(n){function a(t){var i=n.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t),i.frameVertices=new Array(t),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(r.deform<<27)+ +this.attachment.id+this.slotIndex},a.prototype.setFrame=function(e,t,i){this.frames[e]=t,this.frameVertices[e]=i},a.prototype.apply=function(n,r,a,s,o,u,l){var h=n.slots[this.slotIndex],c=h.getAttachment();if(c instanceof e.VertexAttachment&&c.applyDeform(this.attachment)){var d=h.attachmentVertices,p=this.frameVertices,f=p[0].length;d.length!=f&&u!=i.setup&&(o=1);var g=e.Utils.setArraySize(d,f),m=this.frames;if(a<m[0])switch(u){case i.setup:return void(d.length=0);case i.current:o=1-o;for(b=0;b<f;b++)g[b]*=o}else if(a>=m[m.length-1]){var v=p[m.length-1];if(1==o)e.Utils.arrayCopy(v,0,g,0,f);else if(u==i.setup)if(null==(I=c).bones)for(var y=I.vertices,b=0;b<f;b++){C=y[b];g[b]=C+(v[b]-C)*o}else for(b=0;b<f;b++)g[b]=v[b]*o;else for(b=0;b<f;b++)g[b]+=(v[b]-g[b])*o}else{var _=t.binarySearch(m,a),w=p[_-1],x=p[_],T=m[_],S=this.getCurvePercent(_-1,1-(a-T)/(m[_-1]-T));if(1==o)for(b=0;b<f;b++){P=w[b];g[b]=P+(x[b]-P)*S}else if(u==i.setup){var I=c;if(null==I.bones)for(var y=I.vertices,b=0;b<f;b++){var P=w[b],C=y[b];g[b]=C+(P+(x[b]-P)*S-C)*o}else for(b=0;b<f;b++){P=w[b];g[b]=(P+(x[b]-P)*S)*o}}else for(b=0;b<f;b++){P=w[b];g[b]+=(P+(x[b]-P)*S-g[b])*o}}}},a}(a);e.DeformTimeline=p;var f=function(){function i(t){this.frames=e.Utils.newFloatArray(t),this.events=new Array(t)}return i.prototype.getPropertyId=function(){return r.event<<24},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(e,t){this.frames[e]=t.time,this.events[e]=t},i.prototype.apply=function(e,i,n,r,a,s,o){if(null!=r){var u=this.frames,l=this.frames.length;if(i>n)this.apply(e,i,Number.MAX_VALUE,r,a,s,o),i=-1;else if(i>=u[l-1])return;if(!(n<u[0])){var h=0;if(i<u[0])h=0;else for(var c=u[h=t.binarySearch(u,i)];h>0&&u[h-1]==c;)h--;for(;h<l&&n>=u[h];h++)r.push(this.events[h])}}},i}();e.EventTimeline=f;var g=function(){function a(t){this.frames=e.Utils.newFloatArray(t),this.drawOrders=new Array(t)}return a.prototype.getPropertyId=function(){return r.drawOrder<<24},a.prototype.getFrameCount=function(){return this.frames.length},a.prototype.setFrame=function(e,t,i){this.frames[e]=t,this.drawOrders[e]=i},a.prototype.apply=function(r,a,s,o,u,l,h){var c=r.drawOrder,d=r.slots;if(h!=n.out||l!=i.setup){var p=this.frames;if(s<p[0])l==i.setup&&e.Utils.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length);else{var f=0;f=s>=p[p.length-1]?p.length-1:t.binarySearch(p,s)-1;var g=this.drawOrders[f];if(null==g)e.Utils.arrayCopy(d,0,c,0,d.length);else for(var m=0,v=g.length;m<v;m++)c[m]=d[g[m]]}}else e.Utils.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length)},a}();e.DrawOrderTimeline=g;var m=function(a){function s(t){var i=a.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t*s.ENTRIES),i}return __extends(s,a),s.prototype.getPropertyId=function(){return(r.ikConstraint<<24)+this.ikConstraintIndex},s.prototype.setFrame=function(e,t,i,n){e*=s.ENTRIES,this.frames[e]=t,this.frames[e+s.MIX]=i,this.frames[e+s.BEND_DIRECTION]=n},s.prototype.apply=function(e,r,a,o,u,l,h){var c=this.frames,d=e.ikConstraints[this.ikConstraintIndex];if(a<c[0])switch(l){case i.setup:return d.mix=d.data.mix,void(d.bendDirection=d.data.bendDirection);case i.current:d.mix+=(d.data.mix-d.mix)*u,d.bendDirection=d.data.bendDirection}else if(a>=c[c.length-s.ENTRIES])l==i.setup?(d.mix=d.data.mix+(c[c.length+s.PREV_MIX]-d.data.mix)*u,d.bendDirection=h==n.out?d.data.bendDirection:c[c.length+s.PREV_BEND_DIRECTION]):(d.mix+=(c[c.length+s.PREV_MIX]-d.mix)*u,h==n.in&&(d.bendDirection=c[c.length+s.PREV_BEND_DIRECTION]));else{var p=t.binarySearch(c,a,s.ENTRIES),f=c[p+s.PREV_MIX],g=c[p],m=this.getCurvePercent(p/s.ENTRIES-1,1-(a-g)/(c[p+s.PREV_TIME]-g));l==i.setup?(d.mix=d.data.mix+(f+(c[p+s.MIX]-f)*m-d.data.mix)*u,d.bendDirection=h==n.out?d.data.bendDirection:c[p+s.PREV_BEND_DIRECTION]):(d.mix+=(f+(c[p+s.MIX]-f)*m-d.mix)*u,h==n.in&&(d.bendDirection=c[p+s.PREV_BEND_DIRECTION]))}},s}(a);m.ENTRIES=3,m.PREV_TIME=-3,m.PREV_MIX=-2,m.PREV_BEND_DIRECTION=-1,m.MIX=1,m.BEND_DIRECTION=2,e.IkConstraintTimeline=m;var v=function(n){function a(t){var i=n.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t*a.ENTRIES),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(r.transformConstraint<<24)+this.transformConstraintIndex},a.prototype.setFrame=function(e,t,i,n,r,s){e*=a.ENTRIES,this.frames[e]=t,this.frames[e+a.ROTATE]=i,this.frames[e+a.TRANSLATE]=n,this.frames[e+a.SCALE]=r,this.frames[e+a.SHEAR]=s},a.prototype.apply=function(e,n,r,s,o,u,l){var h=this.frames,c=e.transformConstraints[this.transformConstraintIndex];if(r<h[0]){_=c.data;switch(u){case i.setup:return c.rotateMix=_.rotateMix,c.translateMix=_.translateMix,c.scaleMix=_.scaleMix,void(c.shearMix=_.shearMix);case i.current:c.rotateMix+=(_.rotateMix-c.rotateMix)*o,c.translateMix+=(_.translateMix-c.translateMix)*o,c.scaleMix+=(_.scaleMix-c.scaleMix)*o,c.shearMix+=(_.shearMix-c.shearMix)*o}}else{var d=0,p=0,f=0,g=0;if(r>=h[h.length-a.ENTRIES]){var m=h.length;d=h[m+a.PREV_ROTATE],p=h[m+a.PREV_TRANSLATE],f=h[m+a.PREV_SCALE],g=h[m+a.PREV_SHEAR]}else{var v=t.binarySearch(h,r,a.ENTRIES);d=h[v+a.PREV_ROTATE],p=h[v+a.PREV_TRANSLATE],f=h[v+a.PREV_SCALE],g=h[v+a.PREV_SHEAR];var y=h[v],b=this.getCurvePercent(v/a.ENTRIES-1,1-(r-y)/(h[v+a.PREV_TIME]-y));d+=(h[v+a.ROTATE]-d)*b,p+=(h[v+a.TRANSLATE]-p)*b,f+=(h[v+a.SCALE]-f)*b,g+=(h[v+a.SHEAR]-g)*b}if(u==i.setup){var _=c.data;c.rotateMix=_.rotateMix+(d-_.rotateMix)*o,c.translateMix=_.translateMix+(p-_.translateMix)*o,c.scaleMix=_.scaleMix+(f-_.scaleMix)*o,c.shearMix=_.shearMix+(g-_.shearMix)*o}else c.rotateMix+=(d-c.rotateMix)*o,c.translateMix+=(p-c.translateMix)*o,c.scaleMix+=(f-c.scaleMix)*o,c.shearMix+=(g-c.shearMix)*o}},a}(a);v.ENTRIES=5,v.PREV_TIME=-5,v.PREV_ROTATE=-4,v.PREV_TRANSLATE=-3,v.PREV_SCALE=-2,v.PREV_SHEAR=-1,v.ROTATE=1,v.TRANSLATE=2,v.SCALE=3,v.SHEAR=4,e.TransformConstraintTimeline=v;var y=function(n){function a(t){var i=n.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t*a.ENTRIES),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(r.pathConstraintPosition<<24)+this.pathConstraintIndex},a.prototype.setFrame=function(e,t,i){e*=a.ENTRIES,this.frames[e]=t,this.frames[e+a.VALUE]=i},a.prototype.apply=function(e,n,r,s,o,u,l){var h=this.frames,c=e.pathConstraints[this.pathConstraintIndex];if(r<h[0])switch(u){case i.setup:return void(c.position=c.data.position);case i.current:c.position+=(c.data.position-c.position)*o}else{var d=0;if(r>=h[h.length-a.ENTRIES])d=h[h.length+a.PREV_VALUE];else{var p=t.binarySearch(h,r,a.ENTRIES);d=h[p+a.PREV_VALUE];var f=h[p],g=this.getCurvePercent(p/a.ENTRIES-1,1-(r-f)/(h[p+a.PREV_TIME]-f));d+=(h[p+a.VALUE]-d)*g}u==i.setup?c.position=c.data.position+(d-c.data.position)*o:c.position+=(d-c.position)*o}},a}(a);y.ENTRIES=2,y.PREV_TIME=-2,y.PREV_VALUE=-1,y.VALUE=1,e.PathConstraintPositionTimeline=y;var b=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.getPropertyId=function(){return(r.pathConstraintSpacing<<24)+this.pathConstraintIndex},n.prototype.apply=function(e,r,a,s,o,u,l){var h=this.frames,c=e.pathConstraints[this.pathConstraintIndex];if(a<h[0])switch(u){case i.setup:return void(c.spacing=c.data.spacing);case i.current:c.spacing+=(c.data.spacing-c.spacing)*o}else{var d=0;if(a>=h[h.length-n.ENTRIES])d=h[h.length+n.PREV_VALUE];else{var p=t.binarySearch(h,a,n.ENTRIES);d=h[p+n.PREV_VALUE];var f=h[p],g=this.getCurvePercent(p/n.ENTRIES-1,1-(a-f)/(h[p+n.PREV_TIME]-f));d+=(h[p+n.VALUE]-d)*g}u==i.setup?c.spacing=c.data.spacing+(d-c.data.spacing)*o:c.spacing+=(d-c.spacing)*o}},n}(y);e.PathConstraintSpacingTimeline=b;var _=function(n){function a(t){var i=n.call(this,t)||this;return i.frames=e.Utils.newFloatArray(t*a.ENTRIES),i}return __extends(a,n),a.prototype.getPropertyId=function(){return(r.pathConstraintMix<<24)+this.pathConstraintIndex},a.prototype.setFrame=function(e,t,i,n){e*=a.ENTRIES,this.frames[e]=t,this.frames[e+a.ROTATE]=i,this.frames[e+a.TRANSLATE]=n},a.prototype.apply=function(e,n,r,s,o,u,l){var h=this.frames,c=e.pathConstraints[this.pathConstraintIndex];if(r<h[0])switch(u){case i.setup:return c.rotateMix=c.data.rotateMix,void(c.translateMix=c.data.translateMix);case i.current:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*o,c.translateMix+=(c.data.translateMix-c.translateMix)*o}else{var d=0,p=0;if(r>=h[h.length-a.ENTRIES])d=h[h.length+a.PREV_ROTATE],p=h[h.length+a.PREV_TRANSLATE];else{var f=t.binarySearch(h,r,a.ENTRIES);d=h[f+a.PREV_ROTATE],p=h[f+a.PREV_TRANSLATE];var g=h[f],m=this.getCurvePercent(f/a.ENTRIES-1,1-(r-g)/(h[f+a.PREV_TIME]-g));d+=(h[f+a.ROTATE]-d)*m,p+=(h[f+a.TRANSLATE]-p)*m}u==i.setup?(c.rotateMix=c.data.rotateMix+(d-c.data.rotateMix)*o,c.translateMix=c.data.translateMix+(p-c.data.translateMix)*o):(c.rotateMix+=(d-c.rotateMix)*o,c.translateMix+=(p-c.translateMix)*o)}},a}(a);_.ENTRIES=3,_.PREV_TIME=-3,_.PREV_ROTATE=-2,_.PREV_TRANSLATE=-1,_.ROTATE=1,_.TRANSLATE=2,e.PathConstraintMixTimeline=_}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function t(t){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new n(this),this.propertyIDs=new e.IntSet,this.mixingTo=new Array,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new e.Pool(function(){return new i}),this.data=t}return t.prototype.update=function(e){e*=this.timeScale;for(var t=this.tracks,i=0,n=t.length;i<n;i++){var r=t[i];if(null!=r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var a=e*r.timeScale;if(r.delay>0){if(r.delay-=a,r.delay>0)continue;a=-r.delay,r.delay=0}var s=r.next;if(null!=s){var o=r.trackLast-s.delay;if(o>=0){for(s.delay=0,s.trackTime=o+e*s.timeScale,r.trackTime+=a,this.setCurrent(i,s,!0);null!=s.mixingFrom;)s.mixTime+=a,s=s.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&null==r.mixingFrom){t[i]=null,this.queue.end(r),this.disposeNext(r);continue}if(null!=r.mixingFrom&&this.updateMixingFrom(r,e)){var u=r.mixingFrom;for(r.mixingFrom=null;null!=u;)this.queue.end(u),u=u.mixingFrom}r.trackTime+=a}}this.queue.drain()},t.prototype.updateMixingFrom=function(e,t){var i=e.mixingFrom;if(null==i)return!0;var n=this.updateMixingFrom(i,t);return e.mixTime>0&&(e.mixTime>=e.mixDuration||0==e.timeScale)?(0==i.totalAlpha&&(e.mixingFrom=i.mixingFrom,e.interruptAlpha=i.interruptAlpha,this.queue.end(i)),n):(i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,i.trackTime+=t*i.timeScale,e.mixTime+=t*e.timeScale,!1)},t.prototype.apply=function(i){if(null==i)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var n=this.events,r=this.tracks,a=!1,s=0,o=r.length;s<o;s++){var u=r[s];if(!(null==u||u.delay>0)){a=!0;var l=0==s?e.MixPose.current:e.MixPose.currentLayered,h=u.alpha;null!=u.mixingFrom?h*=this.applyMixingFrom(u,i,l):u.trackTime>=u.trackEnd&&null==u.next&&(h=0);var c=u.animationLast,d=u.getAnimationTime(),p=u.animation.timelines.length,f=u.animation.timelines;if(1==h)for(y=0;y<p;y++)f[y].apply(i,c,d,n,1,e.MixPose.setup,e.MixDirection.in);else{var g=u.timelineData,m=0==u.timelinesRotation.length;m&&e.Utils.setArraySize(u.timelinesRotation,p<<1,null);for(var v=u.timelinesRotation,y=0;y<p;y++){var b=f[y],_=g[y]>=t.FIRST?e.MixPose.setup:l;b instanceof e.RotateTimeline?this.applyRotateTimeline(b,i,d,h,_,v,y<<1,m):b.apply(i,c,d,n,h,_,e.MixDirection.in)}}this.queueEvents(u,d),n.length=0,u.nextAnimationLast=d,u.nextTrackLast=u.trackTime}}return this.queue.drain(),a},t.prototype.applyMixingFrom=function(i,n,r){var a=i.mixingFrom;null!=a.mixingFrom&&this.applyMixingFrom(a,n,r);var s=0;0==i.mixDuration?s=1:(s=i.mixTime/i.mixDuration)>1&&(s=1);var o=s<a.eventThreshold?this.events:null,u=s<a.attachmentThreshold,l=s<a.drawOrderThreshold,h=a.animationLast,c=a.getAnimationTime(),d=a.animation.timelines.length,p=a.animation.timelines,f=a.timelineData,g=a.timelineDipMix,m=0==a.timelinesRotation.length;m&&e.Utils.setArraySize(a.timelinesRotation,d<<1,null);var v,y=a.timelinesRotation,b=a.alpha*i.interruptAlpha,_=b*(1-s),w=0;a.totalAlpha=0;for(var x=0;x<d;x++){var T=p[x];switch(f[x]){case t.SUBSEQUENT:if(!u&&T instanceof e.AttachmentTimeline)continue;if(!l&&T instanceof e.DrawOrderTimeline)continue;v=r,w=_;break;case t.FIRST:v=e.MixPose.setup,w=_;break;case t.DIP:v=e.MixPose.setup,w=b;break;default:v=e.MixPose.setup,w=b;var S=g[x];w*=Math.max(0,1-S.mixTime/S.mixDuration)}a.totalAlpha+=w,T instanceof e.RotateTimeline?this.applyRotateTimeline(T,n,c,w,v,y,x<<1,m):T.apply(n,h,c,o,w,v,e.MixDirection.out)}return i.mixDuration>0&&this.queueEvents(a,c),this.events.length=0,a.nextAnimationLast=c,a.nextTrackLast=a.trackTime,s},t.prototype.applyRotateTimeline=function(t,i,n,r,a,s,o,u){if(u&&(s[o]=0),1!=r){var l=t,h=l.frames,c=i.bones[l.boneIndex];if(n<h[0])a==e.MixPose.setup&&(c.rotation=c.data.rotation);else{var d=0;if(n>=h[h.length-e.RotateTimeline.ENTRIES])d=c.data.rotation+h[h.length+e.RotateTimeline.PREV_ROTATION];else{var p=e.Animation.binarySearch(h,n,e.RotateTimeline.ENTRIES),f=h[p+e.RotateTimeline.PREV_ROTATION],g=h[p],m=l.getCurvePercent((p>>1)-1,1-(n-g)/(h[p+e.RotateTimeline.PREV_TIME]-g));d=h[p+e.RotateTimeline.ROTATION]-f,d=f+(d-=360*(16384-(16384.499999999996-d/360|0)))*m+c.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0))}var v=a==e.MixPose.setup?c.data.rotation:c.rotation,y=0,b=d-v;if(0==b)y=s[o];else{b-=360*(16384-(16384.499999999996-b/360|0));var _=0,w=0;u?(_=0,w=b):(_=s[o],w=s[o+1]);var x=b>0,T=_>=0;e.MathUtils.signum(w)!=e.MathUtils.signum(b)&&Math.abs(w)<=90&&(Math.abs(_)>180&&(_+=360*e.MathUtils.signum(_)),T=x),y=b+_-_%360,T!=x&&(y+=360*e.MathUtils.signum(_)),s[o]=y}s[o+1]=b,v+=y*r,c.rotation=v-360*(16384-(16384.499999999996-v/360|0))}}else t.apply(i,0,n,null,1,a,e.MixDirection.in)},t.prototype.queueEvents=function(e,t){for(var i=e.animationStart,n=e.animationEnd,r=n-i,a=e.trackLast%r,s=this.events,o=0,u=s.length;o<u;o++){var l=s[o];if(l.time<a)break;l.time>n||this.queue.event(e,l)}for((e.loop?a>e.trackTime%r:t>=n&&e.animationLast<n)&&this.queue.complete(e);o<u;o++)s[o].time<i||this.queue.event(e,s[o])},t.prototype.clearTracks=function(){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var t=0,i=this.tracks.length;t<i;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()},t.prototype.clearTrack=function(e){if(!(e>=this.tracks.length)){var t=this.tracks[e];if(null!=t){this.queue.end(t),this.disposeNext(t);for(var i=t;;){var n=i.mixingFrom;if(null==n)break;this.queue.end(n),i.mixingFrom=null,i=n}this.tracks[t.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(e,t,i){var n=this.expandToIndex(e);this.tracks[e]=t,null!=n&&(i&&this.queue.interrupt(n),t.mixingFrom=n,t.mixTime=0,null!=n.mixingFrom&&n.mixDuration>0&&(t.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(t)},t.prototype.setAnimation=function(e,t,i){var n=this.data.skeletonData.findAnimation(t);if(null==n)throw new Error("Animation not found: "+t);return this.setAnimationWith(e,n,i)},t.prototype.setAnimationWith=function(e,t,i){if(null==t)throw new Error("animation cannot be null.");var n=!0,r=this.expandToIndex(e);null!=r&&(-1==r.nextTrackLast?(this.tracks[e]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,n=!1):this.disposeNext(r));var a=this.trackEntry(e,t,i,r);return this.setCurrent(e,a,n),this.queue.drain(),a},t.prototype.addAnimation=function(e,t,i,n){var r=this.data.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);return this.addAnimationWith(e,r,i,n)},t.prototype.addAnimationWith=function(e,t,i,n){if(null==t)throw new Error("animation cannot be null.");var r=this.expandToIndex(e);if(null!=r)for(;null!=r.next;)r=r.next;var a=this.trackEntry(e,t,i,r);if(null==r)this.setCurrent(e,a,!0),this.queue.drain();else if(r.next=a,n<=0){var s=r.animationEnd-r.animationStart;0!=s?n+=s*(1+(r.trackTime/s|0))-this.data.getMix(r.animation,t):n=0}return a.delay=n,a},t.prototype.setEmptyAnimation=function(e,i){var n=this.setAnimationWith(e,t.emptyAnimation,!1);return n.mixDuration=i,n.trackEnd=i,n},t.prototype.addEmptyAnimation=function(e,i,n){n<=0&&(n-=i);var r=this.addAnimationWith(e,t.emptyAnimation,!1,n);return r.mixDuration=i,r.trackEnd=i,r},t.prototype.setEmptyAnimations=function(e){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,n=this.tracks.length;i<n;i++){var r=this.tracks[i];null!=r&&this.setEmptyAnimation(r.trackIndex,e)}this.queue.drainDisabled=t,this.queue.drain()},t.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(e.Utils.ensureArrayCapacity(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)},t.prototype.trackEntry=function(e,t,i,n){var r=this.trackEntryPool.obtain();return r.trackIndex=e,r.animation=t,r.loop=i,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=t.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.interruptAlpha=1,r.mixTime=0,r.mixDuration=null==n?0:this.data.getMix(n.animation,t),r},t.prototype.disposeNext=function(e){for(var t=e.next;null!=t;)this.queue.dispose(t),t=t.next;e.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1;var e=this.propertyIDs;e.clear();for(var t=this.mixingTo,i=null,n=0,r=this.tracks.length;n<r;n++){var a=this.tracks[n];null!=a&&(a.setTimelineData(i,t,e),i=a)}},t.prototype.getCurrent=function(e){return e>=this.tracks.length?null:this.tracks[e]},t.prototype.addListener=function(e){if(null==e)throw new Error("listener cannot be null.");this.listeners.push(e)},t.prototype.removeListener=function(e){var t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,i,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0),this.setAnimation(e,i,n)},t.prototype.addAnimationByName=function(e,i,n,r){t.deprecatedWarning2||(t.deprecatedWarning2=!0),this.addAnimation(e,i,n,r)},t.prototype.hasAnimation=function(e){return null!==this.data.skeletonData.findAnimation(e)},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0),this.hasAnimation(e)},t}();t.emptyAnimation=new e.Animation("<empty>",[],0),t.SUBSEQUENT=0,t.FIRST=1,t.DIP=2,t.DIP_MIX=3,t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,e.AnimationState=t;var i=function(){function i(){this.timelineData=new Array,this.timelineDipMix=new Array,this.timelinesRotation=new Array}return i.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.animation=null,this.listener=null,this.timelineData.length=0,this.timelineDipMix.length=0,this.timelinesRotation.length=0},i.prototype.setTimelineData=function(i,n,r){null!=i&&n.push(i);var a=null!=this.mixingFrom?this.mixingFrom.setTimelineData(this,n,r):this;null!=i&&n.pop();var s=n,o=n.length-1,u=this.animation.timelines,l=this.animation.timelines.length,h=e.Utils.setArraySize(this.timelineData,l);this.timelineDipMix.length=0;var c=e.Utils.setArraySize(this.timelineDipMix,l);e:for(var d=0;d<l;d++){var p=u[d].getPropertyId();if(r.add(p))if(null!=i&&i.hasTimeline(p)){for(var f=o;f>=0;f--){var g=s[f];if(!g.hasTimeline(p)&&g.mixDuration>0){h[d]=t.DIP_MIX,c[d]=g;continue e}}h[d]=t.DIP}else h[d]=t.FIRST;else h[d]=t.SUBSEQUENT}return a},i.prototype.hasTimeline=function(e){for(var t=this.animation.timelines,i=0,n=t.length;i<n;i++)if(t[i].getPropertyId()==e)return!0;return!1},i.prototype.getAnimationTime=function(){if(this.loop){var e=this.animationEnd-this.animationStart;return 0==e?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},i.prototype.setAnimationLast=function(e){this.animationLast=e,this.nextAnimationLast=e},i.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},i.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(i.prototype,"time",{get:function(){return i.deprecatedWarning1||(i.deprecatedWarning1=!0),this.trackTime},set:function(e){i.deprecatedWarning1||(i.deprecatedWarning1=!0),this.trackTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"endTime",{get:function(){return i.deprecatedWarning2||(i.deprecatedWarning2=!0),this.trackTime},set:function(e){i.deprecatedWarning2||(i.deprecatedWarning2=!0),this.trackTime=e},enumerable:!0,configurable:!0}),i.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},i}();i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,e.TrackEntry=i;var n=function(){function t(e){this.objects=[],this.drainDisabled=!1,this.animState=e}return t.prototype.start=function(e){this.objects.push(r.start),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.interrupt=function(e){this.objects.push(r.interrupt),this.objects.push(e)},t.prototype.end=function(e){this.objects.push(r.end),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.dispose=function(e){this.objects.push(r.dispose),this.objects.push(e)},t.prototype.complete=function(e){this.objects.push(r.complete),this.objects.push(e)},t.prototype.event=function(e,t){this.objects.push(r.event),this.objects.push(e),this.objects.push(t)},t.prototype.deprecateStuff=function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0),!0},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,i=this.animState.listeners,n=0;n<t.length;n+=2){var a=t[n],s=t[n+1];switch(a){case r.start:null!=s.listener&&s.listener.start&&s.listener.start(s);for(l=0;l<i.length;l++)i[l].start&&i[l].start(s);s.onStart&&this.deprecateStuff()&&s.onStart(s.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(s.trackIndex);break;case r.interrupt:null!=s.listener&&s.listener.interrupt&&s.listener.interrupt(s);for(l=0;l<i.length;l++)i[l].interrupt&&i[l].interrupt(s);break;case r.end:null!=s.listener&&s.listener.end&&s.listener.end(s);for(l=0;l<i.length;l++)i[l].end&&i[l].end(s);s.onEnd&&this.deprecateStuff()&&s.onEnd(s.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(s.trackIndex);case r.dispose:null!=s.listener&&s.listener.dispose&&s.listener.dispose(s);for(l=0;l<i.length;l++)i[l].dispose&&i[l].dispose(s);this.animState.trackEntryPool.free(s);break;case r.complete:null!=s.listener&&s.listener.complete&&s.listener.complete(s);for(l=0;l<i.length;l++)i[l].complete&&i[l].complete(s);var o=e.MathUtils.toInt(s.loopsCount());s.onComplete&&this.deprecateStuff()&&s.onComplete(s.trackIndex,o),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(s.trackIndex,o);break;case r.event:var u=t[2+n++];null!=s.listener&&s.listener.event&&s.listener.event(s,u);for(var l=0;l<i.length;l++)i[l].event&&i[l].event(s,u);s.onEvent&&this.deprecateStuff()&&s.onEvent(s.trackIndex,u),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(s.trackIndex,u)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t}();n.deprecatedWarning1=!1,e.EventQueue=n;var r;!function(e){e[e.start=0]="start",e[e.interrupt=1]="interrupt",e[e.end=2]="end",e[e.dispose=3]="dispose",e[e.complete=4]="complete",e[e.event=5]="event"}(r=e.EventType||(e.EventType={}));var a=function(){function e(){}return e.prototype.start=function(e){},e.prototype.interrupt=function(e){},e.prototype.end=function(e){},e.prototype.dispose=function(e){},e.prototype.complete=function(e){},e.prototype.event=function(e,t){},e}();e.AnimationStateAdapter2=a}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function e(e){if(this.animationToMixTime={},this.defaultMix=0,null==e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}return e.prototype.setMix=function(e,t,i){var n=this.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);var r=this.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);this.setMixWith(n,r,i)},e.prototype.setMixByName=function(t,i,n){e.deprecatedWarning1||(e.deprecatedWarning1=!0),this.setMix(t,i,n)},e.prototype.setMixWith=function(e,t,i){if(null==e)throw new Error("from cannot be null.");if(null==t)throw new Error("to cannot be null.");var n=e.name+t.name;this.animationToMixTime[n]=i},e.prototype.getMix=function(e,t){var i=e.name+t.name,n=this.animationToMixTime[i];return void 0===n?this.defaultMix:n},e}();t.deprecatedWarning1=!1,e.AnimationStateData=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function t(e){this.atlas=e}return t.prototype.newRegionAttachment=function(t,i,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (region attachment: "+i+")");var a=new e.RegionAttachment(i);return a.region=r,a},t.prototype.newMeshAttachment=function(t,i,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+i+")");var a=new e.MeshAttachment(i);return a.region=r,a},t.prototype.newBoundingBoxAttachment=function(t,i){return new e.BoundingBoxAttachment(i)},t.prototype.newPathAttachment=function(t,i){return new e.PathAttachment(i)},t.prototype.newPointAttachment=function(t,i){return new e.PointAttachment(i)},t.prototype.newClippingAttachment=function(t,i){return new e.ClippingAttachment(i)},t}();e.AtlasAttachmentLoader=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){return function(e){if(null==e)throw new Error("name cannot be null.");this.name=e}}();e.Attachment=t;var i=function(e){function t(i){var n=e.call(this,i)||this;return n.id=(65535&t.nextID++)<<11,n.worldVerticesLength=0,n}return __extends(t,e),t.prototype.computeWorldVerticesOld=function(e,t){this.computeWorldVertices(e,0,this.worldVerticesLength,t,0,2)},t.prototype.computeWorldVertices=function(e,t,i,n,r,a){i=r+(i>>1)*a;var s=e.bone.skeleton,o=e.attachmentVertices,u=this.vertices,l=this.bones;if(null!=l){for(var h=0,c=0,d=0;d<t;d+=2)h+=(y=l[h])+1,c+=y;var p=s.bones;if(0==o.length)for(var f=r,g=3*c;f<i;f+=a){var m=0,v=0,y=l[h++];for(y+=h;h<y;h++,g+=3){var b=p[l[h]].matrix,_=u[g],w=u[g+1],x=u[g+2];m+=(_*b.a+w*b.c+b.tx)*x,v+=(_*b.b+w*b.d+b.ty)*x}n[f]=m,n[f+1]=v}else for(var T=o,f=r,g=3*c,S=c<<1;f<i;f+=a){var m=0,v=0,y=l[h++];for(y+=h;h<y;h++,g+=3,S+=2){var b=p[l[h]].matrix,_=u[g]+T[S],w=u[g+1]+T[S+1],x=u[g+2];m+=(_*b.a+w*b.c+b.tx)*x,v+=(_*b.b+w*b.d+b.ty)*x}n[f]=m,n[f+1]=v}}else{o.length>0&&(u=o);for(var I=(b=e.bone.matrix).tx,P=b.ty,C=b.a,g=b.c,M=b.b,E=b.d,k=t,f=r;f<i;k+=2,f+=a){var _=u[k],w=u[k+1];n[f]=_*C+w*g+I,n[f+1]=_*M+w*E+P}}},t.prototype.applyDeform=function(e){return this==e},t}(t);i.nextID=0,e.VertexAttachment=i}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){!function(e){e[e.Region=0]="Region",e[e.BoundingBox=1]="BoundingBox",e[e.Mesh=2]="Mesh",e[e.LinkedMesh=3]="LinkedMesh",e[e.Path=4]="Path",e[e.Point=5]="Point"}(e.AttachmentType||(e.AttachmentType={}))}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(t){function i(i){var n=t.call(this,i)||this;return n.color=new e.Color(1,1,1,1),n}return __extends(i,t),i}(e.VertexAttachment);e.BoundingBoxAttachment=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(t){function i(i){var n=t.call(this,i)||this;return n.color=new e.Color(.2275,.2275,.8078,1),n}return __extends(i,t),i}(e.VertexAttachment);e.ClippingAttachment=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(t){function i(i){var n=t.call(this,i)||this;return n.color=new e.Color(1,1,1,1),n.inheritDeform=!1,n.tempColor=new e.Color(0,0,0,0),n}return __extends(i,t),i.prototype.updateUVs=function(t,i){var n=this.regionUVs.length;if(i&&i.length==n||(i=e.Utils.newFloatArray(n)),null!=t){for(var r=t.texture._uvs,a=t.width,s=t.height,o=t.originalWidth,u=t.originalHeight,l=t.offsetX,h=t.pixiOffsetY,c=0;c<n;c+=2){var d=this.regionUVs[c],p=this.regionUVs[c+1];d=(d*o-l)/a,p=(p*u-h)/s,i[c]=(r.x0*(1-d)+r.x1*d)*(1-p)+(r.x3*(1-d)+r.x2*d)*p,i[c+1]=(r.y0*(1-d)+r.y1*d)*(1-p)+(r.y3*(1-d)+r.y2*d)*p}return i}},i.prototype.applyDeform=function(e){return this==e||this.inheritDeform&&this.parentMesh==e},i.prototype.getParentMesh=function(){return this.parentMesh},i.prototype.setParentMesh=function(e){this.parentMesh=e,null!=e&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength)},i}(e.VertexAttachment);e.MeshAttachment=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(t){function i(i){var n=t.call(this,i)||this;return n.closed=!1,n.constantSpeed=!1,n.color=new e.Color(1,1,1,1),n}return __extends(i,t),i}(e.VertexAttachment);e.PathAttachment=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(t){function i(i){var n=t.call(this,i)||this;return n.color=new e.Color(.38,.94,0,1),n}return __extends(i,t),i.prototype.computeWorldPosition=function(e,t){var i=e.matrix;return t.x=this.x*i.a+this.y*i.c+e.worldX,t.y=this.x*i.b+this.y*i.d+e.worldY,t},i.prototype.computeWorldRotation=function(t){var i=t.matrix,n=e.MathUtils.cosDeg(this.rotation),r=e.MathUtils.sinDeg(this.rotation),a=n*i.a+r*i.c,s=n*i.b+r*i.d;return Math.atan2(s,a)*e.MathUtils.radDeg},i}(e.VertexAttachment);e.PointAttachment=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(t){function i(i){var n=t.call(this,i)||this;return n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new e.Color(1,1,1,1),n.offset=e.Utils.newFloatArray(8),n.uvs=e.Utils.newFloatArray(8),n.tempColor=new e.Color(1,1,1,1),n}return __extends(i,t),i.prototype.updateOffset=function(){var e=this.width/this.region.originalWidth*this.scaleX,t=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*e,r=-this.height/2*this.scaleY+this.region.offsetY*t,a=n+this.region.width*e,s=r+this.region.height*t,o=this.rotation*Math.PI/180,u=Math.cos(o),l=Math.sin(o),h=n*u+this.x,c=n*l,d=r*u+this.y,p=r*l,f=a*u+this.x,g=a*l,m=s*u+this.y,v=s*l,y=this.offset;y[i.OX1]=h-p,y[i.OY1]=d+c,y[i.OX2]=h-v,y[i.OY2]=m+c,y[i.OX3]=f-v,y[i.OY3]=m+g,y[i.OX4]=f-p,y[i.OY4]=d+g},i.prototype.setRegion=function(e){this.region=e;var t=this.uvs;e.rotate?(t[2]=e.u,t[3]=e.v2,t[4]=e.u,t[5]=e.v,t[6]=e.u2,t[7]=e.v,t[0]=e.u2,t[1]=e.v2):(t[0]=e.u,t[1]=e.v2,t[2]=e.u,t[3]=e.v,t[4]=e.u2,t[5]=e.v,t[6]=e.u2,t[7]=e.v2)},i.prototype.computeWorldVertices=function(e,t,n,r){var a=this.offset,s=e.matrix,o=s.tx,u=s.ty,l=s.a,h=s.c,c=s.b,d=s.d,p=0,f=0;p=a[i.OX1],f=a[i.OY1],t[n]=p*l+f*h+o,t[n+1]=p*c+f*d+u,n+=r,p=a[i.OX2],f=a[i.OY2],t[n]=p*l+f*h+o,t[n+1]=p*c+f*d+u,n+=r,p=a[i.OX3],f=a[i.OY3],t[n]=p*l+f*h+o,t[n+1]=p*c+f*d+u,n+=r,p=a[i.OX4],f=a[i.OY4],t[n]=p*l+f*h+o,t[n+1]=p*c+f*d+u},i}(e.Attachment);t.OX1=0,t.OY1=1,t.OX2=2,t.OY2=3,t.OX3=4,t.OY3=5,t.OX4=6,t.OY4=7,t.X1=0,t.Y1=1,t.C1R=2,t.C1G=3,t.C1B=4,t.C1A=5,t.U1=6,t.V1=7,t.X2=8,t.Y2=9,t.C2R=10,t.C2G=11,t.C2B=12,t.C2A=13,t.U2=14,t.V2=15,t.X3=16,t.Y3=17,t.C3R=18,t.C3G=19,t.C3B=20,t.C3A=21,t.U3=22,t.V3=23,t.X4=24,t.Y4=25,t.C4R=26,t.C4G=27,t.C4B=28,t.C4A=29,t.U4=30,t.V4=31,e.RegionAttachment=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){!function(e){e[e.Normal=0]="Normal",e[e.Additive=1]="Additive",e[e.Multiply=2]="Multiply",e[e.Screen=3]="Screen"}(e.BlendMode||(e.BlendMode={}))}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function t(e,t,i){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,null==e)throw new Error("data cannot be null.");if(null==t)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=t,this.parent=i,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(i,n,r,a,s,o,u){this.ax=i,this.ay=n,this.arotation=r,this.ascaleX=a,this.ascaleY=s,this.ashearX=o,this.ashearY=u,this.appliedValid=!0;var l=this.parent,h=this.matrix;if(null==l){var c=r+90+u,d=e.MathUtils.cosDeg(r+o)*a,p=e.MathUtils.cosDeg(c)*s,f=e.MathUtils.sinDeg(r+o)*a,g=e.MathUtils.sinDeg(c)*s,m=this.skeleton;return m.flipX&&(i=-i,d=-d,p=-p),m.flipY!==t.yDown&&(n=-n,f=-f,g=-g),h.a=d,h.c=p,h.b=f,h.d=g,h.tx=i+m.x,void(h.ty=n+m.y)}var v=l.matrix.a,y=l.matrix.c,b=l.matrix.b,_=l.matrix.d;switch(h.tx=v*i+y*n+l.matrix.tx,h.ty=b*i+_*n+l.matrix.ty,this.data.transformMode){case e.TransformMode.Normal:var c=r+90+u,d=e.MathUtils.cosDeg(r+o)*a,p=e.MathUtils.cosDeg(c)*s,f=e.MathUtils.sinDeg(r+o)*a,g=e.MathUtils.sinDeg(c)*s;return h.a=v*d+y*f,h.c=v*p+y*g,h.b=b*d+_*f,void(h.d=b*p+_*g);case e.TransformMode.OnlyTranslation:c=r+90+u;h.a=e.MathUtils.cosDeg(r+o)*a,h.c=e.MathUtils.cosDeg(c)*s,h.b=e.MathUtils.sinDeg(r+o)*a,h.d=e.MathUtils.sinDeg(c)*s;break;case e.TransformMode.NoRotationOrReflection:var w=0;(M=v*v+b*b)>1e-4?(y=b*(M=Math.abs(v*_-y*b)/M),_=v*M,w=Math.atan2(b,v)*e.MathUtils.radDeg):(v=0,b=0,w=90-Math.atan2(_,y)*e.MathUtils.radDeg);var x=r+o-w,T=r+u-w+90,d=e.MathUtils.cosDeg(x)*a,p=e.MathUtils.cosDeg(T)*s,f=e.MathUtils.sinDeg(x)*a,g=e.MathUtils.sinDeg(T)*s;h.a=v*d-y*f,h.c=v*p-y*g,h.b=b*d+_*f,h.d=b*p+_*g;break;case e.TransformMode.NoScale:case e.TransformMode.NoScaleOrReflection:var S=e.MathUtils.cosDeg(r),I=e.MathUtils.sinDeg(r),P=v*S+y*I,C=b*S+_*I,M=Math.sqrt(P*P+C*C);M>1e-5&&(M=1/M),P*=M,C*=M,M=Math.sqrt(P*P+C*C);var E=Math.PI/2+Math.atan2(C,P),k=Math.cos(E)*M,A=Math.sin(E)*M,d=e.MathUtils.cosDeg(o)*a,p=e.MathUtils.cosDeg(90+u)*s,f=e.MathUtils.sinDeg(o)*a,g=e.MathUtils.sinDeg(90+u)*s;return h.a=P*d+k*f,h.c=P*p+k*g,h.b=C*d+A*f,h.d=C*p+A*g,void((this.data.transformMode!=e.TransformMode.NoScaleOrReflection?v*_-y*b<0:this.skeleton.flipX!=this.skeleton.flipY!=t.yDown)&&(h.c=-h.c,h.d=-h.d))}this.skeleton.flipX&&(h.a=-h.a,h.c=-h.c),this.skeleton.flipY!=t.yDown&&(h.b=-h.b,h.d=-h.d)},t.prototype.setToSetupPose=function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*e.MathUtils.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*e.MathUtils.radDeg},t.prototype.getWorldScaleX=function(){var e=this.matrix;return Math.sqrt(e.a*e.a+e.c*e.c)},t.prototype.getWorldScaleY=function(){var e=this.matrix;return Math.sqrt(e.b*e.b+e.d*e.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,i=this.matrix;if(null==t)return this.ax=i.tx,this.ay=i.ty,this.arotation=Math.atan2(i.b,i.a)*e.MathUtils.radDeg,this.ascaleX=Math.sqrt(i.a*i.a+i.b*i.b),this.ascaleY=Math.sqrt(i.c*i.c+i.d*i.d),this.ashearX=0,void(this.ashearY=Math.atan2(i.a*i.c+i.b*i.d,i.a*i.d-i.b*i.c)*e.MathUtils.radDeg);var n=t.matrix,r=1/(n.a*n.d-n.b*n.c),a=i.tx-n.tx,s=i.ty-n.ty;this.ax=a*n.d*r-s*n.c*r,this.ay=s*n.a*r-a*n.b*r;var o=r*n.d,u=r*n.a,l=r*n.c,h=r*n.b,c=o*i.a-l*i.b,d=o*i.c-l*i.d,p=u*i.b-h*i.a,f=u*i.d-h*i.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+p*p),this.ascaleX>1e-4){var g=c*f-d*p;this.ascaleY=g/this.ascaleX,this.ashearY=Math.atan2(c*d+p*f,g)*e.MathUtils.radDeg,this.arotation=Math.atan2(p,c)*e.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(d*d+f*f),this.ashearY=0,this.arotation=90-Math.atan2(f,d)*e.MathUtils.radDeg},t.prototype.worldToLocal=function(e){var t=this.matrix,i=t.a,n=t.c,r=t.b,a=t.d,s=1/(i*a-n*r),o=e.x-t.tx,u=e.y-t.ty;return e.x=o*a*s-u*n*s,e.y=u*i*s-o*r*s,e},t.prototype.localToWorld=function(e){var t=this.matrix,i=e.x,n=e.y;return e.x=i*t.a+n*t.c+t.tx,e.y=i*t.b+n*t.d+t.ty,e},t.prototype.worldToLocalRotation=function(t){var i=e.MathUtils.sinDeg(t),n=e.MathUtils.cosDeg(t),r=this.matrix;return Math.atan2(r.a*i-r.b*n,r.d*n-r.c*i)*e.MathUtils.radDeg},t.prototype.localToWorldRotation=function(t){var i=e.MathUtils.sinDeg(t),n=e.MathUtils.cosDeg(t),r=this.matrix;return Math.atan2(n*r.b+i*r.d,n*r.a+i*r.c)*e.MathUtils.radDeg},t.prototype.rotateWorld=function(t){var i=this.matrix,n=i.a,r=i.c,a=i.b,s=i.d,o=e.MathUtils.cosDeg(t),u=e.MathUtils.sinDeg(t);i.a=o*n-u*a,i.c=o*r-u*s,i.b=u*n+o*a,i.d=u*r+o*s,this.appliedValid=!1},t}();t.yDown=!1,e.Bone=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){return function(e,t,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=i.Normal,e<0)throw new Error("index must be >= 0.");if(null==t)throw new Error("name cannot be null.");this.index=e,this.name=t,this.parent=n}}();e.BoneData=t;var i;!function(e){e[e.Normal=0]="Normal",e[e.OnlyTranslation=1]="OnlyTranslation",e[e.NoRotationOrReflection=2]="NoRotationOrReflection",e[e.NoScale=3]="NoScale",e[e.NoScaleOrReflection=4]="NoScaleOrReflection"}(i=e.TransformMode||(e.TransformMode={}))}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){return function(e,t){if(null==t)throw new Error("data cannot be null.");this.time=e,this.data=t}}();e.Event=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){return function(e){this.name=e}}();e.EventData=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function t(e,t){if(this.mix=1,this.bendDirection=0,null==e)throw new Error("data cannot be null.");if(null==t)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.bendDirection=e.bendDirection,this.bones=new Array;for(var i=0;i<e.bones.length;i++)this.bones.push(t.findBone(e.bones[i].name));this.target=t.findBone(e.target.name)}return t.prototype.getOrder=function(){return this.data.order},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target,t=this.bones;switch(t.length){case 1:this.apply1(t[0],e.worldX,e.worldY,this.mix);break;case 2:this.apply2(t[0],t[1],e.worldX,e.worldY,this.bendDirection,this.mix)}},t.prototype.apply1=function(t,i,n,r){t.appliedValid||t.updateAppliedTransform();var a=t.parent.matrix,s=1/(a.a*a.d-a.b*a.c),o=i-a.tx,u=n-a.ty,l=(o*a.d-u*a.c)*s-t.ax,h=(u*a.a-o*a.b)*s-t.ay,c=Math.atan2(h,l)*e.MathUtils.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(c+=180),c>180?c-=360:c<-180&&(c+=360),t.updateWorldTransformWith(t.ax,t.ay,t.arotation+c*r,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)},t.prototype.apply2=function(t,i,n,r,a,s){if(0!=s){t.appliedValid||t.updateAppliedTransform(),i.appliedValid||i.updateAppliedTransform();var o=t.ax,u=t.ay,l=t.ascaleX,h=t.ascaleY,c=i.ascaleX,d=t.matrix,p=0,f=0,g=0;l<0?(l=-l,p=180,g=-1):(p=0,g=1),h<0&&(h=-h,g=-g),c<0?(c=-c,f=180):f=0;var m=i.ax,v=0,y=0,b=0,_=d.a,w=d.c,x=d.b,T=d.d,S=Math.abs(l-h)<=1e-4;S?(y=_*m+w*(v=i.ay)+d.tx,b=x*m+T*v+d.ty):(v=0,y=_*m+d.tx,b=x*m+d.ty);var I=t.parent.matrix;_=I.a,w=I.c,x=I.b;var P=1/(_*(T=I.d)-w*x),C=n-I.tx,M=r-I.ty,E=(C*T-M*w)*P-o,k=(M*_-C*x)*P-u,A=((C=y-I.tx)*T-(M=b-I.ty)*w)*P-o,O=(M*_-C*x)*P-u,R=Math.sqrt(A*A+O*O),B=i.data.length*c,D=0,X=0;e:if(S){var F=(E*E+k*k-R*R-(B*=l)*B)/(2*R*B);F<-1?F=-1:F>1&&(F=1),X=Math.acos(F)*a,_=R+B*F,w=B*Math.sin(X),D=Math.atan2(k*_-E*w,E*_+k*w)}else{var L=(_=l*B)*_,N=(w=h*B)*w,U=E*E+k*k,G=Math.atan2(k,E),j=-2*N*R,V=N-L;if((T=j*j-4*V*(x=N*R*R+L*U-L*N))>=0){var W=Math.sqrt(T);j<0&&(W=-W);var H=(W=-(j+W)/2)/V,q=x/W,Y=Math.abs(H)<Math.abs(q)?H:q;if(Y*Y<=U){M=Math.sqrt(U-Y*Y)*a,D=G-Math.atan2(M,Y),X=Math.atan2(M/h,(Y-R)/l);break e}}var z=e.MathUtils.PI,K=R-_,Q=K*K,Z=0,J=0,$=R+_,ee=$*$,te=0;(x=-_*R/(L-N))>=-1&&x<=1&&(x=Math.acos(x),(T=(C=_*Math.cos(x)+R)*C+(M=w*Math.sin(x))*M)<Q&&(z=x,Q=T,K=C,Z=M),T>ee&&(J=x,ee=T,$=C,te=M)),U<=(Q+ee)/2?(D=G-Math.atan2(Z*a,K),X=z*a):(D=G-Math.atan2(te*a,$),X=J*a)}var ie=Math.atan2(v,m)*g,ne=t.arotation;(D=(D-ie)*e.MathUtils.radDeg+p-ne)>180?D-=360:D<-180&&(D+=360),t.updateWorldTransformWith(o,u,ne+D*s,t.ascaleX,t.ascaleY,0,0),ne=i.arotation,(X=((X+ie)*e.MathUtils.radDeg-i.ashearX)*g+f-ne)>180?X-=360:X<-180&&(X+=360),i.updateWorldTransformWith(m,v,ne+X*s,i.ascaleX,i.ascaleY,i.ashearX,i.ashearY)}else i.updateWorldTransform()},t}();e.IkConstraint=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){return function(e){this.order=0,this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=e}}();e.IkConstraintData=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function t(e,t){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==e)throw new Error("data cannot be null.");if(null==t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var i=0,n=e.bones.length;i<n;i++)this.bones.push(t.findBone(e.bones[i].name));this.target=t.findSlot(e.target.name),this.position=e.position,this.spacing=e.spacing,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof e.PathAttachment){var i=this.rotateMix,n=this.translateMix,r=i>0;if(n>0||r){var a=this.data,s=a.spacingMode,o=s==e.SpacingMode.Length,u=a.rotateMode,l=u==e.RotateMode.Tangent,h=u==e.RotateMode.ChainScale,c=this.bones.length,d=l?c:c+1,p=this.bones,f=e.Utils.setArraySize(this.spaces,d),g=null,m=this.spacing;if(h||o){h&&(g=e.Utils.setArraySize(this.lengths,c));for(var v=0,y=d-1;v<y;){var b=(E=p[v]).data.length,_=b*E.matrix.a,w=b*E.matrix.b,x=Math.sqrt(_*_+w*w);h&&(g[v]=x),f[++v]=(o?b+m:m)*x/b}}else for(v=1;v<d;v++)f[v]=m;var T=this.computeWorldPositions(t,d,l,a.positionMode==e.PositionMode.Percent,s==e.SpacingMode.Percent),S=T[0],I=T[1],P=a.offsetRotation,C=!1;0==P?C=u==e.RotateMode.Chain:(C=!1,P*=(M=this.target.bone.matrix).a*M.d-M.b*M.c>0?e.MathUtils.degRad:-e.MathUtils.degRad);for(var v=0,M=3;v<c;v++,M+=3){var E=p[v],k=E.matrix;k.tx+=(S-k.tx)*n,k.ty+=(I-k.ty)*n;var A=(_=T[M])-S,O=(w=T[M+1])-I;if(h){var R=g[v];if(0!=R){var B=(Math.sqrt(A*A+O*O)/R-1)*i+1;k.a*=B,k.b*=B}}if(S=_,I=w,r){var D=k.a,X=k.c,F=k.b,L=k.d,N=0,U=0,G=0;if(N=l?T[M-1]:0==f[v+1]?T[M+2]:Math.atan2(O,A),N-=Math.atan2(F,D),C){U=Math.cos(N),G=Math.sin(N);var j=E.data.length;S+=(j*(U*D-G*F)-A)*i,I+=(j*(G*D+U*F)-O)*i}else N+=P;N>e.MathUtils.PI?N-=e.MathUtils.PI2:N<-e.MathUtils.PI&&(N+=e.MathUtils.PI2),N*=i,U=Math.cos(N),G=Math.sin(N),k.a=U*D-G*F,k.c=U*X-G*L,k.b=G*D+U*F,k.d=G*X+U*L}E.appliedValid=!1}}}},t.prototype.computeWorldPositions=function(i,n,r,a,s){var o=this.target,u=this.position,l=this.spaces,h=e.Utils.setArraySize(this.positions,3*n+2),c=null,d=i.closed,p=i.worldVerticesLength,f=p/6,g=t.NONE;if(!i.constantSpeed){var m=i.lengths,v=m[f-=d?1:2];if(a&&(u*=v),s)for(y=0;y<n;y++)l[y]*=v;c=e.Utils.setArraySize(this.world,8);for(var y=0,b=0,_=0;y<n;y++,b+=3){H=u+=W=l[y];if(d)(H%=v)<0&&(H+=v),_=0;else{if(H<0){g!=t.BEFORE&&(g=t.BEFORE,i.computeWorldVertices(o,2,4,c,0,2)),this.addBeforePosition(H,c,0,h,b);continue}if(H>v){g!=t.AFTER&&(g=t.AFTER,i.computeWorldVertices(o,p-6,4,c,0,2)),this.addAfterPosition(H-v,c,0,h,b);continue}}for(;;_++){var w=m[_];if(!(H>w)){0==_?H/=w:H=(H-(K=m[_-1]))/(w-K);break}}_!=g&&(g=_,d&&_==f?(i.computeWorldVertices(o,p-4,4,c,0,2),i.computeWorldVertices(o,0,4,c,4,2)):i.computeWorldVertices(o,6*_+2,8,c,0,2)),this.addCurvePosition(H,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],h,b,r||y>0&&0==W)}return h}d?(p+=2,c=e.Utils.setArraySize(this.world,p),i.computeWorldVertices(o,2,p-4,c,0,2),i.computeWorldVertices(o,0,2,c,p-4,2),c[p-2]=c[0],c[p-1]=c[1]):(f--,p-=4,c=e.Utils.setArraySize(this.world,p),i.computeWorldVertices(o,2,p,c,0,2));for(var x=e.Utils.setArraySize(this.curves,f),T=0,S=c[0],I=c[1],P=0,C=0,M=0,E=0,k=0,A=0,O=0,R=0,B=0,D=0,X=0,F=0,L=0,N=0,y=0,U=2;y<f;y++,U+=6)P=c[U],C=c[U+1],M=c[U+2],E=c[U+3],X=2*(O=.1875*(S-2*P+M))+(B=.09375*(3*(P-M)-S+(k=c[U+4]))),F=2*(R=.1875*(I-2*C+E))+(D=.09375*(3*(C-E)-I+(A=c[U+5]))),L=.75*(P-S)+O+.16666667*B,N=.75*(C-I)+R+.16666667*D,T+=Math.sqrt(L*L+N*N),L+=X,N+=F,X+=B,F+=D,T+=Math.sqrt(L*L+N*N),L+=X,N+=F,T+=Math.sqrt(L*L+N*N),L+=X+B,N+=F+D,T+=Math.sqrt(L*L+N*N),x[y]=T,S=k,I=A;if(a&&(u*=T),s)for(y=0;y<n;y++)l[y]*=T;for(var G=this.segments,j=0,y=0,b=0,_=0,V=0;y<n;y++,b+=3){var W=l[y],H=u+=W;if(d)(H%=T)<0&&(H+=T),_=0;else{if(H<0){this.addBeforePosition(H,c,0,h,b);continue}if(H>T){this.addAfterPosition(H-T,c,p-4,h,b);continue}}for(;;_++){var q=x[_];if(!(H>q)){0==_?H/=q:H=(H-(K=x[_-1]))/(q-K);break}}if(_!=g){g=_;var Y=6*_;for(S=c[Y],I=c[Y+1],P=c[Y+2],C=c[Y+3],M=c[Y+4],E=c[Y+5],X=2*(O=.03*(S-2*P+M))+(B=.006*(3*(P-M)-S+(k=c[Y+6]))),F=2*(R=.03*(I-2*C+E))+(D=.006*(3*(C-E)-I+(A=c[Y+7]))),L=.3*(P-S)+O+.16666667*B,N=.3*(C-I)+R+.16666667*D,j=Math.sqrt(L*L+N*N),G[0]=j,Y=1;Y<8;Y++)L+=X,N+=F,X+=B,F+=D,j+=Math.sqrt(L*L+N*N),G[Y]=j;L+=X,N+=F,j+=Math.sqrt(L*L+N*N),G[8]=j,L+=X+B,N+=F+D,j+=Math.sqrt(L*L+N*N),G[9]=j,V=0}for(H*=j;;V++){var z=G[V];if(!(H>z)){if(0==V)H/=z;else{var K=G[V-1];H=V+(H-K)/(z-K)}break}}this.addCurvePosition(.1*H,S,I,P,C,M,E,k,A,h,b,r||y>0&&0==W)}return h},t.prototype.addBeforePosition=function(e,t,i,n,r){var a=t[i],s=t[i+1],o=t[i+2]-a,u=t[i+3]-s,l=Math.atan2(u,o);n[r]=a+e*Math.cos(l),n[r+1]=s+e*Math.sin(l),n[r+2]=l},t.prototype.addAfterPosition=function(e,t,i,n,r){var a=t[i+2],s=t[i+3],o=a-t[i],u=s-t[i+1],l=Math.atan2(u,o);n[r]=a+e*Math.cos(l),n[r+1]=s+e*Math.sin(l),n[r+2]=l},t.prototype.addCurvePosition=function(e,t,i,n,r,a,s,o,u,l,h,c){(0==e||isNaN(e))&&(e=1e-4);var d=e*e,p=d*e,f=1-e,g=f*f,m=g*f,v=f*e,y=3*v,b=f*y,_=y*e,w=t*m+n*b+a*_+o*p,x=i*m+r*b+s*_+u*p;l[h]=w,l[h+1]=x,c&&(l[h+2]=Math.atan2(x-(i*g+r*v*2+s*d),w-(t*g+n*v*2+a*d)))},t.prototype.getOrder=function(){return this.data.order},t}();t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,e.PathConstraint=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){return function(e){this.order=0,this.bones=new Array,this.name=e}}();e.PathConstraintData=t;!function(e){e[e.Fixed=0]="Fixed",e[e.Percent=1]="Percent"}(e.PositionMode||(e.PositionMode={}));!function(e){e[e.Length=0]="Length",e[e.Fixed=1]="Fixed",e[e.Percent=2]="Percent"}(e.SpacingMode||(e.SpacingMode={}));!function(e){e[e.Tangent=0]="Tangent",e[e.Chain=1]="Chain",e[e.ChainScale=2]="ChainScale"}(e.RotateMode||(e.RotateMode={}))}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function t(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(l=0;l<t.bones.length;l++){var i=t.bones[l],n=void 0;if(null==i.parent)n=new e.Bone(i,this,null);else{var r=this.bones[i.parent.index];n=new e.Bone(i,this,r),r.children.push(n)}this.bones.push(n)}this.slots=new Array,this.drawOrder=new Array;for(l=0;l<t.slots.length;l++){var a=t.slots[l],n=this.bones[a.boneData.index],s=new e.Slot(a,n);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(l=0;l<t.ikConstraints.length;l++){var o=t.ikConstraints[l];this.ikConstraints.push(new e.IkConstraint(o,this))}this.transformConstraints=new Array;for(l=0;l<t.transformConstraints.length;l++){var u=t.transformConstraints[l];this.transformConstraints.push(new e.TransformConstraint(u,this))}this.pathConstraints=new Array;for(var l=0;l<t.pathConstraints.length;l++){var h=t.pathConstraints[l];this.pathConstraints.push(new e.PathConstraint(h,this))}this.color=new e.Color(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var e=this.bones,t=0,i=e.length;t<i;t++)e[t].sorted=!1;var n=this.ikConstraints,r=this.transformConstraints,a=this.pathConstraints,s=n.length,o=r.length,u=a.length,l=s+o+u;e:for(t=0;t<l;t++){for(h=0;h<s;h++)if((c=n[h]).data.order==t){this.sortIkConstraint(c);continue e}for(h=0;h<o;h++)if((c=r[h]).data.order==t){this.sortTransformConstraint(c);continue e}for(var h=0;h<u;h++){var c=a[h];if(c.data.order==t){this.sortPathConstraint(c);continue e}}}for(var t=0,i=e.length;t<i;t++)this.sortBone(e[t])},t.prototype.sortIkConstraint=function(e){var t=e.target;this.sortBone(t);var i=e.bones,n=i[0];if(this.sortBone(n),i.length>1){var r=i[i.length-1];this._updateCache.indexOf(r)>-1||this.updateCacheReset.push(r)}this._updateCache.push(e),this.sortReset(n.children),i[i.length-1].sorted=!0},t.prototype.sortPathConstraint=function(t){var i=t.target,n=i.data.index,r=i.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var a=0,s=this.data.skins.length;a<s;a++)this.sortPathConstraintAttachment(this.data.skins[a],n,r);var o=i.getAttachment();o instanceof e.PathAttachment&&this.sortPathConstraintAttachmentWith(o,r);for(var u=t.bones,l=u.length,a=0;a<l;a++)this.sortBone(u[a]);this._updateCache.push(t);for(a=0;a<l;a++)this.sortReset(u[a].children);for(a=0;a<l;a++)u[a].sorted=!0},t.prototype.sortTransformConstraint=function(e){this.sortBone(e.target);var t=e.bones,i=t.length;if(e.data.local)for(r=0;r<i;r++){var n=t[r];this.sortBone(n.parent),this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}else for(var r=0;r<i;r++)this.sortBone(t[r]);this._updateCache.push(e);for(a=0;a<i;a++)this.sortReset(t[a].children);for(var a=0;a<i;a++)t[a].sorted=!0},t.prototype.sortPathConstraintAttachment=function(e,t,i){var n=e.attachments[t];if(n)for(var r in n)this.sortPathConstraintAttachmentWith(n[r],i)},t.prototype.sortPathConstraintAttachmentWith=function(t,i){if(t instanceof e.PathAttachment){var n=t.bones;if(null==n)this.sortBone(i);else for(var r=this.bones,a=0;a<n.length;)for(var s=n[a++],o=a+s;a<o;a++){var u=n[a];this.sortBone(r[u])}}},t.prototype.sortBone=function(e){if(!e.sorted){var t=e.parent;null!=t&&this.sortBone(t),e.sorted=!0,this._updateCache.push(e)}},t.prototype.sortReset=function(e){for(var t=0,i=e.length;t<i;t++){var n=e[t];n.sorted&&this.sortReset(n.children),n.sorted=!1}},t.prototype.updateWorldTransform=function(){for(var e=this.updateCacheReset,t=0,i=e.length;t<i;t++){var n=e[t];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY,n.appliedValid=!0}for(var r=this._updateCache,t=0,i=r.length;t<i;t++)r[t].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var e=this.bones,t=0,i=e.length;t<i;t++)e[t].setToSetupPose();for(var n=this.ikConstraints,t=0,i=n.length;t<i;t++)(s=n[t]).bendDirection=s.data.bendDirection,s.mix=s.data.mix;for(var r=this.transformConstraints,t=0,i=r.length;t<i;t++){o=(s=r[t]).data;s.rotateMix=o.rotateMix,s.translateMix=o.translateMix,s.scaleMix=o.scaleMix,s.shearMix=o.shearMix}for(var a=this.pathConstraints,t=0,i=a.length;t<i;t++){var s=a[t],o=s.data;s.position=o.position,s.spacing=o.spacing,s.rotateMix=o.rotateMix,s.translateMix=o.translateMix}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;e.Utils.arrayCopy(t,0,this.drawOrder,0,t.length);for(var i=0,n=t.length;i<n;i++)t[i].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,i=0,n=t.length;i<n;i++){var r=t[i];if(r.data.name==e)return r}return null},t.prototype.findBoneIndex=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,i=0,n=t.length;i<n;i++)if(t[i].data.name==e)return i;return-1},t.prototype.findSlot=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,i=0,n=t.length;i<n;i++){var r=t[i];if(r.data.name==e)return r}return null},t.prototype.findSlotIndex=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,i=0,n=t.length;i<n;i++)if(t[i].data.name==e)return i;return-1},t.prototype.setSkinByName=function(e){var t=this.data.findSkin(e);if(null==t)throw new Error("Skin not found: "+e);this.setSkin(t)},t.prototype.setSkin=function(e){if(null!=e)if(null!=this.skin)e.attachAll(this,this.skin);else for(var t=this.slots,i=0,n=t.length;i<n;i++){var r=t[i],a=r.data.attachmentName;if(null!=a){var s=e.getAttachment(i,a);null!=s&&r.setAttachment(s)}}this.skin=e},t.prototype.getAttachmentByName=function(e,t){return this.getAttachment(this.data.findSlotIndex(e),t)},t.prototype.getAttachment=function(e,t){if(null==t)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(e,t);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null},t.prototype.setAttachment=function(e,t){if(null==e)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,r=i.length;n<r;n++){var a=i[n];if(a.data.name==e){var s=null;if(null!=t&&null==(s=this.getAttachment(n,t)))throw new Error("Attachment not found: "+t+", for slot: "+e);return void a.setAttachment(s)}}throw new Error("Slot not found: "+e)},t.prototype.findIkConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.ikConstraints,i=0,n=t.length;i<n;i++){var r=t[i];if(r.data.name==e)return r}return null},t.prototype.findTransformConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.transformConstraints,i=0,n=t.length;i<n;i++){var r=t[i];if(r.data.name==e)return r}return null},t.prototype.findPathConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.pathConstraints,i=0,n=t.length;i<n;i++){var r=t[i];if(r.data.name==e)return r}return null},t.prototype.getBounds=function(t,i,n){if(null==t)throw new Error("offset cannot be null.");if(null==i)throw new Error("size cannot be null.");for(var r=this.drawOrder,a=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY,l=0,h=r.length;l<h;l++){var c=r[l],d=0,p=null,f=c.getAttachment();if(f instanceof e.RegionAttachment)d=8,p=e.Utils.setArraySize(n,d,0),f.computeWorldVertices(c.bone,p,0,2);else if(f instanceof e.MeshAttachment){var g=f;d=g.worldVerticesLength,p=e.Utils.setArraySize(n,d,0),g.computeWorldVertices(c,0,d,p,0,2)}if(null!=p)for(var m=0,v=p.length;m<v;m+=2){var y=p[m],b=p[m+1];a=Math.min(a,y),s=Math.min(s,b),o=Math.max(o,y),u=Math.max(u,b)}}t.set(a,s),i.set(o-a,u-s)},t.prototype.update=function(e){this.time+=e},t}();e.Skeleton=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new e.Pool(function(){return e.Utils.newFloatArray(16)})}return t.prototype.update=function(t,i){if(null==t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,a=this.polygonPool,s=t.slots,o=s.length;n.length=0,a.freeAll(r),r.length=0;for(var u=0;u<o;u++){var l=s[u],h=l.getAttachment();if(h instanceof e.BoundingBoxAttachment){var c=h;n.push(c);var d=a.obtain();d.length!=c.worldVerticesLength&&(d=e.Utils.newFloatArray(c.worldVerticesLength)),r.push(d),c.computeWorldVertices(l,0,c.worldVerticesLength,d,0,2)}}i?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=this.polygons,a=0,s=r.length;a<s;a++)for(var o=r[a],u=o,l=0,h=o.length;l<h;l+=2){var c=u[l],d=u[l+1];e=Math.min(e,c),t=Math.min(t,d),i=Math.max(i,c),n=Math.max(n,d)}this.minX=e,this.minY=t,this.maxX=i,this.maxY=n},t.prototype.aabbContainsPoint=function(e,t){return e>=this.minX&&e<=this.maxX&&t>=this.minY&&t<=this.maxY},t.prototype.aabbIntersectsSegment=function(e,t,i,n){var r=this.minX,a=this.minY,s=this.maxX,o=this.maxY;if(e<=r&&i<=r||t<=a&&n<=a||e>=s&&i>=s||t>=o&&n>=o)return!1;var u=(n-t)/(i-e),l=u*(r-e)+t;if(l>a&&l<o)return!0;if((l=u*(s-e)+t)>a&&l<o)return!0;var h=(a-t)/u+e;return h>r&&h<s||(h=(o-t)/u+e)>r&&h<s},t.prototype.aabbIntersectsSkeleton=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},t.prototype.containsPoint=function(e,t){for(var i=this.polygons,n=0,r=i.length;n<r;n++)if(this.containsPointPolygon(i[n],e,t))return this.boundingBoxes[n];return null},t.prototype.containsPointPolygon=function(e,t,i){for(var n=e,r=e.length,a=r-2,s=!1,o=0;o<r;o+=2){var u=n[o+1],l=n[a+1];if(u<i&&l>=i||l<i&&u>=i){var h=n[o];h+(i-u)/(l-u)*(n[a]-h)<t&&(s=!s)}a=o}return s},t.prototype.intersectsSegment=function(e,t,i,n){for(var r=this.polygons,a=0,s=r.length;a<s;a++)if(this.intersectsSegmentPolygon(r[a],e,t,i,n))return this.boundingBoxes[a];return null},t.prototype.intersectsSegmentPolygon=function(e,t,i,n,r){for(var a=e,s=e.length,o=t-n,u=i-r,l=t*r-i*n,h=a[s-2],c=a[s-1],d=0;d<s;d+=2){var p=a[d],f=a[d+1],g=h*f-c*p,m=h-p,v=c-f,y=o*v-u*m,b=(l*m-o*g)/y;if((b>=h&&b<=p||b>=p&&b<=h)&&(b>=t&&b<=n||b>=n&&b<=t)){var _=(l*v-u*g)/y;if((_>=c&&_<=f||_>=f&&_<=c)&&(_>=i&&_<=r||_>=r&&_<=i))return!0}h=p,c=f}return!1},t.prototype.getPolygon=function(e){if(null==e)throw new Error("boundingBox cannot be null.");var t=this.boundingBoxes.indexOf(e);return-1==t?null:this.polygons[t]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}();e.SkeletonBounds=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function t(){this.triangulator=new e.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return t.prototype.clipStart=function(i,n){if(null!=this.clipAttachment)return 0;this.clipAttachment=n;var r=n.worldVerticesLength,a=e.Utils.setArraySize(this.clippingPolygon,r);n.computeWorldVertices(i,0,r,a,0,2);var s=this.clippingPolygon;t.makeClockwise(s);for(var o=this.clippingPolygons=this.triangulator.decompose(s,this.triangulator.triangulate(s)),u=0,l=o.length;u<l;u++){var h=o[u];t.makeClockwise(h),h.push(h[0]),h.push(h[1])}return o.length},t.prototype.clipEndWithSlot=function(e){null!=this.clipAttachment&&this.clipAttachment.endSlot==e.data&&this.clipEnd()},t.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},t.prototype.isClipping=function(){return null!=this.clipAttachment},t.prototype.clipTriangles=function(t,i,n,r,a,s,o,u){var l=this.clipOutput,h=this.clippedVertices,c=this.clippedTriangles,d=this.clippingPolygons,p=this.clippingPolygons.length,f=u?12:8,g=0;h.length=0,c.length=0;e:for(var m=0;m<r;m+=3)for(var v=n[m]<<1,y=t[v],b=t[v+1],_=a[v],w=a[v+1],x=t[v=n[m+1]<<1],T=t[v+1],S=a[v],I=a[v+1],P=t[v=n[m+2]<<1],C=t[v+1],M=a[v],E=a[v+1],k=0;k<p;k++){var A=h.length;if(!this.clip(y,b,x,T,P,C,d[k],l)){(U=e.Utils.setArraySize(h,A+3*f))[A]=y,U[A+1]=b,U[A+2]=s.r,U[A+3]=s.g,U[A+4]=s.b,U[A+5]=s.a,u?(U[A+6]=_,U[A+7]=w,U[A+8]=o.r,U[A+9]=o.g,U[A+10]=o.b,U[A+11]=o.a,U[A+12]=x,U[A+13]=T,U[A+14]=s.r,U[A+15]=s.g,U[A+16]=s.b,U[A+17]=s.a,U[A+18]=S,U[A+19]=I,U[A+20]=o.r,U[A+21]=o.g,U[A+22]=o.b,U[A+23]=o.a,U[A+24]=P,U[A+25]=C,U[A+26]=s.r,U[A+27]=s.g,U[A+28]=s.b,U[A+29]=s.a,U[A+30]=M,U[A+31]=E,U[A+32]=o.r,U[A+33]=o.g,U[A+34]=o.b,U[A+35]=o.a):(U[A+6]=_,U[A+7]=w,U[A+8]=x,U[A+9]=T,U[A+10]=s.r,U[A+11]=s.g,U[A+12]=s.b,U[A+13]=s.a,U[A+14]=S,U[A+15]=I,U[A+16]=P,U[A+17]=C,U[A+18]=s.r,U[A+19]=s.g,U[A+20]=s.b,U[A+21]=s.a,U[A+22]=M,U[A+23]=E),A=c.length,(K=e.Utils.setArraySize(c,A+3))[A]=g,K[A+1]=g+1,K[A+2]=g+2,g+=3;continue e}var O=l.length;if(0!=O){for(var R=T-C,B=P-x,D=y-P,X=C-b,F=1/(R*D+B*(b-C)),L=O>>1,N=this.clipOutput,U=e.Utils.setArraySize(h,A+L*f),G=0;G<O;G+=2){var j=N[G],V=N[G+1];U[A]=j,U[A+1]=V,U[A+2]=s.r,U[A+3]=s.g,U[A+4]=s.b,U[A+5]=s.a;var W=j-P,H=V-C,q=(R*W+B*H)*F,Y=(X*W+D*H)*F,z=1-q-Y;U[A+6]=_*q+S*Y+M*z,U[A+7]=w*q+I*Y+E*z,u&&(U[A+8]=o.r,U[A+8]=o.g,U[A+10]=o.b,U[A+11]=o.a),A+=f}A=c.length;var K=e.Utils.setArraySize(c,A+3*(L-2));L--;for(G=1;G<L;G++)K[A]=g,K[A+1]=g+G,K[A+2]=g+G+1,A+=3;g+=L+1}}},t.prototype.clip=function(e,t,i,n,r,a,s,o){var u=o,l=!1,h=null;s.length%4>=2?(h=o,o=this.scratch):h=this.scratch,h.length=0,h.push(e),h.push(t),h.push(i),h.push(n),h.push(r),h.push(a),h.push(e),h.push(t),o.length=0;for(var c=s,d=s.length-4,p=0;;p+=2){for(var f=c[p],g=c[p+1],m=c[p+2],v=c[p+3],y=f-m,b=g-v,_=h,w=h.length-2,x=o.length,T=0;T<w;T+=2){var S=_[T],I=_[T+1],P=_[T+2],C=_[T+3],M=y*(C-v)-b*(P-m)>0;if(y*(I-v)-b*(S-m)>0){if(M){o.push(P),o.push(C);continue}A=((k=P-S)*(g-I)-(E=C-I)*(f-S))/(E*(m-f)-k*(v-g));o.push(f+(m-f)*A),o.push(g+(v-g)*A)}else if(M){var E=C-I,k=P-S,A=(k*(g-I)-E*(f-S))/(E*(m-f)-k*(v-g));o.push(f+(m-f)*A),o.push(g+(v-g)*A),o.push(P),o.push(C)}l=!0}if(x==o.length)return u.length=0,!0;if(o.push(o[0]),o.push(o[1]),p==d)break;var O=o;(o=h).length=0,h=O}if(u!=o){u.length=0;for(var p=0,R=o.length-2;p<R;p++)u[p]=o[p]}else u.length=u.length-2;return l},t.makeClockwise=function(e){for(var t=e,i=e.length,n=t[i-2]*t[1]-t[0]*t[i-1],r=0,a=0,s=0,o=0,u=i-3;o<u;o+=2)r=t[o],a=t[o+1],s=t[o+2],n+=r*t[o+3]-s*a;if(!(n<0))for(var o=0,l=i-2,u=i>>1;o<u;o+=2){var h=t[o],c=t[o+1],d=l-o;t[o]=t[d],t[o+1]=t[d+1],t[d]=h,t[d+1]=c}},t}();e.SkeletonClipping=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function e(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return e.prototype.findBone=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,i=0,n=t.length;i<n;i++){var r=t[i];if(r.name==e)return r}return null},e.prototype.findBoneIndex=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,i=0,n=t.length;i<n;i++)if(t[i].name==e)return i;return-1},e.prototype.findSlot=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,i=0,n=t.length;i<n;i++){var r=t[i];if(r.name==e)return r}return null},e.prototype.findSlotIndex=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,i=0,n=t.length;i<n;i++)if(t[i].name==e)return i;return-1},e.prototype.findSkin=function(e){if(null==e)throw new Error("skinName cannot be null.");for(var t=this.skins,i=0,n=t.length;i<n;i++){var r=t[i];if(r.name==e)return r}return null},e.prototype.findEvent=function(e){if(null==e)throw new Error("eventDataName cannot be null.");for(var t=this.events,i=0,n=t.length;i<n;i++){var r=t[i];if(r.name==e)return r}return null},e.prototype.findAnimation=function(e){if(null==e)throw new Error("animationName cannot be null.");for(var t=this.animations,i=0,n=t.length;i<n;i++){var r=t[i];if(r.name==e)return r}return null},e.prototype.findIkConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.ikConstraints,i=0,n=t.length;i<n;i++){var r=t[i];if(r.name==e)return r}return null},e.prototype.findTransformConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.transformConstraints,i=0,n=t.length;i<n;i++){var r=t[i];if(r.name==e)return r}return null},e.prototype.findPathConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.pathConstraints,i=0,n=t.length;i<n;i++){var r=t[i];if(r.name==e)return r}return null},e.prototype.findPathConstraintIndex=function(e){if(null==e)throw new Error("pathConstraintName cannot be null.");for(var t=this.pathConstraints,i=0,n=t.length;i<n;i++)if(t[i].name==e)return i;return-1},e}();e.SkeletonData=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function t(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return t.prototype.readSkeletonData=function(i){var n=this.scale,r=new e.SkeletonData,a="string"==typeof i?JSON.parse(i):i,s=a.skeleton;if(null!=s&&(r.hash=s.hash,r.version=s.spine,r.width=s.width,r.height=s.height,r.fps=s.fps,r.imagesPath=s.images),a.bones)for(C=0;C<a.bones.length;C++){var o=a.bones[C],u=null,l=this.getValue(o,"parent",null);if(null!=l&&null==(u=r.findBone(l)))throw new Error("Parent bone not found: "+l);(p=new e.BoneData(r.bones.length,o.name,u)).length=this.getValue(o,"length",0)*n,p.x=this.getValue(o,"x",0)*n,p.y=this.getValue(o,"y",0)*n,p.rotation=this.getValue(o,"rotation",0),p.scaleX=this.getValue(o,"scaleX",1),p.scaleY=this.getValue(o,"scaleY",1),p.shearX=this.getValue(o,"shearX",0),p.shearY=this.getValue(o,"shearY",0),p.transformMode=t.transformModeFromString(this.getValue(o,"transform","normal")),r.bones.push(p)}if(a.slots)for(C=0;C<a.slots.length;C++){var h=(S=a.slots[C]).name,c=S.bone,d=r.findBone(c);if(null==d)throw new Error("Slot bone not found: "+c);var p=new e.SlotData(r.slots.length,h,d),f=this.getValue(S,"color",null);null!=f&&p.color.setFromString(f);var g=this.getValue(S,"dark",null);null!=g&&(p.darkColor=new e.Color(1,1,1,1),p.darkColor.setFromString(g)),p.attachmentName=this.getValue(S,"attachment",null),p.blendMode=t.blendModeFromString(this.getValue(S,"blend","normal")),r.slots.push(p)}if(a.ik)for(C=0;C<a.ik.length;C++){m=a.ik[C];(p=new e.IkConstraintData(m.name)).order=this.getValue(m,"order",0);for(v=0;v<m.bones.length;v++){c=m.bones[v];if(null==(y=r.findBone(c)))throw new Error("IK bone not found: "+c);p.bones.push(y)}b=m.target;if(p.target=r.findBone(b),null==p.target)throw new Error("IK target bone not found: "+b);p.bendDirection=this.getValue(m,"bendPositive",!0)?1:-1,p.mix=this.getValue(m,"mix",1),r.ikConstraints.push(p)}if(a.transform)for(C=0;C<a.transform.length;C++){m=a.transform[C];(p=new e.TransformConstraintData(m.name)).order=this.getValue(m,"order",0);for(v=0;v<m.bones.length;v++){c=m.bones[v];if(null==(y=r.findBone(c)))throw new Error("Transform constraint bone not found: "+c);p.bones.push(y)}b=m.target;if(p.target=r.findBone(b),null==p.target)throw new Error("Transform constraint target bone not found: "+b);p.local=this.getValue(m,"local",!1),p.relative=this.getValue(m,"relative",!1),p.offsetRotation=this.getValue(m,"rotation",0),p.offsetX=this.getValue(m,"x",0)*n,p.offsetY=this.getValue(m,"y",0)*n,p.offsetScaleX=this.getValue(m,"scaleX",0),p.offsetScaleY=this.getValue(m,"scaleY",0),p.offsetShearY=this.getValue(m,"shearY",0),p.rotateMix=this.getValue(m,"rotateMix",1),p.translateMix=this.getValue(m,"translateMix",1),p.scaleMix=this.getValue(m,"scaleMix",1),p.shearMix=this.getValue(m,"shearMix",1),r.transformConstraints.push(p)}if(a.path)for(C=0;C<a.path.length;C++){var m=a.path[C];(p=new e.PathConstraintData(m.name)).order=this.getValue(m,"order",0);for(var v=0;v<m.bones.length;v++){var c=m.bones[v],y=r.findBone(c);if(null==y)throw new Error("Transform constraint bone not found: "+c);p.bones.push(y)}var b=m.target;if(p.target=r.findSlot(b),null==p.target)throw new Error("Path target slot not found: "+b);p.positionMode=t.positionModeFromString(this.getValue(m,"positionMode","percent")),p.spacingMode=t.spacingModeFromString(this.getValue(m,"spacingMode","length")),p.rotateMode=t.rotateModeFromString(this.getValue(m,"rotateMode","tangent")),p.offsetRotation=this.getValue(m,"rotation",0),p.position=this.getValue(m,"position",0),p.positionMode==e.PositionMode.Fixed&&(p.position*=n),p.spacing=this.getValue(m,"spacing",0),p.spacingMode!=e.SpacingMode.Length&&p.spacingMode!=e.SpacingMode.Fixed||(p.spacing*=n),p.rotateMix=this.getValue(m,"rotateMix",1),p.translateMix=this.getValue(m,"translateMix",1),r.pathConstraints.push(p)}if(a.skins)for(var _ in a.skins){var w=a.skins[_],x=new e.Skin(_);for(var h in w){var T=r.findSlotIndex(h);if(-1==T)throw new Error("Slot not found: "+h);var S=w[h];for(var I in S){var P=this.readAttachment(S[I],x,T,I,r);null!=P&&x.addAttachment(T,I,P)}}r.skins.push(x),"default"==x.name&&(r.defaultSkin=x)}for(var C=0,M=this.linkedMeshes.length;C<M;C++){var E=this.linkedMeshes[C];if(null==(x=null==E.skin?r.defaultSkin:r.findSkin(E.skin)))throw new Error("Skin not found: "+E.skin);var k=x.getAttachment(E.slotIndex,E.parent);if(null==k)throw new Error("Parent mesh not found: "+E.parent);E.mesh.setParentMesh(k)}if(this.linkedMeshes.length=0,a.events)for(var A in a.events){var O=a.events[A];(p=new e.EventData(A)).intValue=this.getValue(O,"int",0),p.floatValue=this.getValue(O,"float",0),p.stringValue=this.getValue(O,"string",""),r.events.push(p)}if(a.animations)for(var R in a.animations){var B=a.animations[R];this.readAnimation(B,R,r)}return r},t.prototype.readAttachment=function(t,n,r,a,s){var o=this.scale;switch(a=this.getValue(t,"name",a),this.getValue(t,"type","region")){case"region":var u=this.getValue(t,"path",a),l=this.attachmentLoader.newRegionAttachment(n,a,u);return null==l?null:(l.path=u,l.x=this.getValue(t,"x",0)*o,l.y=this.getValue(t,"y",0)*o,l.scaleX=this.getValue(t,"scaleX",1),l.scaleY=this.getValue(t,"scaleY",1),l.rotation=this.getValue(t,"rotation",0),l.width=t.width*o,l.height=t.height*o,null!=(w=this.getValue(t,"color",null))&&l.color.setFromString(w),l);case"boundingbox":var h=this.attachmentLoader.newBoundingBoxAttachment(n,a);return null==h?null:(this.readVertices(t,h,t.vertexCount<<1),null!=(w=this.getValue(t,"color",null))&&h.color.setFromString(w),h);case"mesh":case"linkedmesh":var u=this.getValue(t,"path",a),c=this.attachmentLoader.newMeshAttachment(n,a,u);if(null==c)return null;c.path=u,null!=(w=this.getValue(t,"color",null))&&c.color.setFromString(w);var d=this.getValue(t,"parent",null);if(null!=d)return c.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new i(c,this.getValue(t,"skin",null),r,d)),c;var p=t.uvs;return this.readVertices(t,c,p.length),c.triangles=t.triangles,c.regionUVs=p,c.hullLength=2*this.getValue(t,"hull",0),c;case"path":if(null==(u=this.attachmentLoader.newPathAttachment(n,a)))return null;u.closed=this.getValue(t,"closed",!1),u.constantSpeed=this.getValue(t,"constantSpeed",!0);_=t.vertexCount;this.readVertices(t,u,_<<1);for(var f=e.Utils.newArray(_/3,0),g=0;g<t.lengths.length;g++)f[g]=t.lengths[g]*o;return u.lengths=f,null!=(w=this.getValue(t,"color",null))&&u.color.setFromString(w),u;case"point":var m=this.attachmentLoader.newPointAttachment(n,a);return null==m?null:(m.x=this.getValue(t,"x",0)*o,m.y=this.getValue(t,"y",0)*o,m.rotation=this.getValue(t,"rotation",0),null!=(w=this.getValue(t,"color",null))&&m.color.setFromString(w),m);case"clipping":var v=this.attachmentLoader.newClippingAttachment(n,a);if(null==v)return null;var y=this.getValue(t,"end",null);if(null!=y){var b=s.findSlot(y);if(null==b)throw new Error("Clipping end slot not found: "+y);v.endSlot=b}var _=t.vertexCount;this.readVertices(t,v,_<<1);var w=this.getValue(t,"color",null);return null!=w&&v.color.setFromString(w),v}return null},t.prototype.readVertices=function(t,i,n){var r=this.scale;i.worldVerticesLength=n;var a=t.vertices;if(n!=a.length){for(var s=new Array,o=new Array,u=0,l=a.length;u<l;){var h=a[u++];o.push(h);for(var c=u+4*h;u<c;u+=4)o.push(a[u]),s.push(a[u+1]*r),s.push(a[u+2]*r),s.push(a[u+3])}i.bones=o,i.vertices=e.Utils.toFloatArray(s)}else{var d=e.Utils.toFloatArray(a);if(1!=r)for(var u=0,l=a.length;u<l;u++)d[u]*=r;i.vertices=d}},t.prototype.readAnimation=function(t,i,n){var r=this.scale,a=new Array,s=0;if(t.slots)for(var o in t.slots){k=t.slots[o];if(-1==(Q=n.findSlotIndex(o)))throw new Error("Slot not found: "+o);for(var u in k){A=k[u];if("attachment"==u){(y=new e.AttachmentTimeline(A.length)).slotIndex=Q;for(var l=0,h=0;h<A.length;h++){c=A[h];y.setFrame(l++,c.time,c.name)}a.push(y),s=Math.max(s,y.frames[y.getFrameCount()-1])}else if("color"==u){(y=new e.ColorTimeline(A.length)).slotIndex=Q;for(var l=0,h=0;h<A.length;h++){var c=A[h],d=new e.Color;d.setFromString(c.color),y.setFrame(l,c.time,d.r,d.g,d.b,d.a),this.readCurve(c,y,l),l++}a.push(y),s=Math.max(s,y.frames[(y.getFrameCount()-1)*e.ColorTimeline.ENTRIES])}else{if("twoColor"!=u)throw new Error("Invalid timeline type for a slot: "+u+" ("+o+")");(y=new e.TwoColorTimeline(A.length)).slotIndex=Q;for(var l=0,h=0;h<A.length;h++){var c=A[h],p=new e.Color,f=new e.Color;p.setFromString(c.light),f.setFromString(c.dark),y.setFrame(l,c.time,p.r,p.g,p.b,p.a,f.r,f.g,f.b),this.readCurve(c,y,l),l++}a.push(y),s=Math.max(s,y.frames[(y.getFrameCount()-1)*e.TwoColorTimeline.ENTRIES])}}}if(t.bones)for(var g in t.bones){var m=t.bones[g],v=n.findBoneIndex(g);if(-1==v)throw new Error("Bone not found: "+g);for(var u in m){A=m[u];if("rotate"===u){(y=new e.RotateTimeline(A.length)).boneIndex=v;for(var l=0,h=0;h<A.length;h++){c=A[h];y.setFrame(l,c.time,c.angle),this.readCurve(c,y,l),l++}a.push(y),s=Math.max(s,y.frames[(y.getFrameCount()-1)*e.RotateTimeline.ENTRIES])}else{if("translate"!==u&&"scale"!==u&&"shear"!==u)throw new Error("Invalid timeline type for a bone: "+u+" ("+g+")");var y=null,b=1;"scale"===u?y=new e.ScaleTimeline(A.length):"shear"===u?y=new e.ShearTimeline(A.length):(y=new e.TranslateTimeline(A.length),b=r),y.boneIndex=v;for(var l=0,h=0;h<A.length;h++){var c=A[h],_=this.getValue(c,"x",0),w=this.getValue(c,"y",0);y.setFrame(l,c.time,_*b,w*b),this.readCurve(c,y,l),l++}a.push(y),s=Math.max(s,y.frames[(y.getFrameCount()-1)*e.TranslateTimeline.ENTRIES])}}}if(t.ik)for(var x in t.ik){var T=t.ik[x],S=n.findIkConstraint(x);(y=new e.IkConstraintTimeline(T.length)).ikConstraintIndex=n.ikConstraints.indexOf(S);for(var l=0,h=0;h<T.length;h++){c=T[h];y.setFrame(l,c.time,this.getValue(c,"mix",1),this.getValue(c,"bendPositive",!0)?1:-1),this.readCurve(c,y,l),l++}a.push(y),s=Math.max(s,y.frames[(y.getFrameCount()-1)*e.IkConstraintTimeline.ENTRIES])}if(t.transform)for(var x in t.transform){var T=t.transform[x],S=n.findTransformConstraint(x);(y=new e.TransformConstraintTimeline(T.length)).transformConstraintIndex=n.transformConstraints.indexOf(S);for(var l=0,h=0;h<T.length;h++){c=T[h];y.setFrame(l,c.time,this.getValue(c,"rotateMix",1),this.getValue(c,"translateMix",1),this.getValue(c,"scaleMix",1),this.getValue(c,"shearMix",1)),this.readCurve(c,y,l),l++}a.push(y),s=Math.max(s,y.frames[(y.getFrameCount()-1)*e.TransformConstraintTimeline.ENTRIES])}if(t.paths)for(var x in t.paths){var T=t.paths[x],I=n.findPathConstraintIndex(x);if(-1==I)throw new Error("Path constraint not found: "+x);var P=n.pathConstraints[I];for(var u in T){A=T[u];if("position"===u||"spacing"===u){var y=null,b=1;"spacing"===u?(y=new e.PathConstraintSpacingTimeline(A.length),P.spacingMode!=e.SpacingMode.Length&&P.spacingMode!=e.SpacingMode.Fixed||(b=r)):(y=new e.PathConstraintPositionTimeline(A.length),P.positionMode==e.PositionMode.Fixed&&(b=r)),y.pathConstraintIndex=I;for(var l=0,h=0;h<A.length;h++){c=A[h];y.setFrame(l,c.time,this.getValue(c,u,0)*b),this.readCurve(c,y,l),l++}a.push(y),s=Math.max(s,y.frames[(y.getFrameCount()-1)*e.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===u){(y=new e.PathConstraintMixTimeline(A.length)).pathConstraintIndex=I;for(var l=0,h=0;h<A.length;h++){c=A[h];y.setFrame(l,c.time,this.getValue(c,"rotateMix",1),this.getValue(c,"translateMix",1)),this.readCurve(c,y,l),l++}a.push(y),s=Math.max(s,y.frames[(y.getFrameCount()-1)*e.PathConstraintMixTimeline.ENTRIES])}}}if(t.deform)for(var C in t.deform){var M=t.deform[C],E=n.findSkin(C);if(null==E)throw new Error("Skin not found: "+C);for(var o in M){var k=M[o];if(-1==(Q=n.findSlotIndex(o)))throw new Error("Slot not found: "+k.name);for(var u in k){var A=k[u],O=E.getAttachment(Q,u);if(null==O)throw new Error("Deform attachment not found: "+A.name);var R=null!=O.bones,B=O.vertices,D=R?B.length/3*2:B.length;(y=new e.DeformTimeline(A.length)).slotIndex=Q,y.attachment=O;for(var l=0,X=0;X<A.length;X++){var c=A[X],F=void 0,L=this.getValue(c,"vertices",null);if(null==L)F=R?e.Utils.newFloatArray(D):B;else{F=e.Utils.newFloatArray(D);var N=this.getValue(c,"offset",0);if(e.Utils.arrayCopy(L,0,F,N,L.length),1!=r)for(var U=(h=N)+L.length;h<U;h++)F[h]*=r;if(!R)for(h=0;h<D;h++)F[h]+=B[h]}y.setFrame(l,c.time,F),this.readCurve(c,y,l),l++}a.push(y),s=Math.max(s,y.frames[y.getFrameCount()-1])}}}var G=t.drawOrder;if(null==G&&(G=t.draworder),null!=G){for(var y=new e.DrawOrderTimeline(G.length),j=n.slots.length,l=0,X=0;X<G.length;X++){var V=G[X],W=null,H=this.getValue(V,"offsets",null);if(null!=H){W=e.Utils.newArray(j,-1);for(var q=e.Utils.newArray(j-H.length,0),Y=0,z=0,h=0;h<H.length;h++){var K=H[h],Q=n.findSlotIndex(K.slot);if(-1==Q)throw new Error("Slot not found: "+K.slot);for(;Y!=Q;)q[z++]=Y++;W[Y+K.offset]=Y++}for(;Y<j;)q[z++]=Y++;for(h=j-1;h>=0;h--)-1==W[h]&&(W[h]=q[--z])}y.setFrame(l++,V.time,W)}a.push(y),s=Math.max(s,y.frames[y.getFrameCount()-1])}if(t.events){for(var y=new e.EventTimeline(t.events.length),l=0,h=0;h<t.events.length;h++){var Z=t.events[h],J=n.findEvent(Z.name);if(null==J)throw new Error("Event not found: "+Z.name);var $=new e.Event(e.Utils.toSinglePrecision(Z.time),J);$.intValue=this.getValue(Z,"int",J.intValue),$.floatValue=this.getValue(Z,"float",J.floatValue),$.stringValue=this.getValue(Z,"string",J.stringValue),y.setFrame(l++,$)}a.push(y),s=Math.max(s,y.frames[y.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new e.Animation(i,a,s))},t.prototype.readCurve=function(e,t,i){if(e.curve)if("stepped"===e.curve)t.setStepped(i);else if("[object Array]"===Object.prototype.toString.call(e.curve)){var n=e.curve;t.setCurve(i,n[0],n[1],n[2],n[3])}},t.prototype.getValue=function(e,t,i){return void 0!==e[t]?e[t]:i},t.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return e.BlendMode.Normal;if("additive"==t)return e.BlendMode.Additive;if("multiply"==t)return e.BlendMode.Multiply;if("screen"==t)return e.BlendMode.Screen;throw new Error("Unknown blend mode: "+t)},t.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return e.PositionMode.Fixed;if("percent"==t)return e.PositionMode.Percent;throw new Error("Unknown position mode: "+t)},t.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return e.SpacingMode.Length;if("fixed"==t)return e.SpacingMode.Fixed;if("percent"==t)return e.SpacingMode.Percent;throw new Error("Unknown position mode: "+t)},t.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return e.RotateMode.Tangent;if("chain"==t)return e.RotateMode.Chain;if("chainscale"==t)return e.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+t)},t.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return e.TransformMode.Normal;if("onlytranslation"==t)return e.TransformMode.OnlyTranslation;if("norotationorreflection"==t)return e.TransformMode.NoRotationOrReflection;if("noscale"==t)return e.TransformMode.NoScale;if("noscaleorreflection"==t)return e.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},t}();e.SkeletonJson=t;var i=function(){return function(e,t,i,n){this.mesh=e,this.skin=t,this.slotIndex=i,this.parent=n}}()}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function e(e){if(this.attachments=new Array,null==e)throw new Error("name cannot be null.");this.name=e}return e.prototype.addAttachment=function(e,t,i){if(null==i)throw new Error("attachment cannot be null.");var n=this.attachments;e>=n.length&&(n.length=e+1),n[e]||(n[e]={}),n[e][t]=i},e.prototype.getAttachment=function(e,t){var i=this.attachments[e];return i?i[t]:null},e.prototype.attachAll=function(e,t){for(var i=0,n=0;n<e.slots.length;n++){var r=e.slots[n],a=r.getAttachment();if(a&&i<t.attachments.length){var s=t.attachments[i];for(var o in s)if(a==s[o]){var u=this.getAttachment(i,name);null!=u&&r.setAttachment(u);break}}i++}},e}();e.Skin=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function t(t,i){if(this.attachmentVertices=new Array,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("bone cannot be null.");this.data=t,this.bone=i,this.color=new e.Color,this.darkColor=null==t.darkColor?null:new e.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(e){this.attachment!=e&&(this.attachment=e,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},t.prototype.setAttachmentTime=function(e){this.attachmentTime=this.bone.skeleton.time-e},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}();e.Slot=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){return function(t,i,n){if(this.color=new e.Color(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==i)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=t,this.name=i,this.boneData=n}}();e.SlotData=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function e(e){this._image=e}return e.prototype.getImage=function(){return this._image},e.filterFromString=function(e){switch(e.toLowerCase()){case"nearest":return i.Nearest;case"linear":return i.Linear;case"mipmap":return i.MipMap;case"mipmapnearestnearest":return i.MipMapNearestNearest;case"mipmaplinearnearest":return i.MipMapLinearNearest;case"mipmapnearestlinear":return i.MipMapNearestLinear;case"mipmaplinearlinear":return i.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+e)}},e.wrapFromString=function(e){switch(e.toLowerCase()){case"mirroredtepeat":return n.MirroredRepeat;case"clamptoedge":return n.ClampToEdge;case"repeat":return n.Repeat;default:throw new Error("Unknown texture wrap "+e)}},e}();e.Texture=t;var i;!function(e){e[e.Nearest=9728]="Nearest",e[e.Linear=9729]="Linear",e[e.MipMap=9987]="MipMap",e[e.MipMapNearestNearest=9984]="MipMapNearestNearest",e[e.MipMapLinearNearest=9985]="MipMapLinearNearest",e[e.MipMapNearestLinear=9986]="MipMapNearestLinear",e[e.MipMapLinearLinear=9987]="MipMapLinearLinear"}(i=e.TextureFilter||(e.TextureFilter={}));var n;!function(e){e[e.MirroredRepeat=33648]="MirroredRepeat",e[e.ClampToEdge=33071]="ClampToEdge",e[e.Repeat=10497]="Repeat"}(n=e.TextureWrap||(e.TextureWrap={}));var r=function(){function e(){this.size=null}return Object.defineProperty(e.prototype,"width",{get:function(){var e=this.texture;return"3"==PIXI.VERSION[0]?e.crop.width:e.trim?e.trim.width:e.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var e=this.texture;return"3"==PIXI.VERSION[0]?e.crop.height:e.trim?e.trim.height:e.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){var e=this.texture;return e.trim?e.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixiOffsetY",{get:function(){var e=this.texture;return e.trim?e.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spineOffsetY",{get:function(){var e=this.texture;return this.originalHeight-this.height-(e.trim?e.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalWidth",{get:function(){var e=this.texture;return"3"==PIXI.VERSION[0]?e.trim?e.trim.width:e.crop.width:e.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalHeight",{get:function(){var e=this.texture;return"3"==PIXI.VERSION[0]?e.trim?e.trim.height:e.crop.height:e.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),e}();e.TextureRegion=r}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function t(e,t,i){this.pages=new Array,this.regions=new Array,e&&this.addSpineAtlas(e,t,i)}return t.prototype.addTexture=function(t,i){for(var a=this.pages,s=null,o=0;o<a.length;o++)if(a[o].baseTexture===i.baseTexture){s=a[o];break}if(null===s){(s=new n).name="texturePage";var u=i.baseTexture;s.width=u.realWidth,s.height=u.realHeight,s.baseTexture=u,s.minFilter=s.magFilter=e.TextureFilter.Nearest,s.uWrap=e.TextureWrap.ClampToEdge,s.vWrap=e.TextureWrap.ClampToEdge,a.push(s)}var l=new r;return l.name=t,l.page=s,l.texture=i,l.index=-1,this.regions.push(l),l},t.prototype.addTextureHash=function(e,t){for(var i in e)e.hasOwnProperty(i)&&this.addTexture(t&&-1!==i.indexOf(".")?i.substr(0,i.lastIndexOf(".")):i,e[i])},t.prototype.addSpineAtlas=function(e,t,i){return this.load(e,t,i)},t.prototype.load=function(t,a,s){var o=this;if(null==a)throw new Error("textureLoader cannot be null.");var u=new i(t),l=new Array(4),h=null,c=function(){for(;;){var t=u.readLine();if(null==t)return s&&s(o);if(0==(t=t.trim()).length)h=null;else{if(!h){(h=new n).name=t,2==u.readTuple(l)&&(h.width=parseInt(l[0]),h.height=parseInt(l[1]),u.readTuple(l)),u.readTuple(l),h.minFilter=e.Texture.filterFromString(l[0]),h.magFilter=e.Texture.filterFromString(l[1]);var i=u.readValue();h.uWrap=e.TextureWrap.ClampToEdge,h.vWrap=e.TextureWrap.ClampToEdge,"x"==i?h.uWrap=e.TextureWrap.Repeat:"y"==i?h.vWrap=e.TextureWrap.Repeat:"xy"==i&&(h.uWrap=h.vWrap=e.TextureWrap.Repeat),a(t,function(e){h.baseTexture=e,e.hasLoaded||(e.width=h.width,e.height=h.height),o.pages.push(h),h.setFilters(),h.width&&h.height||(h.width=e.realWidth,h.height=e.realHeight,!h.width||h.height),c()}),o.pages.push(h);break}var d=new r;d.name=t,d.page=h;var p="true"==u.readValue()?6:0;u.readTuple(l);var f=parseInt(l[0]),g=parseInt(l[1]);u.readTuple(l);var m=parseInt(l[0]),v=parseInt(l[1]),y=h.baseTexture.resolution;f/=y,g/=y,m/=y,v/=y;var b=new PIXI.Rectangle(f,g,p?v:m,p?m:v);4==u.readTuple(l)&&4==u.readTuple(l)&&u.readTuple(l);var _=parseInt(l[0])/y,w=parseInt(l[1])/y;u.readTuple(l);var x=parseInt(l[0])/y,T=parseInt(l[1])/y,S=new PIXI.Rectangle(0,0,_,w),I=new PIXI.Rectangle(x,w-v-T,m,v);if("4"==PIXI.VERSION[0])d.texture=new PIXI.Texture(d.page.baseTexture,b,S,I,p);else{var P=new PIXI.Rectangle(f,g,m,v),C=P.clone();I.width=_,I.height=w,d.texture=new PIXI.Texture(d.page.baseTexture,P,C,I,p)}d.index=parseInt(u.readValue()),d.texture._updateUvs(),o.regions.push(d)}}};c()},t.prototype.findRegion=function(e){for(var t=0;t<this.regions.length;t++)if(this.regions[t].name==e)return this.regions[t];return null},t.prototype.dispose=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].baseTexture.dispose()},t}();e.TextureAtlas=t;var i=function(){function e(e){this.index=0,this.lines=e.split(/\r\n|\r|\n/)}return e.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},e.prototype.readValue=function(){var e=this.readLine(),t=e.indexOf(":");if(-1==t)throw new Error("Invalid line: "+e);return e.substring(t+1).trim()},e.prototype.readTuple=function(e){var t=this.readLine(),i=t.indexOf(":");if(-1==i)throw new Error("Invalid line: "+t);for(var n=0,r=i+1;n<3;n++){var a=t.indexOf(",",r);if(-1==a)break;e[n]=t.substr(r,a-r).trim(),r=a+1}return e[n]=t.substring(r).trim(),n+1},e}(),n=function(){function t(){}return t.prototype.setFilters=function(){var t=this.baseTexture,i=this.minFilter;i==e.TextureFilter.Linear?t.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==e.TextureFilter.Nearest?t.scaleMode=PIXI.SCALE_MODES.NEAREST:(t.mipmap=!0,i==e.TextureFilter.MipMapNearestNearest?t.scaleMode=PIXI.SCALE_MODES.NEAREST:t.scaleMode=PIXI.SCALE_MODES.LINEAR)},t}();e.TextureAtlasPage=n;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e.TextureRegion);e.TextureAtlasRegion=r}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function t(t,i){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new e.Vector2,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(i.findBone(t.bones[n].name));this.target=i.findBone(t.target.name)}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,i=this.translateMix,n=this.scaleMix,r=this.shearMix,a=this.target,s=a.matrix,o=s.a,u=s.c,l=s.b,h=s.d,c=o*h-u*l>0?e.MathUtils.degRad:-e.MathUtils.degRad,d=this.data.offsetRotation*c,p=this.data.offsetShearY*c,f=this.bones,g=0,m=f.length;g<m;g++){var v=f[g],y=!1,b=v.matrix;if(0!=t){var _=b.a,w=b.c,x=b.b,T=b.d;(k=Math.atan2(l,o)-Math.atan2(x,_)+d)>e.MathUtils.PI?k-=e.MathUtils.PI2:k<-e.MathUtils.PI&&(k+=e.MathUtils.PI2),k*=t;var S=Math.cos(k),I=Math.sin(k);b.a=S*_-I*x,b.c=S*w-I*T,b.b=I*_+S*x,b.d=I*w+S*T,y=!0}if(0!=i){var P=this.temp;a.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),b.tx+=(P.x-b.tx)*i,b.ty+=(P.y-b.ty)*i,y=!0}if(n>0){var C=Math.sqrt(b.a*b.a+b.b*b.b),M=Math.sqrt(o*o+l*l);C>1e-5&&(C=(C+(M-C+this.data.offsetScaleX)*n)/C),b.a*=C,b.b*=C,C=Math.sqrt(b.c*b.c+b.d*b.d),M=Math.sqrt(u*u+h*h),C>1e-5&&(C=(C+(M-C+this.data.offsetScaleY)*n)/C),b.c*=C,b.d*=C,y=!0}if(r>0){var w=b.c,T=b.d,E=Math.atan2(T,w),k=Math.atan2(h,u)-Math.atan2(l,o)-(E-Math.atan2(b.b,b.a));k>e.MathUtils.PI?k-=e.MathUtils.PI2:k<-e.MathUtils.PI&&(k+=e.MathUtils.PI2),k=E+(k+p)*r;C=Math.sqrt(w*w+T*T);b.c=Math.cos(k)*C,b.d=Math.sin(k)*C,y=!0}y&&(v.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,i=this.translateMix,n=this.scaleMix,r=this.shearMix,a=this.target,s=a.matrix,o=s.a,u=s.c,l=s.b,h=s.d,c=o*h-u*l>0?e.MathUtils.degRad:-e.MathUtils.degRad,d=this.data.offsetRotation*c,p=this.data.offsetShearY*c,f=this.bones,g=0,m=f.length;g<m;g++){var v=f[g],y=!1,b=v.matrix;if(0!=t){var _=b.a,w=b.c,x=b.b,T=b.d;(C=Math.atan2(l,o)+d)>e.MathUtils.PI?C-=e.MathUtils.PI2:C<-e.MathUtils.PI&&(C+=e.MathUtils.PI2),C*=t;var S=Math.cos(C),I=Math.sin(C);b.a=S*_-I*x,b.c=S*w-I*T,b.b=I*_+S*x,b.d=I*w+S*T,y=!0}if(0!=i){var P=this.temp;a.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),b.tx+=P.x*i,b.ty+=P.y*i,y=!0}if(n>0){M=(Math.sqrt(o*o+l*l)-1+this.data.offsetScaleX)*n+1;b.a*=M,b.b*=M,M=(Math.sqrt(u*u+h*h)-1+this.data.offsetScaleY)*n+1,b.c*=M,b.d*=M,y=!0}if(r>0){var C=Math.atan2(h,u)-Math.atan2(l,o);C>e.MathUtils.PI?C-=e.MathUtils.PI2:C<-e.MathUtils.PI&&(C+=e.MathUtils.PI2);var w=b.c,T=b.d;C=Math.atan2(T,w)+(C-e.MathUtils.PI/2+p)*r;var M=Math.sqrt(w*w+T*T);b.c=Math.cos(C)*M,b.d=Math.sin(C)*M,y=!0}y&&(v.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var e=this.rotateMix,t=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var a=this.bones,s=0,o=a.length;s<o;s++){var u=a[s];u.appliedValid||u.updateAppliedTransform();var l=u.arotation;if(0!=e){g=r.arotation-l+this.data.offsetRotation;l+=(g-=360*(16384-(16384.499999999996-g/360|0)))*e}var h=u.ax,c=u.ay;0!=t&&(h+=(r.ax-h+this.data.offsetX)*t,c+=(r.ay-c+this.data.offsetY)*t);var d=u.ascaleX,p=u.ascaleY;i>0&&(d>1e-5&&(d=(d+(r.ascaleX-d+this.data.offsetScaleX)*i)/d),p>1e-5&&(p=(p+(r.ascaleY-p+this.data.offsetScaleY)*i)/p));var f=u.ashearY;if(n>0){var g=r.ashearY-f+this.data.offsetShearY;g-=360*(16384-(16384.499999999996-g/360|0)),u.shearY+=g*n}u.updateWorldTransformWith(h,c,l,d,p,u.ashearX,f)}},t.prototype.applyRelativeLocal=function(){var e=this.rotateMix,t=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var a=this.bones,s=0,o=a.length;s<o;s++){var u=a[s];u.appliedValid||u.updateAppliedTransform();var l=u.arotation;0!=e&&(l+=(r.arotation+this.data.offsetRotation)*e);var h=u.ax,c=u.ay;0!=t&&(h+=(r.ax+this.data.offsetX)*t,c+=(r.ay+this.data.offsetY)*t);var d=u.ascaleX,p=u.ascaleY;i>0&&(d>1e-5&&(d*=(r.ascaleX-1+this.data.offsetScaleX)*i+1),p>1e-5&&(p*=(r.ascaleY-1+this.data.offsetScaleY)*i+1));var f=u.ashearY;n>0&&(f+=(r.ashearY+this.data.offsetShearY)*n),u.updateWorldTransformWith(h,c,l,d,p,u.ashearX,f)}},t.prototype.getOrder=function(){return this.data.order},t}();e.TransformConstraint=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){return function(e){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==e)throw new Error("name cannot be null.");this.name=e}}();e.TransformConstraintData=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function t(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new e.Pool(function(){return new Array}),this.polygonIndicesPool=new e.Pool(function(){return new Array})}return t.prototype.triangulate=function(e){var i=e,n=e.length>>1,r=this.indicesArray;r.length=0;for(s=0;s<n;s++)r[s]=s;var a=this.isConcaveArray;a.length=0;for(var s=0,o=n;s<o;++s)a[s]=t.isConcave(s,n,i,r);var u=this.triangles;for(u.length=0;n>3;){for(var l=n-1,s=0,h=1;;){e:if(!a[s]){for(var c=r[l]<<1,d=r[s]<<1,p=r[h]<<1,f=i[c],g=i[c+1],m=i[d],v=i[d+1],y=i[p],b=i[p+1],_=(h+1)%n;_!=l;_=(_+1)%n)if(a[_]){var w=r[_]<<1,x=i[w],T=i[w+1];if(t.positiveArea(y,b,f,g,x,T)&&t.positiveArea(f,g,m,v,x,T)&&t.positiveArea(m,v,y,b,x,T))break e}break}if(0==h){do{if(!a[s])break;s--}while(s>0);break}l=s,s=h,h=(h+1)%n}u.push(r[(n+s-1)%n]),u.push(r[s]),u.push(r[(s+1)%n]),r.splice(s,1),a.splice(s,1);var S=(--n+s-1)%n,I=s==n?0:s;a[S]=t.isConcave(S,n,i,r),a[I]=t.isConcave(I,n,i,r)}return 3==n&&(u.push(r[2]),u.push(r[0]),u.push(r[1])),u},t.prototype.decompose=function(e,i){var n=e,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;var a=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(a),a.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;var o=this.polygonPool.obtain();o.length=0;for(var u=-1,l=0,h=0,c=i.length;h<c;h+=3){var d=i[h]<<1,p=i[h+1]<<1,f=i[h+2]<<1,g=n[d],m=n[d+1],v=n[p],y=n[p+1],b=n[f],_=n[f+1],w=!1;if(u==d){var x=o.length-4,T=t.winding(o[x],o[x+1],o[x+2],o[x+3],b,_),S=t.winding(b,_,o[0],o[1],o[2],o[3]);T==l&&S==l&&(o.push(b),o.push(_),s.push(f),w=!0)}w||(o.length>0?(r.push(o),a.push(s)):(this.polygonPool.free(o),this.polygonIndicesPool.free(s)),(o=this.polygonPool.obtain()).length=0,o.push(g),o.push(m),o.push(v),o.push(y),o.push(b),o.push(_),(s=this.polygonIndicesPool.obtain()).length=0,s.push(d),s.push(p),s.push(f),l=t.winding(g,m,v,y,b,_),u=d)}o.length>0&&(r.push(o),a.push(s));for(var h=0,c=r.length;h<c;h++)if(0!=(s=a[h]).length)for(var I=s[0],P=s[s.length-1],C=(o=r[h])[x=o.length-4],M=o[x+1],E=o[x+2],k=o[x+3],A=o[0],O=o[1],R=o[2],B=o[3],D=t.winding(C,M,E,k,A,O),X=0;X<c;X++)if(X!=h){var F=a[X];if(3==F.length){var L=F[0],N=F[1],U=F[2],G=r[X],b=G[G.length-2],_=G[G.length-1];if(L==I&&N==P){var T=t.winding(C,M,E,k,b,_),S=t.winding(b,_,A,O,R,B);T==D&&S==D&&(G.length=0,F.length=0,o.push(b),o.push(_),s.push(U),C=E,M=k,E=b,k=_,X=0)}}}for(h=r.length-1;h>=0;h--)0==(o=r[h]).length&&(r.splice(h,1),this.polygonPool.free(o),s=a[h],a.splice(h,1),this.polygonIndicesPool.free(s));return r},t.isConcave=function(e,t,i,n){var r=n[(t+e-1)%t]<<1,a=n[e]<<1,s=n[(e+1)%t]<<1;return!this.positiveArea(i[r],i[r+1],i[a],i[a+1],i[s],i[s+1])},t.positiveArea=function(e,t,i,n,r,a){return e*(a-n)+i*(t-a)+r*(n-t)>=0},t.winding=function(e,t,i,n,r,a){var s=i-e,o=n-t;return r*o-a*s+s*t-e*o>=0?1:-1},t}();e.Triangulator=t}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){!function(e){var t=function(){function e(){this.array=new Array}return e.prototype.add=function(e){var t=this.contains(e);return this.array[0|e]=0|e,!t},e.prototype.contains=function(e){return void 0!=this.array[0|e]},e.prototype.remove=function(e){this.array[0|e]=void 0},e.prototype.clear=function(){this.array.length=0},e}();e.IntSet=t;var i=function(){function e(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this.r=e,this.g=t,this.b=i,this.a=n}return e.prototype.set=function(e,t,i,n){return this.r=e,this.g=t,this.b=i,this.a=n,this.clamp(),this},e.prototype.setFromColor=function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this},e.prototype.setFromString=function(e){return e="#"==e.charAt(0)?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=(8!=e.length?255:parseInt(e.substr(6,2),16))/255,this},e.prototype.add=function(e,t,i,n){return this.r+=e,this.g+=t,this.b+=i,this.a+=n,this.clamp(),this},e.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},e}();i.WHITE=new i(1,1,1,1),i.RED=new i(1,0,0,1),i.GREEN=new i(0,1,0,1),i.BLUE=new i(0,0,1,1),i.MAGENTA=new i(1,0,1,1),e.Color=i;var n=function(){function e(){}return e.clamp=function(e,t,i){return e<t?t:e>i?i:e},e.cosDeg=function(t){return Math.cos(t*e.degRad)},e.sinDeg=function(t){return Math.sin(t*e.degRad)},e.signum=function(e){return e>0?1:e<0?-1:0},e.toInt=function(e){return e>0?Math.floor(e):Math.ceil(e)},e.cbrt=function(e){var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t},e}();n.PI=3.1415927,n.PI2=2*n.PI,n.radiansToDegrees=180/n.PI,n.radDeg=n.radiansToDegrees,n.degreesToRadians=n.PI/180,n.degRad=n.degreesToRadians,e.MathUtils=n;var r=function(){function e(){}return e.arrayCopy=function(e,t,i,n,r){for(var a=t,s=n;a<t+r;a++,s++)i[s]=e[a]},e.setArraySize=function(e,t,i){void 0===i&&(i=0);var n=e.length;if(n==t)return e;if(e.length=t,n<t)for(var r=n;r<t;r++)e[r]=i;return e},e.ensureArrayCapacity=function(t,i,n){return void 0===n&&(n=0),t.length>=i?t:e.setArraySize(t,i,n)},e.newArray=function(e,t){for(var i=new Array(e),n=0;n<e;n++)i[n]=t;return i},e.newFloatArray=function(t){if(e.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var i=new Array(t),n=0;n<i.length;n++)i[n]=0;return i},e.newShortArray=function(t){if(e.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var i=new Array(t),n=0;n<i.length;n++)i[n]=0;return i},e.toFloatArray=function(t){return e.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},e.toSinglePrecision=function(t){return e.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},e}();r.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,e.Utils=r;var a=function(){function e(){}return e.logBones=function(e){for(var t=0;t<e.bones.length;t++){var i=e.bones[t];i.matrix}},e}();e.DebugUtils=a;var s=function(){function e(e){this.items=new Array,this.instantiator=e}return e.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},e.prototype.free=function(e){e.reset&&e.reset(),this.items.push(e)},e.prototype.freeAll=function(e){for(var t=0;t<e.length;t++)e[t].reset&&e[t].reset(),this.items[t]=e[t]},e.prototype.clear=function(){this.items.length=0},e}();e.Pool=s;var o=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return e.prototype.set=function(e,t){return this.x=e,this.y=t,this},e.prototype.length=function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},e.prototype.normalize=function(){var e=this.length();return 0!=e&&(this.x/=e,this.y/=e),this},e}();e.Vector2=o;var u=function(){function e(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return e.prototype.update=function(){var e=Date.now()/1e3;this.delta=e-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=e,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},e}();e.TimeKeeper=u;var l=function(){function e(e){void 0===e&&(e=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(e)}return e.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},e.prototype.addValue=function(e){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=e,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},e.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var e=0,t=0;t<this.values.length;t++)e+=this.values[t];this.mean=e/this.values.length,this.dirty=!1}return this.mean}return 0},e}();e.WindowedMean=l}(e.core||(e.core={}))}(pixi_spine||(pixi_spine={})),function(e){function t(e){var t=PIXI.loaders.Resource.TYPE;return t?e.type===t.JSON:e.isJson}function i(){return function(i,a){if(!i.data||!t(i)||!i.data.bones)return a();var s=i.metadata||{},o=s?i.metadata.spineSkeletonScale:null,u=s?i.metadata.spineAtlas:null;if(!1===u)return a();if(u&&u.pages){var l=new e.core.SkeletonJson(new e.core.AtlasAttachmentLoader(u)).readSkeletonData(i.data);return i.spineData=l,i.spineAtlas=u,a()}var h=s.spineAtlasSuffix||".atlas",c=i.url.substr(0,i.url.lastIndexOf("."))+h;c=c.replace(this.baseUrl,"");var d={crossOrigin:i.crossOrigin,xhrType:PIXI.loaders.Resource.XHR_RESPONSE_TYPE.TEXT,metadata:s.spineMetadata||null,parentResource:i},p={crossOrigin:i.crossOrigin,metadata:s.imageMetadata||null,parentResource:i},f=i.url.substr(0,i.url.lastIndexOf("/")+1);f=f.replace(this.baseUrl,"");var g=s.images?r(s.images):s.image?r({default:s.image}):s.imageLoader?s.imageLoader(this,i.name+"_atlas_page_",f,p):n(this,i.name+"_atlas_page_",f,p);this.add(i.name+"_atlas",c,d,function(t){new e.core.TextureAtlas(t.xhr.responseText,g,function(t){var n=new e.core.SkeletonJson(new e.core.AtlasAttachmentLoader(t));o&&(n.scale=o),i.spineData=n.readSkeletonData(i.data),i.spineAtlas=t,a()})})}}function n(e,t,i,n){return i&&i.lastIndexOf("/")!==i.length-1&&(i+="/"),function(r,a){var s=t+r,o=i+r;e.add(s,o,n,function(e){a(e.texture.baseTexture)})}}function r(e){return function(t,i){var n=e[t]||e.default;i(n&&n.baseTexture?n.baseTexture:n)}}e.atlasParser=i,e.imageLoaderAdapter=n,e.syncImageLoaderAdapter=function(e,t){return e&&e.lastIndexOf("/")!==e.length-1&&(e+="/"),function(e,i){i(PIXI.BaseTexture.fromImage(e,t))}},e.staticImageLoader=r,PIXI.loaders.Loader.addPixiMiddleware(i),PIXI.loader.use(i())}(pixi_spine||(pixi_spine={})),Math.fround||(Math.fround=Math.fround=function(e){return function(t){return e[0]=t,e[0]}}(new Float32Array(1))),function(e){function t(){var e=this.parent.worldTransform,t=this.worldTransform,i=this.localTransform;t.a=i.a*e.a+i.b*e.c,t.b=i.a*e.b+i.b*e.d,t.c=i.c*e.a+i.d*e.c,t.d=i.c*e.b+i.d*e.d,t.tx=i.tx*e.a+i.ty*e.c+e.tx,t.ty=i.tx*e.b+i.ty*e.d+e.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null}e.core.Bone.yDown=!0;var i=[0,0,0],n=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t}(PIXI.Sprite);e.SpineSprite=n;var r=function(e){function t(t,i,n,r,a){return e.call(this,t,i,n,r,a)||this}return __extends(t,e),t}(PIXI.mesh.Mesh);e.SpineMesh=r;var a=function(a){function s(t){var i=a.call(this)||this;if(i.hackTextureBySlotName=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null);var n=this.skeleton.findSlotIndex(e);return-1!=n&&this.hackTextureBySlotIndex(n,t,i)},!t)throw new Error("The spineData param is required.");if("string"==typeof t)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');i.spineData=t,i.skeleton=new e.core.Skeleton(t),i.skeleton.updateWorldTransform(),i.stateData=new e.core.AnimationStateData(t),i.state=new e.core.AnimationState(i.stateData),i.slotContainers=[];for(var n=0,r=i.skeleton.slots.length;n<r;n++){var s=i.skeleton.slots[n],o=s.attachment,u=new PIXI.Container;if(i.slotContainers.push(u),i.addChild(u),o instanceof e.core.RegionAttachment){var l=o.region.name,h=i.createSprite(s,o,l);s.currentSprite=h,s.currentSpriteName=l,u.addChild(h)}else{if(!(o instanceof e.core.MeshAttachment))continue;var c=i.createMesh(s,o);s.currentMesh=c,s.currentMeshName=o.name,u.addChild(c)}}return i.autoUpdate=!0,i.tintRgb=new Float32Array([1,1,1]),i}return __extends(s,a),Object.defineProperty(s.prototype,"autoUpdate",{get:function(){return this.updateTransform===s.prototype.autoUpdateTransform},set:function(e){this.updateTransform=e?s.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=PIXI.utils.hex2rgb(e,this.tintRgb)},enumerable:!0,configurable:!0}),s.prototype.update=function(n){this.state.update(n),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var r=this.skeleton.drawOrder,a=this.skeleton.slots,s=0,o=r.length;s<o;s++)this.children[s]=this.slotContainers[r[s].data.index];var u=this.tintRgb[0],l=this.tintRgb[1],h=this.tintRgb[2];for(s=0,o=a.length;s<o;s++){var c=a[s],d=c.attachment,p=this.slotContainers[s];if(d){var f=d.color;if(d instanceof e.core.RegionAttachment){var g=d.region;if(g){c.currentMesh&&(c.currentMesh.visible=!1,c.currentMesh=null,c.currentMeshName=void 0);var m=g;if(!c.currentSpriteName||c.currentSpriteName!==m.name){var v=m.name;if(c.currentSprite&&(c.currentSprite.visible=!1),c.sprites=c.sprites||{},void 0!==c.sprites[v])c.sprites[v].visible=!0;else{var y=this.createSprite(c,d,v);p.addChild(y)}c.currentSprite=c.sprites[v],c.currentSpriteName=v}}if(p.transform){var b=p.transform,_=b,w=void 0;_.matrix2d?(w=_.matrix2d,_._dirtyVersion++,_.version=_._dirtyVersion,_.isStatic=!0,_.operMode=0):(_.position&&(b=new PIXI.TransformBase,p.transform=b),w=b.localTransform),c.bone.matrix.copy(w)}else{var x=p.localTransform||new PIXI.Matrix;c.bone.matrix.copy(x),p.localTransform=x,p.displayObjectUpdateTransform=t}i[0]=u*c.color.r*f.r,i[1]=l*c.color.g*f.g,i[2]=h*c.color.b*f.b,c.currentSprite.tint=PIXI.utils.rgb2hex(i),c.currentSprite.blendMode=c.blendMode}else{if(!(d instanceof e.core.MeshAttachment)){p.visible=!1;continue}if(c.currentSprite&&(c.currentSprite.visible=!1,c.currentSprite=null,c.currentSpriteName=void 0,p.transform?p.transform=new PIXI.TransformStatic:(p.localTransform=new PIXI.Matrix,p.displayObjectUpdateTransform=PIXI.DisplayObject.prototype.updateTransform)),!c.currentMeshName||c.currentMeshName!==d.name){var T=d.name;if(c.currentMesh&&(c.currentMesh.visible=!1),c.meshes=c.meshes||{},void 0!==c.meshes[T])c.meshes[T].visible=!0;else{var S=this.createMesh(c,d);p.addChild(S)}c.currentMesh=c.meshes[T],c.currentMeshName=T}if(d.computeWorldVerticesOld(c,c.currentMesh.vertices),"3"!==PIXI.VERSION[0]){var I=c.currentMesh.tintRgb;I[0]=u*c.color.r*f.r,I[1]=l*c.color.g*f.g,I[2]=h*c.color.b*f.b}c.currentMesh.blendMode=c.blendMode}p.visible=!0,p.alpha=c.color.a}else p.visible=!1}},s.prototype.setSpriteRegion=function(e,t,i){t.region=i,t.texture=i.texture,i.size?(t.scale.x=i.size.width/i.originalWidth,t.scale.y=-i.size.height/i.originalHeight):(t.scale.x=e.scaleX*e.width/i.originalWidth,t.scale.y=-e.scaleY*e.height/i.originalHeight)},s.prototype.setMeshRegion=function(e,t,i){t.region=i,t.texture=i.texture,e.updateUVs(i,t.uvs),t.dirty++},s.prototype.autoUpdateTransform=function(){if(s.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var e=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(e)}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},s.prototype.createSprite=function(t,i,r){var a=i.region;t.tempAttachment===i&&(a=t.tempRegion,t.tempAttachment=null,t.tempRegion=null);var s=a.texture,o=new n(s);return o.rotation=i.rotation*e.core.MathUtils.degRad,o.anchor.x=.5,o.anchor.y=.5,o.position.x=i.x,o.position.y=i.y,o.alpha=i.color.a,o.region=i.region,this.setSpriteRegion(i,o,i.region),t.sprites=t.sprites||{},t.sprites[r]=o,o},s.prototype.createMesh=function(e,t){var i=t.region;e.tempAttachment===t&&(i=e.tempRegion,e.tempAttachment=null,e.tempRegion=null);var n=new r(i.texture,new Float32Array(t.regionUVs.length),new Float32Array(t.regionUVs.length),new Uint16Array(t.triangles),PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES);return n.canvasPadding=1.5,n.alpha=t.color.a,n.region=t.region,this.setMeshRegion(t,n,i),e.meshes=e.meshes||{},e.meshes[t.name]=n,n},s.prototype.hackTextureBySlotIndex=function(t,i,n){void 0===i&&(i=null),void 0===n&&(n=null);var r=this.skeleton.slots[t];if(!r)return!1;var a=r.attachment,s=a.region;return i&&((s=new e.core.TextureRegion).texture=i,s.size=n),r.currentSprite&&r.currentSprite.region!=s?(this.setSpriteRegion(a,r.currentSprite,s),r.currentSprite.region=s):r.currentMesh&&r.currentMesh.region!=s?this.setMeshRegion(a,r.currentMesh,s):(r.tempRegion=s,r.tempAttachment=a),!0},s}(PIXI.Container);a.globalAutoUpdate=!0,e.Spine=a}(pixi_spine||(pixi_spine={})),PIXI.spine=pixi_spine,function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Sound=e()}}(function(){return function e(t,i,n){function r(s,o){if(!i[s]){if(!t[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){var i=t[s][1][e];return r(i||e)},h,h.exports,e,t,i,n)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){"use strict";var n=function(){function e(e,t){this._output=t,this._input=e}return Object.defineProperty(e.prototype,"destination",{get:function(){return this._input},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},set:function(e){var t=this;if(this._filters&&(this._filters.forEach(function(e){e&&e.disconnect()}),this._filters=null,this._input.connect(this._output)),e&&e.length){this._filters=e.slice(0),this._input.disconnect();var i=null;e.forEach(function(e){null===i?t._input.connect(e.destination):i.connect(e.destination),i=e}),i.connect(this._output)}},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},e}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=n},{}],2:[function(e,t,i){"use strict";function n(e,t){e.data&&s.indexOf(e._getExtension())>-1?e.sound=a.default.add(e.name,{loaded:t,preload:!0,srcBuffer:e.data}):t()}function r(){return n}var a=e("./index"),s=["wav","mp3","ogg","oga","m4a"];i.install=function(){var e=PIXI.loaders.Resource;s.forEach(function(t){e.setExtensionXhrType(t,e.XHR_RESPONSE_TYPE.BUFFER),e.setExtensionLoadType(t,e.LOAD_TYPE.XHR)}),PIXI.loaders.Loader.addPixiMiddleware(r),PIXI.loader.use(n)}},{"./index":17}],3:[function(e,t,i){"use strict";var n=e("./index"),r=e("./SoundInstance"),a=e("./SoundNodes"),s=e("./SoundSprite"),o=function(){function t(e,t){var i={};"string"==typeof t?i.src=t:t instanceof ArrayBuffer?i.srcBuffer=t:i=t,i=Object.assign({autoPlay:!1,singleInstance:!1,src:null,srcBuffer:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1,useXHR:!0},i),this._context=e,this._nodes=new a.default(this._context),this._source=this._nodes.bufferSource,this._instances=[],this._sprites={};var n=i.complete;this._autoPlayOptions=n?{complete:n}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=i.autoPlay,this.singleInstance=i.singleInstance,this.preload=i.preload||this.autoPlay,this.src=i.src,this.srcBuffer=i.srcBuffer,this.useXHR=i.useXHR,this.volume=i.volume,this.loop=i.loop,this.speed=i.speed,i.sprites&&this.addSprites(i.sprites),this.preload&&this._beginPreload(i.loaded)}return t.from=function(e){return new t(n.default.context,e)},t.prototype.destroy=function(){this._nodes.destroy(),this._nodes=null,this._context=null,this._source=null,this.removeSprites(),this._sprites=null,this.srcBuffer=null,this._removeInstances(),this._instances=null},Object.defineProperty(t.prototype,"isPlayable",{get:function(){return this.isLoaded&&!!this._source&&!!this._source.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(e){this._volume=this._nodes.gain.gain.value=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._source.loop},set:function(e){this._source.loop=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._source.buffer},set:function(e){this._source.buffer=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._nodes.filters},set:function(e){this._nodes.filters=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._source.playbackRate.value},set:function(e){this._source.playbackRate.value=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"instances",{get:function(){return this._instances},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprites",{get:function(){return this._sprites},enumerable:!0,configurable:!0}),t.prototype.addSprites=function(e,t){if("object"==typeof e){var i={};for(var n in e)i[n]=this.addSprites(n,e[n]);return i}if("string"==typeof e){var r=new s.default(this,t);return this._sprites[e]=r,r}},t.prototype.removeSprites=function(e){if(e){var t=this._sprites[e];void 0!==t&&(t.destroy(),delete this._sprites[e])}else for(var i in this._sprites)this.removeSprites(i);return this},t.prototype.play=function(e,t){var i,n=this;if("string"==typeof e?i={sprite:s=e,complete:t}:"function"==typeof e?(i={},i.complete=e):i=e,(i=Object.assign({complete:null,loaded:null,sprite:null,start:0,fadeIn:0,fadeOut:0},i||{})).sprite){var a=i.sprite,s=this._sprites[a];i.start=s.start,i.end=s.end,i.speed=s.speed,delete i.sprite}if(i.offset&&(i.start=i.offset),!this.isLoaded)return new Promise(function(e,t){n.autoPlay=!0,n._autoPlayOptions=i,n._beginPreload(function(n,r,a){n?t(n):(i.loaded&&i.loaded(n,r,a),e(a))})});this.singleInstance&&this._removeInstances();var o=r.default.create(this);return this._instances.push(o),this.isPlaying=!0,o.once("end",function(){i.complete&&i.complete(n),n._onComplete(o)}),o.once("stop",function(){n._onComplete(o)}),o.play(i.start,i.end,i.speed,i.loop,i.fadeIn,i.fadeOut),o},t.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var e=this._instances.length-1;e>=0;e--)this._instances[e].stop();return this},t.prototype.pause=function(){for(var e=this._instances.length-1;e>=0;e--)this._instances[e].paused=!0;return this.isPlaying=!1,this},t.prototype.resume=function(){for(var e=this._instances.length-1;e>=0;e--)this._instances[e].paused=!1;return this.isPlaying=this._instances.length>0,this},t.prototype._beginPreload=function(e){this.src?this.useXHR?this._loadUrl(e):this._loadPath(e):this.srcBuffer?this._decode(this.srcBuffer,e):e&&e(new Error("sound.src or sound.srcBuffer must be set"))},t.prototype._onComplete=function(e){if(this._instances){var t=this._instances.indexOf(e);t>-1&&this._instances.splice(t,1),this.isPlaying=this._instances.length>0}e.destroy()},t.prototype._removeInstances=function(){for(var e=this._instances.length-1;e>=0;e--)this._instances[e].destroy();this._instances.length=0},t.prototype._loadUrl=function(e){var t=this,i=new XMLHttpRequest,n=this.src;i.open("GET",n,!0),i.responseType="arraybuffer",i.onload=function(){t.srcBuffer=i.response,t._decode(i.response,e)},i.send()},t.prototype._loadPath=function(t){var i=this,n=e("fs"),r=this.src;n.readFile(r,function(e,n){if(e)t&&t(new Error("File not found "+i.src));else{for(var r=new ArrayBuffer(n.length),a=new Uint8Array(r),s=0;s<n.length;++s)a[s]=n[s];i.srcBuffer=r,i._decode(r,t)}})},t.prototype._decode=function(e,t){var i=this;this._context.decode(e,function(e,n){if(e)t&&t(e);else{i.isLoaded=!0,i.buffer=n;var r=void 0;i.autoPlay&&(r=i.play(i._autoPlayOptions)),t&&t(null,i,r)}})},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=o},{"./SoundInstance":5,"./SoundNodes":7,"./SoundSprite":8,"./index":17,fs:void 0}],4:[function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(){var i=this,n=new t.AudioContext,r=n.createGain(),a=n.createDynamicsCompressor(),s=n.createAnalyser();return s.connect(r),r.connect(a),a.connect(n.destination),i=e.call(this,s,r)||this,i._ctx=n,i._offlineCtx=new t.OfflineAudioContext(1,2,n.sampleRate),i._unlocked=!1,i.gain=r,i.compressor=a,i.analyser=s,i.volume=1,i.muted=!1,i.paused=!1,"ontouchstart"in window&&"running"!==n.state&&(i._unlock(),i._unlock=i._unlock.bind(i),document.addEventListener("mousedown",i._unlock,!0),document.addEventListener("touchstart",i._unlock,!0),document.addEventListener("touchend",i._unlock,!0)),i}return n(t,e),t.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},t.prototype.playEmptySound=function(){var e=this._ctx.createBufferSource();e.buffer=this._ctx.createBuffer(1,1,22050),e.connect(this._ctx.destination),e.start(0,0,0)},Object.defineProperty(t,"AudioContext",{get:function(){var e=window;return e.AudioContext||e.webkitAudioContext||null},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OfflineAudioContext",{get:function(){var e=window;return e.OfflineAudioContext||e.webkitOfflineAudioContext||null},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this);var t=this._ctx;void 0!==t.close&&t.close(),this.analyser.disconnect(),this.gain.disconnect(),this.compressor.disconnect(),this.gain=null,this.analyser=null,this.compressor=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(t.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},set:function(e){this._muted=!!e,this.gain.gain.value=this._muted?0:this._volume},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(e){this._volume=e,this._muted||(this.gain.gain.value=this._volume)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(e){e&&"running"===this._ctx.state?this._ctx.suspend():e||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=e},enumerable:!0,configurable:!0}),t.prototype.toggleMute=function(){return this.muted=!this.muted,this._muted},t.prototype.decode=function(e,t){this._offlineCtx.decodeAudioData(e,function(e){t(null,e)},function(){t(new Error("Unable to decode file"))})},t}(e("./Filterable").default);Object.defineProperty(i,"__esModule",{value:!0}),i.default=r},{"./Filterable":1}],5:[function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=0,a=function(e){function t(t){var i=e.call(this)||this;return i.id=r++,i._parent=null,i._paused=!1,i._elapsed=0,i._init(t),i}return n(t,e),t.create=function(e){if(t._pool.length>0){var i=t._pool.pop();return i._init(e),i}return new t(e)},t.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},t.prototype.play=function(e,t,i,n,r,a){this._paused=!1,this._source=this._parent.nodes.cloneBufferSource(),void 0!==i&&(this._source.playbackRate.value=i),this._speed=this._source.playbackRate.value,void 0!==n&&(this._loop=this._source.loop=!!n),this._loop&&void 0!==t&&(this._loop=this._source.loop=!1),this._end=t;var s=this._source.buffer.duration;(r=this._toSec(r))>s&&(r=s),this._loop||(a=this._toSec(a))>s-r&&(a=s-r),this._duration=s,this._fadeIn=r,this._fadeOut=a,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._source.start(0,e,t?t-e:void 0),this.emit("start"),this._update(!0),this._enabled=!0},t.prototype._toSec=function(e){return e>10&&(e/=1e3),e||0},Object.defineProperty(t.prototype,"_enabled",{set:function(e){var t=this;this._parent.nodes.script.onaudioprocess=e?function(){t._update()}:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(e){e!==this._paused&&(this._paused=e,e?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play(this._elapsed%this._duration,this._end,this._speed,this._loop,this._fadeIn,this._fadeOut)),this.emit("pause",e))},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.removeAllListeners(),this._internalStop(),this._source=null,this._speed=0,this._end=0,this._parent=null,this._elapsed=0,this._duration=0,this._loop=!1,this._fadeIn=0,this._fadeOut=0,this._paused=!1,t._pool.indexOf(this)<0&&t._pool.push(this)},t.prototype.toString=function(){return"[SoundInstance id="+this.id+"]"},t.prototype._now=function(){return this._parent.context.audioContext.currentTime},t.prototype._update=function(e){if(void 0===e&&(e=!1),this._source){var t=this._now(),i=t-this._lastUpdate;if(i>0||e){this._elapsed+=i,this._lastUpdate=t;var n=this._duration,r=this._elapsed*this._speed%n/n;if(this._fadeIn||this._fadeOut){var a=r*n,s=this._parent.nodes.gain.gain,o=this._parent.volume;if(this._fadeIn&&(a<=this._fadeIn&&r<1?s.value=o*(a/this._fadeIn):(s.value=o,this._fadeIn=0)),this._fadeOut&&a>=n-this._fadeOut){var u=(n-a)/this._fadeOut;s.value=o*u}}this._progress=r,this.emit("progress",this._progress,n)}}},t.prototype._init=function(e){this._parent=e},t.prototype._internalStop=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.stop(),this._source=null,this._parent.volume=this._parent.volume)},t.prototype._onComplete=function(){this._source&&(this._enabled=!1,this._source.onended=null),this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},t}(PIXI.utils.EventEmitter);a._pool=[],Object.defineProperty(i,"__esModule",{value:!0}),i.default=a},{}],6:[function(e,t,i){"use strict";var n=e("./Filterable"),r=e("./filters"),a=e("./Sound"),s=e("./SoundContext"),o=e("./SoundInstance"),u=e("./SoundSprite"),l=e("./SoundUtils"),h=function(){function e(){this.supported&&(this._context=new s.default),this._sounds={},this.utils=l.default,this.filters=r,this.Sound=a.default,this.SoundInstance=o.default,this.SoundLibrary=e,this.SoundSprite=u.default,this.Filterable=n.default}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filtersAll",{get:function(){return this._context.filters},set:function(e){this._context.filters=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supported",{get:function(){return null!==s.default.AudioContext},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){if("object"==typeof e){var i={};for(var n in e){r=this._getOptions(e[n],t);i[n]=this.add(n,r)}return i}if("string"==typeof e){if(t instanceof a.default)return this._sounds[e]=t,t;var r=this._getOptions(t),s=new a.default(this.context,r);return this._sounds[e]=s,s}},e.prototype._getOptions=function(e,t){var i;return i="string"==typeof e?{src:e}:e instanceof ArrayBuffer?{srcBuffer:e}:e,Object.assign(i,t||{})},e.prototype.remove=function(e){return this.exists(e,!0),this._sounds[e].destroy(),delete this._sounds[e],this},Object.defineProperty(e.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(e){this._context.volume=e},enumerable:!0,configurable:!0}),e.prototype.pauseAll=function(){return this._context.paused=!0,this},e.prototype.resumeAll=function(){return this._context.paused=!1,this},e.prototype.muteAll=function(){return this._context.muted=!0,this},e.prototype.unmuteAll=function(){return this._context.muted=!1,this},e.prototype.removeAll=function(){for(var e in this._sounds)this._sounds[e].destroy(),delete this._sounds[e];return this},e.prototype.stopAll=function(){for(var e in this._sounds)this._sounds[e].stop();return this},e.prototype.exists=function(e,t){return void 0===t&&(t=!1),!!this._sounds[e]},e.prototype.find=function(e){return this.exists(e,!0),this._sounds[e]},e.prototype.play=function(e,t){return this.find(e).play(t)},e.prototype.stop=function(e){return this.find(e).stop()},e.prototype.pause=function(e){return this.find(e).pause()},e.prototype.resume=function(e){return this.find(e).resume()},e.prototype.volume=function(e,t){var i=this.find(e);return void 0!==t&&(i.volume=t),i.volume},e.prototype.duration=function(e){return this.find(e).duration},e.prototype.destroy=function(){this.removeAll(),this._sounds=null,this._context=null},e}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=h},{"./Filterable":1,"./Sound":3,"./SoundContext":4,"./SoundInstance":5,"./SoundSprite":8,"./SoundUtils":9,"./filters":16}],7:[function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=function(e){function t(i){var n=this,r=i.audioContext,a=r.createBufferSource(),s=r.createScriptProcessor(t.BUFFER_SIZE),o=r.createGain(),u=r.createAnalyser();return a.connect(u),u.connect(o),o.connect(i.destination),s.connect(i.destination),n=e.call(this,u,o)||this,n.context=i,n.bufferSource=a,n.script=s,n.gain=o,n.analyser=u,n}return n(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.bufferSource.disconnect(),this.script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this.script=null,this.gain=null,this.analyser=null,this.context=null},t.prototype.cloneBufferSource=function(){var e=this.bufferSource,t=this.context.audioContext.createBufferSource();return t.buffer=e.buffer,t.playbackRate.value=e.playbackRate.value,t.loop=e.loop,t.connect(this.destination),t},t}(e("./Filterable").default);r.BUFFER_SIZE=256,Object.defineProperty(i,"__esModule",{value:!0}),i.default=r},{"./Filterable":1}],8:[function(e,t,i){"use strict";var n=function(){function e(e,t){this.parent=e,Object.assign(this,t),this.duration=this.end-this.start}return e.prototype.play=function(e){return this.parent.play(Object.assign({complete:e,speed:this.speed||this.parent.speed,end:this.end,start:this.start}))},e.prototype.destroy=function(){this.parent=null},e}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=n},{}],9:[function(e,t,i){"use strict";var n=e("uuid/v4"),r=e("./index"),a=e("./Sound"),s=function(){function e(){}return e.sineTone=function(e,t){void 0===e&&(e=200),void 0===t&&(t=1);for(var i=r.default.context,n=new a.default(i,{singleInstance:!0}),s=i.audioContext.createBuffer(1,48e3*t,48e3),o=s.getChannelData(0),u=0;u<o.length;u++){var l=e*(u/s.sampleRate)*Math.PI;o[u]=2*Math.sin(l)}return n.buffer=s,n.isLoaded=!0,n},e.render=function(e,t){t=Object.assign({width:512,height:128,fill:"black"},t||{});var i=document.createElement("canvas");i.width=t.width,i.height=t.height;var n=i.getContext("2d");n.fillStyle=t.fill;for(var r=e.buffer.getChannelData(0),a=Math.ceil(r.length/t.width),s=t.height/2,o=0;o<t.width;o++){for(var u=1,l=-1,h=0;h<a;h++){var c=r[o*a+h];c<u&&(u=c),c>l&&(l=c)}n.fillRect(o,(1+u)*s,1,Math.max(1,(l-u)*s))}return PIXI.BaseTexture.fromCanvas(i)},e.playOnce=function(e,t){var i=n();return r.default.add(i,{src:e,preload:!0,autoPlay:!0,loaded:function(e){e&&(r.default.remove(i),t&&t(e))},complete:function(){r.default.remove(i),t&&t(null)}}),i},e}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=s},{"./Sound":3,"./index":17,"uuid/v4":20}],10:[function(e,t,i){"use strict";var n=e("./Sound"),r=e("./SoundLibrary").default.prototype,a=n.default.prototype;r.sound=function(e){return this.find(e)},r.panning=function(e,t){return 0},r.addMap=function(e,t){return this.add(e,t)},Object.defineProperty(r,"SoundUtils",{get:function(){return this.utils}}),Object.defineProperty(a,"block",{get:function(){return this.singleInstance},set:function(e){this.singleInstance=e}}),Object.defineProperty(a,"loaded",{get:function(){return null},set:function(e){}}),Object.defineProperty(a,"complete",{get:function(){return null},set:function(e){}})},{"./Sound":3,"./SoundLibrary":6}],11:[function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=e("./Filter"),a=e("../index"),s=function(e){function t(t){void 0===t&&(t=0);var i=this,n=a.default.context.audioContext.createWaveShaper();return i=e.call(this,n)||this,i._distortion=n,i.amount=t,i}return n(t,e),Object.defineProperty(t.prototype,"amount",{get:function(){return this._amount},set:function(e){e*=1e3,this._amount=e;for(var t,i=44100,n=new Float32Array(i),r=Math.PI/180,a=0;a<i;++a)t=2*a/i-1,n[a]=(3+e)*t*20*r/(Math.PI+e*Math.abs(t));this._distortion.curve=n,this._distortion.oversample="4x"},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._distortion=null,e.prototype.destroy.call(this)},t}(r.default);Object.defineProperty(i,"__esModule",{value:!0}),i.default=s},{"../index":17,"./Filter":13}],12:[function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=e("./Filter"),a=e("../index"),s=function(e){function t(i,n,r,s,o,u,l,h,c,d){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===u&&(u=0),void 0===l&&(l=0),void 0===h&&(h=0),void 0===c&&(c=0),void 0===d&&(d=0);var p=this,f=[{f:t.F32,type:"lowshelf",gain:i},{f:t.F64,type:"peaking",gain:n},{f:t.F125,type:"peaking",gain:r},{f:t.F250,type:"peaking",gain:s},{f:t.F500,type:"peaking",gain:o},{f:t.F1K,type:"peaking",gain:u},{f:t.F2K,type:"peaking",gain:l},{f:t.F4K,type:"peaking",gain:h},{f:t.F8K,type:"peaking",gain:c},{f:t.F16K,type:"highshelf",gain:d}].map(function(e){var t=a.default.context.audioContext.createBiquadFilter();return t.type=e.type,t.gain.value=e.gain,t.Q.value=1,t.frequency.value=e.f,t});(p=e.call(this,f[0],f[f.length-1])||this).bands=f,p.bandsMap={};for(var g=0;g<p.bands.length;g++){var m=p.bands[g];g>0&&p.bands[g-1].connect(m),p.bandsMap[m.frequency.value]=m}return p}return n(t,e),t.prototype.setGain=function(e,t){if(void 0===t&&(t=0),!this.bandsMap[e])throw"No band found for frequency "+e;this.bandsMap[e].gain.value=t},t.prototype.reset=function(){this.bands.forEach(function(e){e.gain.value=0})},t.prototype.destroy=function(){this.bands.forEach(function(e){e.disconnect()}),this.bands=null,this.bandsMap=null},t}(r.default);s.F32=32,s.F64=64,s.F125=125,s.F250=250,s.F500=500,s.F1K=1e3,s.F2K=2e3,s.F4K=4e3,s.F8K=8e3,s.F16K=16e3,Object.defineProperty(i,"__esModule",{value:!0}),i.default=s},{"../index":17,"./Filter":13}],13:[function(e,t,i){"use strict";var n=function(){function e(e,t){this.destination=e,this.source=t||e}return e.prototype.connect=function(e){this.source.connect(e)},e.prototype.disconnect=function(){this.source.disconnect()},e.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},e}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=n},{}],14:[function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=e("./Filter"),a=e("../index"),s=function(e){function t(t,i,n){void 0===t&&(t=3),void 0===i&&(i=2),void 0===n&&(n=!1);var r=this,s=a.default.context.audioContext.createConvolver();return r=e.call(this,s)||this,r._convolver=s,r._seconds=r._clamp(t,1,50),r._decay=r._clamp(i,0,100),r._reverse=n,r._rebuild(),r}return n(t,e),t.prototype._clamp=function(e,t,i){return Math.min(i,Math.max(t,e))},Object.defineProperty(t.prototype,"seconds",{get:function(){return this._seconds},set:function(e){this._seconds=this._clamp(e,1,50),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decay",{get:function(){return this._decay},set:function(e){this._decay=this._clamp(e,0,100),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reverse",{get:function(){return this._reverse},set:function(e){this._reverse=e,this._rebuild()},enumerable:!0,configurable:!0}),t.prototype._rebuild=function(){for(var e,t=a.default.context.audioContext,i=t.sampleRate,n=i*this._seconds,r=t.createBuffer(2,n,i),s=r.getChannelData(0),o=r.getChannelData(1),u=0;u<n;u++)e=this._reverse?n-u:u,s[u]=(2*Math.random()-1)*Math.pow(1-e/n,this._decay),o[u]=(2*Math.random()-1)*Math.pow(1-e/n,this._decay);this._convolver.buffer=r},t.prototype.destroy=function(){this._convolver=null,e.prototype.destroy.call(this)},t}(r.default);Object.defineProperty(i,"__esModule",{value:!0}),i.default=s},{"../index":17,"./Filter":13}],15:[function(e,t,i){"use strict";var n=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},r=e("./Filter"),a=e("../index"),s=function(e){function t(t){void 0===t&&(t=0);var i,n,r,s=this,o=a.default.context.audioContext;return o.createStereoPanner?(i=o.createStereoPanner(),r=i):(n=o.createPanner(),n.panningModel="equalpower",r=n),s=e.call(this,r)||this,s._stereo=i,s._panner=n,s.pan=t,s}return n(t,e),Object.defineProperty(t.prototype,"pan",{get:function(){return this._pan},set:function(e){this._pan=e,this._stereo?this._stereo.pan.value=e:this._panner.setPosition(e,0,1-Math.abs(e))},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this._stereo=null,this._panner=null},t}(r.default);Object.defineProperty(i,"__esModule",{value:!0}),i.default=s},{"../index":17,"./Filter":13}],16:[function(e,t,i){"use strict";var n=e("./Filter");i.Filter=n.default;var r=e("./EqualizerFilter");i.EqualizerFilter=r.default;var a=e("./DistortionFilter");i.DistortionFilter=a.default;var s=e("./StereoFilter");i.StereoFilter=s.default;var o=e("./ReverbFilter");i.ReverbFilter=o.default},{"./DistortionFilter":11,"./EqualizerFilter":12,"./Filter":13,"./ReverbFilter":14,"./StereoFilter":15}],17:[function(e,t,i){(function(t){"use strict";var n=e("./LoaderMiddleware"),r=e("./SoundLibrary");e("./deprecations");var a=new r.default;if(void 0===t.PIXI)throw new Error("pixi.js is required");void 0!==PIXI.loaders&&n.install(),Object.defineProperty(PIXI,"sound",{get:function(){return a}}),Object.defineProperty(i,"__esModule",{value:!0}),i.default=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./LoaderMiddleware":2,"./SoundLibrary":6,"./deprecations":10}],18:[function(e,t,i){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(e,t){var i=t||0,r=n;return r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]}},{}],19:[function(e,t,i){(function(e){var i,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var r=new Uint8Array(16);i=function(){return n.getRandomValues(r),r}}if(!i){var a=new Array(16);i=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t,i){var n=e("./lib/rng"),r=e("./lib/bytesToUuid");t.exports=function(e,t,i){var a=t&&i||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var o=0;o<16;++o)t[a+o]=s[o];return t||r(s)}},{"./lib/bytesToUuid":18,"./lib/rng":19}]},{},[17])(17)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pixiParticles=e()}}(function(){var define,module,exports;return function e(t,i,n){function r(s,o){if(!i[s]){if(!t[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){var i=t[s][1][e];return r(i||e)},h,h.exports,e,t,i,n)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){"use strict";var n=e("./ParticleUtils"),r=e("./Particle"),a=PIXI.Texture,s=function(e){r.call(this,e),this.textures=null,this.duration=0,this.framerate=0,this.elapsed=0,this.loop=!1},o=r.prototype,u=s.prototype=Object.create(o);u.init=function(){this.Particle_init(),this.elapsed=0,this.framerate<0&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},u.applyArt=function(e){this.textures=e.textures,this.framerate=e.framerate,this.duration=e.duration,this.loop=e.loop},u.update=function(e){if(this.Particle_update(e)>=0){this.elapsed+=e,this.elapsed>this.duration&&(this.loop?this.elapsed=this.elapsed%this.duration:this.elapsed=this.duration-1e-6);var t=this.elapsed*this.framerate+1e-7|0;this.texture=this.textures[t]||n.EMPTY_TEXTURE}},u.Particle_destroy=r.prototype.destroy,u.destroy=function(){this.Particle_destroy(),this.textures=null},s.parseArt=function(e){var t,i,n,r,s,o,u=[];for(t=0;t<e.length;++t){for(i=e[t],e[t]=u={},u.textures=o=[],r=i.textures,n=0;n<r.length;++n)if("string"==typeof(s=r[n]))o.push(a.fromImage(s));else if(s instanceof a)o.push(s);else{var l=s.count||1;for(s="string"==typeof s.texture?a.fromImage(s.texture):s.texture;l>0;--l)o.push(s)}"matchLife"==i.framerate?(u.framerate=-1,u.duration=0,u.loop=!1):(u.loop=!!i.loop,u.framerate=i.framerate>0?i.framerate:60,u.duration=o.length/u.framerate)}return e},t.exports=s},{"./Particle":3,"./ParticleUtils":4}],2:[function(e,t,i){"use strict";var n=e("./ParticleUtils"),r=e("./Particle"),a=PIXI.particles.ParticleContainer||PIXI.ParticleContainer,s=PIXI.ticker.shared,o=function(e,t,i){this._particleConstructor=r,this.particleImages=null,this.startAlpha=1,this.endAlpha=1,this.startSpeed=0,this.endSpeed=0,this.minimumSpeedMultiplier=1,this.acceleration=null,this.maxSpeed=NaN,this.startScale=1,this.endScale=1,this.minimumScaleMultiplier=1,this.startColor=null,this.endColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.noRotation=!1,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parentIsPC=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this.parent=e,t&&i&&this.init(t,i),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos},u=o.prototype={},l=new PIXI.Point;Object.defineProperty(u,"frequency",{get:function(){return this._frequency},set:function(e){this._frequency="number"==typeof e&&e>0?e:1}}),Object.defineProperty(u,"particleConstructor",{get:function(){return this._particleConstructor},set:function(e){if(e!=this._particleConstructor){this._particleConstructor=e,this.cleanup();for(var t=this._poolFirst;t;t=t.next)t.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}}}),Object.defineProperty(u,"parent",{get:function(){return this._parent},set:function(e){if(this._parentIsPC)for(var t=this._poolFirst;t;t=t.next)t.parent&&t.parent.removeChild(t);this.cleanup(),this._parent=e,this._parentIsPC=a&&e&&e instanceof a}}),u.init=function(e,t){if(e&&t){this.cleanup(),this._origConfig=t,this._origArt=e,e=Array.isArray(e)?e.slice():[e];var i=this._particleConstructor;this.particleImages=i.parseArt?i.parseArt(e):e,t.alpha?(this.startAlpha=t.alpha.start,this.endAlpha=t.alpha.end):this.startAlpha=this.endAlpha=1,t.speed?(this.startSpeed=t.speed.start,this.endSpeed=t.speed.end,this.minimumSpeedMultiplier=t.speed.minimumSpeedMultiplier||1):(this.minimumSpeedMultiplier=1,this.startSpeed=this.endSpeed=0);var r=t.acceleration;r&&(r.x||r.y)?(this.endSpeed=this.startSpeed,this.acceleration=new PIXI.Point(r.x,r.y),this.maxSpeed=t.maxSpeed||NaN):this.acceleration=new PIXI.Point,t.scale?(this.startScale=t.scale.start,this.endScale=t.scale.end,this.minimumScaleMultiplier=t.scale.minimumScaleMultiplier||1):this.startScale=this.endScale=this.minimumScaleMultiplier=1,t.color&&(this.startColor=n.hexToRGB(t.color.start),t.color.start!=t.color.end?this.endColor=n.hexToRGB(t.color.end):this.endColor=null),t.startRotation?(this.minStartRotation=t.startRotation.min,this.maxStartRotation=t.startRotation.max):this.minStartRotation=this.maxStartRotation=0,t.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!t.noRotation:this.noRotation=!1,t.rotationSpeed?(this.minRotationSpeed=t.rotationSpeed.min,this.maxRotationSpeed=t.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.minLifetime=t.lifetime.min,this.maxLifetime=t.lifetime.max,this.particleBlendMode=n.getBlendMode(t.blendMode),t.ease?this.customEase="function"==typeof t.ease?t.ease:n.generateEase(t.ease):this.customEase=null,i.parseData?this.extraData=i.parseData(t.extraData):this.extraData=t.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0;var a;switch(t.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var s=t.spawnRect;this.spawnRect=new PIXI.Rectangle(s.x,s.y,s.w,s.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,a=t.spawnCircle,this.spawnCircle=new PIXI.Circle(a.x,a.y,a.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,a=t.spawnCircle,this.spawnCircle=new PIXI.Circle(a.x,a.y,a.r),this.spawnCircle.minRadius=a.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particlesPerWave=t.particlesPerWave,this.particleSpacing=t.particleSpacing,this.angleStart=t.angleStart?t.angleStart:0;break;case"point":this.spawnType="point",this._spawnFunc=this._spawnPoint;break;default:this.spawnType="point",this._spawnFunc=this._spawnPoint}this.frequency=t.frequency,this.emitterLifetime=t.emitterLifetime||-1,this.maxParticles=t.maxParticles>0?t.maxParticles:1e3,this.addAtBack=!!t.addAtBack,this.rotation=0,this.ownerPos=new PIXI.Point,this.spawnPos=new PIXI.Point(t.pos.x,t.pos.y),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===t.emit||!!t.emit,this.autoUpdate=void 0!==t.autoUpdate&&!!t.autoUpdate}},u.recycle=function(e){e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e==this._activeParticlesLast&&(this._activeParticlesLast=e.prev),e==this._activeParticlesFirst&&(this._activeParticlesFirst=e.next),e.prev=null,e.next=this._poolFirst,this._poolFirst=e,this._parentIsPC?(e.alpha=0,e.visible=!1):e.parent&&e.parent.removeChild(e),--this.particleCount},u.rotate=function(e){if(this.rotation!=e){var t=e-this.rotation;this.rotation=e,n.rotatePoint(t,this.spawnPos),this._posChanged=!0}},u.updateSpawnPos=function(e,t){this._posChanged=!0,this.spawnPos.x=e,this.spawnPos.y=t},u.updateOwnerPos=function(e,t){this._posChanged=!0,this.ownerPos.x=e,this.ownerPos.y=t},u.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(u,"emit",{get:function(){return this._emit},set:function(e){this._emit=!!e,this._emitterLife=this.emitterLifetime}}),Object.defineProperty(u,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){this._autoUpdate&&!e?s.remove(this.update,this):!this._autoUpdate&&e&&s.add(this.update,this),this._autoUpdate=!!e}}),u.playOnceAndDestroy=function(){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0},u.update=function(e){if(this._autoUpdate&&(e=e/PIXI.settings.TARGET_FPMS/1e3),this._parent){var t,i,n;for(i=this._activeParticlesFirst;i;i=n)n=i.next,i.update(e);var r,a;this._prevPosIsValid&&(r=this._prevEmitterPos.x,a=this._prevEmitterPos.y);var s=this.ownerPos.x+this.spawnPos.x,o=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=e;this._spawnTimer<=0;){if(this._emitterLife>0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles)this._spawnTimer+=this._frequency;else{var u;if(u=this.minLifetime==this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<u){var l,h;if(this._prevPosIsValid&&this._posChanged){var c=1+this._spawnTimer/e;l=(s-r)*c+r,h=(o-a)*c+a}else l=s,h=o;t=0;for(var d=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);t<d;++t){var p,f;if(this._poolFirst?(p=this._poolFirst,this._poolFirst=this._poolFirst.next,p.next=null):p=new this.particleConstructor(this),this.particleImages.length>1?p.applyArt(this.particleImages.random()):p.applyArt(this.particleImages[0]),p.startAlpha=this.startAlpha,p.endAlpha=this.endAlpha,1!=this.minimumSpeedMultiplier?(f=Math.random()*(1-this.minimumSpeedMultiplier)+this.minimumSpeedMultiplier,p.startSpeed=this.startSpeed*f,p.endSpeed=this.endSpeed*f):(p.startSpeed=this.startSpeed,p.endSpeed=this.endSpeed),p.acceleration.x=this.acceleration.x,p.acceleration.y=this.acceleration.y,p.maxSpeed=this.maxSpeed,1!=this.minimumScaleMultiplier?(f=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier,p.startScale=this.startScale*f,p.endScale=this.endScale*f):(p.startScale=this.startScale,p.endScale=this.endScale),p.startColor=this.startColor,p.endColor=this.endColor,this.minRotationSpeed==this.maxRotationSpeed?p.rotationSpeed=this.minRotationSpeed:p.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,p.noRotation=this.noRotation,p.maxLife=u,p.blendMode=this.particleBlendMode,p.ease=this.customEase,p.extraData=this.extraData,this._spawnFunc(p,l,h,t),p.init(),p.update(-this._spawnTimer),this._parentIsPC&&p.parent){var g=this._parent.children;if(g[0]==p)g.shift();else if(g[g.length-1]==p)g.pop();else{var m=g.indexOf(p);g.splice(m,1)}this.addAtBack?g.unshift(p):g.push(p)}else this.addAtBack?this._parent.addChildAt(p,0):this._parent.addChild(p);this._activeParticlesLast?(this._activeParticlesLast.next=p,p.prev=this._activeParticlesLast,this._activeParticlesLast=p):this._activeParticlesLast=this._activeParticlesFirst=p,++this.particleCount}}this._spawnTimer+=this._frequency}}this._posChanged&&(this._prevEmitterPos.x=s,this._prevEmitterPos.y=o,this._prevPosIsValid=!0,this._posChanged=!1),!this._destroyWhenComplete||this._emit||this._activeParticlesFirst||this.destroy()}},u._spawnPoint=function(e,t,i){this.minStartRotation==this.maxStartRotation?e.rotation=this.minStartRotation+this.rotation:e.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,e.position.x=t,e.position.y=i},u._spawnRect=function(e,t,i){this.minStartRotation==this.maxStartRotation?e.rotation=this.minStartRotation+this.rotation:e.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,l.x=Math.random()*this.spawnRect.width+this.spawnRect.x,l.y=Math.random()*this.spawnRect.height+this.spawnRect.y,0!==this.rotation&&n.rotatePoint(this.rotation,l),e.position.x=t+l.x,e.position.y=i+l.y},u._spawnCircle=function(e,t,i){this.minStartRotation==this.maxStartRotation?e.rotation=this.minStartRotation+this.rotation:e.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,l.x=Math.random()*this.spawnCircle.radius,l.y=0,n.rotatePoint(360*Math.random(),l),l.x+=this.spawnCircle.x,l.y+=this.spawnCircle.y,0!==this.rotation&&n.rotatePoint(this.rotation,l),e.position.x=t+l.x,e.position.y=i+l.y},u._spawnRing=function(e,t,i){var r=this.spawnCircle;this.minStartRotation==this.maxStartRotation?e.rotation=this.minStartRotation+this.rotation:e.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,r.minRadius==r.radius?l.x=Math.random()*(r.radius-r.minRadius)+r.minRadius:l.x=r.radius,l.y=0;var a=360*Math.random();e.rotation+=a,n.rotatePoint(a,l),l.x+=this.spawnCircle.x,l.y+=this.spawnCircle.y,0!==this.rotation&&n.rotatePoint(this.rotation,l),e.position.x=t+l.x,e.position.y=i+l.y},u._spawnBurst=function(e,t,i,n){0===this.particleSpacing?e.rotation=360*Math.random():e.rotation=this.angleStart+this.particleSpacing*n+this.rotation,e.position.x=t,e.position.y=i},u.cleanup=function(){var e,t;for(e=this._activeParticlesFirst;e;e=t)t=e.next,this.recycle(e),e.parent&&e.parent.removeChild(e);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},u.destroy=function(){this.autoUpdate=!1,this.cleanup();for(var e,t=this._poolFirst;t;t=e)e=t.next,t.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.endColor=this.customEase=null},t.exports=o},{"./Particle":3,"./ParticleUtils":4}],3:[function(e,t,i){var n=e("./ParticleUtils"),r=PIXI.Sprite,a=function(e){r.call(this),this.emitter=e,this.anchor.x=this.anchor.y=.5,this.velocity=new PIXI.Point,this.maxLife=0,this.age=0,this.ease=null,this.extraData=null,this.startAlpha=0,this.endAlpha=0,this.startSpeed=0,this.endSpeed=0,this.acceleration=new PIXI.Point,this.maxSpeed=NaN,this.startScale=0,this.endScale=0,this.startColor=null,this._sR=0,this._sG=0,this._sB=0,this.endColor=null,this._eR=0,this._eG=0,this._eB=0,this._doAlpha=!1,this._doScale=!1,this._doSpeed=!1,this._doAcceleration=!1,this._doColor=!1,this._doNormalMovement=!1,this._oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.Particle_init=this.Particle_init,this.update=this.update,this.Particle_update=this.Particle_update,this.applyArt=this.applyArt,this.kill=this.kill},s=a.prototype=Object.create(r.prototype);s.init=s.Particle_init=function(){this.age=0,this.velocity.x=this.startSpeed,this.velocity.y=0,n.rotatePoint(this.rotation,this.velocity),this.noRotation?this.rotation=0:this.rotation*=n.DEG_TO_RADS,this.rotationSpeed*=n.DEG_TO_RADS,this.alpha=this.startAlpha,this.scale.x=this.scale.y=this.startScale,this.startColor&&(this._sR=this.startColor[0],this._sG=this.startColor[1],this._sB=this.startColor[2],this.endColor&&(this._eR=this.endColor[0],this._eG=this.endColor[1],this._eB=this.endColor[2])),this._doAlpha=this.startAlpha!=this.endAlpha,this._doSpeed=this.startSpeed!=this.endSpeed,this._doScale=this.startScale!=this.endScale,this._doColor=!!this.endColor,this._doAcceleration=0!==this.acceleration.x||0!==this.acceleration.y,this._doNormalMovement=this._doSpeed||0!==this.startSpeed||this._doAcceleration,this._oneOverLife=1/this.maxLife,this.tint=n.combineRGBComponents(this._sR,this._sG,this._sB),this.visible=!0},s.applyArt=function(e){this.texture=e||n.EMPTY_TEXTURE},s.update=s.Particle_update=function(e){if(this.age+=e,this.age>=this.maxLife)return this.kill(),-1;var t=this.age*this._oneOverLife;if(this.ease&&(t=4==this.ease.length?this.ease(t,0,1,1):this.ease(t)),this._doAlpha&&(this.alpha=(this.endAlpha-this.startAlpha)*t+this.startAlpha),this._doScale){var i=(this.endScale-this.startScale)*t+this.startScale;this.scale.x=this.scale.y=i}if(this._doNormalMovement){if(this._doSpeed){var r=(this.endSpeed-this.startSpeed)*t+this.startSpeed;n.normalize(this.velocity),n.scaleBy(this.velocity,r)}else if(this._doAcceleration&&(this.velocity.x+=this.acceleration.x*e,this.velocity.y+=this.acceleration.y*e,this.maxSpeed)){var a=n.length(this.velocity);a>this.maxSpeed&&n.scaleBy(this.velocity,this.maxSpeed/a)}this.position.x+=this.velocity.x*e,this.position.y+=this.velocity.y*e}if(this._doColor){var s=(this._eR-this._sR)*t+this._sR,o=(this._eG-this._sG)*t+this._sG,u=(this._eB-this._sB)*t+this._sB;this.tint=n.combineRGBComponents(s,o,u)}return 0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*e:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x)),t},s.kill=function(){this.emitter.recycle(this)},s.Sprite_Destroy=r.prototype.destroy,s.destroy=function(){this.parent&&this.parent.removeChild(this),this.Sprite_Destroy&&this.Sprite_Destroy(),this.emitter=this.velocity=this.startColor=this.endColor=this.ease=this.next=this.prev=null},a.parseArt=function(e){var t;for(t=e.length;t>=0;--t)"string"==typeof e[t]&&(e[t]=PIXI.Texture.fromImage(e[t]));if(n.verbose)for(t=e.length-1;t>0;--t)if(e[t].baseTexture!=e[t-1].baseTexture){window.console;break}return e},a.parseData=function(e){return e},t.exports=a},{"./ParticleUtils":4}],4:[function(e,t,i){"use strict";var n=PIXI.BLEND_MODES||PIXI.blendModes,r=PIXI.Texture,a={};a.verbose=!1;var s=a.DEG_TO_RADS=Math.PI/180,o=a.EMPTY_TEXTURE=r.EMPTY;o.on=o.destroy=o.once=o.emit=function(){},a.rotatePoint=function(e,t){if(e){e*=s;var i=Math.sin(e),n=Math.cos(e),r=t.x*n-t.y*i,a=t.x*i+t.y*n;t.x=r,t.y=a}},a.combineRGBComponents=function(e,t,i){return e<<16|t<<8|i},a.normalize=function(e){var t=1/a.length(e);e.x*=t,e.y*=t},a.scaleBy=function(e,t){e.x*=t,e.y*=t},a.length=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},a.hexToRGB=function(e,t){t?t.length=0:t=[],"#"==e.charAt(0)?e=e.substr(1):0===e.indexOf("0x")&&(e=e.substr(2));var i;return 8==e.length&&(i=e.substr(0,2),e=e.substr(2)),t.push(parseInt(e.substr(0,2),16)),t.push(parseInt(e.substr(2,2),16)),t.push(parseInt(e.substr(4,2),16)),i&&t.push(parseInt(i,16)),t},a.generateEase=function(e){var t=e.length,i=1/t;return function(n){var r,a,s=t*n|0;return r=(n-s*i)*t,(a=e[s]||e[t-1]).s+r*(2*(1-r)*(a.cp-a.s)+r*(a.e-a.s))}},a.getBlendMode=function(e){if(!e)return n.NORMAL;for(e=e.toUpperCase();e.indexOf(" ")>=0;)e=e.replace(" ","_");return n[e]||n.NORMAL},t.exports=a},{}],5:[function(require,module,exports){"use strict";var ParticleUtils=require("./ParticleUtils"),Particle=require("./Particle"),PathParticle=function(e){Particle.call(this,e),this.path=null,this.initialRotation=0,this.initialPosition=new PIXI.Point,this.movement=0},s=Particle.prototype,p=PathParticle.prototype=Object.create(s),helperPoint=new PIXI.Point;p.init=function(){this.initialRotation=this.rotation,this.Particle_init(),this.path=this.extraData.path,this._doNormalMovement=!this.path,this.movement=0,this.initialPosition.x=this.position.x,this.initialPosition.y=this.position.y};for(var MATH_FUNCS=["pow","sqrt","abs","floor","round","ceil","E","PI","sin","cos","tan","asin","acos","atan","atan2","log"],WHITELISTER="[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]",index=MATH_FUNCS.length-1;index>=0;--index)WHITELISTER+="|"+MATH_FUNCS[index];WHITELISTER=new RegExp(WHITELISTER,"g");var parsePath=function(pathString){for(var rtn,matches=pathString.match(WHITELISTER),i=matches.length-1;i>=0;--i)MATH_FUNCS.indexOf(matches[i])>=0&&(matches[i]="Math."+matches[i]);return pathString=matches.join(""),eval("rtn = function(x){ return "+pathString+"; };"),rtn};p.update=function(e){var t=this.Particle_update(e);if(t>=0&&this.path){var i=(this.endSpeed-this.startSpeed)*t+this.startSpeed;this.movement+=i*e,helperPoint.x=this.movement,helperPoint.y=this.path(this.movement),ParticleUtils.rotatePoint(this.initialRotation,helperPoint),this.position.x=this.initialPosition.x+helperPoint.x,this.position.y=this.initialPosition.y+helperPoint.y}},p.Particle_destroy=Particle.prototype.destroy,p.destroy=function(){this.Particle_destroy(),this.path=this.initialPosition=null},PathParticle.parseArt=function(e){return Particle.parseArt(e)},PathParticle.parseData=function(e){var t={};if(e&&e.path)try{t.path=parsePath(e.path)}catch(e){ParticleUtils.verbose,t.path=null}else ParticleUtils.verbose,t.path=null;return t},module.exports=PathParticle},{"./Particle":3,"./ParticleUtils":4}],6:[function(e,t,i){},{}],7:[function(e,t,i){e("./polyfills.js"),i.ParticleUtils=e("./ParticleUtils.js"),i.Particle=e("./Particle.js"),i.Emitter=e("./Emitter.js"),i.PathParticle=e("./PathParticle.js"),i.AnimatedParticle=e("./AnimatedParticle.js"),e("./deprecation.js")},{"./AnimatedParticle.js":1,"./Emitter.js":2,"./Particle.js":3,"./ParticleUtils.js":4,"./PathParticle.js":5,"./deprecation.js":6,"./polyfills.js":8}],8:[function(e,t,i){Array.prototype.shuffle||Object.defineProperty(Array.prototype,"shuffle",{enumerable:!1,writable:!1,value:function(){for(var e,t,i=this.length;i;e=Math.floor(Math.random()*i),t=this[--i],this[i]=this[e],this[e]=t);return this}}),Array.prototype.random||Object.defineProperty(Array.prototype,"random",{enumerable:!1,writable:!1,value:function(){return this[Math.floor(Math.random()*this.length)]}})},{}],9:[function(e,t,i){"use strict";var n="undefined"!=typeof window?window:GLOBAL;if(n.PIXI.particles||(n.PIXI.particles={}),void 0!==t&&t.exports)"undefined"==typeof PIXI&&e("pixi.js"),t.exports=n.PIXI.particles||r;else if("undefined"==typeof PIXI)throw"pixi-particles requires pixi.js to be loaded first";var r=e("./particles");for(var a in r)n.PIXI.particles[a]=r[a]},{"./particles":7,"pixi.js":void 0}]},{},[9])(9)}),PIXI.DISPLAY_FLAG={AUTO_CHILDREN:0,AUTO_CONTAINER:1,AUTO_OBJECT:2,MANUAL_CONTAINER:3};var WebGLRenderer=PIXI.WebGLRenderer,CanvasRenderer=PIXI.CanvasRenderer;Object.assign(PIXI.Container.prototype,{displayList:null,displayChildren:null,displayParent:null,updateTransform:function(){this.visible&&(this.containerUpdateTransform(),this.displayList&&this.displayList.update(this))},renderCanvas:function(e){this.visible?(this.displayOrder=e.incDisplayOrder(),this.worldAlpha<=0||!this.renderable||(this.displayList?this.displayList.renderCanvas(this,e):this.containerRenderCanvas(e))):this.displayOrder=0},renderWebGL:function(e){this.visible?(this.displayOrder=e.incDisplayOrder(),this.worldAlpha<=0||!this.renderable||(this.displayList?this.displayList.renderWebGL(this,e):this.containerRenderWebGL(e))):this.displayOrder=0},containerRenderWebGL:PIXI.Container.prototype.renderWebGL,containerRenderCanvas:PIXI.Container.prototype.renderCanvas});var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},pixi_display;!function(e){var t=function(e){function t(t,i){e.call(this),this.currentIndex=0,this.zIndex=0,this.enableSort=!1,this.computedChildren=[],this.currentDisplayList=null,this.currentIndex=0,this.zIndex=t||0,this.enableSort=!!i,"function"==typeof i&&this.on("add",i)}return __extends(t,e),t.compareZOrder=function(e,t){return e.zOrder<t.zOrder?1:e.zOrder>t.zOrder?-1:e.updateOrder-t.updateOrder},t.prototype.clear=function(){for(var e=this.computedChildren,t=0;t<e.length;t++){var i=e[t].displayChildren;if(i&&i.length>0){for(var n=0;n<i.length;n++)i[n].displayParent=null;i.length=0}e[t].displayParent=null}e.length=0,this.currentDisplayList=null,this.currentIndex=0},t.prototype.add=function(e){e.displayOrder=this.computedChildren.length,this.emit("add",e),this.computedChildren.push(e)},t.prototype.update=function(){this.emit("update"),this.enableSort&&this.computedChildren.length>1&&this.computedChildren.sort(t.compareZOrder)},t.prototype.renderWebGL=function(e,t){for(var i=this.computedChildren,n=0;n<i.length;n++){var r=i[n];if(r.displayFlag)r.renderWebGL(t);else{r.displayOrder=t.incDisplayOrder(),r._renderWebGL(t);var a=r.displayChildren;if(a&&a.length)for(var s=0;s<a.length;s++){var o=a[s];o.displayOrder=t.incDisplayOrder(),o.displayFlag?o.renderWebGL(t):o._renderWebGL(t)}}}},t.prototype.renderCanvas=function(e,t){for(var i=this.computedChildren,n=0;n<i.length;n++){var r=i[n];if(r.displayFlag)r.renderCanvas(t);else{r.displayOrder=t.incDisplayOrder(),r._renderCanvas(t);var a=r.displayChildren;if(a&&a.length)for(var s=0;s<a.length;s++){var o=a[s];o.displayOrder=t.incDisplayOrder(),o.displayFlag?o.renderCanvas(t):o._renderCanvas(t)}}}},t}(PIXI.utils.EventEmitter);e.DisplayGroup=t}(pixi_display||(pixi_display={}));var pixi_display;!function(e){var t=function(t){function i(){t.call(this),this.container=null,this.totalElements=0,this.displayGroups=[],this.defaultDisplayGroup=new e.DisplayGroup(0,!1)}return __extends(i,t),i.prototype.clear=function(){for(var e=this.displayGroups,t=0;t<e.length;t++)e[t].clear();e.length=0,this.totalElements=0,this.container=null},i.prototype.destroy=function(){this.clear()},i.compareZIndex=function(e,t){return e.zIndex!==t.zIndex?e.zIndex-t.zIndex:e.currentIndex-t.currentIndex},i.prototype._addRecursive=function(e,t){var i=e;if(i.visible&&i.renderable){var n=this.displayGroups,r=t.displayGroup;if(i.updateOrder=this.totalElements++,i.displayGroup?((r=i.displayGroup).currentDisplayList||(r.currentDisplayList=this,r.currentIndex=n.length,n.push(r)),r.add(i),i.displayParent=i):(i.displayParent=t,t.displayChildren||(t.displayChildren=[]),t.displayChildren.push(i)),i.displayFlag!==PIXI.DISPLAY_FLAG.MANUAL_CONTAINER){var a=i.children;if(a&&a.length>0)if(i._mask||i._filters&&i._filters.length||i.displayList)i.displayFlag=PIXI.DISPLAY_FLAG.AUTO_CONTAINER;else{i.displayFlag=PIXI.DISPLAY_FLAG.AUTO_CHILDREN;for(var s=0;s<a.length;s++)this._addRecursive(a[s],i.displayParent)}else i.displayFlag=PIXI.DISPLAY_FLAG.AUTO_OBJECT}}},i.prototype.update=function(e){this.clear();e.displayGroup;this.displayGroups.push(this.defaultDisplayGroup),this.defaultDisplayGroup.add(e),this.container=e;var t=e.children,n=0;for(n=0;n<t.length;n++)this._addRecursive(t[n],e);var r=this.displayGroups;for(r.sort(i.compareZIndex),n=0;n<r.length;n++)r[n].currentIndex=n,r[n].update();this.emit("afterUpdate")},i.prototype.renderWebGL=function(e,t){e.displayFlag=PIXI.DISPLAY_FLAG.AUTO_CHILDREN;for(var i=this.displayGroups,n=0;n<i.length;n++)i[n].renderWebGL(e,t)},i.prototype.renderCanvas=function(e,t){for(var i=this.displayGroups,n=0;n<i.length;n++)i[n].renderCanvas(e,t)},i}(PIXI.utils.EventEmitter);e.DisplayList=t}(pixi_display||(pixi_display={})),Object.assign(PIXI.DisplayObject.prototype,{displayGroup:null,displayFlag:PIXI.DISPLAY_FLAG.AUTO_CHILDREN,displayParent:null,zOrder:0,updateOrder:0,displayOrder:0});var pixi_display;!function(e){var t=PIXI.interaction.InteractionManager;Object.assign(t.prototype,{_queue:[[],[]],_displayProcessInteractive:function(e,t,i,n){if(!t||!t.visible)return 0;var r=0,a=n=t.interactive||n;t.hitArea&&(a=!1);var s=t._mask;i<1/0&&s&&(s.containsPoint(e)||(i=1/0)),i<1/0&&t.filterArea&&(t.filterArea.contains(e.x,e.y)||(i=1/0));var o=t.children;if(t.interactiveChildren&&o)for(var u=o.length-1;u>=0;u--){var l=o[u],h=this._displayProcessInteractive(e,l,i,a);if(h){if(!l.parent)continue;r=h,i=h}}return n&&(i<t.displayOrder&&(t.hitArea?(t.worldTransform.applyInverse(e,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(r=t.displayOrder)):t.containsPoint&&t.containsPoint(e)&&(r=t.displayOrder)),t.interactive&&this._queueAdd(t,r)),r},processInteractive:function(e,t,i,n,r){var a=null,s=null;s=e.data&&e.data.global?(a=e).data.global:e,this._startInteractionProcess(),this._displayProcessInteractive(s,t,n?0:1/0,!1),this._finishInteractionProcess(a,i)},_startInteractionProcess:function(){this._eventDisplayOrder=1,this._queue||(this._queue=[[],[]]),this._queue[0].length=0,this._queue[1].length=0},_queueAdd:function(e,t){var i=this._queue;if(t<this._eventDisplayOrder)i[0].push(e);else{if(t>this._eventDisplayOrder){this._eventDisplayOrder=t;for(var n=i[1],r=0;r<n.length;r++)i[0].push(n[r]);i[1].length=0}i[1].push(e)}},_finishInteractionProcess:function(e,t){for(var i=this._queue,n=i[0],r=0;r<n.length;r++)e?t(e,n[r],!1):t(n[r],!1);for(n=i[1],r=0;r<n.length;r++)e?(e.target||(e.target=n[r]),t(e,n[r],!0)):t(n[r],!0)}})}(pixi_display||(pixi_display={})),Object.assign(WebGLRenderer.prototype,{_lastDisplayOrder:0,incDisplayOrder:function(){return++this._lastDisplayOrder},_oldRender:WebGLRenderer.prototype.render,render:function(e,t,i,n,r){t||(this._lastDisplayOrder=0),this._oldRender(e,t,i,n,r)}}),Object.assign(CanvasRenderer.prototype,{_lastDisplayOrder:0,incDisplayOrder:function(){return++this._lastDisplayOrder},_oldRender:CanvasRenderer.prototype.render,render:function(e,t,i,n,r){t||(this._lastDisplayOrder=0),this._oldRender(e,t,i,n,r)}}),Object.assign(PIXI,{display:pixi_display,DisplayGroup:pixi_display.DisplayGroup,DisplayList:pixi_display.DisplayList}),function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var e=this||t;return e._counter=0,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var i=this||t;if(e=parseFloat(e),i.ctx||l(),void 0!==e&&e>=0&&e<=1){if(i._volume=e,i._muted)return i;i.usingWebAudio&&(i.masterGain.gain.value=e);for(var n=0;n<i._howls.length;n++)if(!i._howls[n]._webAudio)for(var r=i._howls[n]._getSoundIds(),a=0;a<r.length;a++){var s=i._howls[n]._soundById(r[a]);s&&s._node&&(s._node.volume=s._volume*e)}return i}return i._volume},mute:function(e){var i=this||t;i.ctx||l(),i._muted=e,i.usingWebAudio&&(i.masterGain.gain.value=e?0:i._volume);for(var n=0;n<i._howls.length;n++)if(!i._howls[n]._webAudio)for(var r=i._howls[n]._getSoundIds(),a=0;a<r.length;a++){var s=i._howls[n]._soundById(r[a]);s&&s._node&&(s._node.muted=!!e||s._muted)}return i},unload:function(){for(var e=this||t,i=e._howls.length-1;i>=0;i--)e._howls[i].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,l()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx?e.ctx.state||"running":"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(i=new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{var i=new Audio;i.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,i=null;try{i="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!i||"function"!=typeof i.canPlayType)return e;var n=i.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),a=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(a||!n&&!i.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!i.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!i.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(i.canPlayType("audio/x-mp4;")||i.canPlayType("audio/mp4;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!i.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(i.canPlayType("audio/x-flac;")||i.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||t,i=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),n=!!("ontouchend"in window||e._navigator&&e._navigator.maxTouchPoints>0||e._navigator&&e._navigator.msMaxTouchPoints>0);if(!e._mobileEnabled&&e.ctx&&(i||n)){e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var r=function(){var t=e.ctx.createBufferSource();t.buffer=e._scratchBuffer,t.connect(e.ctx.destination),void 0===t.start?t.noteOn(0):t.start(0),t.onended=function(){t.disconnect(0),e._mobileEnabled=!0,e.mobileAutoEnable=!1,document.removeEventListener("touchend",r,!0)}};return document.addEventListener("touchend",r,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&t.usingWebAudio){for(var i=0;i<e._howls.length;i++)if(e._howls[i]._webAudio)for(var n=0;n<e._howls[i]._sounds.length;n++)if(!e._howls[i]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&t.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.state="resuming",e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var t=new e,i=function(e){var t=this;e.src&&0!==e.src.length&&t.init(e)};i.prototype={init:function(e){var i=this;return t.ctx||l(),i._autoplay=e.autoplay||!1,i._format="string"!=typeof e.format?e.format:[e.format],i._html5=e.html5||!1,i._muted=e.mute||!1,i._loop=e.loop||!1,i._pool=e.pool||5,i._preload="boolean"!=typeof e.preload||e.preload,i._rate=e.rate||1,i._sprite=e.sprite||{},i._src="string"!=typeof e.src?e.src:[e.src],i._volume=void 0!==e.volume?e.volume:1,i._duration=0,i._state="unloaded",i._sounds=[],i._endTimers={},i._queue=[],i._onend=e.onend?[{fn:e.onend}]:[],i._onfade=e.onfade?[{fn:e.onfade}]:[],i._onload=e.onload?[{fn:e.onload}]:[],i._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],i._onpause=e.onpause?[{fn:e.onpause}]:[],i._onplay=e.onplay?[{fn:e.onplay}]:[],i._onstop=e.onstop?[{fn:e.onstop}]:[],i._onmute=e.onmute?[{fn:e.onmute}]:[],i._onvolume=e.onvolume?[{fn:e.onvolume}]:[],i._onrate=e.onrate?[{fn:e.onrate}]:[],i._onseek=e.onseek?[{fn:e.onseek}]:[],i._onresume=[],i._webAudio=t.usingWebAudio&&!i._html5,void 0!==t.ctx&&t.ctx&&t.mobileAutoEnable&&t._enableMobileAudio(),t._howls.push(i),i._autoplay&&i._queue.push({event:"play",action:function(){i.play()}}),i._preload&&i.load(),i},load:function(){var e=this,i=null;if(!t.noAudio){"string"==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var s,o;if(e._format&&e._format[r])s=e._format[r];else{if("string"!=typeof(o=e._src[r])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(s=/^data:audio\/([^;,]+);/i.exec(o))||(s=/\.([^.]+)$/.exec(o.split("?",1)[0])),s&&(s=s[1].toLowerCase())}if(s&&t.codecs(s)){i=e._src[r];break}}return i?(e._src=i,e._state="loading","https:"===window.location.protocol&&"http:"===i.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new n(e),e._webAudio&&a(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")}e._emit("loaderror",null,"No audio support.")},play:function(e,i){var n=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e){e="__default";for(var a=0,s=0;s<n._sounds.length;s++)n._sounds[s]._paused&&!n._sounds[s]._ended&&(a++,r=n._sounds[s]._id);1===a?e=null:r=null}}var o=r?n._soundById(r):n._inactiveSound();if(!o)return null;if(r&&!e&&(e=o._sprite||"__default"),"loaded"!==n._state&&!n._sprite[e])return n._queue.push({event:"play",action:function(){n.play(n._soundById(o._id)?o._id:void 0)}}),o._id;if(r&&!o._paused)return i||setTimeout(function(){n._emit("play",o._id)},0),o._id;n._webAudio&&t._autoResume();var u=Math.max(0,o._seek>0?o._seek:n._sprite[e][0]/1e3),l=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-u),h=1e3*l/Math.abs(o._rate);o._paused=!1,o._ended=!1,o._sprite=e,o._seek=u,o._start=n._sprite[e][0]/1e3,o._stop=(n._sprite[e][0]+n._sprite[e][1])/1e3,o._loop=!(!o._loop&&!n._sprite[e][2]);var c=o._node;if(n._webAudio){var d=function(){n._refreshBuffer(o);var e=o._muted||n._muted?0:o._volume;c.gain.setValueAtTime(e,t.ctx.currentTime),o._playStart=t.ctx.currentTime,void 0===c.bufferSource.start?o._loop?c.bufferSource.noteGrainOn(0,u,86400):c.bufferSource.noteGrainOn(0,u,l):o._loop?c.bufferSource.start(0,u,86400):c.bufferSource.start(0,u,l),h!==1/0&&(n._endTimers[o._id]=setTimeout(n._ended.bind(n,o),h)),i||setTimeout(function(){n._emit("play",o._id)},0)},p="running"===t.state;if("loaded"===n._state&&p)d();else{var f=p||"loaded"!==n._state?"load":"resume";n.once(f,d,p?o._id:null),n._clearTimer(o._id)}}else{var g=function(){c.currentTime=u,c.muted=o._muted||n._muted||t._muted||c.muted,c.volume=o._volume*t.volume(),c.playbackRate=o._rate,c.play(),h!==1/0&&(n._endTimers[o._id]=setTimeout(n._ended.bind(n,o),h)),i||n._emit("play",o._id)},m="loaded"===n._state&&(window&&window.ejecta||!c.readyState&&t._navigator.isCocoonJS);if(4===c.readyState||m)g();else{var v=function(){g(),c.removeEventListener(t._canPlayEvent,v,!1)};c.addEventListener(t._canPlayEvent,v,!1),n._clearTimer(o._id)}}return o._id},pause:function(e){var t=this;if("loaded"!==t._state)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var i=t._getSoundIds(e),n=0;n<i.length;n++){t._clearTimer(i[n]);var r=t._soundById(i[n]);if(r&&!r._paused&&(r._seek=t.seek(i[n]),r._rateSeek=0,r._paused=!0,t._stopFade(i[n]),r._node))if(t._webAudio){if(!r._node.bufferSource)return t;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var i=this;if("loaded"!==i._state)return i._queue.push({event:"stop",action:function(){i.stop(e)}}),i;for(var n=i._getSoundIds(e),r=0;r<n.length;r++){i._clearTimer(n[r]);var a=i._soundById(n[r]);if(a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,i._stopFade(n[r]),a._node))if(i._webAudio){if(!a._node.bufferSource)return t||i._emit("stop",a._id),i;void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),i._cleanBuffer(a._node)}else isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause());a&&!t&&i._emit("stop",a._id)}return i},mute:function(e,i){var n=this;if("loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(e,i)}}),n;if(void 0===i){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(i),a=0;a<r.length;a++){var s=n._soundById(r[a]);s&&(s._muted=e,n._webAudio&&s._node?s._node.gain.setValueAtTime(e?0:s._volume,t.ctx.currentTime):s._node&&(s._node.muted=!!t._muted||e),n._emit("mute",s._id))}return n},volume:function(){var e,i,n=this,r=arguments;if(0===r.length)return n._volume;1===r.length||2===r.length&&void 0===r[1]?n._getSoundIds().indexOf(r[0])>=0?i=parseInt(r[0],10):e=parseFloat(r[0]):r.length>=2&&(e=parseFloat(r[0]),i=parseInt(r[1],10));var a;if(!(void 0!==e&&e>=0&&e<=1))return(a=i?n._soundById(i):n._sounds[0])?a._volume:0;if("loaded"!==n._state)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,r)}}),n;void 0===i&&(n._volume=e),i=n._getSoundIds(i);for(var s=0;s<i.length;s++)(a=n._soundById(i[s]))&&(a._volume=e,r[2]||n._stopFade(i[s]),n._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(e,t.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=e*t.volume()),n._emit("volume",a._id));return n},fade:function(e,i,n,r){var a=this,s=Math.abs(e-i),o=e>i?"out":"in",u=s/.01,l=u>0?n/u:n;if(l<4&&(u=Math.ceil(u/(4/l)),l=4),"loaded"!==a._state)return a._queue.push({event:"fade",action:function(){a.fade(e,i,n,r)}}),a;a.volume(e,r);for(var h=a._getSoundIds(r),c=0;c<h.length;c++){var d=a._soundById(h[c]);if(d){if(r||a._stopFade(h[c]),a._webAudio&&!d._muted){var p=t.ctx.currentTime,f=p+n/1e3;d._volume=e,d._node.gain.setValueAtTime(e,p),d._node.gain.linearRampToValueAtTime(i,f)}var g=e;d._interval=setInterval(function(t,n){u>0&&(g+="in"===o?.01:-.01),g=Math.max(0,g),g=Math.min(1,g),g=Math.round(100*g)/100,a._webAudio?(void 0===r&&(a._volume=g),n._volume=g):a.volume(g,t,!0),(i<e&&g<=i||i>e&&g>=i)&&(clearInterval(n._interval),n._interval=null,a.volume(i,t),a._emit("fade",t))}.bind(a,h[c],d),l)}}return a},_stopFade:function(e){var i=this,n=i._soundById(e);return n&&n._interval&&(i._webAudio&&n._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(n._interval),n._interval=null,i._emit("fade",e)),i},loop:function(){var e,t,i,n=this,r=arguments;if(0===r.length)return n._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(i=n._soundById(parseInt(r[0],10)))&&i._loop;e=r[0],n._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var a=n._getSoundIds(t),s=0;s<a.length;s++)(i=n._soundById(a[s]))&&(i._loop=e,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=e,e&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop)));return n},rate:function(){var e,i,n=this,r=arguments;0===r.length?i=n._sounds[0]._id:1===r.length?n._getSoundIds().indexOf(r[0])>=0?i=parseInt(r[0],10):e=parseFloat(r[0]):2===r.length&&(e=parseFloat(r[0]),i=parseInt(r[1],10));var a;if("number"!=typeof e)return(a=n._soundById(i))?a._rate:n._rate;if("loaded"!==n._state)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,r)}}),n;void 0===i&&(n._rate=e),i=n._getSoundIds(i);for(var s=0;s<i.length;s++)if(a=n._soundById(i[s])){a._rateSeek=n.seek(i[s]),a._playStart=n._webAudio?t.ctx.currentTime:a._playStart,a._rate=e,n._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.value=e:a._node&&(a._node.playbackRate=e);var o=n.seek(i[s]),u=1e3*((n._sprite[a._sprite][0]+n._sprite[a._sprite][1])/1e3-o)/Math.abs(a._rate);!n._endTimers[i[s]]&&a._paused||(n._clearTimer(i[s]),n._endTimers[i[s]]=setTimeout(n._ended.bind(n,a),u)),n._emit("rate",a._id)}return n},seek:function(){var e,i,n=this,r=arguments;if(0===r.length?i=n._sounds[0]._id:1===r.length?n._getSoundIds().indexOf(r[0])>=0?i=parseInt(r[0],10):(i=n._sounds[0]._id,e=parseFloat(r[0])):2===r.length&&(e=parseFloat(r[0]),i=parseInt(r[1],10)),void 0===i)return n;if("loaded"!==n._state)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var a=n._soundById(i);if(a){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var s=n.playing(i)?t.ctx.currentTime-a._playStart:0,o=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(o+s*Math.abs(a._rate))}return a._node.currentTime}var u=n.playing(i);u&&n.pause(i,!0),a._seek=e,a._ended=!1,n._clearTimer(i),u&&n.play(i,!0),!n._webAudio&&a._node&&(a._node.currentTime=e),n._emit("seek",i)}return n},playing:function(e){var t=this;if("number"==typeof e){var i=t._soundById(e);return!!i&&!i._paused}for(var n=0;n<t._sounds.length;n++)if(!t._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this,i=t._duration,n=t._soundById(e);return n&&(i=t._sprite[n._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var e=this,i=e._sounds,n=0;n<i.length;n++){i[n]._paused||e.stop(i[n]._id),e._webAudio||(i[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",i[n]._node.removeEventListener("error",i[n]._errorFn,!1),i[n]._node.removeEventListener(t._canPlayEvent,i[n]._loadFn,!1)),delete i[n]._node,e._clearTimer(i[n]._id);var a=t._howls.indexOf(e);a>=0&&t._howls.splice(a,1)}var s=!0;for(n=0;n<t._howls.length;n++)if(t._howls[n]._src===e._src){s=!1;break}return r&&s&&delete r[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,i,n){var r=this,a=r["_on"+e];return"function"==typeof t&&a.push(n?{id:i,fn:t,once:n}:{id:i,fn:t}),r},off:function(e,t,i){var n=this,r=n["_on"+e],a=0;if(t){for(a=0;a<r.length;a++)if(t===r[a].fn&&i===r[a].id){r.splice(a,1);break}}else if(e)n["_on"+e]=[];else{var s=Object.keys(n);for(a=0;a<s.length;a++)0===s[a].indexOf("_on")&&Array.isArray(n[s[a]])&&(n[s[a]]=[])}return n},once:function(e,t,i){var n=this;return n.on(e,t,i,1),n},_emit:function(e,t,i){for(var n=this,r=n["_on"+e],a=r.length-1;a>=0;a--)r[a].id&&r[a].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,i)}.bind(n,r[a].fn),0),r[a].once&&n.off(e,r[a].fn,r[a].id));return n},_loadQueue:function(){var e=this;if(e._queue.length>0){var t=e._queue[0];e.once(t.event,function(){e._queue.shift(),e._loadQueue()}),t.action()}return e},_ended:function(e){var i=this,n=e._sprite,r=!(!e._loop&&!i._sprite[n][2]);if(i._emit("end",e._id),!i._webAudio&&r&&i.stop(e._id,!0).play(e._id),i._webAudio&&r){i._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var a=1e3*(e._stop-e._start)/Math.abs(e._rate);i._endTimers[e._id]=setTimeout(i._ended.bind(i,e),a)}return i._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,i._clearTimer(e._id),i._cleanBuffer(e._node),t._autoSuspend()),i._webAudio||r||i.stop(e._id),i},_clearTimer:function(e){var t=this;return t._endTimers[e]&&(clearTimeout(t._endTimers[e]),delete t._endTimers[e]),t},_soundById:function(e){for(var t=this,i=0;i<t._sounds.length;i++)if(e===t._sounds[i]._id)return t._sounds[i];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new n(e)},_drain:function(){var e=this,t=e._pool,i=0,n=0;if(!(e._sounds.length<t)){for(n=0;n<e._sounds.length;n++)e._sounds[n]._ended&&i++;for(n=e._sounds.length-1;n>=0;n--){if(i<=t)return;e._sounds[n]._ended&&(e._webAudio&&e._sounds[n]._node&&e._sounds[n]._node.disconnect(0),e._sounds.splice(n,1),i--)}}},_getSoundIds:function(e){var t=this;if(void 0===e){for(var i=[],n=0;n<t._sounds.length;n++)i.push(t._sounds[n]._id);return i}return[e]},_refreshBuffer:function(e){var i=this;return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=r[i._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=e._rate,i},_cleanBuffer:function(e){var t=this;if(t._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=t._scratchBuffer}catch(e){}}return e.bufferSource=null,t}};var n=function(e){this._parent=e,this.init()};n.prototype={init:function(){var e=this,i=e._parent;return e._muted=i._muted,e._loop=i._loop,e._volume=i._volume,e._muted=i._muted,e._rate=i._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,i._sounds.push(e),e.create(),e},create:function(){var e=this,i=e._parent,n=t._muted||e._muted||e._parent._muted?0:e._volume;return i._webAudio?(e._node=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(n,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._node.src=i._src,e._node.preload="auto",e._node.volume=n*t.volume(),e._node.load()),e},reset:function(){var e=this,i=e._parent;return e._muted=i._muted,e._loop=i._loop,e._volume=i._volume,e._muted=i._muted,e._rate=i._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorListener,!1)},_loadListener:function(){var e=this,i=e._parent;i._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(i._sprite).length&&(i._sprite={__default:[0,1e3*i._duration]}),"loaded"!==i._state&&(i._state="loaded",i._emit("load"),i._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)}};var r={},a=function(e){var t=e._src;if(r[t])return e._duration=r[t].duration,void u(e);if(/^data:[^;]+;base64,/.test(t)){for(var i=atob(t.split(",")[1]),n=new Uint8Array(i.length),a=0;a<i.length;++a)n[a]=i.charCodeAt(a);o(n.buffer,e)}else{var l=new XMLHttpRequest;l.open("GET",t,!0),l.responseType="arraybuffer",l.onload=function(){var t=(l.status+"")[0];"0"===t||"2"===t||"3"===t?o(l.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+l.status+".")},l.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete r[t],e.load())},s(l)}},s=function(e){try{e.send()}catch(t){e.onerror()}},o=function(e,i){t.ctx.decodeAudioData(e,function(e){e&&i._sounds.length>0&&(r[i._src]=e,u(i,e))},function(){i._emit("loaderror",null,"Decoding audio data failed.")})},u=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},l=function(){try{"undefined"!=typeof AudioContext?t.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch(e){t.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),i=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=i?parseInt(i[1],10):null;if(e&&n&&n<9){var r=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());(t._navigator&&t._navigator.standalone&&!r||t._navigator&&!t._navigator.standalone&&!r)&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.value=1,t.masterGain.connect(t.ctx.destination)),t._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:t,Howl:i}}),"undefined"!=typeof exports&&(exports.Howler=t,exports.Howl=i),"undefined"!=typeof window?(window.HowlerGlobal=e,window.Howler=t,window.Howl=i,window.Sound=n):"undefined"!=typeof global&&(global.HowlerGlobal=e,global.Howler=t,global.Howl=i,global.Sound=n)}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var i=t._howls.length-1;i>=0;i--)t._howls[i].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,i){var n=this;return n.ctx&&n.ctx.listener?(t="number"!=typeof t?n._pos[1]:t,i="number"!=typeof i?n._pos[2]:i,"number"!=typeof e?n._pos:(n._pos=[e,t,i],n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(e,t,i,n,r,a){var s=this;if(!s.ctx||!s.ctx.listener)return s;var o=s._orientation;return t="number"!=typeof t?o[1]:t,i="number"!=typeof i?o[2]:i,n="number"!=typeof n?o[3]:n,r="number"!=typeof r?o[4]:r,a="number"!=typeof a?o[5]:a,"number"!=typeof e?o:(s._orientation=[e,t,i,n,r,a],s.ctx.listener.setOrientation(e,t,i,n,r,a),s)},Howl.prototype.init=function(e){return function(t){var i=this;return i._orientation=t.orientation||[1,0,0],i._stereo=t.stereo||null,i._pos=t.pos||null,i._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},i._onstereo=t.onstereo?[{fn:t.onstereo}]:[],i._onpos=t.onpos?[{fn:t.onpos}]:[],i._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(t,i)}}),n;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0]}for(var a=n._getSoundIds(i),s=0;s<a.length;s++){var o=n._soundById(a[s]);if(o){if("number"!=typeof t)return o._stereo;o._stereo=t,o._pos=[t,0,0],o._node&&(o._pannerAttr.panningModel="equalpower",o._panner&&o._panner.pan||e(o,r),"spatial"===r?o._panner.setPosition(t,0,0):o._panner.pan.value=t),n._emit("stereo",o._id)}}return n},Howl.prototype.pos=function(t,i,n,r){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"pos",action:function(){a.pos(t,i,n,r)}}),a;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,void 0===r){if("number"!=typeof t)return a._pos;a._pos=[t,i,n]}for(var s=a._getSoundIds(r),o=0;o<s.length;o++){var u=a._soundById(s[o]);if(u){if("number"!=typeof t)return u._pos;u._pos=[t,i,n],u._node&&(u._panner&&!u._panner.pan||e(u,"spatial"),u._panner.setPosition(t,i,n)),a._emit("pos",u._id)}}return a},Howl.prototype.orientation=function(t,i,n,r){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"orientation",action:function(){a.orientation(t,i,n,r)}}),a;if(i="number"!=typeof i?a._orientation[1]:i,n="number"!=typeof n?a._orientation[2]:n,void 0===r){if("number"!=typeof t)return a._orientation;a._orientation=[t,i,n]}for(var s=a._getSoundIds(r),o=0;o<s.length;o++){var u=a._soundById(s[o]);if(u){if("number"!=typeof t)return u._orientation;u._orientation=[t,i,n],u._node&&(u._panner||(u._pos||(u._pos=a._pos||[0,0,-.5]),e(u,"spatial")),u._panner.setOrientation(t,i,n)),a._emit("orientation",u._id)}}return a},Howl.prototype.pannerAttr=function(){var t,i,n,r=this,a=arguments;if(!r._webAudio)return r;if(0===a.length)return r._pannerAttr;if(1===a.length){if("object"!=typeof a[0])return(n=r._soundById(parseInt(a[0],10)))?n._pannerAttr:r._pannerAttr;t=a[0],void 0===i&&(r._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:r._distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:r._maxDistance,panningModel:void 0!==t.panningModel?t.panningModel:r._panningModel,refDistance:void 0!==t.refDistance?t.refDistance:r._refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:r._rolloffFactor})}else 2===a.length&&(t=a[0],i=parseInt(a[1],10));for(var s=r._getSoundIds(i),o=0;o<s.length;o++)if(n=r._soundById(s[o])){var u=n._pannerAttr;u={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:u.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:u.maxDistance,panningModel:void 0!==t.panningModel?t.panningModel:u.panningModel,refDistance:void 0!==t.refDistance?t.refDistance:u.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:u.rolloffFactor};var l=n._panner;l?(l.coneInnerAngle=u.coneInnerAngle,l.coneOuterAngle=u.coneOuterAngle,l.coneOuterGain=u.coneOuterGain,l.distanceModel=u.distanceModel,l.maxDistance=u.maxDistance,l.panningModel=u.panningModel,l.refDistance=u.refDistance,l.rolloffFactor=u.rolloffFactor):(n._pos||(n._pos=r._pos||[0,0,-.5]),e(n,"spatial"))}return r},Sound.prototype.init=function(e){return function(){var t=this,i=t._parent;t._orientation=i._orientation,t._stereo=i._stereo,t._pos=i._pos,t._pannerAttr=i._pannerAttr,e.call(this),t._stereo?i.stereo(t._stereo):t._pos&&i.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,i=t._parent;return t._orientation=i._orientation,t._pos=i._pos,t._pannerAttr=i._pannerAttr,e.call(this)}}(Sound.prototype.reset);var e=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.value=e._stereo),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id)}}(),function(e){var t=t||function(e,t){var i={},n=i.lib={},r=function(){},a=n.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=n.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var r=0;r<e;r++)t[n+r>>>2]|=(i[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<i.length)for(r=0;r<e;r+=4)t[n+r>>>2]=i[r>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;n<t;n+=4)i.push(4294967296*e.random()|0);return new s.init(i,t)}}),o=i.enc={},u=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var r=t[n>>>2]>>>24-n%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new s.init(i,t/2)}},l=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new s.init(i,t)}},h=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},c=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,r=i.sigBytes,a=this.blockSize,o=r/(4*a);if(t=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,r=e.min(4*t,r),t){for(var u=0;u<t;u+=a)this._doProcessBlock(n,u);u=n.splice(0,t),i.sigBytes-=r}return new s.init(u,r)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=c.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new d.HMAC.init(e,i).finalize(t)}}});var d=i.algo={};return i}(Math);!function(e){for(var i=t,n=(a=i.lib).WordArray,r=a.Hasher,a=i.algo,s=[],o=[],u=function(e){return 4294967296*(e-(0|e))|0},l=2,h=0;64>h;){var c;e:{c=l;for(var d=e.sqrt(c),p=2;p<=d;p++)if(!(c%p)){c=!1;break e}c=!0}c&&(8>h&&(s[h]=u(e.pow(l,.5))),o[h]=u(e.pow(l,1/3)),h++),l++}var f=[],a=a.SHA256=r.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],a=i[2],s=i[3],u=i[4],l=i[5],h=i[6],c=i[7],d=0;64>d;d++){if(16>d)f[d]=0|e[t+d];else{var p=f[d-15],g=f[d-2];f[d]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+f[d-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+f[d-16]}p=c+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&l^~u&h)+o[d]+f[d],g=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&r^n&a^r&a),c=h,h=l,l=u,u=s+p|0,s=a,a=r,r=n,n=p+g|0}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+a|0,i[3]=i[3]+s|0,i[4]=i[4]+u|0,i[5]=i[5]+l|0,i[6]=i[6]+h|0,i[7]=i[7]+c|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return i[r>>>5]|=128<<24-r%32,i[14+(r+64>>>9<<4)]=e.floor(n/4294967296),i[15+(r+64>>>9<<4)]=n,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});i.SHA256=r._createHelper(a),i.HmacSHA256=r._createHmacHelper(a)}(Math),function(){var e=t,i=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),s=this._iKey=t.clone(),o=a.words,u=s.words,l=0;l<n;l++)o[l]^=1549556828,u[l]^=909522486;a.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=t,i=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp(),e=[];for(var r=0;r<i;r+=3)for(var a=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,s=0;4>s&&r+.75*s<i;s++)e.push(n.charAt(a>>>6*(3-s)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,n=this._map;(r=n.charAt(64))&&-1!=(r=e.indexOf(r))&&(t=r);for(var r=[],a=0,s=0;s<t;s++)if(s%4){var o=n.indexOf(e.charAt(s-1))<<s%4*2,u=n.indexOf(e.charAt(s))>>>6-s%4*2;r[a>>>2]|=(o|u)<<24-a%4*8,a++}return i.create(r,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}();!function(e){!function(e){e[e.Undefined=0]="Undefined",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical"}(e.EGAErrorSeverity||(e.EGAErrorSeverity={})),function(e){e[e.Undefined=0]="Undefined",e[e.Male=1]="Male",e[e.Female=2]="Female"}(e.EGAGender||(e.EGAGender={})),function(e){e[e.Undefined=0]="Undefined",e[e.Start=1]="Start",e[e.Complete=2]="Complete",e[e.Fail=3]="Fail"}(e.EGAProgressionStatus||(e.EGAProgressionStatus={})),function(e){e[e.Undefined=0]="Undefined",e[e.Source=1]="Source",e[e.Sink=2]="Sink"}(e.EGAResourceFlowType||(e.EGAResourceFlowType={})),function(e){!function(e){e[e.Undefined=0]="Undefined",e[e.Rejected=1]="Rejected"}(e.EGASdkErrorType||(e.EGASdkErrorType={})),function(e){e[e.NoResponse=0]="NoResponse",e[e.BadResponse=1]="BadResponse",e[e.RequestTimeout=2]="RequestTimeout",e[e.JsonEncodeFailed=3]="JsonEncodeFailed",e[e.JsonDecodeFailed=4]="JsonDecodeFailed",e[e.InternalServerError=5]="InternalServerError",e[e.BadRequest=6]="BadRequest",e[e.Unauthorized=7]="Unauthorized",e[e.UnknownResponseCode=8]="UnknownResponseCode",e[e.Ok=9]="Ok"}(e.EGAHTTPApiResponse||(e.EGAHTTPApiResponse={}))}(e.http||(e.http={}))}(i||(i={}));i.EGAErrorSeverity,i.EGAGender,i.EGAProgressionStatus,i.EGAResourceFlowType;!function(e){!function(e){var t;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Debug=3]="Debug"}(t||(t={}));var i=function(){function e(){e.debugEnabled=!1}return e.setInfoLog=function(t){e.instance.infoLogEnabled=t},e.setVerboseLog=function(t){e.instance.infoLogVerboseEnabled=t},e.i=function(i){if(e.instance.infoLogEnabled){var n="Info/"+e.Tag+": "+i;e.instance.sendNotificationMessage(n,t.Info)}},e.w=function(i){var n="Warning/"+e.Tag+": "+i;e.instance.sendNotificationMessage(n,t.Warning)},e.e=function(i){var n="Error/"+e.Tag+": "+i;e.instance.sendNotificationMessage(n,t.Error)},e.ii=function(i){if(e.instance.infoLogVerboseEnabled){var n="Verbose/"+e.Tag+": "+i;e.instance.sendNotificationMessage(n,t.Info)}},e.d=function(i){if(e.debugEnabled){var n="Debug/"+e.Tag+": "+i;e.instance.sendNotificationMessage(n,t.Debug)}},e.prototype.sendNotificationMessage=function(e,i){switch(i){case t.Error:case t.Warning:break;case t.Debug:console.debug;break;case t.Info:}},e}();i.instance=new i,i.Tag="GameAnalytics",e.GALogger=i}(e.logging||(e.logging={}))}(i||(i={}));!function(e){!function(i){var n=e.logging.GALogger,r=function(){function e(){}return e.getHmac=function(e,i){var n=t.HmacSHA256(i,e);return t.enc.Base64.stringify(n)},e.stringMatch=function(e,t){return!(!e||!t)&&t.test(e)},e.joinStringArray=function(e,t){for(var i="",n=0,r=e.length;n<r;n++)n>0&&(i+=t),i+=e[n];return i},e.stringArrayContainsString=function(e,t){if(0===e.length)return!1;for(var i in e)if(e[i]===t)return!0;return!1},e.encode64=function(t){t=encodeURI(t);var i,n,r,a,s,o="",u=0,l=0,h=0;do{r=(i=t.charCodeAt(h++))>>2,a=(3&i)<<4|(n=t.charCodeAt(h++))>>4,s=(15&n)<<2|(u=t.charCodeAt(h++))>>6,l=63&u,isNaN(n)?s=l=64:isNaN(u)&&(l=64),o=o+e.keyStr.charAt(r)+e.keyStr.charAt(a)+e.keyStr.charAt(s)+e.keyStr.charAt(l),i=n=u=0,r=a=s=l=0}while(h<t.length);return o},e.decode64=function(t){var i,r,a,s,o="",u=0,l=0,h=0;/[^A-Za-z0-9\+\/\=]/g.exec(t)&&n.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{i=e.keyStr.indexOf(t.charAt(h++))<<2|(a=e.keyStr.indexOf(t.charAt(h++)))>>4,r=(15&a)<<4|(s=e.keyStr.indexOf(t.charAt(h++)))>>2,u=(3&s)<<6|(l=e.keyStr.indexOf(t.charAt(h++))),o+=String.fromCharCode(i),64!=s&&(o+=String.fromCharCode(r)),64!=l&&(o+=String.fromCharCode(u)),i=r=u=0,a=s=l=0}while(h<t.length);return decodeURI(o)},e.timeIntervalSince1970=function(){var e=new Date;return Math.round(e.getTime()/1e3)},e.createGuid=function(){return(e.s4()+e.s4()+"-"+e.s4()+"-4"+e.s4().substr(0,3)+"-"+e.s4()+"-"+e.s4()+e.s4()+e.s4()).toLowerCase()},e.s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},e}();r.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i.GAUtilities=r}(e.utilities||(e.utilities={}))}(i||(i={}));!function(e){!function(t){var i=e.logging.GALogger,n=e.http.EGASdkErrorType,r=e.utilities.GAUtilities,a=function(){function t(){}return t.validateBusinessEvent=function(e,n,r,a,s){return t.validateCurrency(e)?t.validateShortString(r,!0)?t.validateEventPartLength(a,!1)?t.validateEventPartCharacters(a)?t.validateEventPartLength(s,!1)?!!t.validateEventPartCharacters(s)||(i.i("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+s),!1):(i.i("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: "+s),!1):(i.i("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+a),!1):(i.i("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: "+a),!1):(i.i("Validation fail - business event - cartType. Cannot be above 32 length. String: "+r),!1):(i.i("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: "+e),!1)},t.validateResourceEvent=function(n,a,s,o,u,l,h){return n==e.EGAResourceFlowType.Undefined?(i.i("Validation fail - resource event - flowType: Invalid flow type."),!1):a?r.stringArrayContainsString(l,a)?s>0?o?t.validateEventPartLength(o,!1)?t.validateEventPartCharacters(o)?r.stringArrayContainsString(h,o)?t.validateEventPartLength(u,!1)?!!t.validateEventPartCharacters(u)||(i.i("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+u),!1):(i.i("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: "+u),!1):(i.i("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: "+o),!1):(i.i("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+o),!1):(i.i("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: "+o),!1):(i.i("Validation fail - resource event - itemType: Cannot be (null)"),!1):(i.i("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: "+s),!1):(i.i("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: "+a),!1):(i.i("Validation fail - resource event - currency: Cannot be (null)"),!1)},t.validateProgressionEvent=function(n,r,a,s){if(n==e.EGAProgressionStatus.Undefined)return i.i("Validation fail - progression event: Invalid progression status."),!1;if(s&&!a&&r)return i.i("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."),!1;if(a&&!r)return i.i("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"),!1;if(!r)return i.i("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"),!1;if(!t.validateEventPartLength(r,!1))return i.i("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: "+r),!1;if(!t.validateEventPartCharacters(r))return i.i("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+r),!1;if(a){if(!t.validateEventPartLength(a,!0))return i.i("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: "+a),!1;if(!t.validateEventPartCharacters(a))return i.i("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+a),!1}if(s){if(!t.validateEventPartLength(s,!0))return i.i("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: "+s),!1;if(!t.validateEventPartCharacters(s))return i.i("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+s),!1}return!0},t.validateDesignEvent=function(e,n){return t.validateEventIdLength(e)?!!t.validateEventIdCharacters(e)||(i.i("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: "+e),!1):(i.i("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 32 characters or less. String: "+e),!1)},t.validateErrorEvent=function(n,r){return n==e.EGAErrorSeverity.Undefined?(i.i("Validation fail - error event - severity: Severity was unsupported value."),!1):!!t.validateLongString(r,!0)||(i.i("Validation fail - error event - message: Message cannot be above 8192 characters."),!1)},t.validateSdkErrorEvent=function(e,r,a){return!(!t.validateKeys(e,r)||a===n.Undefined&&(i.i("Validation fail - sdk error event - type: Type was unsupported value."),1))},t.validateKeys=function(e,t){return!(!r.stringMatch(e,/^[A-z0-9]{32}$/)||!r.stringMatch(t,/^[A-z0-9]{40}$/))},t.validateCurrency=function(e){return!!e&&!!r.stringMatch(e,/^[A-Z]{3}$/)},t.validateEventPartLength=function(e,t){return!(!t||e)||!!e&&!(e.length>64)},t.validateEventPartCharacters=function(e){return!!r.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/)},t.validateEventIdLength=function(e){return!!e&&!!r.stringMatch(e,/^[^:]{1,64}(?::[^:]{1,64}){0,4}$/)},t.validateEventIdCharacters=function(e){return!!e&&!!r.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/)},t.validateAndCleanInitRequestResponse=function(e){if(null==e)return i.w("validateInitRequestResponse failed - no response dictionary."),null;var t={};try{t.enabled=e.enabled}catch(e){return i.w("validateInitRequestResponse failed - invalid type in 'enabled' field."),null}try{var n=e.server_ts;if(!(n>0))return i.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."),null;t.server_ts=n}catch(t){return i.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type="+typeof e.server_ts+", value="+e.server_ts+", "+t),null}return t},t.validateBuild=function(e){return!!t.validateShortString(e,!1)},t.validateSdkWrapperVersion=function(e){return!!r.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/)},t.validateEngineVersion=function(e){return!(!e||!r.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/))},t.validateUserId=function(e){return!!t.validateString(e,!1)||(i.i("Validation fail - user id: id cannot be (null), empty or above 64 characters."),!1)},t.validateShortString=function(e,t){return!(!t||e)||!(!e||e.length>32)},t.validateString=function(e,t){return!(!t||e)||!(!e||e.length>64)},t.validateLongString=function(e,t){return!(!t||e)||!(!e||e.length>8192)},t.validateConnectionType=function(e){return r.stringMatch(e,/^(wwan|wifi|lan|offline)$/)},t.validateCustomDimensions=function(e){return t.validateArrayOfStrings(20,32,!1,"custom dimensions",e)},t.validateResourceCurrencies=function(e){if(!t.validateArrayOfStrings(20,64,!1,"resource currencies",e))return!1;for(var n=0;n<e.length;++n)if(!r.stringMatch(e[n],/^[A-Za-z]+$/))return i.i("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: "+e[n]),!1;return!0},t.validateResourceItemTypes=function(e){if(!t.validateArrayOfStrings(20,32,!1,"resource item types",e))return!1;for(var n=0;n<e.length;++n)if(!t.validateEventPartCharacters(e[n]))return i.i("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: "+e[n]),!1;return!0},t.validateDimension01=function(e,t){return!e||!!r.stringArrayContainsString(t,e)},t.validateDimension02=function(e,t){return!e||!!r.stringArrayContainsString(t,e)},t.validateDimension03=function(e,t){return!e||!!r.stringArrayContainsString(t,e)},t.validateArrayOfStrings=function(e,t,n,r,a){var s=r;if(s||(s="Array"),!a)return i.i(s+" validation failed: array cannot be null. "),!1;if(0==n&&0==a.length)return i.i(s+" validation failed: array cannot be empty. "),!1;if(e>0&&a.length>e)return i.i(s+" validation failed: array cannot exceed "+e+" values. It has "+a.length+" values."),!1;for(var o=0;o<a.length;++o){var u=a[o]?a[o].length:0;if(0===u)return i.i(s+" validation failed: contained an empty string. Array="+JSON.stringify(a)),!1;if(t>0&&u>t)return i.i(s+" validation failed: a string exceeded max allowed length (which is: "+t+"). String was: "+a[o]),!1}return!0},t.validateFacebookId=function(e){return!!t.validateString(e,!1)||(i.i("Validation fail - facebook id: id cannot be (null), empty or above 64 characters."),!1)},t.validateGender=function(t){if(isNaN(Number(e.EGAGender[t]))){if(t==e.EGAGender.Undefined||t!=e.EGAGender.Male&&t!=e.EGAGender.Female)return i.i("Validation fail - gender: Has to be 'male' or 'female'. Was: "+t),!1}else if(t==e.EGAGender[e.EGAGender.Undefined]||t!=e.EGAGender[e.EGAGender.Male]&&t!=e.EGAGender[e.EGAGender.Female])return i.i("Validation fail - gender: Has to be 'male' or 'female'. Was: "+t),!1;return!0},t.validateBirthyear=function(e){return!(e<0||e>9999)||(i.i("Validation fail - birthYear: Cannot be (null) or invalid range."),!1)},t.validateClientTs=function(e){return!(e<-4294967294||e>4294967294)},t}();t.GAValidator=a}(e.validators||(e.validators={}))}(i||(i={}));!function(e){!function(e){var t=function(){return function(e,t,i){this.name=e,this.value=t,this.version=i}}();e.NameValueVersion=t;var i=function(){return function(e,t){this.name=e,this.version=t}}();e.NameVersion=i;var n=function(){function e(){}return e.touch=function(){},e.getRelevantSdkVersion=function(){return e.sdkGameEngineVersion?e.sdkGameEngineVersion:e.sdkWrapperVersion},e.getConnectionType=function(){return e.connectionType},e.updateConnectionType=function(){e.connectionType=navigator.onLine?"ios"===e.buildPlatform||"android"===e.buildPlatform?"wwan":"lan":"offline"},e.getOSVersionString=function(){return e.buildPlatform+" "+e.osVersionPair.version},e.runtimePlatformToString=function(){return e.osVersionPair.name},e.getBrowserVersionString=function(){var e,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(i[1]))return"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||"");if("Chrome"===i[1]&&null!=(e=t.match(/\b(OPR|Edge|UBrowser)\/(\d+)/)))return e.slice(1).join(" ").replace("OPR","Opera").replace("UBrowser","UC").toLowerCase();var n=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" ").toLowerCase()},e.getDeviceModel=function(){return"unknown"},e.getDeviceManufacturer=function(){return"unknown"},e.matchItem=function(e,t){var n,r,a,s,o=new i("unknown","0.0.0"),u=0,l=0;for(u=0;u<t.length;u+=1)if(new RegExp(t[u].value,"i").test(e)){if(n=new RegExp(t[u].version+"[- /:;]([\\d._]+)","i"),r=e.match(n),s="",r&&r[1]&&(a=r[1]),a){var h=a.split(/[._]+/);for(l=0;l<Math.min(h.length,3);l+=1)s+=h[l]+(l<Math.min(h.length,3)-1?".":"")}else s="0.0.0";return o.name=t[u].name,o.version=s,o}return o},e}();n.sdkWrapperVersion="javascript 2.1.0",n.osVersionPair=n.matchItem([navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor,window.opera].join(" "),[new t("windows_phone","Windows Phone","OS"),new t("windows","Win","NT"),new t("ios","iPhone","OS"),new t("ios","iPad","OS"),new t("ios","iPod","OS"),new t("android","Android","Android"),new t("blackBerry","BlackBerry","/"),new t("mac_osx","Mac","OS X"),new t("tizen","Tizen","Tizen"),new t("linux","Linux","rv")]),n.buildPlatform=n.runtimePlatformToString(),n.deviceModel=n.getDeviceModel(),n.deviceManufacturer=n.getDeviceManufacturer(),n.osVersion=n.getOSVersionString(),n.browserVersion=n.getBrowserVersionString(),n.maxSafeInteger=Math.pow(2,53)-1,e.GADevice=n}(e.device||(e.device={}))}(i||(i={}));!function(e){!function(e){var t=function(){function e(t){this.deadline=t,this.ignore=!1,this.async=!1,this.running=!1,this.id=++e.idCounter}return e}();t.idCounter=0,e.TimedBlock=t}(e.threading||(e.threading={}))}(i||(i={}));!function(e){!function(e){var t=function(){function e(e){this.comparer=e,this._subQueues={},this._sortedKeys=[]}return e.prototype.enqueue=function(e,t){-1===this._sortedKeys.indexOf(e)&&this.addQueueOfPriority(e),this._subQueues[e].push(t)},e.prototype.addQueueOfPriority=function(e){var t=this;this._sortedKeys.push(e),this._sortedKeys.sort(function(e,i){return t.comparer.compare(e,i)}),this._subQueues[e]=[]},e.prototype.peek=function(){if(this.hasItems())return this._subQueues[this._sortedKeys[0]][0];throw new Error("The queue is empty")},e.prototype.hasItems=function(){return this._sortedKeys.length>0},e.prototype.dequeue=function(){if(this.hasItems())return this.dequeueFromHighPriorityQueue();throw new Error("The queue is empty")},e.prototype.dequeueFromHighPriorityQueue=function(){var e=this._sortedKeys[0],t=this._subQueues[e].shift();return 0===this._subQueues[e].length&&(this._sortedKeys.shift(),delete this._subQueues[e]),t},e}();e.PriorityQueue=t}(e.threading||(e.threading={}))}(i||(i={}));!function(e){!function(t){var i,n=e.logging.GALogger;!function(e){e[e.Equal=0]="Equal",e[e.LessOrEqual=1]="LessOrEqual",e[e.NotEqual=2]="NotEqual"}(i=t.EGAStoreArgsOperator||(t.EGAStoreArgsOperator={}));var r;!function(e){e[e.Events=0]="Events",e[e.Sessions=1]="Sessions",e[e.Progression=2]="Progression"}(r=t.EGAStore||(t.EGAStore={}));var a=function(){function e(){this.eventsStore=[],this.sessionsStore=[],this.progressionStore=[],this.storeItems={};try{"object"==typeof localStorage?(localStorage.setItem("testingLocalStorage","yes"),localStorage.removeItem("testingLocalStorage"),e.storageAvailable=!0):e.storageAvailable=!1}catch(e){}}return e.isStorageAvailable=function(){return e.storageAvailable},e.isStoreTooLargeForEvents=function(){return e.instance.eventsStore.length+e.instance.sessionsStore.length>e.MaxNumberOfEntries},e.select=function(t,n,r,a){void 0===n&&(n=[]),void 0===r&&(r=!1),void 0===a&&(a=0);var s=e.getStore(t);if(!s)return null;for(var o=[],u=0;u<s.length;++u){for(var l=s[u],h=!0,c=0;c<n.length;++c){var d=n[c];if(l[d[0]])switch(d[1]){case i.Equal:h=l[d[0]]==d[2];break;case i.LessOrEqual:h=l[d[0]]<=d[2];break;case i.NotEqual:h=l[d[0]]!=d[2];break;default:h=!1}else h=!1;if(!h)break}h&&o.push(l)}return r&&o.sort(function(e,t){return e.client_ts-t.client_ts}),a>0&&o.length>a&&(o=o.slice(0,a+1)),o},e.update=function(t,n,r){void 0===r&&(r=[]);var a=e.getStore(t);if(!a)return!1;for(var s=0;s<a.length;++s){for(var o=a[s],u=!0,l=0;l<r.length;++l){var h=r[l];if(o[h[0]])switch(h[1]){case i.Equal:u=o[h[0]]==h[2];break;case i.LessOrEqual:u=o[h[0]]<=h[2];break;case i.NotEqual:u=o[h[0]]!=h[2];break;default:u=!1}else u=!1;if(!u)break}if(u)for(l=0;l<n.length;++l){var c=n[l];o[c[0]]=c[1]}}return!0},e.delete=function(t,n){var r=e.getStore(t);if(r)for(var a=0;a<r.length;++a){for(var s=r[a],o=!0,u=0;u<n.length;++u){var l=n[u];if(s[l[0]])switch(l[1]){case i.Equal:o=s[l[0]]==l[2];break;case i.LessOrEqual:o=s[l[0]]<=l[2];break;case i.NotEqual:o=s[l[0]]!=l[2];break;default:o=!1}else o=!1;if(!o)break}o&&(r.splice(a,1),--a)}},e.insert=function(t,i,n,r){void 0===n&&(n=!1),void 0===r&&(r=null);var a=e.getStore(t);if(a)if(n){if(!r)return;for(var s=!1,o=0;o<a.length;++o){var u=a[o];if(u[r]==i[r]){for(var l in i)u[l]=i[l];s=!0;break}}s||a.push(i)}else a.push(i)},e.save=function(){e.isStorageAvailable()?(localStorage.setItem(e.KeyPrefix+e.EventsStoreKey,JSON.stringify(e.instance.eventsStore)),localStorage.setItem(e.KeyPrefix+e.SessionsStoreKey,JSON.stringify(e.instance.sessionsStore)),localStorage.setItem(e.KeyPrefix+e.ProgressionStoreKey,JSON.stringify(e.instance.progressionStore)),localStorage.setItem(e.KeyPrefix+e.ItemsStoreKey,JSON.stringify(e.instance.storeItems))):n.w("Storage is not available, cannot save.")},e.load=function(){if(e.isStorageAvailable()){try{e.instance.eventsStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.EventsStoreKey)),e.instance.eventsStore||(e.instance.eventsStore=[])}catch(t){n.w("Load failed for 'events' store. Using empty store."),e.instance.eventsStore=[]}try{e.instance.sessionsStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.SessionsStoreKey)),e.instance.sessionsStore||(e.instance.sessionsStore=[])}catch(t){n.w("Load failed for 'sessions' store. Using empty store."),e.instance.sessionsStore=[]}try{e.instance.progressionStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.ProgressionStoreKey)),e.instance.progressionStore||(e.instance.progressionStore=[])}catch(t){n.w("Load failed for 'progression' store. Using empty store."),e.instance.progressionStore=[]}try{e.instance.storeItems=JSON.parse(localStorage.getItem(e.KeyPrefix+e.ItemsStoreKey)),e.instance.storeItems||(e.instance.storeItems={})}catch(t){n.w("Load failed for 'items' store. Using empty store."),e.instance.progressionStore=[]}}else n.w("Storage is not available, cannot load.")},e.setItem=function(t,i){var n=e.KeyPrefix+t;i?e.instance.storeItems[n]=i:n in e.instance.storeItems&&delete e.instance.storeItems[n]},e.getItem=function(t){var i=e.KeyPrefix+t;return i in e.instance.storeItems?e.instance.storeItems[i]:null},e.getStore=function(t){switch(t){case r.Events:return e.instance.eventsStore;case r.Sessions:return e.instance.sessionsStore;case r.Progression:return e.instance.progressionStore;default:return n.w("GAStore.getStore(): Cannot find store: "+t),null}},e}();a.instance=new a,a.MaxNumberOfEntries=2e3,a.KeyPrefix="GA::",a.EventsStoreKey="ga_event",a.SessionsStoreKey="ga_session",a.ProgressionStoreKey="ga_progression",a.ItemsStoreKey="ga_items",t.GAStore=a}(e.store||(e.store={}))}(i||(i={}));!function(e){!function(t){var i=e.validators.GAValidator,n=e.utilities.GAUtilities,r=e.logging.GALogger,a=e.store.GAStore,s=e.device.GADevice,o=e.store.EGAStore,u=e.store.EGAStoreArgsOperator,l=function(){function t(){this.availableCustomDimensions01=[],this.availableCustomDimensions02=[],this.availableCustomDimensions03=[],this.availableResourceCurrencies=[],this.availableResourceItemTypes=[],this.sdkConfigDefault={},this.sdkConfig={},this.progressionTries={}}return t.setUserId=function(e){t.instance.userId=e,t.cacheIdentifier()},t.getIdentifier=function(){return t.instance.identifier},t.isInitialized=function(){return t.instance.initialized},t.setInitialized=function(e){t.instance.initialized=e},t.getSessionStart=function(){return t.instance.sessionStart},t.getSessionNum=function(){return t.instance.sessionNum},t.getTransactionNum=function(){return t.instance.transactionNum},t.getSessionId=function(){return t.instance.sessionId},t.getCurrentCustomDimension01=function(){return t.instance.currentCustomDimension01},t.getCurrentCustomDimension02=function(){return t.instance.currentCustomDimension02},t.getCurrentCustomDimension03=function(){return t.instance.currentCustomDimension03},t.getGameKey=function(){return t.instance.gameKey},t.getGameSecret=function(){return t.instance.gameSecret},t.getAvailableCustomDimensions01=function(){return t.instance.availableCustomDimensions01},t.setAvailableCustomDimensions01=function(e){i.validateCustomDimensions(e)&&(t.instance.availableCustomDimensions01=e,t.validateAndFixCurrentDimensions(),r.i("Set available custom01 dimension values: ("+n.joinStringArray(e,", ")+")"))},t.getAvailableCustomDimensions02=function(){return t.instance.availableCustomDimensions02},t.setAvailableCustomDimensions02=function(e){i.validateCustomDimensions(e)&&(t.instance.availableCustomDimensions02=e,t.validateAndFixCurrentDimensions(),r.i("Set available custom02 dimension values: ("+n.joinStringArray(e,", ")+")"))},t.getAvailableCustomDimensions03=function(){return t.instance.availableCustomDimensions03},t.setAvailableCustomDimensions03=function(e){i.validateCustomDimensions(e)&&(t.instance.availableCustomDimensions03=e,t.validateAndFixCurrentDimensions(),r.i("Set available custom03 dimension values: ("+n.joinStringArray(e,", ")+")"))},t.getAvailableResourceCurrencies=function(){return t.instance.availableResourceCurrencies},t.setAvailableResourceCurrencies=function(e){i.validateResourceCurrencies(e)&&(t.instance.availableResourceCurrencies=e,r.i("Set available resource currencies: ("+n.joinStringArray(e,", ")+")"))},t.getAvailableResourceItemTypes=function(){return t.instance.availableResourceItemTypes},t.setAvailableResourceItemTypes=function(e){i.validateResourceItemTypes(e)&&(t.instance.availableResourceItemTypes=e,r.i("Set available resource item types: ("+n.joinStringArray(e,", ")+")"))},t.getBuild=function(){return t.instance.build},t.setBuild=function(e){t.instance.build=e,r.i("Set build version: "+e)},t.getUseManualSessionHandling=function(){return t.instance.useManualSessionHandling},t.prototype.setDefaultId=function(e){this.defaultUserId=e||"",t.cacheIdentifier()},t.getDefaultId=function(){return t.instance.defaultUserId},t.getSdkConfig=function(){n=0;for(var e in t.instance.sdkConfig)0===n&&(i=e),++n;if(i&&n>0)return t.instance.sdkConfig;var i,n=0;for(var e in t.instance.sdkConfigCached)0===n&&(i=e),++n;return i&&n>0?t.instance.sdkConfigCached:t.instance.sdkConfigDefault},t.isEnabled=function(){var e=t.getSdkConfig();return!(e.enabled&&"false"==e.enabled||!t.instance.initAuthorized)},t.setCustomDimension01=function(e){t.instance.currentCustomDimension01=e,a.setItem(t.Dimension01Key,e),r.i("Set custom01 dimension value: "+e)},t.setCustomDimension02=function(e){t.instance.currentCustomDimension02=e,a.setItem(t.Dimension02Key,e),r.i("Set custom02 dimension value: "+e)},t.setCustomDimension03=function(e){t.instance.currentCustomDimension03=e,a.setItem(t.Dimension03Key,e),r.i("Set custom03 dimension value: "+e)},t.setFacebookId=function(e){t.instance.facebookId=e,a.setItem(t.FacebookIdKey,e),r.i("Set facebook id: "+e)},t.setGender=function(i){t.instance.gender=isNaN(Number(e.EGAGender[i]))?e.EGAGender[i].toString().toLowerCase():e.EGAGender[e.EGAGender[i]].toString().toLowerCase(),a.setItem(t.GenderKey,t.instance.gender),r.i("Set gender: "+t.instance.gender)},t.setBirthYear=function(e){t.instance.birthYear=e,a.setItem(t.BirthYearKey,e.toString()),r.i("Set birth year: "+e)},t.incrementSessionNum=function(){var e=t.getSessionNum()+1;t.instance.sessionNum=e},t.incrementTransactionNum=function(){var e=t.getTransactionNum()+1;t.instance.transactionNum=e},t.incrementProgressionTries=function(e){var i=t.getProgressionTries(e)+1;t.instance.progressionTries[e]=i;var n={};n.progression=e,n.tries=i,a.insert(o.Progression,n,!0,"progression")},t.getProgressionTries=function(e){return e in t.instance.progressionTries?t.instance.progressionTries[e]:0},t.clearProgressionTries=function(e){e in t.instance.progressionTries&&delete t.instance.progressionTries[e];var i=[];i.push(["progression",u.Equal,e]),a.delete(o.Progression,i)},t.setKeys=function(e,i){t.instance.gameKey=e,t.instance.gameSecret=i},t.setManualSessionHandling=function(e){t.instance.useManualSessionHandling=e,r.i("Use manual session handling: "+e)},t.getEventAnnotations=function(){var e={};e.v=2,e.user_id=t.instance.identifier,e.client_ts=t.getClientTsAdjusted(),e.sdk_version=s.getRelevantSdkVersion(),e.os_version=s.osVersion,e.manufacturer=s.deviceManufacturer,e.device=s.deviceModel,e.browser_version=s.browserVersion,e.platform=s.buildPlatform,e.session_id=t.instance.sessionId,e[t.SessionNumKey]=t.instance.sessionNum;var n=s.getConnectionType();return i.validateConnectionType(n)&&(e.connection_type=n),s.gameEngineVersion&&(e.engine_version=s.gameEngineVersion),t.instance.build&&(e.build=t.instance.build),t.instance.facebookId&&(e[t.FacebookIdKey]=t.instance.facebookId),t.instance.gender&&(e[t.GenderKey]=t.instance.gender),0!=t.instance.birthYear&&(e[t.BirthYearKey]=t.instance.birthYear),e},t.getSdkErrorEventAnnotations=function(){var e={};e.v=2,e.category=t.CategorySdkError,e.sdk_version=s.getRelevantSdkVersion(),e.os_version=s.osVersion,e.manufacturer=s.deviceManufacturer,e.device=s.deviceModel,e.platform=s.buildPlatform;var n=s.getConnectionType();return i.validateConnectionType(n)&&(e.connection_type=n),s.gameEngineVersion&&(e.engine_version=s.gameEngineVersion),e},t.getInitAnnotations=function(){var e={};return e.sdk_version=s.getRelevantSdkVersion(),e.os_version=s.osVersion,e.platform=s.buildPlatform,e},t.getClientTsAdjusted=function(){var e=n.timeIntervalSince1970(),r=e+t.instance.clientServerTimeOffset;return i.validateClientTs(r)?r:e},t.sessionIsStarted=function(){return 0!=t.instance.sessionStart},t.cacheIdentifier=function(){t.instance.userId?t.instance.identifier=t.instance.userId:t.instance.defaultUserId&&(t.instance.identifier=t.instance.defaultUserId)},t.ensurePersistedStates=function(){a.isStorageAvailable()&&a.load();var e=t.instance;e.setDefaultId(null!=a.getItem(t.DefaultUserIdKey)?a.getItem(t.DefaultUserIdKey):n.createGuid()),e.sessionNum=null!=a.getItem(t.SessionNumKey)?Number(a.getItem(t.SessionNumKey)):0,e.transactionNum=null!=a.getItem(t.TransactionNumKey)?Number(a.getItem(t.TransactionNumKey)):0,e.facebookId?a.setItem(t.FacebookIdKey,e.facebookId):(e.facebookId=null!=a.getItem(t.FacebookIdKey)?a.getItem(t.FacebookIdKey):"",e.facebookId),e.gender?a.setItem(t.GenderKey,e.gender):(e.gender=null!=a.getItem(t.GenderKey)?a.getItem(t.GenderKey):"",e.gender),e.birthYear&&0!=e.birthYear?a.setItem(t.BirthYearKey,e.birthYear.toString()):(e.birthYear=null!=a.getItem(t.BirthYearKey)?Number(a.getItem(t.BirthYearKey)):0,e.birthYear),e.currentCustomDimension01?a.setItem(t.Dimension01Key,e.currentCustomDimension01):(e.currentCustomDimension01=null!=a.getItem(t.Dimension01Key)?a.getItem(t.Dimension01Key):"",e.currentCustomDimension01),e.currentCustomDimension02?a.setItem(t.Dimension02Key,e.currentCustomDimension02):(e.currentCustomDimension02=null!=a.getItem(t.Dimension02Key)?a.getItem(t.Dimension02Key):"",e.currentCustomDimension02),e.currentCustomDimension03?a.setItem(t.Dimension03Key,e.currentCustomDimension03):(e.currentCustomDimension03=null!=a.getItem(t.Dimension03Key)?a.getItem(t.Dimension03Key):"",e.currentCustomDimension03);var i=null!=a.getItem(t.SdkConfigCachedKey)?a.getItem(t.SdkConfigCachedKey):"";if(i){var r=JSON.parse(n.decode64(i));r&&(e.sdkConfigCached=r)}var s=a.select(o.Progression);if(s)for(var u=0;u<s.length;++u){var l=s[u];l&&(e.progressionTries[l.progression]=l.tries)}},t.calculateServerTimeOffset=function(e){return e-n.timeIntervalSince1970()},t.validateAndFixCurrentDimensions=function(){i.validateDimension01(t.getCurrentCustomDimension01(),t.getAvailableCustomDimensions01())||t.setCustomDimension01(""),i.validateDimension02(t.getCurrentCustomDimension02(),t.getAvailableCustomDimensions02())||t.setCustomDimension02(""),i.validateDimension03(t.getCurrentCustomDimension03(),t.getAvailableCustomDimensions03())||t.setCustomDimension03("")},t}();l.CategorySdkError="sdk_error",l.instance=new l,l.DefaultUserIdKey="default_user_id",l.SessionNumKey="session_num",l.TransactionNumKey="transaction_num",l.FacebookIdKey="facebook_id",l.GenderKey="gender",l.BirthYearKey="birth_year",l.Dimension01Key="dimension01",l.Dimension02Key="dimension02",l.Dimension03Key="dimension03",l.SdkConfigCachedKey="sdk_config_cached",t.GAState=l}(e.state||(e.state={}))}(i||(i={}));!function(e){!function(t){var i=e.utilities.GAUtilities,n=e.logging.GALogger,r=function(){function e(){}return e.execute=function(t,r,a,s){if(e.countMap[r]||(e.countMap[r]=0),!(e.countMap[r]>=e.MaxCount)){var o=i.getHmac(s,a),u=new XMLHttpRequest;u.onreadystatechange=function(){if(4===u.readyState){if(!u.responseText)return;if(200!=u.status)return void n.w("sdk error failed. response code not 200. status code: "+u.status+", description: "+u.statusText+", body: "+u.responseText);e.countMap[r]=e.countMap[r]+1}},u.open("POST",t,!0),u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("Authorization",o);try{u.send(a)}catch(e){}}},e}();r.MaxCount=10,r.countMap={},t.SdkErrorTask=r}(e.tasks||(e.tasks={}))}(i||(i={}));!function(e){!function(t){var i=e.state.GAState,n=e.logging.GALogger,r=e.utilities.GAUtilities,a=e.validators.GAValidator,s=e.tasks.SdkErrorTask,o=function(){function e(){this.protocol="https",this.hostName="api.gameanalytics.com",this.version="v2",this.baseUrl=this.protocol+"://"+this.hostName+"/"+this.version,this.initializeUrlPath="init",this.eventsUrlPath="events",this.useGzip=!1}return e.prototype.requestInit=function(n){var r=i.getGameKey(),a=this.baseUrl+"/"+r+"/"+this.initializeUrlPath,s=i.getInitAnnotations(),o=JSON.stringify(s);if(o){var u=this.createPayloadData(o,this.useGzip),l=[];l.push(o),e.sendRequest(a,u,l,this.useGzip,e.initRequestCallback,n)}else n(t.EGAHTTPApiResponse.JsonEncodeFailed,null)},e.prototype.sendEventsInArray=function(n,r,a){if(0!=n.length){var s=i.getGameKey(),o=this.baseUrl+"/"+s+"/"+this.eventsUrlPath,u=JSON.stringify(n);if(!u)return void a(t.EGAHTTPApiResponse.JsonEncodeFailed,null,r,n.length);var l=this.createPayloadData(u,this.useGzip),h=[];h.push(u),h.push(r),h.push(n.length.toString()),e.sendRequest(o,l,h,this.useGzip,e.sendEventInArrayRequestCallback,a)}},e.prototype.sendSdkErrorEvent=function(t){var r=i.getGameKey(),o=i.getGameSecret();if(a.validateSdkErrorEvent(r,o,t)){var u=this.baseUrl+"/"+r+"/"+this.eventsUrlPath,l="",h=i.getSdkErrorEventAnnotations(),c=e.sdkErrorTypeToString(t);h.type=c;var d=[];if(d.push(h),!(l=JSON.stringify(d)))return void n.w("sendSdkErrorEvent: JSON encoding failed.");s.execute(u,t,l,o)}},e.sendEventInArrayRequestCallback=function(i,n,r,a){void 0===a&&(a=null);var s=(a[0],a[1],a[2]),o=parseInt(a[3]),u="",l=0;u=i.responseText,l=i.status;var h=e.instance.processRequestResponse(l,i.statusText,u,"Events");if(h==t.EGAHTTPApiResponse.Ok||h==t.EGAHTTPApiResponse.BadRequest){var c=u?JSON.parse(u):{};null!=c?(t.EGAHTTPApiResponse.BadRequest,r(h,c,s,o)):r(t.EGAHTTPApiResponse.JsonDecodeFailed,null,s,o)}else r(h,null,s,o)},e.sendRequest=function(e,t,n,a,s,o){var u=new XMLHttpRequest,l=i.getGameSecret(),h=r.getHmac(l,t),c=[];c.push(h);for(var d in n)c.push(n[d]);if(u.onreadystatechange=function(){4===u.readyState&&s(u,e,o,c)},u.open("POST",e,!0),u.setRequestHeader("Content-Type","text/plain"),u.setRequestHeader("Authorization",h),a)throw new Error("gzip not supported");try{u.send(t)}catch(e){}},e.initRequestCallback=function(i,n,r,s){void 0===s&&(s=null);var o=(s[0],s[1],""),u=0;o=i.responseText,u=i.status;var l=o?JSON.parse(o):{},h=e.instance.processRequestResponse(u,i.statusText,o,"Init");if(h==t.EGAHTTPApiResponse.Ok||h==t.EGAHTTPApiResponse.BadRequest)if(null!=l)if(h!==t.EGAHTTPApiResponse.BadRequest){var c=a.validateAndCleanInitRequestResponse(l);c?r(t.EGAHTTPApiResponse.Ok,c):r(t.EGAHTTPApiResponse.BadResponse,null)}else r(h,null);else r(t.EGAHTTPApiResponse.JsonDecodeFailed,null);else r(h,null)},e.prototype.createPayloadData=function(e,t){if(t)throw new Error("gzip not supported");return e},e.prototype.processRequestResponse=function(e,i,n,r){return n?200===e?t.EGAHTTPApiResponse.Ok:0===e||401===e?t.EGAHTTPApiResponse.Unauthorized:400===e?t.EGAHTTPApiResponse.BadRequest:500===e?t.EGAHTTPApiResponse.InternalServerError:t.EGAHTTPApiResponse.UnknownResponseCode:t.EGAHTTPApiResponse.NoResponse},e.sdkErrorTypeToString=function(e){switch(e){case t.EGASdkErrorType.Rejected:return"rejected";default:return""}},e}();o.instance=new o,t.GAHTTPApi=o}(e.http||(e.http={}))}(i||(i={}));!function(e){!function(t){var i=e.store.GAStore,n=e.store.EGAStore,r=e.store.EGAStoreArgsOperator,a=e.state.GAState,s=e.logging.GALogger,o=e.utilities.GAUtilities,u=e.http.EGAHTTPApiResponse,l=e.http.GAHTTPApi,h=e.validators.GAValidator,c=e.http.EGASdkErrorType,d=function(){function t(){}return t.addSessionStartEvent=function(){var e={};e.category=t.CategorySessionStart,a.incrementSessionNum(),i.setItem(a.SessionNumKey,a.getSessionNum().toString()),t.addDimensionsToEvent(e),t.addEventToStore(e),s.i("Add SESSION START event"),t.processEvents(t.CategorySessionStart,!1)},t.addSessionEndEvent=function(){var e=a.getSessionStart(),i=a.getClientTsAdjusted()-e;i<0&&(s.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."),i=0);var n={};n.category=t.CategorySessionEnd,n.length=i,t.addDimensionsToEvent(n),t.addEventToStore(n),s.i("Add SESSION END event."),t.processEvents("",!1)},t.addBusinessEvent=function(e,n,r,o,u){if(void 0===u&&(u=null),h.validateBusinessEvent(e,n,u,r,o)){var d={};a.incrementTransactionNum(),i.setItem(a.TransactionNumKey,a.getTransactionNum().toString()),d.event_id=r+":"+o,d.category=t.CategoryBusiness,d.currency=e,d.amount=n,d[a.TransactionNumKey]=a.getTransactionNum(),u&&(d.cart_type=u),t.addDimensionsToEvent(d),s.i("Add BUSINESS event: {currency:"+e+", amount:"+n+", itemType:"+r+", itemId:"+o+", cartType:"+u+"}"),t.addEventToStore(d)}else l.instance.sendSdkErrorEvent(c.Rejected)},t.addResourceEvent=function(i,n,r,o,u){if(h.validateResourceEvent(i,n,r,o,u,a.getAvailableResourceCurrencies(),a.getAvailableResourceItemTypes())){i===e.EGAResourceFlowType.Sink&&(r*=-1);var d={},p=t.resourceFlowTypeToString(i);d.event_id=p+":"+n+":"+o+":"+u,d.category=t.CategoryResource,d.amount=r,t.addDimensionsToEvent(d),s.i("Add RESOURCE event: {currency:"+n+", amount:"+r+", itemType:"+o+", itemId:"+u+"}"),t.addEventToStore(d)}else l.instance.sendSdkErrorEvent(c.Rejected)},t.addProgressionEvent=function(i,n,r,o,u,d){var p=t.progressionStatusToString(i);if(h.validateProgressionEvent(i,n,r,o)){var f,g={};f=r?o?n+":"+r+":"+o:n+":"+r:n,g.category=t.CategoryProgression,g.event_id=p+":"+f;var m=0;d&&i!=e.EGAProgressionStatus.Start&&(g.score=u),i===e.EGAProgressionStatus.Fail&&a.incrementProgressionTries(f),i===e.EGAProgressionStatus.Complete&&(a.incrementProgressionTries(f),m=a.getProgressionTries(f),g.attempt_num=m,a.clearProgressionTries(f)),t.addDimensionsToEvent(g),s.i("Add PROGRESSION event: {status:"+p+", progression01:"+n+", progression02:"+r+", progression03:"+o+", score:"+u+", attempt:"+m+"}"),t.addEventToStore(g)}else l.instance.sendSdkErrorEvent(c.Rejected)},t.addDesignEvent=function(e,i,n){if(h.validateDesignEvent(e,i)){var r={};r.category=t.CategoryDesign,r.event_id=e,n&&(r.value=i),s.i("Add DESIGN event: {eventId:"+e+", value:"+i+"}"),t.addEventToStore(r)}else l.instance.sendSdkErrorEvent(c.Rejected)},t.addErrorEvent=function(e,i){var n=t.errorSeverityToString(e);if(h.validateErrorEvent(e,i)){var r={};r.category=t.CategoryError,r.severity=n,r.message=i,s.i("Add ERROR event: {severity:"+n+", message:"+i+"}"),t.addEventToStore(r)}else l.instance.sendSdkErrorEvent(c.Rejected)},t.processEvents=function(e,a){try{var u=o.createGuid();a&&(t.cleanupEvents(),t.fixMissingSessionEndEvents());var h=[];h.push(["status",r.Equal,"new"]);var c=[];c.push(["status",r.Equal,"new"]),e&&(h.push(["category",r.Equal,e]),c.push(["category",r.Equal,e]));var d=[];d.push(["status",u]);var p=i.select(n.Events,h);if(!p||0==p.length)return void s.i("Event queue: No events to send");if(p.length>t.MaxEventCount){if(!(p=i.select(n.Events,h,!0,t.MaxEventCount)))return;var f=p[p.length-1].client_ts;if(h.push(["client_ts",r.LessOrEqual,f]),!(p=i.select(n.Events,h)))return;c.push(["client_ts",r.LessOrEqual,f])}if(s.i("Event queue: Sending "+p.length+" events."),!i.update(n.Events,d,c))return;for(var g=[],m=0;m<p.length;++m){var v=p[m],y=JSON.parse(o.decode64(v.event));0!=y.length&&g.push(y)}l.instance.sendEventsInArray(g,u,t.processEventsCallback)}catch(e){s.e("Error during ProcessEvents(): "+e.stack)}},t.processEventsCallback=function(e,a,o,l){var h=[];if(h.push(["status",r.Equal,o]),e===u.Ok)i.delete(n.Events,h),s.i("Event queue: "+l+" events sent.");else if(e===u.NoResponse){var c=[];c.push(["status","new"]),s.w("Event queue: Failed to send events to collector - Retrying next time"),i.update(n.Events,c,h)}else{if(a){var d,p=0;for(var f in a)0==p&&(d=a[f]),++p;e===u.BadRequest&&d.constructor===Array?s.w("Event queue: "+l+" events sent. "+p+" events failed GA server validation."):s.w("Event queue: Failed to send events.")}else s.w("Event queue: Failed to send events.");i.delete(n.Events,h)}t.updateSessionStore()},t.cleanupEvents=function(){i.update(n.Events,[["status","new"]])},t.fixMissingSessionEndEvents=function(){var e=[];e.push(["session_id",r.NotEqual,a.getSessionId()]);var u=i.select(n.Sessions,e);if(u&&0!=u.length){s.i(u.length+" session(s) located with missing session_end event.");for(var l=0;l<u.length;++l){var h=JSON.parse(o.decode64(u[l].event)),c=h.client_ts-u[l].timestamp;c=Math.max(0,c),h.category=t.CategorySessionEnd,h.length=c,t.addEventToStore(h)}}},t.addEventToStore=function(e){if(a.isInitialized())try{if(i.isStoreTooLargeForEvents()&&!o.stringMatch(e.category,/^(user|session_end|business)$/))return void s.w("Database too large. Event has been blocked.");var u=a.getEventAnnotations(),l=o.encode64(JSON.stringify(u));for(var h in e)u[h]=e[h];var c=JSON.stringify(u);s.ii("Event added to queue: "+c);var d={};d.status="new",d.category=u.category,d.session_id=u.session_id,d.client_ts=u.client_ts,d.event=o.encode64(JSON.stringify(u)),i.insert(n.Events,d),e.category==t.CategorySessionEnd?i.delete(n.Sessions,[["session_id",r.Equal,u.session_id]]):(d={},d.session_id=u.session_id,d.timestamp=a.getSessionStart(),d.event=l,i.insert(n.Sessions,d,!0,"session_id")),i.isStorageAvailable()&&i.save()}catch(h){s.e("addEventToStore: error"),s.e(h.stack)}else s.w("Could not add event: SDK is not initialized")},t.updateSessionStore=function(){if(a.sessionIsStarted()){var e={};e.session_id=a.instance.sessionId,e.timestamp=a.getSessionStart(),e.event=o.encode64(JSON.stringify(a.getEventAnnotations())),i.insert(n.Sessions,e,!0,"session_id"),i.isStorageAvailable()&&i.save()}},t.addDimensionsToEvent=function(e){e&&(a.getCurrentCustomDimension01()&&(e.custom_01=a.getCurrentCustomDimension01()),a.getCurrentCustomDimension02()&&(e.custom_02=a.getCurrentCustomDimension02()),a.getCurrentCustomDimension03()&&(e.custom_03=a.getCurrentCustomDimension03()))},t.resourceFlowTypeToString=function(t){return t==e.EGAResourceFlowType.Source||t==e.EGAResourceFlowType[e.EGAResourceFlowType.Source]?"Source":t==e.EGAResourceFlowType.Sink||t==e.EGAResourceFlowType[e.EGAResourceFlowType.Sink]?"Sink":""},t.progressionStatusToString=function(t){return t==e.EGAProgressionStatus.Start||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Start]?"Start":t==e.EGAProgressionStatus.Complete||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Complete]?"Complete":t==e.EGAProgressionStatus.Fail||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Fail]?"Fail":""},t.errorSeverityToString=function(t){return t==e.EGAErrorSeverity.Debug||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Debug]?"debug":t==e.EGAErrorSeverity.Info||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Info]?"info":t==e.EGAErrorSeverity.Warning||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Warning]?"warning":t==e.EGAErrorSeverity.Error||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Error]?"error":t==e.EGAErrorSeverity.Critical||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Critical]?"critical":""},t}();d.instance=new d,d.CategorySessionStart="user",d.CategorySessionEnd="session_end",d.CategoryDesign="design",d.CategoryBusiness="business",d.CategoryProgression="progression",d.CategoryResource="resource",d.CategoryError="error",d.MaxEventCount=500,t.GAEvents=d}(e.events||(e.events={}))}(i||(i={}));!function(e){!function(t){var i=e.logging.GALogger,n=e.state.GAState,r=e.events.GAEvents,a=function(){function e(){this.blocks=new t.PriorityQueue({compare:function(e,t){return e-t}}),this.id2TimedBlockMap={},e.startThread()}return e.createTimedBlock=function(e){void 0===e&&(e=0);var i=new Date;return i.setSeconds(i.getSeconds()+e),new t.TimedBlock(i)},e.performTaskOnGAThread=function(i,n){void 0===n&&(n=0);var r=new Date;r.setSeconds(r.getSeconds()+n);var a=new t.TimedBlock(r);a.block=i,e.instance.id2TimedBlockMap[a.id]=a,e.instance.addTimedBlock(a)},e.performTimedBlockOnGAThread=function(t){e.instance.id2TimedBlockMap[t.id]=t,e.instance.addTimedBlock(t)},e.scheduleTimer=function(i,n){var r=new Date;r.setSeconds(r.getSeconds()+i);var a=new t.TimedBlock(r);return a.block=n,e.instance.id2TimedBlockMap[a.id]=a,e.instance.addTimedBlock(a),a.id},e.getTimedBlockById=function(t){return t in e.instance.id2TimedBlockMap?e.instance.id2TimedBlockMap[t]:null},e.ensureEventQueueIsRunning=function(){e.instance.keepRunning=!0,e.instance.isRunning||(e.instance.isRunning=!0,e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue))},e.endSessionAndStopQueue=function(){n.isInitialized()&&(i.i("Ending session."),e.stopEventQueue(),n.isEnabled()&&n.sessionIsStarted()&&(r.addSessionEndEvent(),n.instance.sessionStart=0))},e.stopEventQueue=function(){e.instance.keepRunning=!1},e.ignoreTimer=function(t){t in e.instance.id2TimedBlockMap&&(e.instance.id2TimedBlockMap[t].ignore=!0)},e.setEventProcessInterval=function(t){t>0&&(e.ProcessEventsIntervalInSeconds=t)},e.prototype.addTimedBlock=function(e){this.blocks.enqueue(e.deadline.getTime(),e)},e.run=function(){clearTimeout(e.runTimeoutId);try{for(var t;t=e.getNextBlock();)if(!t.ignore)if(t.async){if(!t.running){t.running=!0,t.block();break}}else t.block();return void(e.runTimeoutId=setTimeout(e.run,e.ThreadWaitTimeInMs))}catch(e){i.e("Error on GA thread"),i.e(e.stack)}},e.startThread=function(){e.runTimeoutId=setTimeout(e.run,0)},e.getNextBlock=function(){var t=new Date;return e.instance.blocks.hasItems()&&e.instance.blocks.peek().deadline.getTime()<=t.getTime()?e.instance.blocks.peek().async&&e.instance.blocks.peek().running?e.instance.blocks.peek():e.instance.blocks.dequeue():null},e.processEventQueue=function(){r.processEvents("",!0),e.instance.keepRunning?e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue):e.instance.isRunning=!1},e}();a.instance=new a,a.ThreadWaitTimeInMs=1e3,a.ProcessEventsIntervalInSeconds=8,t.GAThreading=a}(e.threading||(e.threading={}))}(i||(i={}));var i;!function(e){var t=e.threading.GAThreading,i=e.logging.GALogger,n=e.store.GAStore,r=e.state.GAState,a=e.http.GAHTTPApi,s=e.device.GADevice,o=e.validators.GAValidator,u=e.http.EGAHTTPApiResponse,l=e.utilities.GAUtilities,h=e.events.GAEvents,c=function(){function c(){}return c.init=function(){if(s.touch(),c.methodMap.configureAvailableCustomDimensions01=c.configureAvailableCustomDimensions01,c.methodMap.configureAvailableCustomDimensions02=c.configureAvailableCustomDimensions02,c.methodMap.configureAvailableCustomDimensions03=c.configureAvailableCustomDimensions03,c.methodMap.configureAvailableResourceCurrencies=c.configureAvailableResourceCurrencies,c.methodMap.configureAvailableResourceItemTypes=c.configureAvailableResourceItemTypes,c.methodMap.configureBuild=c.configureBuild,c.methodMap.configureSdkGameEngineVersion=c.configureSdkGameEngineVersion,c.methodMap.configureGameEngineVersion=c.configureGameEngineVersion,c.methodMap.configureUserId=c.configureUserId,c.methodMap.initialize=c.initialize,c.methodMap.addBusinessEvent=c.addBusinessEvent,c.methodMap.addResourceEvent=c.addResourceEvent,c.methodMap.addProgressionEvent=c.addProgressionEvent,c.methodMap.addDesignEvent=c.addDesignEvent,c.methodMap.addErrorEvent=c.addErrorEvent,c.methodMap.addErrorEvent=c.addErrorEvent,c.methodMap.setEnabledInfoLog=c.setEnabledInfoLog,c.methodMap.setEnabledVerboseLog=c.setEnabledVerboseLog,c.methodMap.setEnabledManualSessionHandling=c.setEnabledManualSessionHandling,c.methodMap.setCustomDimension01=c.setCustomDimension01,c.methodMap.setCustomDimension02=c.setCustomDimension02,c.methodMap.setCustomDimension03=c.setCustomDimension03,c.methodMap.setFacebookId=c.setFacebookId,c.methodMap.setGender=c.setGender,c.methodMap.setBirthYear=c.setBirthYear,c.methodMap.setEventProcessInterval=c.setEventProcessInterval,c.methodMap.startSession=c.startSession,c.methodMap.endSession=c.endSession,c.methodMap.onStop=c.onStop,c.methodMap.onResume=c.onResume,"undefined"!=typeof window&&void 0!==window.GameAnalytics&&void 0!==window.GameAnalytics.q){var e=window.GameAnalytics.q;for(var t in e)c.gaCommand.apply(null,e[t])}},c.gaCommand=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];t.length>0&&t[0]in e.GameAnalytics.methodMap&&(t.length>1?e.GameAnalytics.methodMap[t[0]].apply(null,Array.prototype.slice.call(t,1)):e.GameAnalytics.methodMap[t[0]]())},c.configureAvailableCustomDimensions01=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){c.isSdkReady(!0,!1)?i.w("Available custom dimensions must be set before SDK is initialized"):r.setAvailableCustomDimensions01(e)})},c.configureAvailableCustomDimensions02=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){c.isSdkReady(!0,!1)?i.w("Available custom dimensions must be set before SDK is initialized"):r.setAvailableCustomDimensions02(e)})},c.configureAvailableCustomDimensions03=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){c.isSdkReady(!0,!1)?i.w("Available custom dimensions must be set before SDK is initialized"):r.setAvailableCustomDimensions03(e)})},c.configureAvailableResourceCurrencies=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){c.isSdkReady(!0,!1)?i.w("Available resource currencies must be set before SDK is initialized"):r.setAvailableResourceCurrencies(e)})},c.configureAvailableResourceItemTypes=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){c.isSdkReady(!0,!1)?i.w("Available resource item types must be set before SDK is initialized"):r.setAvailableResourceItemTypes(e)})},c.configureBuild=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){return c.isSdkReady(!0,!1)?void i.w("Build version must be set before SDK is initialized."):o.validateBuild(e)?void r.setBuild(e):void i.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: "+e)})},c.configureSdkGameEngineVersion=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){if(!c.isSdkReady(!0,!1))return o.validateSdkWrapperVersion(e)?void(s.sdkGameEngineVersion=e):void i.i("Validation fail - configure sdk version: Sdk version not supported. String: "+e)})},c.configureGameEngineVersion=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){if(!c.isSdkReady(!0,!1))return o.validateEngineVersion(e)?void(s.gameEngineVersion=e):void i.i("Validation fail - configure game engine version: Game engine version not supported. String: "+e)})},c.configureUserId=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){return c.isSdkReady(!0,!1)?void i.w("A custom user id must be set before SDK is initialized."):o.validateUserId(e)?void r.setUserId(e):void i.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: "+e)})},c.initialize=function(e,n){void 0===e&&(e=""),void 0===n&&(n=""),s.updateConnectionType();var a=t.createTimedBlock();a.async=!0,c.initTimedBlockId=a.id,a.block=function(){return c.isSdkReady(!0,!1)?void i.w("SDK already initialized. Can only be called once."):o.validateKeys(e,n)?(r.setKeys(e,n),void c.internalInitialize()):void i.w("SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: "+e+", secretKey: "+n)},t.performTimedBlockOnGAThread(a)},c.addBusinessEvent=function(e,i,n,r,a){void 0===e&&(e=""),void 0===i&&(i=0),void 0===n&&(n=""),void 0===r&&(r=""),void 0===a&&(a=""),s.updateConnectionType(),t.performTaskOnGAThread(function(){c.isSdkReady(!0,!0,"Could not add business event")&&h.addBusinessEvent(e,i,n,r,a)})},c.addResourceEvent=function(i,n,r,a,o){void 0===i&&(i=e.EGAResourceFlowType.Undefined),void 0===n&&(n=""),void 0===r&&(r=0),void 0===a&&(a=""),void 0===o&&(o=""),s.updateConnectionType(),t.performTaskOnGAThread(function(){c.isSdkReady(!0,!0,"Could not add resource event")&&h.addResourceEvent(i,n,r,a,o)})},c.addProgressionEvent=function(i,n,r,a,o){void 0===i&&(i=e.EGAProgressionStatus.Undefined),void 0===n&&(n=""),void 0===r&&(r=""),void 0===a&&(a=""),s.updateConnectionType(),t.performTaskOnGAThread(function(){if(c.isSdkReady(!0,!0,"Could not add progression event")){var e=void 0!==o;h.addProgressionEvent(i,n,r,a,e?o:0,e)}})},c.addDesignEvent=function(e,i){s.updateConnectionType(),t.performTaskOnGAThread(function(){if(c.isSdkReady(!0,!0,"Could not add design event")){var t=void 0!==i;h.addDesignEvent(e,t?i:0,t)}})},c.addErrorEvent=function(i,n){void 0===i&&(i=e.EGAErrorSeverity.Undefined),void 0===n&&(n=""),s.updateConnectionType(),t.performTaskOnGAThread(function(){c.isSdkReady(!0,!0,"Could not add error event")&&h.addErrorEvent(i,n)})},c.setEnabledInfoLog=function(e){void 0===e&&(e=!1),t.performTaskOnGAThread(function(){e?(i.setInfoLog(e),i.i("Info logging enabled")):(i.i("Info logging disabled"),i.setInfoLog(e))})},c.setEnabledVerboseLog=function(e){void 0===e&&(e=!1),t.performTaskOnGAThread(function(){e?(i.setVerboseLog(e),i.i("Verbose logging enabled")):(i.i("Verbose logging disabled"),i.setVerboseLog(e))})},c.setEnabledManualSessionHandling=function(e){void 0===e&&(e=!1),t.performTaskOnGAThread(function(){r.setManualSessionHandling(e)})},c.setCustomDimension01=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){o.validateDimension01(e,r.getAvailableCustomDimensions01())?r.setCustomDimension01(e):i.w("Could not set custom01 dimension value to '"+e+"'. Value not found in available custom01 dimension values")})},c.setCustomDimension02=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){o.validateDimension02(e,r.getAvailableCustomDimensions02())?r.setCustomDimension02(e):i.w("Could not set custom02 dimension value to '"+e+"'. Value not found in available custom02 dimension values")})},c.setCustomDimension03=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){o.validateDimension03(e,r.getAvailableCustomDimensions03())?r.setCustomDimension03(e):i.w("Could not set custom03 dimension value to '"+e+"'. Value not found in available custom03 dimension values")})},c.setFacebookId=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){o.validateFacebookId(e)&&r.setFacebookId(e)})},c.setGender=function(i){void 0===i&&(i=e.EGAGender.Undefined),t.performTaskOnGAThread(function(){o.validateGender(i)&&r.setGender(i)})},c.setBirthYear=function(e){void 0===e&&(e=0),t.performTaskOnGAThread(function(){o.validateBirthyear(e)&&r.setBirthYear(e)})},c.setEventProcessInterval=function(e){t.performTaskOnGAThread(function(){t.setEventProcessInterval(e)})},c.startSession=function(){if(r.getUseManualSessionHandling()){if(!r.isInitialized())return;var e=t.createTimedBlock();e.async=!0,c.initTimedBlockId=e.id,e.block=function(){r.isEnabled()&&r.sessionIsStarted()&&t.endSessionAndStopQueue(),c.resumeSessionAndStartQueue()},t.performTimedBlockOnGAThread(e)}},c.endSession=function(){r.getUseManualSessionHandling()&&c.onStop()},c.onStop=function(){t.performTaskOnGAThread(function(){try{t.endSessionAndStopQueue()}catch(e){}})},c.onResume=function(){var e=t.createTimedBlock();e.async=!0,c.initTimedBlockId=e.id,e.block=function(){c.resumeSessionAndStartQueue()},t.performTimedBlockOnGAThread(e)},c.internalInitialize=function(){r.ensurePersistedStates(),n.setItem(r.DefaultUserIdKey,r.getDefaultId()),r.setInitialized(!0),c.newSession(),r.isEnabled()&&t.ensureEventQueueIsRunning()},c.newSession=function(){i.i("Starting a new session."),r.validateAndFixCurrentDimensions(),a.instance.requestInit(c.startNewSessionCallback)},c.startNewSessionCallback=function(e,a){if(e===u.Ok&&a){var s=0;if(a.server_ts){var o=a.server_ts;s=r.calculateServerTimeOffset(o)}a.time_offset=s,n.setItem(r.SdkConfigCachedKey,l.encode64(JSON.stringify(a))),r.instance.sdkConfigCached=a,r.instance.sdkConfig=a,r.instance.initAuthorized=!0}else e==u.Unauthorized?(i.w("Initialize SDK failed - Unauthorized"),r.instance.initAuthorized=!1):(e===u.NoResponse||e===u.RequestTimeout?i.i("Init call (session start) failed - no response. Could be offline or timeout."):e===u.BadResponse||e===u.JsonEncodeFailed||e===u.JsonDecodeFailed?i.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers."):e!==u.BadRequest&&e!==u.UnknownResponseCode||i.i("Init call (session start) failed - bad request or unknown response."),null==r.instance.sdkConfig?null!=r.instance.sdkConfigCached?(i.i("Init call (session start) failed - using cached init values."),r.instance.sdkConfig=r.instance.sdkConfigCached):(i.i("Init call (session start) failed - using default init values."),r.instance.sdkConfig=r.instance.sdkConfigDefault):i.i("Init call (session start) failed - using cached init values."),r.instance.initAuthorized=!0);if(r.instance.clientServerTimeOffset=r.instance.sdkConfig.time_offset?r.instance.sdkConfig.time_offset:0,!r.isEnabled())return i.w("Could not start session: SDK is disabled."),void t.stopEventQueue();t.ensureEventQueueIsRunning();var d=l.createGuid();r.instance.sessionId=d,r.instance.sessionStart=r.getClientTsAdjusted(),h.addSessionStartEvent(),t.getTimedBlockById(c.initTimedBlockId).running=!1,c.initTimedBlockId=-1},c.resumeSessionAndStartQueue=function(){r.isInitialized()&&(i.i("Resuming session."),r.sessionIsStarted()||c.newSession())},c.isSdkReady=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=""),n&&(n+=": "),e&&!r.isInitialized()?(t&&i.w(n+"SDK is not initialized"),!1):!(e&&!r.isEnabled()&&(t&&i.w(n+"SDK is disabled"),1))},c}();c.initTimedBlockId=-1,c.methodMap={},e.GameAnalytics=c}(i||(i={})),i.GameAnalytics.init();var n=i.GameAnalytics.gaCommand;e.gameanalytics=i,e.GameAnalytics=n}(this);var _set=function e(t,i,n,r){var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);null!==s&&e(s,i,n,r)}else if("value"in a&&a.writable)a.value=n;else{var o=a.set;void 0!==o&&o.call(r,n)}return n},_get=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(n)},_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),BubbleType;!function(e){e[e.yellow=0]="yellow",e[e.orange=1]="orange",e[e.blue=2]="blue",e[e.green=3]="green",e[e.pink=4]="pink",e[e.red=5]="red",e[e.black=6]="black"}(BubbleType||(BubbleType={}));var PowerUpType;!function(e){e[e.none=0]="none",e[e.guide=1]="guide",e[e.X2=2]="X2",e[e.X3=6]="X3",e[e.X4=7]="X4",e[e.swipe=3]="swipe",e[e.pushBack=4]="pushBack",e[e.knife=5]="knife"}(PowerUpType||(PowerUpType={}));var GameDifficulty;!function(e){e[e.easy=0]="easy",e[e.medium=1]="medium",e[e.hard=2]="hard"}(GameDifficulty||(GameDifficulty={}));var CatType;!function(e){e[e.hammer=0]="hammer",e[e.knife=1]="knife",e[e.one=2]="one",e[e.two=3]="two",e[e.three=4]="three",e[e.four=5]="four",e[e.five=6]="five",e[e.six=7]="six"}(CatType||(CatType={}));var Upgrades;(Upgrades||(Upgrades={})).Upgrades=[{id:"BUBBLE_SCORE",name:"Material Quality",sprite:"assets/upgrades/icon/material-quality.png",descriptions:["Base bubble score: 30","Base bubble score: 35","Base bubble score: 40","Base bubble score: 45","Base bubble score: 50","Base bubble score: 55","Base bubble score: 60","Base bubble score: 65","Base bubble score: 70","Base bubble score: 80"],costs:[100,250,400,550,800,1e3,1200,1500,3e3,10],values:[30,35,40,45,50,55,60,65,70,80]},{id:"COMBO_SCORE",name:"Combo Focus",sprite:"assets/upgrades/icon/focus.png",costs:[100,250,400,550,800,1e3,1200,1500,3e3,20],descriptions:["Combo bonus score: 2","Combo bonus score: 4","Combo bonus: score 6","Combo bonus score: 8","Combo bonus score: 10","Combo bonus score: 12","Combo bonus score: 14","Combo bonus: score 16","Combo bonus score: 18","Combo bonus score: 20"],values:[2,4,6,8,10,12,14,16,18,20]},{id:"REQUEST_SCORE",name:"Customer Service",sprite:"assets/upgrades/icon/customer-service.png",costs:[100,250,400,550,800,1e3,1200,1500,3e3,10],descriptions:["Request completion reward: \n100%","Request completion reward: \n110%","Request completion reward: \n120%","Request completion reward: \n130%","Request completion reward: \n140%","Request completion reward: \n150%","Request completion reward: \n160%","Request completion reward: \n170%","Request completion reward: \n180%","Request completion reward: \n200%"],values:[1,1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,2]},{id:"TAKEDOWN_SCORE",name:"Ninja Hunter",sprite:"assets/upgrades/icon/mouse-hunter.png",costs:[100,250,400,550,800,1e3,1200,1500,3e3,10],descriptions:["Ninja takedown score: 1,000","Ninja takedown score: 1,500","Ninja takedown score: 2,000","Ninja takedown score: 2,500","Ninja takedown score: 3,000","Ninja takedown score: 3,500","Ninja takedown score: 4,000","Ninja takedown score: 4,500","Ninja takedown score: 5,000","Ninja takedown score: 6,000"],values:[1e3,1500,2e3,2500,3e3,3500,4e3,4500,5e3,6e3,10]},{id:"PLAYTIME_SCORE",name:"Overtime",sprite:"assets/upgrades/icon/overtime.png",costs:[100,250,400,550,800,1e3,1200,1500,3e3,10],descriptions:["Bonus playtime score: 100%","Bonus playtime score: 120%","Bonus playtime score: 140%","Bonus playtime score: 160%","Bonus playtime score: 180%","Bonus playtime score: 200%","Bonus playtime score: 220%","Bonus playtime score: 240%","Bonus playtime score: 260%","Bonus playtime score: 300%"],values:[1,1.2,1.4,1.6,1.8,2,2.2,2.4,2.6,3]},{id:"FEVERTIME_MULTIPLIER",name:"Happiness",sprite:"assets/upgrades/icon/pleasure.png",descriptions:["Fever time bonus score\nmultiplier 200%","Fever time bonus score\nmultiplier 210%","Fever time bonus score\nmultiplier 220%","Fever time bonus score\nmultiplier 230%","Fever time bonus score\nmultiplier 240%","Fever time bonus score\nmultiplier 250%","Fever time bonus score\nmultiplier 260%","Fever time bonus score\nmultiplier 270%","Fever time bonus score\nmultiplier 280%","Fever time bonus score\nmultiplier 300%"],costs:[100,250,400,550,800,1e3,1200,1500,3e3,10],values:[2,2.1,2.2,2.3,2.4,2.5,2.6,2.7,2.8,3]}];var Achievements;!function(e){e.MinBubbleForEpicSwipe=10,e.QuickMouseTakeoutTime=1,e.QuickComboTime=3,e.Achievements=[{id:"MATCH_BUBBLE",name:"Sushi Master",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Match 5,000 bubbles","Match 12,000 bubbles","Match 25,000 bubbles"],valueToCheck:"TotalBubbleMatches",operator:">=",values:[5e3,12e3,25e3],rewards:[200,500,1e3]},{id:"COMPLETE_REQUEST",name:"Famous Restaurant",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Complete 50 customer\nrequests","Complete 120 customer\nrequests","Complete 300 customer\nrequests"],valueToCheck:"TotalRequestComplete",operator:">=",values:[50,120,300],rewards:[200,500,1e3]},{id:"TAKEDOWN_NINJA",name:"Cat Veteran",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Takedown 40 ninjas","Takedown 100 ninjas","Takedown 250 ninjas"],valueToCheck:"TotalMouseKnockout",operator:">=",values:[40,100,250],rewards:[200,500,1e3]},{id:"TRIGGER_CATSWIPE",name:"Cat's Paw",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Trigger Cat Swipe 80 times","Trigger Cat Swipe 300 times","Trigger Cat Swipe 800 times"],valueToCheck:"TotalCatSwipeTriggered",operator:">=",values:[80,300,800],rewards:[200,500,1e3]},{id:"DISCONNECT_BUBBLE",name:"Food Waster",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Disconnect 1,500 bubbles","Disconnect 3,500 bubbles","Disconnect 8,000 bubbles"],valueToCheck:"TotalDisconnectedBubble",operator:">=",values:[1500,3500,8e3],rewards:[200,500,1e3]},{id:"BOUNCE_MATCH",name:"Exactly As Planned",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Perform a bounce-and-\nmatch shot 50 times","Perform a bounce-and-\nmatch shot 100 times","Perform a bounce-and-\nmatch shot 250 times"],valueToCheck:"TotalBounceMatches",operator:">=",values:[50,100,250],rewards:[200,500,1e3]},{id:"REACH_SCORE",name:"Best Employee",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Reach 100,000 score in \none game","Reach 500,000 score in \none game","Reach 1,000,000 score in \none game"],valueToCheck:"Score",operator:">=",values:[1e5,5e5,1e6],displayValues:[1,1,1],rewards:[200,500,1e3]},{id:"REACH_COMBO",name:"Crazy Performance",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Reach 30 combo in one \ngame","Reach 60 combo in one \ngame","Reach 100 combo in one \ngame"],valueToCheck:"HighestCombo",operator:">=",values:[30,60,100],displayValues:[1,1,1],rewards:[200,500,1e3]},{id:"SCORE_FEVER",name:"Happy Meow",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Score 5,000 or more \nin a single fever time","Score 10,000 or more \nin a single fever time","Score 25,000 or more \nin a single fever time"],valueToCheck:"MaxFeverScore",operator:">=",displayValues:[1,1,1],values:[5e3,1e4,25e3],rewards:[200,500,1e3]},{id:"CUSTOMER_REQUEST_TIME",name:"Lightning Serve",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Complete a customer request\nwithin 15 seconds","Complete a customer request\nwithin 8 seconds","Complete a customer request\nwithin 3 seconds"],valueToCheck:"MinRequestTimeSecond",operator:"<=",displayValues:[1,1,1],values:[15,8,3],rewards:[200,500,1e3]},{id:"DESTROY_CATSWIPE",name:"Sharp Claws",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Destroy 10 bubbles or \nmore with a Cat Swipe 15\ntimes in one game","Destroy 10 bubbles or \nmore with a Cat Swipe 30\ntimes in one game","Destroy 10 bubbles or \nmore with a Cat Swipe 60\ntimes in one game"],valueToCheck:"EpicCatSwipeCount",operator:">=",values:[15,30,60],displayValues:[1,1,1],rewards:[200,500,1e3]},{id:"NINJA_TAKEDOWN_TIME",name:"Hunter's Instinct",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Takedown 5 ninjas\nwithin the first second of\ntheir appearance in one game","Takedown 12 ninjas\nwithin the first second of\ntheir appearance in one game","Takedown 20 ninjas\nwithin the first second of\ntheir appearance in one game"],valueToCheck:"QuickMouseKnockout",operator:">=",values:[5,12,20],displayValues:[1,1,1],rewards:[200,500,1e3]},{id:"PREGAMEOVER_COUNT",name:"Not Yet!",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Experience near-game-over\nmoment 7 times in one game","Experience near-game-over\nmoment 13 times in one game","Experience near-game-over\nmoment 19 times in one game"],valueToCheck:"PreGameOverCount",operator:">=",values:[7,13,19],displayValues:[1,1,1],rewards:[200,500,1e3]},{id:"SWAP_MATCH",name:"Sushi Juggler",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Swap-and-match bubbles \n8 times in one game","Swap-and-match bubbles \n15 times in one game","Swap-and-match bubbles \n30 times in one game"],valueToCheck:"SwapMatched",operator:">=",values:[8,15,30],displayValues:[1,1,1],rewards:[200,500,1e3]},{id:"COMBO_IN_3_SECONDS",name:"S-SO FAST!",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Make 15 combo with\n3 seconds or less between \neach shots in one game","Make 35 combo with\n3 seconds or less between \neach shots in one game","Make 60 combo with\n3 seconds or less between \neach shots in one game"],valueToCheck:"HighestQuickCombo",operator:">=",values:[15,35,60],displayValues:[1,1,1],rewards:[200,500,1e3]},{id:"TRIGGER_CATSWIPE_SINGLE_PLAYTHROUGH",name:"Kitty Rage",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Trigger Cat Swipes 20 \ntimes in one game","Trigger Cat Swipes 50 \ntimes in one game","Trigger Cat Swipes 80 \ntimesin one game"],valueToCheck:"CatSwipeTriggered",operator:">=",values:[20,50,80],displayValues:[1,1,1],rewards:[200,500,1e3]},{id:"PLAY_SINGLE_PLAYTHROUGH",name:"Workaholic",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Reach 8 minutes of\nplaytime in one game","Reach 15 minutes of\nplaytime in one game","Reach 30 minutes of\nplaytime in one game"],valueToCheck:"TotalGameTimeInMinutes",operator:">=",values:[8,15,30],displayValues:[1,1,1],rewards:[200,500,1e3]},{id:"DISCONNECT_SINGLE_PLAYTHROUGH",name:"Unwanted",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Disconnect 500 bubbles in \none game","Disconnect 800 bubbles in \none game","Disconnect 1,500 bubbles in \none game"],valueToCheck:"DisconnectedBubble",operator:">=",values:[500,800,1500],displayValues:[1,1,1],rewards:[200,500,1e3]},{id:"BOUNCE_MATCH_SINGLE_PLAYTHROUGH",name:"Slingshot Master",sprites:["assets/achievements/bronze_badge.png","assets/achievements/silver_badge.png","assets/achievements/gold_badge.png"],descriptions:["Bounce and match bubbles\n15 times in one game","Bounce and match bubbles\n30 times in one game","Bounce and match bubbles\n60 times in one game"],valueToCheck:"BounceMatches",operator:">=",values:[15,30,60],displayValues:[1,1,1],rewards:[200,500,1e3]}]}(Achievements||(Achievements={}));var Const;!function(e){e.bubbleColor={pink:15494032,yellow:16769030,orange:16214334,green:7846724,blue:1815503,red:14893617,black:1508358},e.arrowColor={pink:16750514,yellow:16769285,orange:15883820,green:11853356,blue:2149086,red:13899291,black:7873813},e.bubbleEfxColorLight={pink:[255,188,207],yellow:[255,245,173],orange:[253,253,186],green:[205,255,168],blue:[182,243,255],red:[255,192,185],black:[249,249,249]},e.bubbleEfxColorMidTone={pink:[255,116,156],yellow:[255,228,35],orange:[255,133,96],green:[123,220,50],blue:[31,204,236],red:[238,19,19],black:[191,181,181]},e.powerUpTime={guide:16e3,X2:5e3,X3:5e3,X4:5e3,bomb:0,pushBack:0},e.startTypeAmount={easy:3,medium:4,hard:5};!function(e){!function(e){e.fireSound="assets/sfx/bubble.mp3"}(e.sound||(e.sound={}));!function(e){e.popupBoard="assets/game/gui_pause_bg.png",e.restartButton="assets/game/btn_restart_full.png",e.resumeButton="assets/game/btn_resume.png",e.mainMenuButton="assets/game/btn_mainmenu_full.png",e.simpleRectangle="assets/game/WhiteRectangle.png",e.closeButton="assets/game/popup_close_btn.png"}(e.ui||(e.ui={}));!function(e){e.outerCircle="assets/particles/FX_OuterCircle.png",e.whiteCircle="assets/particles/FX_WhiteCircle.png"}(e.particle||(e.particle={}));!function(e){e.sushiDish="assets/game/sushi_dish.png"}(e.game||(e.game={})),e.cats={hammer:{path:"assets/cats/cat_special_hammer.png",name:"Uchida Guda",powerUp:PowerUpType.pushBack},knife:{path:"assets/cats/cat_special_knife.png",name:"Sakaki Satoshi",powerUp:PowerUpType.knife},one:{path:"assets/cats/cat_01.png",name:"Ichi"},two:{path:"assets/cats/cat_02.png",name:"Ni"},three:{path:"assets/cats/cat_03.png",name:"San"},four:{path:"assets/cats/cat_04.png",name:"Yong"},five:{path:"assets/cats/cat_05.png",name:"Go"},six:{path:"assets/cats/cat_06.png",name:"Roku"}},e.powerUpIcon={swipe:"assets/bubbles/icon_catswipe.png"},e.powerUpPath={catswipe:"assets/bubbles/bubble_catswipe.png"},e.nigiriPath={pink:"assets/nigiri/tako.png",yellow:"assets/nigiri/tamago.png",orange:"assets/nigiri/sake.png",green:"assets/nigiri/wakame.png",blue:"assets/nigiri/maguro.png",red:"assets/nigiri/ikura.png",black:"assets/nigiri/uni.png"},e.nigiriRequestPath={pink:"assets/nigiri/request/tako.png",yellow:"assets/nigiri/request/tamago.png",orange:"assets/nigiri/request/sake.png",green:"assets/nigiri/request/wakame.png",blue:"assets/nigiri/request/maguro.png",red:"assets/nigiri/request/ikura.png",black:"assets/nigiri/request/uni.png"},e.bubblePath={pink:"assets/bubbles/bub_octopus.png",yellow:"assets/bubbles/bub_chick.png",orange:"assets/bubbles/bub_salmon.png",green:"assets/bubbles/bub_seaweed.png",blue:"assets/bubbles/bub_tuna.png",red:"assets/bubbles/bub_ikura.png",black:"assets/bubbles/bub_soysauce.png"}}(e.path||(e.path={})),e.bubbleTypeToCatType={pink:CatType.one,yellow:CatType.two,orange:CatType.three,green:CatType.four,blue:CatType.five,red:CatType.six,black:CatType.hammer},e.requestLevel=[20,25,30,35,40,45]}(Const||(Const={}));var GameSetting;!function(e){e.gameWidth=540,e.gameHeight=960,e.defaultRow=16,e.defaultCol=9,e.bubbleRadius=28,e.gridSpeedY=12,e.rushGridSpeedY=60,e.maxRushGridSpeedY=150,e.minRushGridSpeedY=60,e.shootMinAngle=-170,e.shootMaxAngle=-10,e.minAngle=-170,e.maxAngle=-10,e.lastVisibleRow=11,e.startInitRow=11,e.bubbleTypes=[BubbleType.yellow,BubbleType.orange,BubbleType.green,BubbleType.pink,BubbleType.red,BubbleType.blue,BubbleType.black],e.overOffsetY=e.gameHeight-300,e.rushOffsetStart=150+3*e.bubbleRadius,e.rushOffsetRate=2*e.bubbleRadius,e.rushOffsetMax=e.overOffsetY-3*e.bubbleRadius,e.rushOffsetTime=2e4,e.pushBackSpeed=130,e.pushBackSpeedMin=200,e.pushBackSpeedMax=500,e.pushBackTime=1500,e.holdBackTime=1e3,e.pushBackRushOffset=2*e.bubbleRadius*3,e.FreezeTime=6e3,e.mouseSpawnTime=3e4,e.gameOverTime=5e3;!function(e){e.disconnect=0,e.customer=600,e.customerBonus=200,e.time=47}(e.Score||(e.Score={})),e.bubbleNormalSpeed=36,e.bubbleHighSpeed=54,e.bubbleNormalEpsilon=.85,e.bubbleSmallEpsilon=.6,e.gameOverOffsetStartAppear=300,e.gameoverOffsetAtFullAlpha=100,e.Initialize=function(){var t=new XMLHttpRequest;t.open("GET","config.json",!0),t.onreadystatechange=function(){if(4==t.readyState){var i=JSON.parse(t.responseText);e.bubbleHighSpeed=i.GameSetting.bubbleHighSpeed,e.bubbleNormalSpeed=i.GameSetting.bubbleNormalSpeed,e.FreezeTime=i.GameSetting.FreezeTime,e.gameOverTime=i.GameSetting.gameOverTime,e.gridSpeedY=i.GameSetting.gridSpeedY,e.holdBackTime=i.GameSetting.holdBackTime,e.pushBackRushOffset=i.GameSetting.pushBackRushOffset,e.maxRushGridSpeedY=i.GameSetting.maxRushGridSpeedY,e.minRushGridSpeedY=i.GameSetting.minRushGridSpeedY,e.mouseSpawnTime=i.GameSetting.mouseSpawnTime,e.pushBackSpeed=i.GameSetting.pushBackSpeed,e.pushBackSpeedMax=i.GameSetting.pushBackSpeedMax,e.pushBackSpeedMin=i.GameSetting.pushBackSpeedMin,e.pushBackTime=i.GameSetting.pushBackTime,e.rushGridSpeedY=i.GameSetting.rushGridSpeedY,document.getElementById("bubbleHighSpeed").valueAsNumber=e.bubbleHighSpeed,document.getElementById("bubbleHighSpeed").onchange=function(t){e.bubbleHighSpeed=parseFloat(this.value)},document.getElementById("bubbleNormalSpeed").valueAsNumber=e.bubbleNormalSpeed,document.getElementById("bubbleNormalSpeed").onchange=function(t){e.bubbleNormalSpeed=parseFloat(this.value)},document.getElementById("FreezeTime").valueAsNumber=e.FreezeTime,document.getElementById("FreezeTime").onchange=function(t){e.FreezeTime=this.valueAsNumber},document.getElementById("gameOverTime").valueAsNumber=e.gameOverTime,document.getElementById("gameOverTime").onchange=function(t){e.gameOverTime=this.valueAsNumber},document.getElementById("gridSpeedY").valueAsNumber=e.gridSpeedY,document.getElementById("gridSpeedY").onchange=function(t){e.gridSpeedY=this.valueAsNumber},document.getElementById("holdBackTime").valueAsNumber=e.holdBackTime,document.getElementById("holdBackTime").onchange=function(t){e.holdBackTime=this.valueAsNumber},document.getElementById("pushBackRushOffset").valueAsNumber=e.pushBackRushOffset,document.getElementById("pushBackRushOffset").onchange=function(t){e.pushBackRushOffset=this.valueAsNumber},document.getElementById("maxRushGridSpeedY").valueAsNumber=e.maxRushGridSpeedY,document.getElementById("maxRushGridSpeedY").onchange=function(t){e.maxRushGridSpeedY=this.valueAsNumber},document.getElementById("minRushGridSpeedY").valueAsNumber=e.minRushGridSpeedY,document.getElementById("minRushGridSpeedY").onchange=function(t){e.minRushGridSpeedY=this.valueAsNumber},document.getElementById("mouseSpawnTime").valueAsNumber=e.mouseSpawnTime,document.getElementById("mouseSpawnTime").onchange=function(t){e.mouseSpawnTime=this.valueAsNumber},document.getElementById("pushBackSpeed").valueAsNumber=e.pushBackSpeed,document.getElementById("pushBackSpeed").onchange=function(t){e.pushBackSpeed=this.valueAsNumber},document.getElementById("pushBackSpeedMax").valueAsNumber=e.pushBackSpeedMax,document.getElementById("pushBackSpeedMax").onchange=function(t){e.pushBackSpeedMax=this.valueAsNumber},document.getElementById("pushBackSpeedMin").valueAsNumber=e.pushBackSpeedMin,document.getElementById("pushBackSpeedMin").onchange=function(t){e.pushBackSpeedMin=this.valueAsNumber},document.getElementById("pushBackTime").valueAsNumber=e.pushBackTime,document.getElementById("pushBackTime").onchange=function(t){e.pushBackTime=this.valueAsNumber},document.getElementById("rushGridSpeedY").valueAsNumber=e.rushGridSpeedY,document.getElementById("rushGridSpeedY").onchange=function(t){e.rushGridSpeedY=this.valueAsNumber},document.getElementById("normalEpsilon").valueAsNumber=e.bubbleNormalEpsilon,document.getElementById("normalEpsilon").onchange=function(t){e.bubbleNormalEpsilon=parseFloat(this.value)},document.getElementById("smallEpsilon").valueAsNumber=e.bubbleSmallEpsilon,document.getElementById("smallEpsilon").onchange=function(t){e.bubbleSmallEpsilon=parseFloat(this.value)}}},t.send()}}(GameSetting||(GameSetting={}));var FpsUtil=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.startTime=0,i.frameNumber=0,i.isShowingFps=!0,i.text=i.Create(e),i.addChild(i.text),i.displayGroup=new PIXI.DisplayGroup(2e3,!1),i.HideFps(),i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"Create",value:function(e){var t=new PIXI.TextStyle({fontFamily:"Arial",fontSize:16,fontStyle:"italic",fontWeight:"bold",fill:["#ffffff","#00ff99"],stroke:"#4a1850",strokeThickness:5,dropShadow:!0,dropShadowColor:"000000",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6,wordWrap:!0,wordWrapWidth:440}),i=new PIXI.Text("Fps",t);return i.x=e.x,i.y=e.y,i}},{key:"Update",value:function(){this.isShowingFps&&null!=this.text&&(this.text.text=Math.round(PIXI.ticker.shared.FPS)+" fps")}},{key:"GetFps",value:function(){this.frameNumber++;var e=((new Date).getTime()-this.startTime)/1e3,t=Math.floor(this.frameNumber/e);return e>1&&(this.startTime=(new Date).getTime(),this.frameNumber=0),t}},{key:"HideFps",value:function(){this.isShowingFps=!1,null!=this.text&&(this.text.visible=!1)}},{key:"ShowFps",value:function(){this.isShowingFps=!0,null!=this.text&&(this.text.visible=!0)}}]),t}(),LocalStorage;!function(e){function t(){for(var e=localStorage.getItem(""),t=!0,i="1",n="",r="";;)try{r=n+i,localStorage.setItem("",r),n=r,t&&(i+=i)}catch(e){if(i.length<2)break;t=!1,i=i.substr(i.length/2)}return null===e?localStorage.removeItem(""):localStorage.setItem("",e),n.length}function i(){var e=n();localStorage.clear();var i=t();return r(e),i}function n(){for(var e={},t=0;t<localStorage.length;++t){var i=localStorage.key(t),n=localStorage.getItem(i);e[i]=n}return e}function r(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];1==t&&localStorage.clear();for(var n in e)if(!1!==i||void 0===e[n]){var r=e[n];localStorage.setItem(n,r)}}e.isSupported=function(){try{var e=localStorage.getItem("");return localStorage.removeItem(""),localStorage.setItem("",e),null===e?localStorage.removeItem(""):localStorage.setItem("",e),!0}catch(e){return!1}}(),e.hasItem=function(e){return null!==localStorage.getItem(e)},e.getRemainingSpace=t,e.getMaximumSpace=i,e.getUsedSpace=function(){for(var e=0,t=0;t<localStorage.length;++t){var i=localStorage.key(t),n=localStorage.getItem(i);e+=i.length+n.length}return e},e.getItemUsedSpace=function(e){var t=localStorage.getItem(e);return null===t?NaN:e.length+t.length},e.getBackup=n,e.applyBackup=r,e.consoleInfo=function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0;t<localStorage.length;++t){var n=localStorage.key(t),r=localStorage.getItem(n);n.length,r.length}!0===e&&i()}}(LocalStorage||(LocalStorage={}));var backend;!function(e){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"getRecordCount",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new nakamajs.LeaderboardRecordsListRequest;r.leaderboardId="allTime",r.cursor=n;var a=0;t.client.send(r).then(function(n){a=n.records.length,i++,null!=n.cursor?t.getRecordCount(function(t){e(a+=t)},i,n.cursor):e(a)})}},{key:"initialize",value:function(e,i){t.client=new nakamajs.Client("bubbleKey","ec2-54-144-93-132.compute-1.amazonaws.com","7350"),t.client.ssl=!1;var n=nakamajs.AuthenticateRequest.device(t.getDeviceUnique());t.client.login(n).then(function(n){t.handleSession(n),e.call(i)}).catch(function r(a){5!=a.code?e.call(i):t.client.register(n).then(function(n){t.handleSession(n),e.call(i)}).catch(r)})}},{key:"getWeeklyLeaderboard",value:function(e,i){t.getSingleLeaderboard("weekly",e,i)}},{key:"getAllTimeLeaderboard",value:function(e,i){t.getSingleLeaderboard("allTime",e,i)}},{key:"getSingleLeaderboard",value:function(i,a,s){var o=function(e){a.call(s,null)},u=0,l=new n,h=new nakamajs.LeaderboardRecordsListRequest;h.leaderboardId=i;t.client.send(h).then(function n(c){null!=l.rawData?l.rawData.records=l.rawData.records.concat(c.records):l.rawData=c;for(var d=0;d<c.records.length;d++){var p=c.records[d],f=r.parseFromRawData(p,d+1+10*u);l.lists.push(f)}++u<10&&null!=c.cursor?(h.cursor=c.cursor,t.client.send(h).then(n).catch(o)):(h.ownerId=t.session.id,h.cursor=null,t.client.send(h).then(function(n){if(n.records&&n.records.length>0){var o=n.records.find(function(e){return e.ownerId==t.session.id}),u=r.parseFromRawData(o,0);l.currentPlayer=u,e.BackendManager.getRank(i,function(e){u.rank=e,a.call(s,l)},this)}else a.call(s,l)}).catch(o))}).catch(o)}},{key:"getScores",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=function(i){r>0?t.getScores(e,n,r-1):e.call(n,null)},s=new i;t.getSingleLeaderboard("allTime",function(i){null!=i?(s.allTime=i,t.getSingleLeaderboard("weekly",function(t){null!=t?(s.weekly=t,e.call(n,s)):a()},this)):a()},this)}},{key:"getRankAllTime",value:function(e,i){t.getRank("allTime",e,i)}},{key:"getRankWeekly",value:function(e,i){t.getRank("weekly",e,i)}},{key:"getRank",value:function(e,i,n){var r=function(e){null!=i&&i.call(n,null)},a=0,s=new nakamajs.LeaderboardRecordsListRequest;s.leaderboardId=e;t.client.send(s).then(function e(o){if(o&&o.records&&0!=o.records.length){var u=o.records.findIndex(function(e){return e.ownerId==t.session.id});u>=0?null!=i&&i.call(n,u+1+10*a):null!=o.cursor&&a<100?(s.cursor=o.cursor,a++,t.client.send(s).then(e).catch(r)):null!=i&&i.call(n,NaN)}else null!=i&&i.call(n,null)}).catch(r)}},{key:"sendScore",value:function(e,i,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,s=function(s){a<=0?null!=n&&n.call(r,!1):t.sendScore(e,i,n,r,a-1)},o=new nakamajs.LeaderboardRecordWriteRequest;o.best("allTime",i,{name:e}),t.client.send(o).then(function(a){var o=new nakamajs.LeaderboardRecordWriteRequest;o.best("weekly",i,{name:e}),t.client.send(o).then(function(e){null!=n&&n.call(r,!0)}).catch(s)}).catch(s)}},{key:"handleSession",value:function(e){t.client.connect(e).then(function(e){t.session=e,localStorage.setItem("nakamaToken",e.token)}).catch(function(e){})}},{key:"getDeviceUnique",value:function(){try{var e=localStorage.getItem("backend.deviceUnique");if(null!=e&&""!=e)return e;for(var t=(new Date).getTime(),i="",n=0;n<5;n++)i+=String.fromCharCode("A".charCodeAt(0)+Math.floor(26*Math.random()));return i+=t,localStorage.setItem("backend.deviceUnique",i),i}catch(e){return null}}},{key:"isLoggedIn",get:function(){return null!=t.session}}]),t}();e.BackendManager=t;var i=function e(){_classCallCheck(this,e)};e.LeaderboardInfo=i;var n=function e(){_classCallCheck(this,e),this.lists=[]};e.SingleLeaderboardInfo=n;var r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"parseFromRawData",value:function(t,i){var n=new e;return n.rank=i,n.name=t.metadata.name,n.ownerId=t.ownerId,n.score=parseInt(t.score),n.rawData=t,n}}]),e}();e.LeaderboardItem=r}(backend||(backend={}));var Util=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"assert",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"numberToName",value:function(e){return e<10?"0"+e.toString():e}},{key:"CreateTestBtn01",value:function(e,t,i,n){var r=PIXI.Texture.fromImage("assets/sprite/match/pause_btn.png"),a=new PIXI.Sprite(r);a.anchor.set(.5,.5),a.scale.set(.7),a.x=t.x,a.y=t.y,a.interactive=!0,a.buttonMode=!0,a.on("pointerdown",n);var s=new PIXI.TextStyle({fontFamily:"Arial",fontSize:14}),o=new PIXI.Text(i,s);o.x=t.x,o.y=t.y,o.anchor.set(.5,.5),e.addChild(a),e.addChild(o)}},{key:"CreateTestBtn02",value:function(e,t,i,n){var r=PIXI.Texture.fromImage("assets/sprite/match/pause_btn.png"),a=new PIXI.Sprite(r);a.anchor.set(.5,.5),a.scale.set(.7),a.x=t.x,a.y=t.y,a.interactive=!0,a.buttonMode=!0,a.on("pointerdown",n);var s=new PIXI.TextStyle({fontFamily:"Arial",fontSize:14}),o=new PIXI.Text(i,s);o.x=t.x,o.y=t.y,o.anchor.set(.5,.5),e.addChild(a),e.addChild(o)}},{key:"GetRandomArbitrary",value:function(e,t){return Math.random()*(t-e)+e}},{key:"GetRandomInt",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},{key:"Shuffle",value:function(e){for(var t,i,n=e.length;0!==n;)i=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[i],e[i]=t;return e}},{key:"isNullOrUndefined",value:function(e){return null==e||void 0==e}},{key:"Lerp",value:function(e,t,i){return(1-i)*e+i*t}},{key:"IsInbetween",value:function(e,t,i){return e>=t&&e<=i}},{key:"pixelRatio",get:function(){return window.devicePixelRatio}}]),e}(),Particle=function(e){function t(e,i,n,r){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n));return a.elapsed=0,a.currentTween=[],a.con=e,a.poolName=r,SceneManager.main.game.ticker.add(a.Update,a),a}return _inherits(t,PIXI.particles.Emitter),_createClass(t,[{key:"Reset",value:function(){this.emit=!1,this.cleanup(),this.isStart=!1,this.elapsed=0,this.CleanTween()}},{key:"Play",value:function(){this.isStart=!0,this.emit=!0,this.elapsed=0}},{key:"Pause",value:function(){this.isStart&&(this.isStart=!1)}},{key:"Unpause",value:function(){this.isStart||(this.isStart=!0)}},{key:"Stop",value:function(){this.Reset()}},{key:"Update",value:function(){this.isStart&&(this.elapsed+=.001*SceneManager.main.game.ticker.elapsedMS,this.emitterLifetime>=0&&this.elapsed>this.maxLifetime+.1&&(this.emit=!1,this.isStart=!1,null!=this.con&&this.parent.removeChild(this.con),Util.isNullOrUndefined(this.poolName)||this.Pool(this.poolName)),this.update(.001*SceneManager.main.game.ticker.elapsedMS))}},{key:"Pool",value:function(e){this.Stop(),this.CleanTween(),SceneManager.main.poolManager.Add(e,this)}},{key:"Destroy",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.emit=!1,setTimeout(function(){e.CleanTween(),e.con.destroy(),e.destroy(),SceneManager.main.game.renderer.plugins.sprite.sprites.length=0,SceneManager.main.game.ticker.remove(e.Update,e)},t,this)}},{key:"CleanTween",value:function(){this.currentTween.length>0&&(this.currentTween.forEach(function(e){e.stop(),e.clear(),e.remove()}),this.currentTween=[])}}],[{key:"NewParticle",value:function(e,i,n){var r=SceneManager.main.poolManager.Get(e);return Util.isNullOrUndefined(r)&&(r=new t(new PIXI.Container,i,n,e)),r.Reset(),r}}]),t}(),PoolManager=function(){function e(){_classCallCheck(this,e),this.poolsName=[],this.poolsName.push("yellow","red","pink","green","blue","black","orange","silver","yellow_nigiri","red_nigiri","pink_nigiri","green_nigiri","blue_nigiri","black_nigiri","orange_nigiri","silver_nigiri","mouse","cat_yellow","cat_red","cat_pink","cat_green","cat_blue","cat_black","cat_orange","cat_silver","particle_X2path","particle_X2arrive","particle_shoot","particle_coin_score","particle_smoke","particle_bubble","particle_sweat","particle_superball","particle_bubble_big","score_flyer"),this.pools={yellow:new Array,red:new Array,pink:new Array,green:new Array,blue:new Array,black:new Array,orange:new Array,silver:new Array,yellow_nigiri:new Array,red_nigiri:new Array,pink_nigiri:new Array,green_nigiri:new Array,blue_nigiri:new Array,black_nigiri:new Array,orange_nigiri:new Array,silver_nigiri:new Array,cat_yellow:new Array,cat_red:new Array,cat_pink:new Array,cat_green:new Array,cat_blue:new Array,cat_black:new Array,cat_orange:new Array,cat_silver:new Array,mouse:new Array,particle_X2path:new Array,particle_X2arrive:new Array,particle_shoot:new Array,particle_coin_score:new Array,particle_smoke:new Array,particle_bubble:new Array,particle_sweat:new Array,particle_superball:new Array,particle_bubble_big:new Array,particle_cat_swipe:new Array,particle_cat_swipe_combo:new Array,particle_cat_paw_burst:new Array,particle_cat_paw_burst_combo:new Array,particle_water_splash:new Array,score_flyer:new Array}}return _createClass(e,[{key:"CreatPool",value:function(e){Util.isNullOrUndefined(this.pools[e])&&(this.poolsName.push(e),this.pools[e]=[])}},{key:"PrintPool",value:function(){var e=this,t="";this.poolsName.forEach(function(i){var n=e.pools[i].length;t+=i+" item "+n+"\n"})}},{key:"Get",value:function(e){return Util.isNullOrUndefined(this.pools[e])?null:this.pools[e].pop()}},{key:"Add",value:function(e,t){var i=this.pools[e];null!=i&&i.indexOf(t)<0&&i.push(t)}}]),e}(),SaveData=function e(){_classCallCheck(this,e)},SaveLoadManager=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"GetHighScore",value:function(){}}],[{key:"CompleteTutorial",value:function(t){var i=e.GetSaveData(t);i.completedTutorial=!0,e.Save(t,i)}},{key:"SaveScore",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.GetSaveData(t);if(0==n){var a=+r.score;a>i&&(i=a)}r.score=i.toString(),e.Save(t,r)}},{key:"SaveAchievement",value:function(t,i){var n=e.GetSaveData(t);null==n.achievements[i.id]?n.achievements[i.id]={level:i.level,progress:i.progress}:(n.achievements[i.id].level=i.level,n.achievements[i.id].progress=i.progress),e.Save(t,n)}},{key:"SaveTotalBubbleMatched",value:function(t,i){var n=e.GetSaveData(t),r=i+(parseInt(n.totalBubbleMatched)||0);n.totalBubbleMatched=r.toString(),e.Save(t,n)}},{key:"SaveUpgrade",value:function(t,i){var n=e.GetSaveData(t);n.upgrades[i.id]=i.currentLevel,e.Save(t,n)}},{key:"AddCoin",value:function(t,i){var n=e.GetSaveData(t);n.coin=(n.coin||0)+(i||0),e.Save(t,n)}},{key:"DeductCoin",value:function(t,i){var n=e.GetSaveData(t);n.coin=Math.max((n.coin||0)-(i||0),0),e.Save(t,n)}},{key:"SaveTotalBounceMatches",value:function(t,i){var n=e.GetSaveData(t),r=i+(+n.totalBounceMatches||0);n.totalBounceMatches=r.toString(),e.Save(t,n)}},{key:"SetDisplayName",value:function(t,i){var n=e.GetSaveData(t);n.displayName=i,e.Save(t,n)}},{key:"SaveTotalBubbleMatchedPerColor",value:function(t,i,n){var r=e.GetSaveData(t);switch(i){case BubbleType.yellow:a=n+ +r.totalYellowMathced;r.totalYellowMathced=a.toString();break;case BubbleType.orange:a=n+ +r.totalOrangeMatched;r.totalOrangeMatched=a.toString();break;case BubbleType.blue:a=n+ +r.totalBlueMatched;r.totalBlueMatched=a.toString();break;case BubbleType.green:a=n+ +r.totalGreenMatched;r.totalGreenMatched=a.toString();break;case BubbleType.pink:a=n+ +r.totalPinkMatched;r.totalPinkMatched=a.toString();break;case BubbleType.red:a=n+ +r.totalRedMatched;r.totalRedMatched=a.toString();break;case BubbleType.black:var a=n+ +r.totalBlackMatched;r.totalBlackMatched=a.toString()}e.Save(t,r)}},{key:"SaveMinRequestTime",value:function(t,i){var n=e.GetSaveData(t),r=Math.min(i,+n.minRequestTime||1/0);n.minRequestTime=r,e.Save(t,n)}},{key:"SaveTotalRequestComplete",value:function(t,i){var n=e.GetSaveData(t),r=i+(+n.totalRequestComplete||0);n.totalRequestComplete=r.toString(),e.Save(t,n)}},{key:"SaveTotalMouseKnockout",value:function(t,i){var n=e.GetSaveData(t),r=i+(+n.totalMouseKnockout||0);n.totalMouseKnockout=r.toString(),e.Save(t,n)}},{key:"SaveTotalDisconnectedBubble",value:function(t,i){var n=e.GetSaveData(t),r=i+(+n.totalDisconnectedBubble||0);n.totalDisconnectedBubble=r.toString(),e.Save(t,n)}},{key:"SaveTotalCatSwipeTrigger",value:function(t,i){var n=e.GetSaveData(t),r=i+(+n.totalCatSwipeTrigger||0);n.totalCatSwipeTrigger=r.toString(),e.Save(t,n)}},{key:"GetAllData",value:function(){for(var t=[],i=localStorage.length,n=0;n<i;n++){var r=localStorage.key(n);t.push(e.GetSaveData(r))}return t.forEach(function(e){}),t}},{key:"Save",value:function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){}}},{key:"GetAchievementLevel",value:function(t,i){return null==e.GetSaveData(t).achievements[i]?0:e.GetSaveData(t).achievements[i].level}},{key:"GetAchievementProgress",value:function(t,i){return null==e.GetSaveData(t).achievements[i]?0:e.GetSaveData(t).achievements[i].progress}},{key:"GetSaveData",value:function(t){var i=localStorage.getItem(t);if(Util.isNullOrUndefined(i))return{name:t,score:void 0,avatar:void 0,shop:void 0,minRequestTime:1/0,totalBounceMatches:void 0,totalBubbleMatched:void 0,totalRequestComplete:void 0,totalMouseKnockout:void 0,totalDisconnectedBubble:void 0,totalCatSwipeTrigger:void 0,totalYellowMathced:void 0,totalOrangeMatched:void 0,totalBlueMatched:void 0,totalGreenMatched:void 0,totalPinkMatched:void 0,totalRedMatched:void 0,totalBlackMatched:void 0,coin:0,upgrades:{},achievements:{},completedTutorial:!1,displayName:""};var n=e.ParseSaveData(i);return n.name=t,n}},{key:"ParseSaveData",value:function(e){return JSON.parse(e)}}]),e}(),AdsSDKWrapper=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"Init",value:function(){}},{key:"ShowAd",value:function(){}},{key:"AddScore",value:function(e){}},{key:"CacheInterstitialAds",value:function(){}}]),e}(),Scene=function(e){function t(e,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._achievementManager=e,n._upgradeManager=i,null==PIXI.loader.resources["assets/bg.png"]&&(n.loadingBar=new PreloaderSlider,n.loadingBar.x=97.5,n.loadingBar.y=400,n.loadingBarText=new PIXI.Text,n.loadingBarText=new PIXI.Text("Loading..."),n.loadingBarText.anchor.set(.5),n.loadingBarText.x=270,n.loadingBarText.y=460,n.loadingBarText.style=new PIXI.TextStyle({fontSize:24,fill:"white",fontWeight:"bold"})),n.loadedFirstTime=!1,n}return _inherits(t,PIXI.Container),_createClass(t,[{key:"start",value:function(){SceneManager.main.setBgColor(0)}},{key:"stop",value:function(){}},{key:"update",value:function(){}},{key:"getTotalDescendants",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==e&&(e=this);for(var t=0,i=0;i<e.children.length;i++)t++,null!=e.children[i]&&null!=e.children[i].children&&(t+=this.getTotalDescendants(e.children[i]));return t}},{key:"loadAssets",value:function(e,t){for(var i=this,n=!1,r=[],a=0;a<e.length;a++){var s=null,o=null,u=null;"string"==typeof e[a]?(s=e[a],o=e[a]):(s=e[a].name,o=e[a].path),"mp3"==(u=o.substr(o.indexOf(".")+1))||"wav"==u?r.push(o):null==PIXI.loader.resources[s]&&("string"==typeof e[a]?PIXI.loader.add(o):PIXI.loader.add(e[a].name,o),n=!0)}var l=function(){SoundManager.loadSounds(r,function(){i.loadedFirstTime=!0,this.loadingBar.setValue(100),i.children.indexOf(i.loadingBar)>=0&&(i.removeChild(i.loadingBar),i.removeChild(i.loadingBarText)),null!=t&&t.call(i,PIXI.loader.resources)},function(e){this.loadingBar.setValue(e/2*100+50),this.loadingBarText.text="Loading... "+Math.round(e/2*100+50)+"%"},i)};(n||r.length>0)&&!this.loadedFirstTime&&null!=this.loadingBar&&(this.addChild(this.loadingBar),this.addChild(this.loadingBarText),this.loadingBar.setValue(0),PIXI.loader.onProgress.add(this.onProgress,this)),n?PIXI.loader.load(function(e,t){PIXI.loader.removeListener("onProgress",i.onProgress,i),l()}):r.length>0?l():(this.loadedFirstTime=!0,this.children.indexOf(this.loadingBar)>=0&&(this.removeChild(this.loadingBar),this.removeChild(this.loadingBarText)),t.call(i,PIXI.loader.resources))}},{key:"onProgress",value:function(e){this.loadingBar.setValue(e.progress/2),this.loadingBarText.text="Loading... "+Math.round(e.progress/2)+"%"}},{key:"OnBlur",value:function(){}},{key:"OnFocus",value:function(){}},{key:"achievementManager",get:function(){return this._achievementManager}},{key:"upgradeManager",get:function(){return this._upgradeManager}}]),t}(),PreloaderScene=function(e){function t(e,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.loadAssets([{name:"mini-wakuwaku",path:"assets/fonts/wkwk.fnt"},"assets/square.jpg","assets/game/gui_top_bg.png","assets/game/cat_hand_right.png","assets/game/btn_pause.png","assets/square.jpg","assets/game/gui_score_bg.png","assets/bubble.png","assets/bubbles/bubble_bat.png","assets/bubbles/bubble_brain.png","assets/bubbles/bubble_ghost.png","assets/bubbles/bubble_heart.png","assets/bubbles/bubble_pumpkin.png","assets/bubbles/bubble_slime.png","assets/bubbles/bubble_spirit.png","assets/nigiri/food_ghostjuice.png","assets/nigiri/food_hambrainger.png","assets/nigiri/food_heartsteak.png","assets/nigiri/food_poorbat.png","assets/nigiri/food_pumpkincandy.png","assets/nigiri/food_slimewine.png","assets/nigiri/food_spiritcone.png"],function(){SceneManager.goToScene("mainMenu")}),n}return _inherits(t,Scene),_createClass(t,[{key:"start",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"start",this).call(this)}}]),t}(),GameScene=function(e){function t(e,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.difficulty=GameDifficulty.easy,n.CreateBackground(),n.CreatDifficultyPopup(),n.gameManager=new GameManager(n),n.fps=n.addChild(new FpsUtil(new PIXI.Point(GameSetting.gameWidth-70,GameSetting.gameHeight-30))),n}return _inherits(t,Scene),_createClass(t,[{key:"start",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"start",this).call(this)}},{key:"update",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),this.fps.Update(),this.gameManager.Update()}},{key:"CreateBackground",value:function(){var e=this,t=new PIXI.Sprite(PIXI.loader.resources["assets/game/bg.png"].texture);t.width=SceneManager.main.gameWidth,t.height=SceneManager.main.gameHeight,t.displayGroup=new PIXI.display.DisplayGroup(-10,!1),this.bg=this.addChild(t);var i=PIXI.Sprite.fromImage("assets/game/mask_top.png");i.displayGroup=new PIXI.display.DisplayGroup(469,!1),this.addChild(i);var n=new PIXI.Sprite(PIXI.loader.resources["assets/game/gui_top_bg.png"].texture);n.displayGroup=new PIXI.display.DisplayGroup(490,!1),this.addChild(n);var r=new PIXI.Sprite(PIXI.loader.resources["assets/game/dec_desk.png"].texture);r.anchor.set(.5,1),r.position.set(SceneManager.main.gameWidth/2,960),r.displayGroup=new PIXI.display.DisplayGroup(150,!1),this.addChild(r);this.backBtn=new DuelBrightnessButton(PIXI.loader.resources["assets/game/btn_pause.png"].texture,.25,-.25),this.backBtn.position.set(490,40),this.backBtn.setOnClick(function(){e.gameManager.pauseUI.IsShowing?e.gameManager.pauseUI.HidePauseUi(function(){e.Pause(!1)}):(e.Pause(!0),e.gameManager.pauseUI.ShowPauseUi())},this),n.addChild(this.backBtn)}},{key:"Pause",value:function(e){0==e&&this.gameManager.pauseUI.IsShowing?this.gameManager.isPause=!0:this.gameManager.isPause=e}},{key:"Resume",value:function(){this.gameManager.isPause=!1}},{key:"PauseButtonVisible",value:function(e){this.backBtn.visible=e}},{key:"CreatDifficultyPopup",value:function(){var e=this,t=new PIXI.Container,i=new PIXI.Graphics;i.beginFill(15314279,1),i.drawRoundedRect(SceneManager.main.gameWidth/2-150,SceneManager.main.gameHeight/2-200,300,400,24),i.endFill(),t.addChild(i);var n=new RoundedRectBtn(SceneManager.main.gameWidth/2,440,200,60,24,12958385);n.setOverlayText("Back"),n.setOnClick(function(){e.difficultyContainer.visible=!1,e.backPopupContainer.visible=!1},this),t.addChild(n),(n=new RoundedRectBtn(SceneManager.main.gameWidth/2,500,200,60,24,7449653)).setOverlayText("Easy"),n.setOnClick(function(){e.difficultyContainer.visible=!1,e.backPopupContainer.visible=!1,e.gameManager.StartNewGame(GameDifficulty.easy)},this),t.addChild(n),(n=new RoundedRectBtn(SceneManager.main.gameWidth/2,560,200,60,24,16108296)).setOverlayText("Medium"),n.setOnClick(function(){e.difficultyContainer.visible=!1,e.backPopupContainer.visible=!1,e.gameManager.StartNewGame(GameDifficulty.medium)},this),t.addChild(n),(n=new RoundedRectBtn(SceneManager.main.gameWidth/2,620,200,60,24,15680310)).setOverlayText("Hard"),n.setOnClick(function(){e.difficultyContainer.visible=!1,e.backPopupContainer.visible=!1,e.gameManager.StartNewGame(GameDifficulty.hard)},this),t.addChild(n),t.displayGroup=new PIXI.display.DisplayGroup(0,!1),t.visible=!1,this.difficultyContainer=this.addChild(t)}},{key:"Reset",value:function(){this.difficultyContainer.visible=!1,this.gameManager.pauseUI.HidePauseUi()}},{key:"OnBlur",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"OnBlur",this).call(this),this.gameManager.pauseUI.IsShowing||this.gameManager.isGameOver||!SaveLoadManager.GetSaveData("Player").completedTutorial||(this.Pause(!0),this.gameManager.pauseUI.ShowPauseUi())}},{key:"OnFocus",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"OnFocus",this).call(this),this.gameManager.pauseUI.IsShowing&&!this.gameManager.isGameOver&&SaveLoadManager.GetSaveData("Player").completedTutorial&&this.gameManager.pauseUI.HidePauseUi(function(){e.Pause(!1)}),null!=SceneManager&&(SceneManager.main.currentScene.displayGroup=new PIXI.DisplayGroup(0,!1))}}]),t}(),MainMenu=function(e){function t(e,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return backend.BackendManager.initialize(function(){},n),n.loadAssets([{name:"mini-wakuwaku",path:"assets/fonts/wkwk.fnt"},{name:"mini-wakuwaku-combo",path:"assets/fonts/combo_font.fnt"},{name:"mini-wakuwaku-combo-multiplier",path:"assets/fonts/BitmapFont_MultipliedScore.fnt"},{name:"mini-wakuwaku-request",path:"assets/fonts/BitmapFont_RequestCounter.fnt"},"assets/endgame/SFX_Stamp.wav","assets/game/SFX_BubbleBounce.wav","assets/game/SFX_BubbleImpact.wav","assets/game/SFX_BubbleMatch.wav","assets/game/SFX_ButtonPress.wav","assets/game/SFX_CatSwipeHit.wav","assets/game/SFX_CatSwipeTrigger.wav","assets/game/SFX_FoodImpact.wav","assets/game/SFX_GameOver.wav","assets/game/SFX_KnifeHit.wav","assets/game/SFX_PreCatSwipe_01.wav","assets/game/SFX_PreCatSwipe_02.wav","assets/game/SFX_PreGameOver.wav","assets/game/SFX_RewardPowerUp.wav","assets/game/SFX_SwapBubble.wav","assets/sfx/achievement_accept_scrampunk.mp3","assets/sfx/achievement_pop_fins.wav","assets/sfx/bgm.mp3","assets/sfx/cat_happy01_steffcaffrey.mp3","assets/sfx/cat_happy02_aminut.wav","assets/sfx/cat_order01_tuberatanka.mp3","assets/sfx/cat_order02_department64.wav","assets/sfx/cat_order03_nekoninja.wav","assets/sfx/grabwall.wav","assets/sfx/rat_alert_willy.wav","assets/sfx/rat_gethit_psychentist.mp3","assets/sfx/rat_laugh_zyrytsounds.wav","assets/sfx/rat_reachtop_cabled-mess.wav","assets/sfx/smash.wav","assets/tutorial/tutorial_ok_btn.png","assets/tutorial/tutorial_play_btn.png","assets/tutorial/tutorial_confirm_btn.png","assets/tutorial/btn_speechballoon_l.png","assets/tutorial/btn_speechballoon_m.png","assets/tutorial/btn_speechballoon_s.png","assets/tutorial/caret.png","assets/tutorial/head_chef.png","assets/tutorial/check_green.png","assets/tutorial/textbox_02.png","assets/tutorial/textbox_01.png","assets/tutorial/textinput_bg.png","assets/bubble.png","assets/bubbles/bubble_catswipe.png","assets/bubbles/bub_chick.png","assets/bubbles/bub_ikura.png","assets/bubbles/bub_mackerel.png","assets/bubbles/bub_octopus.png","assets/bubbles/bub_salmon.png","assets/bubbles/bub_seaweed.png","assets/bubbles/bub_soysauce.png","assets/bubbles/bub_tuna.png","assets/bubbles/icon_catswipe.png","assets/cats/cat_special_hammer.png","assets/cats/cat_special_knife.png","assets/cats/cat_01.png","assets/cats/cat_02.png","assets/cats/cat_03.png","assets/cats/cat_04.png","assets/cats/cat_05.png","assets/cats/cat_06.png","assets/achievements/archievement_bg.png","assets/achievements/archievement_header.png","assets/achievements/bar_bg.png","assets/achievements/bar_green.png","assets/achievements/bronze_badge.png","assets/achievements/bar_yellow.png","assets/achievements/bronze_badge_label.png","assets/achievements/claim_btn.png","assets/achievements/claim_btn2.png","assets/achievements/claim_btn3.png","assets/achievements/details_label.png","assets/achievements/disable_badge.png","assets/achievements/gold_badge.png","assets/achievements/gold_badge_label.png","assets/achievements/silver_badge.png","assets/achievements/silver_badge_label.png","assets/achievements/sunburst.png","assets/achievements/upgrade_list_bg.png","assets/endgame/btn_play.png","assets/endgame/btn_menu.png","assets/endgame/curtain_left.png","assets/endgame/curtain_right.png","assets/endgame/gui_checkbox.png","assets/endgame/icon_check.png","assets/endgame/stamp_newhighscore.png","assets/endgame/summaryboard.png","assets/game/btn_pause.png","assets/game/bg.png","assets/game/btn_mainmenu_full.png","assets/game/btn_resume.png","assets/game/btn_restart_full.png","assets/game/cat_hand_right.png","assets/game/check_green.png","assets/game/combo_bg.png","assets/game/combo.png","assets/game/gui_top_bg.png","assets/game/gameover_offset.png","assets/game/icon_heart.png","assets/game/mouse.png","assets/game/mouse_fall.png","assets/game/mouse_flip.png","assets/game/objective_label.png","assets/game/gui_pause_bg.png","assets/game/mouse_warning.png","assets/game/popup_close_btn.png","assets/game/request_balloon.png","assets/game/gui_score_bg.png","assets/game/gui_coin_bg.png","assets/game/warning_gradient.png","assets/game/WhiteRectangle.png","assets/game/215018__taira-komori__flinging.mp3","assets/game/taira-komori__shuriken3_mix02.wav","assets/game/dec_desk.png","assets/main_menu/btn_play.png","assets/main_menu/btn_credits.png","assets/main_menu/text_bitegginc.png","assets/main_menu/effect_icon.png","assets/main_menu/effect_mute_icon.png","assets/main_menu/info_icon.png","assets/main_menu/music_mute_icon.png","assets/main_menu/gui_fullscreen_enable.png","assets/main_menu/btn_shop.png","assets/main_menu/btn_star.png","assets/main_menu/title.png","assets/nigiri/request/ikura.png","assets/nigiri/request/maguro.png","assets/nigiri/request/saba.png","assets/nigiri/request/sake.png","assets/nigiri/request/tako.png","assets/nigiri/request/tamago.png","assets/nigiri/request/uni.png","assets/nigiri/request/wakame.png","assets/nigiri/ikura.png","assets/nigiri/maguro.png","assets/nigiri/saba.png","assets/nigiri/sake.png","assets/nigiri/tako.png","assets/nigiri/tamago.png","assets/nigiri/uni.png","assets/nigiri/wakame.png","assets/square.jpg","assets/sfx/bubble.mp3","assets/leaderboard/All-Time.png","assets/leaderboard/All-Time-active.png","assets/leaderboard/caution-sign.png","assets/leaderboard/mask.png","assets/leaderboard/popup.png","assets/leaderboard/scroll_bar.png","assets/leaderboard/separator.png","assets/leaderboard/Try-again.png","assets/leaderboard/Weekly.png","assets/leaderboard/Weekly-active.png","assets/upgrades/bar_upgrade_gray.png","assets/upgrades/bar_upgrade_green.png","assets/upgrades/bar_upgrade_yellow.png","assets/upgrades/claim_btn_1.png","assets/upgrades/claim_btn_2.png","assets/upgrades/Upgrade_bg.png","assets/upgrades/upgrade_list_bg.png","assets/upgrades/icon/customer-service.png","assets/upgrades/icon/focus.png","assets/upgrades/icon/material-quality.png","assets/upgrades/icon/mouse-hunter.png","assets/upgrades/icon/overtime.png","assets/upgrades/icon/pleasure.png","assets/upgrades/coin.png","assets/particles/FX_Paw_left.png","assets/particles/FX_Paw_right.png","assets/particles/fever_left.json","assets/particles/fever_right.json","assets/particles/light_left.png","assets/particles/light_right.png","assets/particles/FX_PawFire_Bottom.json","assets/particles/FX_PawFire_Right.json","assets/particles/FX_PawFire_Top.json","assets/particles/FX_PawFire_Left.json","assets/particles/bubble64x64.png","assets/particles/cat_eye/FX_GradientWhite_Thick.png","assets/particles/diamond.png","assets/particles/FX_Claw_Single.png","assets/particles/FX_Claw_Double.png","assets/particles/FX_Light.png","assets/particles/FX_OuterCircle.png","assets/particles/FX_Paw.png","assets/particles/FX_SpeedLine.png","assets/particles/FX_WhiteCircle.png","assets/particles/glow44x44.png","assets/particles/ring64x64.png","assets/particles/smok.png","assets/particles/sweat_rev2.png","assets/particles/big bubble.json","assets/particles/bubble once.json","assets/particles/coin splash.json","assets/particles/FX_BubbleImpact.json","assets/particles/FX_CatPawBurst_Purple.json","assets/particles/FX_CatPawBurst_Purple_combo.json","assets/particles/FX_ParticleBurst_Yellow.json","assets/particles/FX_ParticleBurst_Yellow_combo.json","assets/particles/minispark trail.json","assets/particles/milky way.json","assets/particles/shoot path.json","assets/particles/smoke.json","assets/particles/sweat.json","assets/particles/sunny.json","assets/particles/super ball.json","assets/particles/FX_achievement_sparkle.png","assets/particles/FX_achievement_sparkle.json","assets/particles/FX_Pop_upStar.json","assets/particles/FX_Pop_upStar02.json","assets/particles/FX_star.png","assets/tutorial/tutorial_guide_01_01.png","assets/tutorial/tutorial_guide_01_02.png","assets/tutorial/tutorial_guide_02.png","assets/tutorial/tutorial_guide_03.png","assets/tutorial/tutorial_guide_04_01.png","assets/tutorial/tutorial_guide_04_02.png","assets/tutorial/text field/0.png","assets/tutorial/text field/1.png","assets/tutorial/text field/2.png","assets/tutorial/text field/3.png","assets/tutorial/text field/4.png","assets/tutorial/text field/5.png","assets/tutorial/text field/6.png","assets/tutorial/text field/7.png","assets/tutorial/text field/8.png","assets/tutorial/text field/9.png","assets/tutorial/text field/a.png","assets/tutorial/text field/Aa.png","assets/tutorial/text field/b.png","assets/tutorial/text field/Bb.png","assets/tutorial/text field/c.png","assets/tutorial/text field/Cc.png","assets/tutorial/text field/d.png","assets/tutorial/text field/Dd.png","assets/tutorial/text field/e.png","assets/tutorial/text field/Ee.png","assets/tutorial/text field/f.png","assets/tutorial/text field/Ff.png","assets/tutorial/text field/g.png","assets/tutorial/text field/Gg.png","assets/tutorial/text field/h.png","assets/tutorial/text field/Hh.png","assets/tutorial/text field/i.png","assets/tutorial/text field/Ii.png","assets/tutorial/text field/j.png","assets/tutorial/text field/Jj.png","assets/tutorial/text field/k.png","assets/tutorial/text field/Kk.png","assets/tutorial/text field/l.png","assets/tutorial/text field/Ll.png","assets/tutorial/text field/m.png","assets/tutorial/text field/Mm.png","assets/tutorial/text field/n.png","assets/tutorial/text field/Nn.png","assets/tutorial/text field/o.png","assets/tutorial/text field/Oo.png","assets/tutorial/text field/p.png","assets/tutorial/text field/Pp.png","assets/tutorial/text field/q.png","assets/tutorial/text field/Qq.png","assets/tutorial/text field/r.png","assets/tutorial/text field/Rr.png","assets/tutorial/text field/s.png","assets/tutorial/text field/Ss.png","assets/tutorial/text field/t.png","assets/tutorial/text field/Tt.png","assets/tutorial/text field/u.png","assets/tutorial/text field/Uu.png","assets/tutorial/text field/v.png","assets/tutorial/text field/Vv.png","assets/tutorial/text field/x.png","assets/tutorial/text field/Xx.png","assets/tutorial/text field/y.png","assets/tutorial/text field/Yy.png","assets/tutorial/text field/z.png","assets/tutorial/text field/Zz.png","assets/tutorial/text field/keyboard_bg.png","assets/tutorial/text field/shift1.png","assets/tutorial/text field/shift2.png","assets/tutorial/text field/shift3.png","assets/tutorial/text field/spacebar.png","assets/tutorial/text field/backspace.png","assets/tutorial/text field/dash.png","assets/tutorial/text field/dot.png","assets/tutorial/text field/done.png","assets/spines/bubble_intro.json","assets/spines/bubble_intro.atlas","assets/spines/bubble_intro.png","assets/spines/hammer.atlas","assets/spines/hammer.json","assets/spines/hammer.png"],function(){GameAnalytics("addDesignEvent","gameplay:mainmenu"),this.CreateBgSpine(),this.CreateMenuUI(),this.CreateLeaderboard(),this.CreateCredit(),this.CreateAchievements(),this.shop=new ShopUI(this),SoundManager.isPlayingBgm||SoundManager.playBgm("assets/sfx/bgm.mp3",1)}),n}return _inherits(t,Scene),_createClass(t,[{key:"start",value:function(){SoundManager.isPlayingBgm||null==this.menuButtonsContainer||SoundManager.playBgm("assets/sfx/bgm.mp3",1),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"start",this).call(this),null!=this.bgm&&(SoundManager.isMutingBgm?this.bgm.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/music_mute_icon.png"):this.bgm.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/music_icon.png"),SoundManager.isMutingSfx?this.sfx.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/effect_mute_icon.png"):this.sfx.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/effect_icon.png"))}},{key:"update",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),null!=this.leaderboard&&this.leaderboard.update(),null!=this.achievementsUI&&this.achievementsUI.update(),null!=this.shop&&this.shop.update()}},{key:"OnClickStartGame",value:function(){this.StartGame(GameDifficulty.easy)}},{key:"StartGame",value:function(e){SceneManager.goToScene("game").gameManager.StartNewGame(e)}},{key:"CreateMenuUI",value:function(){var e=this,t=new PIXI.Container;this.menuButtonsContainer=new PIXI.Container;var i=PIXI.Sprite.fromImage("assets/main_menu/text_bitegginc.png");i.anchor.set(.5,1),i.position.set(270,945),t.addChild(i);var n=new DuelBrightnessButton("assets/main_menu/gui_fullscreen_enable.png",.25,-.25);n.position.set(460,30),n.setOnClick(function(){document.webkitFullscreenElement||document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?document.webkitExitFullscreen?document.webkitExitFullscreen():document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen()}),t.addChild(n),this.menuButtonsContainer.addChild(n);var r=PIXI.Sprite.fromImage("assets/main_menu/title.png");r.scale.set(.95,.95),r.position.set((540-r.width)/2,100),t.addChild(r);var a=new DuelBrightnessButton("assets/main_menu/btn_play.png",.25,-.25);a.position.set(269,730),a.scale.set(.85,.85),a.setOnClick(this.OnClickStartGame,this),this.menuButtonsContainer.addChild(a);var s=new DuelBrightnessButton("assets/main_menu/btn_trophy_icon.png",.25,-.25);s.setOnClick(this.OnLeaderboardClick,this),s.position.set(371,840),s.scale.set(.85,.85),this.menuButtonsContainer.addChild(s);var o=new DuelBrightnessButton("assets/main_menu/btn_star.png",.25,-.25);o.setOnClick(this.OnAchievementsClick,this),o.position.set(269,840),o.scale.set(.85,.85),this.menuButtonsContainer.addChild(o);var u=new DuelBrightnessButton("assets/main_menu/btn_shop.png",.25,-.25);u.position.set(167,840),u.scale.set(.85,.85),u.setOnClick(function(){this.shop.show(),this.addChild(this.shop),this.shop.refresh()},this),this.menuButtonsContainer.addChild(u),this.bgm=new DuelBrightnessButton("assets/main_menu/music_icon.png",.25,-.25),this.bgm.position.set(510,85),this.bgm.setOnClick(function(){SoundManager.isMutingBgm=!SoundManager.isMutingBgm,SoundManager.isMutingBgm?e.bgm.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/music_mute_icon.png"):e.bgm.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/music_icon.png")},this),t.addChild(this.bgm),this.menuButtonsContainer.addChild(this.bgm),this.sfx=new DuelBrightnessButton("assets/main_menu/effect_icon.png",.25,-.25),this.sfx.position.set(510,130),t.addChild(this.sfx),this.sfx.setOnClick(function(){SoundManager.isMutingSfx=!SoundManager.isMutingSfx,SoundManager.isMutingSfx?e.sfx.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/effect_mute_icon.png"):e.sfx.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/effect_icon.png")},this),this.menuButtonsContainer.addChild(this.sfx),this.menuContainer=this.addChild(t),this.menuContainer.addChild(this.menuButtonsContainer);var l=new DuelBrightnessButton("assets/main_menu/info_icon.png",.25,-.25);l.setOnClick(this.OnCreditClick,this),l.position.set(510,180),t.addChild(l),this.menuButtonsContainer.addChild(l);var h=new DuelBrightnessButton("assets/main_menu/cog.png",.25,-.25);h.position.set(510,30),this.menuButtonsContainer.addChild(h),h.setOnClick(function(){this.sfx.visible=this.bgm.visible=l.visible=!this.sfx.visible},this),this.sfx.visible=this.bgm.visible=l.visible=!1,this.menuContainer.visible=!1,this.introTween=new PIXI.tween.Tween(this.menuContainer,SceneManager.main.tween),this.introTween.delay=5200,this.introTween.time=150,this.introTween.easing=PIXI.tween.Easing.outQuad(),this.introTween.from({alpha:0}),this.introTween.to({alpha:1}),this.introTween.once("start",function(){t.visible=!0,t.alpha=0}),this.introTween.start()}},{key:"CreateLeaderboard",value:function(){this.leaderboard=new LeaderboardUI(this),this.addChild(this.leaderboard)}},{key:"CreateCredit",value:function(){var e=this;this.creditContainer=new PIXI.Container;var t=new PIXI.Container,i=new DuelBrightnessButton("assets/game/WhiteRectangle.png",0,0);i.sprite.tint=0,i.sprite.alpha=.66,i.position.set(270,480),i.width=540,i.height=960,i.displayGroup=new PIXI.DisplayGroup(15,!1),t.addChild(i);var n=new PIXI.extras.BitmapText("DEVELOPED BY",{font:"15px mini-wakuwaku-maru",align:"center",tint:16777215});n.anchor=new PIXI.Point(.5,.5),n.position.set(270,45),n.displayGroup=new PIXI.DisplayGroup(16,!1),t.addChild(n),(n=new PIXI.extras.BitmapText("BIT EGG, INC.",{font:"32px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,75),t.addChild(n),(n=new PIXI.extras.BitmapText("GAME DESIGN",{font:"14px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,125),t.addChild(n),(n=new PIXI.extras.BitmapText("Jirawat Srirak",{font:"20px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,150),t.addChild(n),(n=new PIXI.extras.BitmapText("ART",{font:"14px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,195),t.addChild(n),(n=new PIXI.extras.BitmapText("Rossamon Jan",{font:"20px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,220),t.addChild(n),(n=new PIXI.extras.BitmapText("Jirawat Srirak",{font:"20px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,245),t.addChild(n),(n=new PIXI.extras.BitmapText("PROGRAMMING",{font:"14px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,290),t.addChild(n),(n=new PIXI.extras.BitmapText("Natachanan L.",{font:"20px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,315),t.addChild(n),(n=new PIXI.extras.BitmapText("Bunnasorn Boonyuang",{font:"20px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,340),t.addChild(n),(n=new PIXI.extras.BitmapText("Nipitpon Wongsuparatkul",{font:"20px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,367),t.addChild(n),(n=new PIXI.extras.BitmapText("OTHER CONTRIBUTIONS",{font:"14px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,420),t.addChild(n),(n=new PIXI.extras.BitmapText("Richmond Chaisiri",{font:"20px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,447),t.addChild(n),(n=new PIXI.extras.BitmapText("Stephen Liu",{font:"20px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,474),t.addChild(n),(n=new PIXI.extras.BitmapText("Parit Kunlamart",{font:"20px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,501),t.addChild(n),(n=new PIXI.extras.BitmapText("Thanawarat Krueasri",{font:"20px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,528),t.addChild(n),(n=new PIXI.extras.BitmapText("MUSIC AND SOUND EFFECTS",{font:"20px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,590),t.addChild(n),(n=new PIXI.extras.BitmapText("MONKEYS SPINNING MONKEYS KEVIN MACLEOD (incompetech.com)",{font:"13px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,640),t.addChild(n),(n=new PIXI.extras.BitmapText("Licensed under Creative Commons: By Attribution 3.0 License",{font:"12px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,655),t.addChild(n),(n=new PIXI.extras.BitmapText("http://creativecommons.org/licenses/by/3.0/",{font:"12px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,670),t.addChild(n),(n=new PIXI.extras.BitmapText("TAIRA-KOMORI'S JAPANESE FREE SOUND EFFECTS",{font:"15px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,710),t.addChild(n),(n=new PIXI.extras.BitmapText("http://taira-komori.jpn.org/freesounden.html",{font:"12px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,725),t.addChild(n),(n=new PIXI.extras.BitmapText("CASUAL GAME SOUNDS",{font:"15px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,770),t.addChild(n),(n=new PIXI.extras.BitmapText("DUSTYROOMGAMES",{font:"12px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,785),t.addChild(n),(n=new PIXI.extras.BitmapText("FREESOUND.ORG",{font:"15px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,830),t.addChild(n),(n=new PIXI.extras.BitmapText("https://freesound.org/people/Scrampunk",{font:"12px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,845),t.addChild(n),(n=new PIXI.extras.BitmapText("https://freesound.org/people/psychentist",{font:"12px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,860),t.addChild(n),(n=new PIXI.extras.BitmapText("https://freesound.org/people/ZyryTSounds",{font:"12px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,875),t.addChild(n),(n=new PIXI.extras.BitmapText("https://freesound.org/people/MWLANDI",{font:"12px mini-wakuwaku-maru",align:"center",tint:16777215})).anchor=new PIXI.Point(.5,.5),n.displayGroup=new PIXI.DisplayGroup(16,!1),n.position.set(270,890),t.addChild(n),this.creditContainer=this.addChild(t),this.creditContainer.visible=!1,i.setOnClick(function(){null!=e.creditContainer&&(e.creditContainer.visible=!1,null!=e.menuButtonsContainer&&(e.menuButtonsContainer.visible=!0))})}},{key:"OnCreditClick",value:function(){null!=this.creditContainer&&(this.creditContainer.visible=!0,null!=this.menuButtonsContainer&&(this.menuButtonsContainer.visible=!1))}},{key:"OnLeaderboardClick",value:function(){null!=this.leaderboard&&this.leaderboard.show()}},{key:"OnAchievementsClick",value:function(){null!=this.achievementsUI&&(this.achievementsUI.show(),this.addChild(this.achievementsUI),this.achievementsUI.refresh())}},{key:"CreateAchievements",value:function(){this.achievementsUI=new AchievementsUI(this)}},{key:"CreateBgSpine",value:function(){var e=PIXI.loader.resources["assets/spines/bubble_intro.json"].spineData,t=new PIXI.spine.Spine(e);t.skeleton.setToSetupPose(),t.autoUpdate=!0,this.bgSpine=t,this.addChild(t),this.bgSpine.state.setAnimation(0,"intro",!1),t.position.set(SceneManager.main.gameWidth/2,SceneManager.main.gameHeight);var i=this;SceneManager.main.game.view.addEventListener("pointerdown",function(e){i.introTween.stop(),i.menuContainer.visible=!0,i.menuContainer.alpha=1,t.update(100)},{once:!0})}}]),t}(),SceneManager=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"goToScene",value:function(t){return"function"==typeof e.scenes[t]&&(e.scenes[t]=new e.scenes[t](e.main.achievementManager,e.main.upgradeManager)),e.main.setScene(e.scenes[t]),e.scenes[t]}}]),e}();SceneManager.scenes={preloader:PreloaderScene,game:GameScene,mainMenu:MainMenu};var TextOverlayContainer=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,PIXI.Container),_createClass(t,[{key:"setOverlayText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null!=this.overlayText?(this.overlayText.text=e,null!=t&&(this.overlayText.style=new PIXI.TextStyle(t))):(this.overlayText=new PIXI.Text(e,t),this.addChild(this.overlayText),this.overlayText.anchor.set(.5)),null!=i&&(this.overlayText.scale.set(i.scale.x,i.scale.y),this.overlayText.position.set(i.position.x,i.position.y))}},{key:"setOverlayBitmapText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null!=this.overlayBitmapText?(this.overlayBitmapText.text=e,null!=t&&(this.overlayBitmapText.align=t.align,this.overlayBitmapText.font=t.font,this.overlayBitmapText.tint=t.tint)):(this.overlayBitmapText=new PIXI.extras.BitmapText(e,t),this.addChild(this.overlayBitmapText),"left"==t.align?this.overlayBitmapText.anchor=new PIXI.Point(0,.5):"right"==t.align?this.overlayBitmapText.anchor=new PIXI.Point(1,.5):this.overlayBitmapText.anchor=new PIXI.Point(.5,.5)),null!=i&&(this.overlayBitmapText.scale.set(i.scale.x,i.scale.y),this.overlayBitmapText.position.set(i.position.x,i.position.y))}}]),t}(),DuelButton=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,t);var i=null;null!=e&&(i="string"==typeof e?PIXI.Sprite.fromImage(e):new PIXI.Sprite(e));var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return null!=i&&(n._sprite=i,n.addChild(n._sprite),n._sprite.anchor.set(.5)),n.buttonMode=!0,n.interactive=!0,n.on("pointerdown",n.onPointerDown,n).on("pointerup",n.onPointerUp,n).on("pointerover",n.onPointerOver,n).on("pointerout",n.onPointerOut,n).on("pointermove",n.onPointerMove,n),n.isBeingPressed=!1,n._enabled=!0,n}return _inherits(t,TextOverlayContainer),_createClass(t,[{key:"setOnClick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._onClick=e,this.onClickContext=t}},{key:"onPointerOver",value:function(){}},{key:"onPointerOut",value:function(){this.isBeingPressed=!1}},{key:"onPointerDown",value:function(e){this.enabled&&(SoundManager.playSound("assets/game/SFX_ButtonPress.wav"),this.isBeingPressed=!0,this.lastMousePosition=e.data.global.clone())}},{key:"onPointerUp",value:function(){this.isBeingPressed&&null!=this._onClick&&this._onClick.call(this.onClickContext),this.isBeingPressed=!1}},{key:"onPointerMove",value:function(e){Math.abs(this.lastMousePosition.x-e.data.global.x)<20*Util.pixelRatio&&Math.abs(this.lastMousePosition.y-e.data.global.y)<20*Util.pixelRatio||(this.isBeingPressed=!1)}},{key:"sprite",get:function(){return this._sprite}},{key:"enabled",get:function(){return this._enabled},set:function(e){this.buttonMode=this._enabled=e}}]),t}(),DuelBrightnessButton=function(e){function t(e,i,n){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.over=i,r.down=n,r}return _inherits(t,DuelButton),_createClass(t,[{key:"onPointerOver",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onPointerOver",this).call(this),this.enabled&&(this.filters=[this.createFilter(this.over)])}},{key:"onPointerOut",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onPointerOut",this).call(this),this.enabled&&(this.filters=[this.createFilter(0)])}},{key:"onPointerDown",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onPointerDown",this).call(this,e),this.enabled&&(this.previousFilter=this.filters,this.filters=[this.createFilter(this.down)])}},{key:"onPointerUp",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onPointerUp",this).call(this),this.enabled&&(this.filters=this.previousFilter)}},{key:"onPointerMove",value:function(e){this.isBeingPressed&&(_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onPointerMove",this).call(this,e),this.isBeingPressed||(this.filters=[this.createFilter(0)]))}},{key:"createFilter",value:function(e){var t=[1,0,0,e,0,0,1,0,e,0,0,0,1,e,0,0,0,0,1,0],i=new PIXI.filters.ColorMatrixFilter;return i.matrix=t,i}},{key:"enabled",get:function(){return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enabled",this)},set:function(e){this.sprite.alpha=e?1:.5,_set(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enabled",e,this)}}]),t}(),LeaderboardItem=function(e){function t(e,i,n){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.rankText=new PIXI.extras.BitmapText(e.toString(),{font:"18px mini-wakuwaku-maru",align:"left",tint:16777215}),r.rankText.anchor=new PIXI.Point(0,.5),r.rankText.x=-180,r.addChild(r.rankText),r.nameText=new PIXI.extras.BitmapText(i,{font:"18px mini-wakuwaku-maru",align:"left",tint:16777215}),r.nameText.anchor=new PIXI.Point(0,.5),r.nameText.x=-120,r.addChild(r.nameText),r.scoreText=new PIXI.extras.BitmapText(n.toString(),{font:"18px mini-wakuwaku-maru",align:"right",tint:16777215}),r.scoreText.anchor=new PIXI.Point(1,.5),r.scoreText.x=170,r.addChild(r.scoreText),r.set(e,i,n),r}return _inherits(t,PIXI.Sprite),_createClass(t,[{key:"clear",value:function(){this.rankText.text="",this.nameText.text="",this.scoreText.text=""}},{key:"set",value:function(e,t,i){e>=1e3||isNaN(e)?this.rankText.text="500+":this.rankText.text=e>0?e.toLocaleString(void 0,{useGrouping:!0}):"500+",this.nameText.text=t,this.scoreText.text=i>0?i.toLocaleString(void 0,{useGrouping:!0}):"",this.rankText.tint=this.nameText.tint=this.scoreText.tint=1==e?15778099:2==e?13421503:3==e?16101737:10000536}}]),t}(),AchievementItem=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"assets/achievements/upgrade_list_bg.png",0,0));return i.sprite.anchor.set(0,0),i.achievement=e,i.achievementSprite=PIXI.Sprite.fromImage("assets/achievements/disable_badge.png"),i.achievementSprite.x=5,i.achievementSprite.y=13,i.achievementSprite.width=i.achievementSprite.width/i.achievementSprite.height*70,i.achievementSprite.height=70,i.buttonMode=!1,null==t.disabledTexture&&(t.disabledTexture=i.achievementSprite.texture),i.addChild(i.achievementSprite),i.achievementName=new PIXI.extras.BitmapText(e.name,{font:"15px mini-wakuwaku-maru",align:"left"}),i.achievementName.x=i.achievementSprite.width+i.achievementSprite.x+2.5,i.achievementName.y=11,i.achievementName.tint=16101737,i.addChild(i.achievementName),i.barBackground=PIXI.Sprite.fromImage("assets/achievements/bar_bg.png"),i.barBackground.x=i.achievementSprite.width+i.achievementSprite.x+2.5,i.barBackground.y=66,i.addChild(i.barBackground),i.barForeground=PIXI.Sprite.fromImage("assets/achievements/bar_green.png"),i.barForeground.x=i.barBackground.x,i.barForeground.y=66,i.barMask=new PIXI.Graphics,i.barMask.beginFill(16777215),i.barMask.drawRect(0,0,i.barBackground.width/2,i.barBackground.height),i.barMask.endFill(),i.barForeground.addChild(i.barMask),i.barForeground.mask=i.barMask,i.addChild(i.barForeground),i.achievementText=new PIXI.extras.BitmapText("",{font:"15px mini-wakuwaku-maru",align:"center"}),i.achievementText.anchor=new PIXI.Point(.5,.5),i.achievementText.x=i.barBackground.width/2+i.barBackground.x,i.achievementText.y=77,i.addChild(i.achievementText),i.claimButton=new DuelBrightnessButton("assets/achievements/claim_btn3.png",.25,-.25),i.claimButton.position.x=307,i.claimButton.position.y=48,i.claimButton.setOnClick(i.onClick,i),i.addChild(i.claimButton),i.rewardText=new PIXI.extras.BitmapText(e.rewards[0].toString(),{font:"20px mini-wakuwaku-maru",align:"center",tint:16777215}),i.rewardText.anchor=new PIXI.Point(.5,.5),i.rewardText.y=23,i.claimButton.addChild(i.rewardText),i.achievementDescription=new PIXI.extras.BitmapText("",{font:"10px mini-wakuwaku-maru",align:"left"}),i.achievementDescription.x=i.achievementSprite.width+i.achievementSprite.x+2.5,i.achievementDescription.y=31,i.addChild(i.achievementDescription),i.refresh(),i}return _inherits(t,DuelBrightnessButton),_createClass(t,[{key:"setOnClaimReward",value:function(e,t){this.onClaimCallback=e,this.onClaimContext=t}},{key:"refresh",value:function(){if(this.achievement.level>=this.achievement.values.length)this.achievementDescription.text=this.achievement.descriptions[this.achievement.descriptions.length-1],this.achievementText.text="",this.barBackground.visible=!1,this.barForeground.visible=!1,this.claimButton.visible=!1,this.achievementSprite.texture=this.achievement.sprites[this.achievement.values.length-1].texture;else{0==this.achievement.level?this.achievementSprite.texture=t.disabledTexture:this.achievementSprite.texture=this.achievement.sprites[this.achievement.level-1].texture,this.barBackground.visible=!0,this.barForeground.visible=!0,this.claimButton.visible=!0,this.achievementDescription.text=this.achievement.descriptions[this.achievement.level];var e=this.achievement.progress;if(e=isNaN(e)||!isFinite(e)?0:Math.ceil(e),null!=this.achievement.displayValues?(e=Math.floor(this.achievement.displayValues[this.achievement.level]/this.achievement.values[this.achievement.level]*e),e=Math.min(e,this.achievement.displayValues[this.achievement.level]),this.achievementText.text=e+"/"+this.achievement.displayValues[this.achievement.level]):this.achievementText.text=e+"/"+this.achievement.values[this.achievement.level],this.achievement.claimable)this.barMask.width=this.barBackground.width,this.claimButton.enabled=!0,this.rewardText.alpha=1,this.claimButton.sprite.texture=PIXI.Texture.fromImage("assets/achievements/claim_btn2.png"),this.achievementSprite.texture=this.achievement.sprites[this.achievement.level].texture,this.barForeground.texture=PIXI.Texture.fromImage("assets/achievements/bar_yellow.png");else{if(">="==this.achievement.operator){var i=Math.min(e/(this.achievement.displayValues||this.achievement.values)[this.achievement.level],1);this.barMask.width=i*this.barBackground.width}else this.barMask.width=0;this.claimButton.enabled=!1,this.rewardText.alpha=.5,this.claimButton.sprite.texture=PIXI.Texture.fromImage("assets/achievements/claim_btn3.png"),this.barForeground.texture=PIXI.Texture.fromImage("assets/achievements/bar_green.png"),this.achievement.level>0?this.achievementSprite.texture=this.achievement.sprites[this.achievement.level-1].texture:this.achievementSprite.texture=t.disabledTexture}this.rewardText.text=this.achievement.rewards[Math.max(this.achievement.level,0)].toString(),this.alpha=1,this.sprite.alpha=1}}},{key:"onClick",value:function(){this.achievement.claimable&&(this.achievement.claimReward(),this.refresh(),null!=this.onClaimCallback&&this.onClaimCallback.call(this.onClaimContext,this.achievement))}},{key:"achievementProgress",get:function(){return Math.min(this.achievement.level+(this.achievement.claimable?1:0),this.achievement.values.length)}}]),t}(),BubblePopup=function(e){function t(e,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.buttons=[],n.CreateTransparentBg(e,i),n}return _inherits(t,PIXI.Container),_createClass(t,[{key:"CreateTransparentBg",value:function(e,t){var i=new PIXI.Graphics;i.beginFill(e,t),i.drawRect(0,0,SceneManager.main.gameWidth,SceneManager.main.gameHeight),i.endFill(),i.interactive=!0,this.transparentBg=this.addChild(i)}},{key:"update",value:function(){}},{key:"OnclickBg",value:function(e){this.transparentBg.buttonMode=!0,this.transparentBg.on("pointerup",e,this)}},{key:"ShowConfirmBtn",value:function(e,t,i){this.confirmContainer.visible=!0;var n=new PIXI.tween.Tween(this.confirmContainer);n.from({x:i.x,y:i.y-100,alpha:0}),n.to({x:i.x,y:i.y,alpha:1}),n.time=200,n.expire=!0,n.start(),n.addTo(SceneManager.main.tween),this.yesBtnSprite.setOnClick(function(){e()}),this.noBtnSprite.setOnClick(function(){t()}),setTimeout(function(e){e.InteractableButtons(!0)},n.time,this)}},{key:"HideConfirmBtn",value:function(e,t){var i=new PIXI.tween.Tween(this.confirmContainer);i.from({x:t.x,y:t.y,alpha:1}),i.to({x:t.x,y:t.y-100,alpha:0}),i.time=200,i.expire=!0,i.start(),i.addTo(SceneManager.main.tween),setTimeout(function(e,t,i){e(),t.visible=!1},i.time,e,this.confirmContainer,this)}},{key:"InteractableButtons",value:function(e){this.buttons.forEach(function(t){t.enabled=e})}}]),t}(),AchievementPopup=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0,.77));e.backgroundStars=[Particle.NewParticle("backgroundStar",PIXI.Texture.fromImage("assets/particles/FX_star.png"),PIXI.loader.resources["assets/particles/FX_Pop_upStar.json"].data),Particle.NewParticle("backgroundStar2",PIXI.Texture.fromImage("assets/particles/FX_star.png"),PIXI.loader.resources["assets/particles/FX_Pop_upStar02.json"].data)];for(var i=0;i<e.backgroundStars.length;i++)e.backgroundStars[i].con.position.set(270,380),e.addChild(e.backgroundStars[i].con);e.container=new PIXI.Container,e.container.position.set(270,380),e.addChild(e.container);var n=PIXI.Sprite.fromImage("assets/achievements/archievement_popup_bg.png");n.width=380,n.height=540,n.anchor.set(.5,.5),e.container.addChild(n);var r=PIXI.Sprite.fromImage("assets/achievements/sunburst.png");r.anchor.set(.5,.5),r.scale.set(.8),r.y=-10,e.container.addChild(r);var a=new PIXI.tween.Tween(r,SceneManager.main.tween);a.from({rotation:0}),a.to({rotation:2*Math.PI}),a.time=5e3,a.loop=!0,a.start();var s=PIXI.Sprite.fromImage("assets/achievements/archievement_header.png");return s.anchor.set(.5,.5),s.y=-120,e.container.addChild(s),e.achievementClaimButton=new DuelBrightnessButton("assets/achievements/claim_btn.png",.25,-.25),e.achievementClaimButton.setOverlayBitmapText("123",{font:"25px mini-wakuwaku-maru",align:"right"},{position:new PIXI.Point(70,5),scale:new PIXI.Point(1,1)}),e.achievementClaimButton.scale.set(.9),e.achievementClaimButton.position.y=180,e.achievementClaimButton.setOnClick(e.claimAchievement,e),e.container.addChild(e.achievementClaimButton),e.achievementSprite=PIXI.Sprite.fromImage("assets/achievements/gold_badge_label.png"),e.achievementSprite.anchor.set(.5,.5),e.achievementSprite.scale.set(.8),e.achievementSprite.y=-10,e.container.addChild(e.achievementSprite),e.achievementLabel=new PIXI.Sprite(PIXI.Texture.fromImage("assets/achievements/bronze_badge_label.png")),e.achievementLabel.y=40,e.achievementLabel.scale.set(.8),e.achievementLabel.anchor.set(.5,.5),e.container.addChild(e.achievementLabel),e.achievementDetail=PIXI.Sprite.fromImage("assets/achievements/details_label.png"),e.achievementDetail.anchor.set(.5,.5),e.achievementDetail.scale.set(.8),e.achievementDetail.y=100,e.container.addChild(e.achievementDetail),e.achievementDescription=new PIXI.extras.BitmapText("WOLOLO",{font:"15px mini-wakuwaku-maru",tint:10000536,align:"center"}),e.achievementDescription.anchor=new PIXI.Point(.5,.5),e.achievementDescription.position.y=100,e.container.addChild(e.achievementDescription),e.achievementName=new PIXI.extras.BitmapText("WOLOLO",{font:"16px mini-wakuwaku-maru",tint:0,align:"center"}),e.achievementName.anchor=new PIXI.Point(.5,.5),e.achievementName.position.y=40,e.container.addChild(e.achievementName),e.sparkle=Particle.NewParticle("achievementSparkle",PIXI.loader.resources["assets/particles/FX_achievement_sparkle.png"].texture,PIXI.loader.resources["assets/particles/FX_achievement_sparkle.json"].data),e.sparkle.con.position.set(-25,-40),e.container.addChild(e.sparkle.con),e}return _inherits(t,BubblePopup),_createClass(t,[{key:"setAchievementQueue",value:function(e){this.achievements=e}},{key:"show",value:function(){this.sparkle.Play();for(var e=0;e<this.backgroundStars.length;e++)this.backgroundStars[e].Play();switch(this.achievementName.text=this.achievements[0].name,this.achievementSprite.texture=this.achievements[0].sprites[this.achievements[0].level].texture,this.achievementDescription.text=this.achievements[0].descriptions[this.achievements[0].level],this.achievementClaimButton.setOverlayBitmapText(this.achievements[0].rewards[this.achievements[0].level].toString()),this.achievements[0].level){case 0:this.achievementName.tint=6506035,this.achievementLabel.texture=PIXI.Texture.fromImage("assets/achievements/bronze_badge_label.png");break;case 1:this.achievementName.tint=6781339,this.achievementLabel.texture=PIXI.Texture.fromImage("assets/achievements/silver_badge_label.png");break;case 2:this.achievementName.tint=11689256,this.achievementLabel.texture=PIXI.Texture.fromImage("assets/achievements/gold_badge_label.png")}this.container.scale.set(.2,.2);var t=new PIXI.tween.Tween(this.container.scale,SceneManager.main.tween);t.from({x:.2,y:.2}),t.to({x:1,y:1}),t.time=500,t.easing=PIXI.tween.Easing.outElastic(),t.start()}},{key:"claimAchievement",value:function(){var e=this.achievements.shift();e.claimReward(),e.claimable&&this.achievements.unshift(e),SoundManager.playSound("assets/sfx/achievement_accept_scrampunk.mp3"),this.hasNewAchievements?this.show():this.parent.removeChild(this)}},{key:"hasNewAchievements",get:function(){return null!=this.achievements&&this.achievements.length>0}}]),t}(),ButtonUtil=function e(){_classCallCheck(this,e)},RoundedRectBtn=function(e){function t(e,i,n,r,a,s){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,.25,-.25));o.x=e,o.y=i,o.startPosition=new PIXI.Point(e,i);var u=new PIXI.Graphics;return Util.isNullOrUndefined(s)?u.beginFill(16777215,1):u.beginFill(s,1),u.drawRoundedRect(-n/2,-r/2,n,r,a),u.endFill(),o.addChild(u),o.btnGraphic=u,o}return _inherits(t,DuelBrightnessButton),t}(),RectBtn=function(e){function t(e,i,n,r,a){_classCallCheck(this,t);var s=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,.25,-.25));s.x=e,s.y=i,s.startPosition=new PIXI.Point(e,i);var o=new PIXI.Graphics;return Util.isNullOrUndefined(a)?o.beginFill(16777215,1):o.beginFill(a,1),o.drawRect(-n/2,-r/2,n,r),o.endFill(),s.addChild(o),s.btnGraphic=o,s}return _inherits(t,DuelBrightnessButton),t}(),CircleBtn=function(e){function t(e,i,n,r){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,.25,-.25));a.x=e,a.y=i,a.startPosition=new PIXI.Point(e,i);var s=new PIXI.Graphics;return Util.isNullOrUndefined(r)?s.beginFill(16777215,1):s.beginFill(r,1),s.drawCircle(-n/2,-n/2,n),s.endFill(),a.addChild(s),a.btnGraphic=s,a}return _inherits(t,DuelBrightnessButton),t}(),ChefUI=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.gameManager=e,i.Create(),i.displayGroup=new PIXI.display.DisplayGroup(497,!1),i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"Create",value:function(){this.chef=this.addChild(new ChefAvatar),this.chef.position.set(t.centerX,t.centerY),this.mouse=this.addChild(new MouseAvatar),this.mouse.position.set(t.rightX,t.rightY)}},{key:"MouseAlert",value:function(){var e=this;this.chef.Panic();var i=new PIXI.tween.Tween(this.chef);i.delay=2e3,i.expire=!0,i.from({x:t.centerX}),i.to({x:t.leftX}),i.time=300,i.addTo(SceneManager.main.tween),i.start();var n=new PIXI.tween.Tween(this.mouse);n.delay=2e3,n.expire=!0,n.from({x:t.rightX}),n.to({x:t.centerX}),n.time=300,n.on("end",function(){e.chef.Reset(),e.mouse.Jump(300),setTimeout(function(e){e.Laugth()},1e3,e.mouse),setTimeout(function(e){e.mouse.DigDown(50,e.FinishMouseAlert,e)},2e3,e)},this),n.addTo(SceneManager.main.tween),n.start()}},{key:"FinishMouseAlert",value:function(){this.chef.Shock();var e=new PIXI.tween.Tween(this.chef);e.delay=500,e.expire=!0,e.from({x:t.leftX}),e.to({x:t.centerX}),e.time=1e3,e.addTo(SceneManager.main.tween),e.start(),this.mouse.position.set(t.rightX,t.rightY),this.mouse.Reset()}}]),t}();ChefUI.leftX=-100,ChefUI.leftY=20,ChefUI.rightX=100,ChefUI.rightY=20,ChefUI.centerX=0,ChefUI.centerY=20;var Avatar=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.currentTween=[],e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"ClearTween",value:function(){this.currentTween.length>0&&(this.currentTween.forEach(function(e){e.stop(),e.clear(),e.remove()}),this.currentTween=[])}}]),t}(),ChefAvatar=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.sprite=new PIXI.Sprite,e.sprite.anchor.set(.5,.5),e.sprite.scale.set(.6,.6),e.addChild(e.sprite),e}return _inherits(t,Avatar),_createClass(t,[{key:"Panic",value:function(){this.ClearTween();var e=new PIXI.tween.Tween(this.sprite);e.delay=50,e.expire=!0,e.from({y:0}),e.to({y:-5}),e.pingPong=!0,e.time=300,e.addTo(SceneManager.main.tween),this.currentTween.push(e),e.start()}},{key:"Shock",value:function(){this.ClearTween()}},{key:"Reset",value:function(){this.ClearTween(),this.sprite.position.set(0,0)}}]),t}(),MouseAvatar=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,Avatar),_createClass(t,[{key:"Reset",value:function(){this.ClearTween(),this.sprite.position.set(0,0)}},{key:"Jump",value:function(e,t,i){this.ClearTween();var n=new PIXI.tween.Tween(this.sprite);n.delay=e,n.expire=!0,n.from({y:0}),n.to({y:-20}),n.pingPong=!0,n.time=300,null!=t&&n.on("end",t,i),n.addTo(SceneManager.main.tween),this.currentTween.push(n),n.start()}},{key:"Laugth",value:function(){this.ClearTween();var e=new PIXI.tween.Tween(this.sprite);e.expire=!0,e.from({y:0}),e.to({y:-2}),e.time=300,e.addTo(SceneManager.main.tween),this.currentTween.push(e);var t=new PIXI.tween.Tween(this.sprite);t.expire=!0,t.from({y:-2}),t.to({y:5}),t.time=300,t.addTo(SceneManager.main.tween),this.currentTween.push(t),e.chain(t),e.start()}},{key:"DigDown",value:function(e,t,i){this.ClearTween();var n=new PIXI.tween.Tween(this.sprite);n.delay=0,n.expire=!0,n.to({y:0}),n.time=500,n.addTo(SceneManager.main.tween),this.currentTween.push(n);var r=new PIXI.tween.Tween(this.sprite);r.delay=e,r.expire=!0,r.from({y:0}),r.to({y:100}),r.time=500,r.addTo(SceneManager.main.tween),null!=t&&r.on("end",t,i),this.currentTween.push(r),n.chain(r),n.start()}}]),t}(),LeaderboardUI=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0,.77));i.con=new PIXI.Container;return i.scroller=new Scroller(new PIXI.Rectangle(-190,-150,378,335)),i.isFetchingAllTime=!1,i.isFetchingWeekly=!1,i.CreateLeaderboardPopup(e),i.visible=!1,i.con.position.set(270,480),i.scrollButton=new DuelBrightnessButton("assets/game/WhiteRectangle.png",0,0),i.scrollButton.sprite.width=i.width,i.scrollButton.sprite.alpha=0,i.scrollButton.position.x=0,i}return _inherits(t,BubblePopup),_createClass(t,[{key:"CreateLeaderboardPopup",value:function(e){this.addChild(this.con);var t=PIXI.Sprite.fromImage("assets/leaderboard/popup.png");t.anchor.set(.5,.5),t.position.set(0,0),t.alpha=1,t.interactive=!0,this.con.addChild(t);var i=new DuelBrightnessButton(PIXI.loader.resources[Const.path.ui.closeButton].texture,.15,-.15);i.position.set(215,-360),i.setOnClick(this.HideLeaderboard,this),this.buttons[this.buttons.length]=i,this.con.addChild(i),this.scroller.position.x=0,this.scroller.position.y=78,this.con.addChild(this.scroller),this.currentUser=new LeaderboardItem(0,"wololo",20),this.currentUser.y=295,this.con.addChild(this.currentUser),this.loadingText=new PIXI.extras.BitmapText("Loading . . .",{font:"25px mini-wakuwaku-maru",align:"center",tint:8747900}),this.loadingText.anchor=new PIXI.Point(.5,.5),this.loadingText.y=95,this.con.addChild(this.loadingText),this.errorText=new PIXI.extras.BitmapText("  Request Failed",{font:"25px mini-wakuwaku-maru",align:"center",tint:15225426}),this.errorText.anchor=new PIXI.Point(.5,.5),this.errorText.visible=!1,this.errorText.y=40,this.con.addChild(this.errorText),this.errorIcon=PIXI.Sprite.fromImage("assets/leaderboard/caution-sign.png"),this.errorIcon.anchor.set(.5,.5),this.errorIcon.y=40,this.errorIcon.x=-99,this.errorIcon.visible=!1,this.con.addChild(this.errorIcon),this.errorSeparator=PIXI.Sprite.fromImage("assets/leaderboard/separator.png"),this.errorSeparator.anchor.set(.5,.5),this.errorSeparator.y=65,this.errorSeparator.visible=!1,this.con.addChild(this.errorSeparator),this.errorDetail=new PIXI.extras.BitmapText("Please check your internet\nconnection and try again",{font:"20px mini-wakuwaku-maru",align:"center",tint:9274763}),this.errorDetail.anchor=new PIXI.Point(.5,.5),this.errorDetail.y=100,this.errorDetail.visible=!1,this.con.addChild(this.errorDetail),this.retryButton=new DuelBrightnessButton("assets/leaderboard/Try-again.png",-.125,-.25),this.retryButton.y=190,this.retryButton.visible=!1,this.retryButton.setOnClick(this.refreshLeaderboard,this),this.con.addChild(this.retryButton),this.weeklyButton=new DuelRadioButton(e,"leaderboard","assets/leaderboard/Weekly-active.png"),this.weeklyButton.x=-80,this.weeklyButton.y=-140,this.weeklyButton.setOnUnselected(function(e){e.sprite.texture=PIXI.loader.resources["assets/leaderboard/Weekly.png"].texture},this),this.weeklyButton.setOnSelected(function(){this.weeklyButton.sprite.texture=PIXI.loader.resources["assets/leaderboard/Weekly-active.png"].texture,null!=this.weeklyInfo?this.showLeaderboard(this.weeklyInfo):backend.BackendManager.isLoggedIn&&this.refreshLeaderboard()},this),this.con.addChild(this.weeklyButton),this.allTimeButton=new DuelRadioButton(e,"leaderboard","assets/leaderboard/All-Time.png"),this.allTimeButton.x=80,this.allTimeButton.y=-140,this.allTimeButton.setOnUnselected(function(e){e.sprite.texture=PIXI.loader.resources["assets/leaderboard/All-Time.png"].texture},this),this.allTimeButton.setOnSelected(function(){this.allTimeButton.sprite.texture=PIXI.loader.resources["assets/leaderboard/All-Time-active.png"].texture,null!=this.allTimeInfo?this.showLeaderboard(this.allTimeInfo):backend.BackendManager.isLoggedIn&&this.refreshLeaderboard()},this),this.weeklyButton.select(!1),this.con.addChild(this.allTimeButton),this.resetHeader=new PIXI.extras.BitmapText("Reset in",{font:"18px mini-wakuwaku-maru",align:"left",tint:13421503}),this.resetHeader.anchor=new PIXI.Point(0,.5),this.resetHeader.y=-95,this.resetHeader.x=-120,this.resetHeader.visible=!1,this.con.addChild(this.resetHeader),this.resetTime=new PIXI.extras.BitmapText("0d 00h 00m 00s",{font:"18px mini-wakuwaku-maru",align:"right",tint:16101737}),this.resetTime.anchor=new PIXI.Point(1,.5),this.resetTime.y=-95,this.resetTime.x=120,this.resetTime.visible=!1,this.con.addChild(this.resetTime)}},{key:"update",value:function(){this.scroller.update()}},{key:"show",value:function(){this.visible=!0,this.scroller.resetView(),this.weeklyInfo=null,this.allTimeInfo=null,this.refreshLeaderboard(),null==this.updateTimer&&this.updateTime(this);var e=new PIXI.tween.Tween(this.con,SceneManager.main.tween);e.from({y:560}),e.to({y:480}),e.time=100,e.easing=PIXI.tween.Easing.inQuad();var t=new PIXI.tween.Tween(this.con,SceneManager.main.tween);t.from({y:-400}),t.to({y:560}),t.easing=PIXI.tween.Easing.outQuad(),t.time=150,t.chain(e),t.start()}},{key:"HideLeaderboard",value:function(){var e=new PIXI.tween.Tween(this.con,SceneManager.main.tween);e.from({y:560}),e.to({y:-400}),e.easing=PIXI.tween.Easing.inQuad(),e.time=150,e.once("end",function(){this.visible=!1},this);var t=new PIXI.tween.Tween(this.con,SceneManager.main.tween);t.from({y:480}),t.to({y:560}),t.easing=PIXI.tween.Easing.outQuad(),t.time=100,t.chain(e),t.start()}},{key:"updateTime",value:function(e){if(e.visible){var t=new Date,i=t.getUTCDay();i=6-i;var n=t.getUTCHours();n=23-n;var r=t.getUTCMinutes();r=59-r;var a=t.getUTCSeconds();a=59-a,e.resetTime.text=i+"d "+n+"h "+r+"m "+a+"s",e.updateTimer=setTimeout(e.updateTime,1e3,e)}else e.updateTimer=null}},{key:"showLeaderboard",value:function(e){this.scroller.resetView(),this.currentInfo=e,this.loadingText.visible=!1,e==this.weeklyInfo?(this.resetTime.visible=!0,this.resetHeader.visible=!0):(this.resetTime.visible=!1,this.resetHeader.visible=!1),this.scroller.content.removeChildren(),this.currentUser.clear();for(var t=Math.min(e.lists.length,100),i=0;i<t;i++){var n=new LeaderboardItem(e.lists[i].rank,e.lists[i].name,e.lists[i].score);n.displayGroup=new PIXI.DisplayGroup(55,!1),n.position.x=0,n.position.y=20*i,this.scroller.content.addChild(n)}if(0==e.lists.length){var r=new TextOverlayContainer;r.setOverlayBitmapText("Weekly",{font:"20px mini-wakuwaku-maru",align:"center",tint:0}),r.displayGroup=new PIXI.DisplayGroup(55,!1),r.x=0,r.y=0}else{var a=this.scrollButton;a.sprite.height=20*t,a.position.y=10*t-15,this.scroller.content.addChild(a)}null!=e.currentPlayer?this.currentUser.set(e.currentPlayer.rank,e.currentPlayer.name,e.currentPlayer.score):this.currentUser.clear(),this.scroller.content.y=-134}},{key:"refreshLeaderboard",value:function(){this.scroller.content.removeChildren(),this.scroller.resetView(),this.currentUser.clear(),this.resetTime.visible=!1,this.resetHeader.visible=!1,this.loadingText.visible=!0,this.errorText.visible=!1,this.errorDetail.visible=!1,this.errorIcon.visible=!1,this.errorSeparator.visible=!1,this.retryButton.visible=!1,this.weeklyButton.isSelected&&!this.isFetchingWeekly?(this.isFetchingWeekly=!0,backend.BackendManager.getWeeklyLeaderboard(function(e){if(this.isFetchingWeekly=!1,this.loadingText.visible=!1,null==e)return this.errorText.visible=!0,this.errorDetail.visible=!0,this.retryButton.visible=!0,this.errorSeparator.visible=!0,void(this.errorIcon.visible=!0);this.weeklyInfo=e,this.allTimeButton.isSelected?null!=this.allTimeInfo?this.showLeaderboard(this.allTimeInfo):this.refreshLeaderboard():this.showLeaderboard(this.weeklyInfo)},this)):this.allTimeButton.isSelected&&!this.isFetchingAllTime&&(this.isFetchingAllTime=!0,backend.BackendManager.getAllTimeLeaderboard(function(e){if(this.isFetchingAllTime=!1,this.loadingText.visible=!1,null==e)return this.errorText.visible=!0,this.errorDetail.visible=!0,this.retryButton.visible=!0,this.errorSeparator.visible=!0,void(this.errorIcon.visible=!0);this.allTimeInfo=e,this.allTimeButton.isSelected?this.showLeaderboard(this.allTimeInfo):null!=this.weeklyInfo?this.showLeaderboard(this.weeklyInfo):this.refreshLeaderboard()},this))}}]),t}(),AchievementsUI=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0,.77));i.backgroundSprite=PIXI.Sprite.fromImage("assets/achievements/archievement_bg.png"),i.backgroundSprite.anchor.set(.5,.5),i.backgroundSprite.position.set(270,480),i.backgroundSprite.alpha=1,i.backgroundSprite.interactive=!0,i.addChild(i.backgroundSprite);var n=new DuelBrightnessButton(PIXI.loader.resources[Const.path.ui.closeButton].texture,.15,-.15);n.position.set(220,-360),n.setOnClick(i.close,i),i.backgroundSprite.addChild(n),i.scroller=new Scroller(new PIXI.Rectangle(0,0,352,431)),i.scroller.x=-177,i.scroller.y=-168,i.backgroundSprite.addChild(i.scroller);var r=e.achievementManager.getAllAchievements();i.achievementItems=[];for(var a=0;a<r.length;a++){var s=new AchievementItem(r[a]);s.y=a*s.height,s.setOnClaimReward(i.onItemClaimed,i),i.scroller.content.addChild(s),i.achievementItems.push(s)}return i.progressText=new PIXI.extras.BitmapText("50/60 Completed",{font:"18px mini-wakuwaku-maru",align:"center",tint:10000536}),i.progressText.anchor=new PIXI.Point(.5,.5),i.progressText.position.set(0,295),i.backgroundSprite.addChild(i.progressText),i}return _inherits(t,BubblePopup),_createClass(t,[{key:"show",value:function(){var e=new PIXI.tween.Tween(this.backgroundSprite,SceneManager.main.tween);e.from({y:560}),e.to({y:480}),e.time=100,e.easing=PIXI.tween.Easing.inQuad();var t=new PIXI.tween.Tween(this.backgroundSprite,SceneManager.main.tween);t.from({y:-400}),t.to({y:560}),t.easing=PIXI.tween.Easing.outQuad(),t.time=150,t.chain(e),t.start()}},{key:"refresh",value:function(){for(var e=0;e<this.achievementItems.length;e++)this.achievementItems[e].refresh();this.onItemClaimed(null)}},{key:"update",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),this.scroller.update()}},{key:"close",value:function(){var e=new PIXI.tween.Tween(this.backgroundSprite,SceneManager.main.tween);e.from({y:560}),e.to({y:-400}),e.easing=PIXI.tween.Easing.inQuad(),e.time=150,e.once("end",function(){this.parent.removeChild(this)},this);var t=new PIXI.tween.Tween(this.backgroundSprite,SceneManager.main.tween);t.from({y:480}),t.to({y:560}),t.easing=PIXI.tween.Easing.outQuad(),t.time=100,t.chain(e),t.start()}},{key:"onItemClaimed",value:function(e){for(var t=0,i=0;i<this.achievementItems.length;i++)t+=this.achievementItems[i].achievementProgress;this.progressText.text=t+"/"+3*this.achievementItems.length+" Completed"}}]),t}(),MouseTimerUI=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,PIXI.Container),t}(),PauseUI=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0,.7));return i.IsShowing=!1,i.gameManager=e,i.CreateBackPopup(),i.displayGroup=new PIXI.display.DisplayGroup(540,!1),i.visible=!1,i}return _inherits(t,BubblePopup),_createClass(t,[{key:"CreateBackPopup",value:function(){var e=this;this.con=new PIXI.Container,this.backToMenuCon=new PIXI.Container;var t=new PIXI.Sprite;(t=PIXI.Sprite.fromImage(Const.path.ui.popupBoard)).anchor.set(.5,.5),t.position.set(0,0),t.interactive=!0,t.displayGroup=new PIXI.DisplayGroup(543,!1),this.con.addChild(t);var i=new DuelBrightnessButton(PIXI.loader.resources[Const.path.ui.restartButton].texture,.15,-.15);i.position.set(0,-88),i.setOnClick(function(){e.HidePauseUi(function(){e.visible=!1,e.gameManager.restart()})}),i.displayGroup=new PIXI.DisplayGroup(544,!1),this.buttons[this.buttons.length]=i,this.con.addChild(i);var n=new DuelBrightnessButton(Const.path.ui.mainMenuButton,.15,-.15);n.position.set(0,17),n.displayGroup=new PIXI.DisplayGroup(544,!1),this.buttons[this.buttons.length]=n,n.setOnClick(function(){e.HidePauseUi(function(){e.visible=!1,e.gameManager.stop(),SceneManager.goToScene("mainMenu")})},this),this.backToMenuCon.addChild(n),this.con.addChild(this.backToMenuCon);var r=new DuelBrightnessButton(PIXI.loader.resources[Const.path.ui.resumeButton].texture,.15,-.15);r.position.set(0,155),r.setOnClick(this.Exit,this),r.displayGroup=new PIXI.DisplayGroup(544,!1),this.buttons[this.buttons.length]=r,this.con.addChild(r),this.addChild(this.con)}},{key:"ShowPauseUi",value:function(){this.visible=!0,this.IsShowing=!0;var e=new PIXI.tween.Tween(this.con);e.time=800,e.from({x:GameSetting.gameWidth/2,y:-450}),e.to({x:GameSetting.gameWidth/2,y:GameSetting.gameHeight/2}),e.easing=PIXI.tween.Easing.outElastic(),e.expire=!0,e.start(),e.addTo(SceneManager.main.tween)}},{key:"HidePauseUi",value:function(e){var t=this,i=new PIXI.tween.Tween(this.con);i.time=600,i.to({x:270,y:-450}),i.from({x:270,y:GameSetting.gameHeight/2}),i.easing=PIXI.tween.Easing.inElastic(),i.expire=!0,i.start(),i.addTo(SceneManager.main.tween),i.on("end",function(){t.IsShowing=!1,t.visible=!1,null!=e&&e()})}},{key:"ShowBackToMenuBtn",value:function(){this.backToMenuCon.visible=!0}},{key:"HideBackToMenuBtn",value:function(e){this.backToMenuCon.visible=!0}},{key:"Exit",value:function(){var e=this;this.HidePauseUi(function(){e.gameManager.gameScene.Pause(!1)})}}]),t}(),Scroller=function(e){function t(e){_classCallCheck(this,t),Util.assert(null!=e);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.addChild(i._content=new ScrollerContent(i)),i.delta=new PIXI.Point,i.sideScrollContainer=new PIXI.Container,i.bound=e;var n=new PIXI.Graphics;return n.beginFill(16776960),n.drawRect(e.x,e.y,e.width,e.height),n.endFill(),i.mask=n,i.addChildAt(n,0),i.sideScroll=new PIXI.Graphics,i.sideScroll.beginFill(11053224),i.sideScroll.drawRect(0,0,4,50),i.sideScroll.endFill(),i.sideScrollContainer.addChild(i.sideScroll),i.sideScrollContainer.position.set(Math.abs(i.bound.x)-10,-(i.bound.height/2-25)),i.addChild(i.sideScrollContainer),i.smoothness=15,i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"resetView",value:function(){this.content.y=0,this.sideScrollContainer.position.y=this.bound.y,this.delta.y=0,this.isSnappingAnimation=!1}},{key:"update",value:function(){if(!(this.isPressingDown||this.delta.y<1&&this.delta.y>-1)){var e=this.isSnappingAnimation?this.delta.y/this.smoothness:this.delta.y-this.delta.y/this.smoothness;this.content.y+=e,this.delta.y-=this.delta.y/this.smoothness;var t=this.content.getBounds();if(this.content.y>0?this.sideScrollContainer.position.set(Math.abs(this.bound.x)-10,-(this.bound.height/2-23)):this.content.y<this.bound.height-t.height?this.sideScrollContainer.position.set(Math.abs(this.bound.x)-10,this.bound.height/2-23):this.sideScrollContainer.position.set(Math.abs(this.bound.x)-10,-(this.bound.height/2-23)+(this.bound.height-23)/(this.bound.height-t.height)*this.content.y),!this.isSnappingAnimation){var i=this.getGlobalPosition().y;e>0?t.top>this.bound.top+i&&(this.delta.y=this.bound.top+i-t.top,this.isSnappingAnimation=!0):e<0&&t.bottom<this.bound.bottom+i&&(this.delta.y=this.bound.bottom+i-t.bottom,this.isSnappingAnimation=!0)}}}},{key:"onChildPointerDown",value:function(e){this.delta.y=0,this.lastMouse=e.data.global.clone(),this.isPressingDown=!0}},{key:"onChildPointerMove",value:function(e){if(this.isPressingDown&&(null==this.lastMouse||0!=Math.abs(e.data.global.y-this.lastMouse.y))){this.delta.y=e.data.global.y-this.lastMouse.y,this.content.y+=this.delta.y,this.lastMouse=e.data.global.clone();var t=this.content.getBounds(),i=this.getGlobalPosition().y;t.height>this.bound.height?t.bottom<this.bound.bottom+i?(this.delta.y=this.bound.bottom+i-t.bottom,this.isSnappingAnimation=!0):t.top>this.bound.top+i?(this.delta.y=this.bound.top+i-t.top,this.isSnappingAnimation=!0):this.isSnappingAnimation=!1:(this.delta.y=this.bound.top+i-t.top,this.isSnappingAnimation=!0),this.content.y>0?this.sideScrollContainer.position.set(Math.abs(this.bound.x)-10,-(this.bound.height/2-23)):this.content.y<this.bound.height-t.height?this.sideScrollContainer.position.set(Math.abs(this.bound.x)-10,this.bound.height/2-23):this.sideScrollContainer.position.set(Math.abs(this.bound.x)-10,-(this.bound.height/2-23)+(this.bound.height-23)/(this.bound.height-t.height)*this.content.y)}}},{key:"onChildPointerUp",value:function(e){this.isPressingDown=!1}},{key:"content",get:function(){return this._content}}]),t}(),ScrollerContent=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.scroller=e,i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"addChild",value:function(e){return this.setupChild(e),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addChild",this).call(this,e)}},{key:"addChildAt",value:function(e,i){return this.setupChild(e),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addChildAt",this).call(this,e,i)}},{key:"removeChild",value:function(e){return this.unSetupChild(e),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e)}},{key:"removeChildAt",value:function(e){return this.unSetupChild(this.children[e]),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChildAt",this).call(this,e)}},{key:"removeChildren",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.children.length,n=e;n<i;n++)this.unSetupChild(this.children[n]);return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChildren",this).call(this,e,i)}},{key:"setupChild",value:function(e){e.on("pointermove",this.scroller.onChildPointerMove,this.scroller).on("pointerdown",this.scroller.onChildPointerDown,this.scroller).on("pointerup",this.scroller.onChildPointerUp,this.scroller).on("pointerupoutside",this.scroller.onChildPointerUp,this.scroller)}},{key:"unSetupChild",value:function(e){e.off("pointermove",this.scroller.onChildPointerMove,this.scroller).off("pointerdown",this.scroller.onChildPointerDown,this.scroller).off("pointerup",this.scroller.onChildPointerUp,this.scroller).off("pointerupoutside",this.scroller.onChildPointerUp,this.scroller)}}]),t}(),Slider=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.max=e,i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!=t&&(this.max=t),this.value=Math.min(e,this.max)}}]),t}(),PreloaderSlider=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,100)),i=PIXI.Sprite.fromImage("assets/sprite/fillbarBg.png");e.innerBorder=PIXI.Sprite.fromImage("assets/sprite/fillbarInnerBorder.png");var n=PIXI.Sprite.fromImage("assets/sprite/loading_background.png");return e.innerBorder.x=-6.5,e.innerBorder.y=-6,e.shape=new PIXI.Graphics,e.shape.beginFill(11922742),e.shape.drawRect(0,0,0,e.innerBorder.height),e.shape.endFill(),e.shape.mask=n,e.addChild(n),e.addChild(i),e.addChild(e.shape),e.addChild(e.innerBorder),n.scale.set(.44),e}return _inherits(t,Slider),_createClass(t,[{key:"setValue",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e,i),this.shape.clear(),this.shape.beginFill(11922742),this.shape.drawRect(0,0,this.innerBorder.width*(this.value/this.max),this.innerBorder.height),this.shape.endFill()}}]),t}(),ResultUI=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.currentTimeout=[],i.scoreTween=[],i.rushedResult=!1,i.score=0,i.shownScore=0,i.currentTime=0,i.shownTime=0,i.gameManager=e,i.Create(),i.CreateLeaderboard(),i.displayGroup=new PIXI.DisplayGroup(550,!1),i.visible=!1,i.interactive=!0,i.buttonMode=!0,i.on("pointerup",i.SpeedUpScore,i),i.achievementPopup=new AchievementPopup,i.shop=new ShopUI(i.gameManager.gameScene),i.achievementsUI=new AchievementsUI(i.gameManager.gameScene),i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"CreateLeaderboard",value:function(){this.leaderboard=new LeaderboardUI(this.gameManager.gameScene),this.addChild(this.leaderboard)}},{key:"Create",value:function(){var e=this;this.curtain=this.addChild(new ResultCurtainUI);var t=new PIXI.Container,i=PIXI.Sprite.fromImage("assets/endgame/summaryboard.png");i.anchor.set(.5,.5),i.position.set(0,-115),t.addChild(i);var n=new DuelBrightnessButton("assets/main_menu/btn_play.png",.25,-.25);n.position.set(-1,260),n.scale.set(.85),n.setOnClick(function(){e.gameManager.gameScene.Reset(),e.gameManager.StartNewGame(GameDifficulty.easy),e.Hide()},this),this.playBtn=t.addChild(n);var r=new PIXI.extras.BitmapText("Customer Request",{font:"20px mini-wakuwaku-maru",align:"left",tint:11053224});r.anchor=new PIXI.Point(0,.5),r.position.set(-120,-230),t.addChild(r),(r=new PIXI.extras.BitmapText("Mice Takedown",{font:"20px mini-wakuwaku-maru",align:"left",tint:11053224})).anchor=new PIXI.Point(0,.5),r.position.set(-120,-195),t.addChild(r),(r=new PIXI.extras.BitmapText("Highest Combo",{font:"20px mini-wakuwaku-maru",align:"left",tint:11053224})).anchor=new PIXI.Point(0,.5),r.position.set(-120,-160),t.addChild(r),(r=new PIXI.extras.BitmapText("Playtime",{font:"20px mini-wakuwaku-maru",align:"left",tint:11053224})).anchor=new PIXI.Point(0,.5),r.position.set(-120,-125),t.addChild(r),(r=new PIXI.extras.BitmapText("Score",{font:"38px mini-wakuwaku-maru",align:"left",tint:11053224})).anchor=new PIXI.Point(0,.5),r.position.set(-140,-80),t.addChild(r),(r=new PIXI.extras.BitmapText("High Score",{font:"26px mini-wakuwaku-maru",align:"left",tint:11053224})).anchor=new PIXI.Point(0,.5),r.position.set(-155,-15),t.addChild(r),this.coinReceivedHeader=new PIXI.extras.BitmapText("Coin Received",{font:"25px mini-wakuwaku-maru",align:"left",tint:11053224}),this.coinReceivedHeader.anchor=new PIXI.Point(0,.5),this.coinReceivedHeader.position.set(-170,105),this.coinReceivedHeader.visible=!1,t.addChild(this.coinReceivedHeader),this.coinReceivedIcon=PIXI.Sprite.fromImage("assets/upgrades/coin.png"),this.coinReceivedIcon.anchor.set(1,.5),this.coinReceivedIcon.scale.set(.7,.7),this.coinReceivedIcon.position.set(165,105),this.coinReceivedIcon.visible=!1,t.addChild(this.coinReceivedIcon),this.coinReceivedText=new PIXI.extras.BitmapText("456",{font:"25px mini-wakuwaku-maru",align:"right",tint:14913372}),this.coinReceivedText.anchor=new PIXI.Point(1,.5),this.coinReceivedText.position.set(125,105),this.coinReceivedText.visible=!1,t.addChild(this.coinReceivedText),this.highscoreText=new PIXI.extras.BitmapText("123,456",{font:"26px mini-wakuwaku-maru",align:"right",tint:11053224}),this.highscoreText.anchor=new PIXI.Point(1,.5),this.highscoreText.position.set(150,-15),t.addChild(this.highscoreText),(r=new PIXI.extras.BitmapText("",{font:"28px mini-wakuwaku-maru",align:"right",tint:14913372})).anchor=new PIXI.Point(1,.5),r.position.set(150,-230),this.customerTxt=t.addChild(r),(r=new PIXI.extras.BitmapText("",{font:"28px mini-wakuwaku-maru",align:"right",tint:14913372})).anchor=new PIXI.Point(1,.5),r.position.set(150,-195),this.mouseTxt=t.addChild(r),(r=new PIXI.extras.BitmapText("",{font:"28px mini-wakuwaku-maru",align:"right",tint:14913372})).anchor=new PIXI.Point(1,.5),r.position.set(150,-160),this.highestComboText=t.addChild(r),(r=new PIXI.extras.BitmapText("",{font:"28px mini-wakuwaku-maru",align:"right",tint:14913372})).anchor=new PIXI.Point(1,.5),r.position.set(150,-125),this.playTimeText=t.addChild(r),(r=new PIXI.extras.BitmapText("",{font:"36px mini-wakuwaku-maru",align:"right",tint:16079195})).anchor=new PIXI.Point(1,.5),r.position.set(140,-80),this.scoreText=t.addChild(r),this.currentRankHeader=new PIXI.extras.BitmapText("Current Rank",{font:"25px mini-wakuwaku-maru",align:"left",tint:11053224}),this.currentRankHeader.anchor=new PIXI.Point(0,.5),this.currentRankHeader.position.set(-115,40),this.currentRankHeader.visible=!1,t.addChild(this.currentRankHeader),this.currentRankText=new PIXI.extras.BitmapText("123456",{font:"25px mini-wakuwaku-maru",align:"right",tint:14913372}),this.currentRankText.anchor=new PIXI.Point(1,.5),this.currentRankText.position.set(130,40),this.currentRankText.visible=!1,t.addChild(this.currentRankText);var a=PIXI.Sprite.fromImage("assets/endgame/gui_checkbox.png");a.anchor.set(.5,.5),a.position.set(-140,-230),this.customerIcon=t.addChild(a),(a=PIXI.Sprite.fromImage("assets/endgame/gui_checkbox.png")).anchor.set(.5,.5),a.position.set(-140,-195),this.mouseIcon=t.addChild(a),(a=PIXI.Sprite.fromImage("assets/endgame/gui_checkbox.png")).anchor.set(.5,.5),a.position.set(-140,-160),this.highComboIcon=t.addChild(a),(a=PIXI.Sprite.fromImage("assets/endgame/gui_checkbox.png")).anchor.set(.5,.5),a.position.set(-140,-125),this.playTimeIcon=t.addChild(a),(a=PIXI.Sprite.fromImage("assets/endgame/icon_check.png")).anchor.set(.5,.5),a.position.set(-135,-232),this.checkCustomer=t.addChild(a),this.checkCustomer.visible=!1,(a=PIXI.Sprite.fromImage("assets/endgame/icon_check.png")).anchor.set(.5,.5),a.position.set(-135,-197),this.checkMouse=t.addChild(a),this.checkMouse.visible=!1,(a=PIXI.Sprite.fromImage("assets/endgame/icon_check.png")).anchor.set(.5,.5),a.position.set(-135,-162),this.checkHiCombo=t.addChild(a),this.checkHiCombo.visible=!1,(a=PIXI.Sprite.fromImage("assets/endgame/icon_check.png")).anchor.set(.5,.5),a.position.set(-135,-127),this.checkPlaytime=t.addChild(a),this.checkPlaytime.visible=!1,this.highscoreStamp=PIXI.Sprite.fromImage("assets/endgame/stamp_newhighscore.png"),this.highscoreStamp.anchor.set(.5,.5),this.highscoreStamp.position.set(0,-15),this.highscoreStamp.rotation=-5*PIXI.DEG_TO_RAD,t.addChild(this.highscoreStamp),t.position.set(SceneManager.main.gameWidth/2,SceneManager.main.gameHeight/2),this.resultBg=t,this.addChild(t),this.leaderboardButton=new DuelBrightnessButton("assets/main_menu/btn_trophy_icon.png",.25,-.25),this.leaderboardButton.setOnClick(this.OnLeaderboardClick,this),this.leaderboardButton.position.set(371,850),this.leaderboardButton.scale.set(.85,.85),this.addChild(this.leaderboardButton),this.achievementButton=new DuelBrightnessButton("assets/main_menu/btn_star.png",.25,-.25),this.achievementButton.setOnClick(this.OnAchievementsClick,this),this.achievementButton.position.set(269,850),this.achievementButton.scale.set(.85,.85),this.addChild(this.achievementButton),this.shopButton=new DuelBrightnessButton("assets/main_menu/btn_shop.png",.25,-.25),this.shopButton.position.set(167,850),this.shopButton.scale.set(.85,.85),this.shopButton.setOnClick(function(){this.shop.show(),this.addChild(this.shop),this.shop.refresh()},this),this.addChild(this.shopButton),this.fullScreenButton=new DuelBrightnessButton("assets/main_menu/gui_fullscreen_enable.png",.25,-.25),this.fullScreenButton.position.set(460,30),this.fullScreenButton.setOnClick(function(){document.webkitFullscreenElement||document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?document.webkitExitFullscreen?document.webkitExitFullscreen():document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen()}),this.addChild(this.fullScreenButton),this.bgm=new DuelBrightnessButton("assets/main_menu/music_icon.png",.25,-.25),this.bgm.position.set(510,85),this.bgm.visible=!1,this.bgm.setOnClick(function(){SoundManager.isMutingBgm=!SoundManager.isMutingBgm,SoundManager.isMutingBgm?e.bgm.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/music_mute_icon.png"):e.bgm.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/music_icon.png")},this),t.addChild(this.bgm),this.addChild(this.bgm),this.sfx=new DuelBrightnessButton("assets/main_menu/effect_icon.png",.25,-.25),this.sfx.position.set(510,130),this.sfx.visible=!1,t.addChild(this.sfx),this.sfx.setOnClick(function(){SoundManager.isMutingSfx=!SoundManager.isMutingSfx,SoundManager.isMutingSfx?e.sfx.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/effect_mute_icon.png"):e.sfx.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/effect_icon.png")},this),this.addChild(this.sfx),this.cog=new DuelBrightnessButton("assets/main_menu/cog.png",.25,-.25),this.cog.position.set(510,30),this.addChild(this.cog),this.cog.setOnClick(function(){this.sfx.visible=this.bgm.visible=!this.sfx.visible},this),this.cog.visible=!1}},{key:"update",value:function(){null!=this.shop&&this.shop.update(),null!=this.achievementsUI&&this.achievementsUI.update(),null!=this.leaderboard&&this.leaderboard.update()}},{key:"OnLeaderboardClick",value:function(){null!=this.leaderboard&&this.leaderboard.show()}},{key:"OnAchievementsClick",value:function(){null!=this.achievementsUI&&(this.achievementsUI.show(),this.addChild(this.achievementsUI),this.achievementsUI.refresh())}},{key:"setCoinReceived",value:function(e){this.coinReceivedText.text=e.toLocaleString(void 0,{useGrouping:!0})}},{key:"setRank",value:function(e){this.currentRankHeader.text="Current Rank",null==e||isNaN(e)?this.currentRankText.text="-":this.currentRankText.text=e.toString()}},{key:"Show",value:function(e,t,i){var n=this;SoundManager.playSound("assets/game/SFX_GameOver.wav"),this.visible=!0,this.score=this.shownScore=0,this.resultBg.position.y=2e3,isNaN(i)||null==i?this.highscoreText.text="-":this.highscoreText.text=i.toLocaleString(void 0,{useGrouping:!0}),this.curtain.TweenIn(function(){n.playBtn.visible=!1,n.rushedResult=!1,n.leaderboardButton.visible=n.achievementButton.visible=n.shopButton.visible=!1,n.fullScreenButton.visible=!1,n.cog.visible=!1,n.sfx.visible=!1,n.bgm.visible=!1,n.TweenIn()}),SoundManager.isMutingBgm?this.bgm.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/music_mute_icon.png"):this.bgm.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/music_icon.png"),SoundManager.isMutingSfx?this.sfx.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/effect_mute_icon.png"):this.sfx.sprite.texture=PIXI.Texture.fromImage("assets/main_menu/effect_icon.png"),this.cog.visible=!1,this.sfx.visible=!1,this.bgm.visible=!1,this.leaderboardButton.visible=this.achievementButton.visible=this.shopButton.visible=!1,this.fullScreenButton.visible=!1,this.highscoreStamp.visible=!1,this.isHighscore=e,SoundManager.isPlayingBgm&&SoundManager.stopBgm(),adsSDKWrapper.ShowAd(),this.achievementPopup.setAchievementQueue(t),this.currentRankText.text=""}},{key:"TweenIn",value:function(){var e=new PIXI.tween.Tween(this.resultBg);e.time=333,e.easing=PIXI.tween.Easing.inOutSine(),e.from({alpha:1,y:1e3}),e.to({alpha:1,y:GameSetting.gameHeight/2}),e.expire=!0,e.on("end",this.StartShowSequence,this),e.addTo(SceneManager.main.tween),e.start()}},{key:"StartShowSequence",value:function(){var e=this;this.rushedResult||(this.currentTimeout.push(setTimeout(function(t){e.AddBaseScore()},500,this)),this.currentTimeout.push(setTimeout(function(t){e.AddCustomerScore()},1e3,this)),this.currentTimeout.push(setTimeout(function(t){e.AddMouseScore()},1500,this)),this.currentTimeout.push(setTimeout(function(t){e.AddHighestCombo()},2e3,this)),this.currentTimeout.push(setTimeout(function(t){e.AddPlayTimeScore()},2500,this)),this.isHighscore?(this.currentTimeout.push(setTimeout(function(e){e.AnimateNewHighScore()},3e3,this)),this.currentTimeout.push(setTimeout(function(t){e.ShowNextButton()},4e3,this)),this.currentTimeout.push(setTimeout(function(t){e.AddCurrentRank()},4e3,this)),this.currentTimeout.push(setTimeout(function(t){e.DetermineAchievementPopup()},4e3,this)),this.currentTimeout.push(setTimeout(function(e){e.AddCoinText()},4e3,this))):(this.currentTimeout.push(setTimeout(function(t){e.ShowNextButton()},3250,this)),this.currentTimeout.push(setTimeout(function(t){e.AddCurrentRank()},3250,this)),this.currentTimeout.push(setTimeout(function(t){e.DetermineAchievementPopup()},3250,this)),this.currentTimeout.push(setTimeout(function(e){e.AddCoinText()},3250,this))))}},{key:"AddCoinText",value:function(){this.coinReceivedText.visible=this.coinReceivedIcon.visible=this.coinReceivedHeader.visible=!0}},{key:"DetermineAchievementPopup",value:function(){this.achievementPopup.hasNewAchievements&&(this.addChild(this.achievementPopup),SoundManager.playSound("assets/sfx/achievement_pop_fins.wav"),this.achievementPopup.show())}},{key:"AddCurrentRank",value:function(){this.currentRankHeader.visible=!0,this.currentRankText.visible=!0}},{key:"AddBaseScore",value:function(){this.score=this.gameManager.score.score,PIXI.ticker.shared.add(this.RuningScore,this)}},{key:"AnimateNewHighScore",value:function(){if(!this.rushedResult){this.highscoreStamp.visible=!0,this.highscoreStamp.alpha=0,this.highscoreStamp.rotation=0;PIXI.tween.Easing.inCubic();var e=new PIXI.tween.Tween(this.highscoreStamp,SceneManager.main.tween);e.from({alpha:0,rotation:0,scale:{x:5,y:5}}),e.to({alpha:1,rotation:-2.8*PIXI.DEG_TO_RAD,scale:{x:1,y:1}}),e.easing=PIXI.tween.Easing.inCubic(),e.time=350,SoundManager.playSound("assets/endgame/SFX_Stamp.wav"),e.start()}}},{key:"AddPlayTimeScore",value:function(){var e=new PIXI.tween.Tween(this.playTimeText);e.time=300,e.from({alpha:.5,scale:{x:1.5,y:1.5}}),e.to({alpha:1,scale:{x:1,y:1}}),e.expire=!0,e.addTo(SceneManager.main.tween),e.start(),this.scoreTween.push(e),this.playTimeText.text=this.fancyTimeFormat(this.gameManager.gameTime/1e3);var t=this.gameManager.score.playTimeScore;this.score+=t,PIXI.ticker.shared.add(this.RuningScore,this),this.checkPlaytime.visible=!0}},{key:"AddCustomerScore",value:function(){var e=new PIXI.tween.Tween(this.customerTxt);e.time=300,e.from({alpha:.5}),e.to({alpha:1}),e.expire=!0,e.addTo(SceneManager.main.tween),e.start(),this.scoreTween.push(e),this.customerTxt.scale.set(1),this.customerTxt.text=this.gameManager.score.customer.toLocaleString(void 0,{useGrouping:!0}),this.customerTxt.scale.set(Math.min(73/this.customerTxt.width,1)),this.checkCustomer.visible=!0}},{key:"AddMouseScore",value:function(){var e=new PIXI.tween.Tween(this.mouseTxt);e.time=300,e.from({alpha:.5}),e.to({alpha:1}),e.expire=!0,e.addTo(SceneManager.main.tween),e.start(),this.scoreTween.push(e),this.mouseTxt.scale.set(1),this.mouseTxt.text=this.gameManager.score.mouse.toLocaleString(),this.mouseTxt.scale.set(Math.min(73/this.mouseTxt.width,1)),this.checkMouse.visible=!0}},{key:"AddHighestCombo",value:function(){var e=new PIXI.tween.Tween(this.highestComboText);e.time=300,e.from({alpha:.5}),e.to({alpha:1}),e.expire=!0,e.addTo(SceneManager.main.tween),e.start(),this.scoreTween.push(e),this.highestComboText.scale.set(1),this.highestComboText.text=this.gameManager.combo.highestCombo.toLocaleString(),this.highestComboText.scale.set(Math.min(73/this.highestComboText.width,1)),this.checkHiCombo.visible=!0}},{key:"fancyTimeFormat",value:function(e){var t=~~(e/3600),i=~~(e%3600/60),n=Math.floor(e%60),r="";return t>0&&(r+=t+":"+(i<10?"0":"")),r+=i+":"+(n<10?"0":""),r+=""+n}},{key:"ShowNextButton",value:function(){this.playBtn.visible=!0,this.rushedResult=!0,this.shopButton.visible=this.achievementButton.visible=this.leaderboardButton.visible=!0,this.fullScreenButton.visible=!0,this.cog.visible=!0}},{key:"RuningScore",value:function(){var e=Math.abs(this.shownScore-this.score);this.shownScore<this.score?this.shownScore+=Math.ceil(e*PIXI.ticker.shared.elapsedMS*.015):(this.shownScore=this.score,PIXI.ticker.shared.remove(this.RuningScore,this)),this.scoreText.scale.set(1),this.scoreText.text=Math.floor(this.shownScore).toLocaleString(void 0,{useGrouping:!0}),this.scoreText.scale.set(Math.min(153/this.scoreText.width,1))}},{key:"RunningTime",value:function(){var e=Math.abs(this.shownTime-this.currentTime);this.shownTime<this.currentTime?this.shownTime+=Math.ceil(e*PIXI.ticker.shared.elapsedMS*.03):(this.shownTime=this.shownTime,PIXI.ticker.shared.remove(this.RunningTime,this)),this.playTimeText.text=this.shownTime.toLocaleString()}},{key:"SpeedUpScore",value:function(){if(!this.rushedResult){this.rushedResult=!0,this.currentTimeout.forEach(function(e){clearTimeout(e)}),this.currentTimeout=[],this.scoreTween.forEach(function(e){e.stop(),e.clear(),e.remove()}),this.scoreTween=[];this.customerTxt.scale.set(1),this.customerTxt.text=this.gameManager.score.customer.toLocaleString(void 0,{useGrouping:!0}),this.customerTxt.alpha=1,this.customerTxt.scale.set(Math.min(72/this.customerTxt.width,1)),this.checkCustomer.visible=!0,this.mouseTxt.scale.set(1),this.mouseTxt.text=this.gameManager.score.mouse.toLocaleString(void 0,{useGrouping:!0}),this.mouseTxt.alpha=1,this.mouseTxt.scale.set(Math.min(72/this.mouseTxt.width,1)),this.checkMouse.visible=!0,this.highestComboText.scale.set(1),this.highestComboText.text=this.gameManager.combo.highestCombo.toLocaleString(void 0,{useGrouping:!0}),this.highestComboText.alpha=1,this.highestComboText.scale.set(Math.min(72/this.highestComboText.width,1)),this.checkHiCombo.visible=!0,this.playTimeText.text=this.fancyTimeFormat(this.gameManager.gameTime/1e3),this.playTimeText.alpha=1,this.playTimeText.scale.set(1,1),this.checkPlaytime.visible=!0,this.currentRankHeader.visible=!0,this.currentRankText.visible=!0;var e=this.gameManager.score.playTimeScore;this.score+=e,this.scoreText.scale.set(1),this.scoreText.text=Math.floor(this.score).toLocaleString(void 0,{useGrouping:!0}),this.scoreText.scale.set(Math.min(153/this.scoreText.width,1)),this.achievementButton.visible=this.leaderboardButton.visible=this.shopButton.visible=!0,this.isHighscore&&(this.highscoreStamp.visible=!0,this.highscoreStamp.alpha=1,this.highscoreStamp.scale.set(1,1),this.highscoreStamp.rotation=-2.8*PIXI.DEG_TO_RAD),this.ShowNextButton(),this.DetermineAchievementPopup()}}},{key:"Hide",value:function(){this.visible=!1,this.scoreText.text="",this.customerTxt.text="",this.customerTxt.alpha=0,this.mouseTxt.text="",this.mouseTxt.alpha=0,this.highestComboText.text="",this.highestComboText.alpha=0,this.playTimeText.text="",this.playTimeText.alpha=0,this.checkCustomer.visible=!1,this.checkHiCombo.visible=!1,this.checkMouse.visible=!1,this.checkPlaytime.visible=!1,this.currentRankHeader.visible=!1,this.currentRankHeader.text="Loading..",this.currentRankText.visible=!1,this.currentRankText.text="",this.coinReceivedHeader.visible=this.coinReceivedIcon.visible=this.coinReceivedText.visible=!1}}]),t}(),ResultCurtainUI=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.interactive=!0,e.CreateCurtain(),e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"CreateCurtain",value:function(){var e=new PIXI.Sprite(PIXI.loader.resources["assets/endgame/curtain_right.png"].texture);e.anchor.set(0,0),e.position.set(GameSetting.gameWidth-100,0),e.scale.set(1,1),this.rightCurtain=this.addChild(e),(e=new PIXI.Sprite(PIXI.loader.resources["assets/endgame/curtain_left.png"].texture)).anchor.set(1,0),e.scale.set(1,1),e.position.set(100,0),this.leftCurtain=this.addChild(e)}},{key:"TweenIn",value:function(e){i=-35*PIXI.DEG_TO_RAD;this.rightCurtain.rotation=i;var t=new PIXI.tween.Tween(this.rightCurtain);t.time=1e3,t.from({x:GameSetting.gameWidth+GameSetting.gameWidth/2,scale:{x:.2,y:1.5},rotation:i}),t.to({x:GameSetting.gameWidth/2,scale:{x:1,y:1},rotation:0}),t.expire=!0,t.addTo(SceneManager.main.tween),t.start();var i=35*PIXI.DEG_TO_RAD;this.leftCurtain.rotation=i;var n=new PIXI.tween.Tween(this.leftCurtain);n.time=1e3,n.from({x:-GameSetting.gameWidth/2,scale:{x:.2,y:1.5},rotation:i}),n.to({x:GameSetting.gameWidth/2,scale:{x:1,y:1},rotation:0}),n.expire=!0,n.addTo(SceneManager.main.tween),n.start(),null!=e&&t.on("end",function(){e()})}}]),t}(),ScoreFlyerUI=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.currentTween=[];var i=new PIXI.extras.BitmapText("120",{font:"26px mini-wakuwaku-maru-combo",align:"center"});i.anchor=new PIXI.Point(.5,.5),e.scoreText=e.addChild(i),e.displayGroup=new PIXI.DisplayGroup(459,!1),e.scoreText.alpha=0;var n=new PIXI.extras.BitmapText("0",{font:"26px mini-wakuwaku",align:"center"});return n.anchor=new PIXI.Point(.5,.5),e.multiplierText=e.addChild(n),e.displayGroup=new PIXI.DisplayGroup(459,!1),e.multiplierText.alpha=0,e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"Show",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.ClearTween(),!Util.isNullOrUndefined(i)&&i>1){this.alpha=1,this.multiplierText.alpha=1,this.multiplierText.text=Math.floor(e*i).toLocaleString(void 0,{useGrouping:!0}),(r=new PIXI.tween.Tween(this)).time=250,r.from({scale:{x:1,y:1}}),r.to({scale:{x:2,y:2}}),r.easing=PIXI.tween.Easing.outQuad(),r.expire=!0,r.addTo(SceneManager.main.tween),r.start(),(a=new PIXI.tween.Tween(this)).time=150,a.from({scale:{x:2,y:2}}),a.to({scale:{x:1.8,y:1.8}}),a.easing=PIXI.tween.Easing.inQuad(),a.expire=!0,a.addTo(SceneManager.main.tween),r.chain(a);var n=new PIXI.tween.Tween(this);n.time=500,n.from({alpha:1,scale:{x:1.8,y:1.8}}),n.to({alpha:0,scale:{x:1.7,y:1.7}}),n.expire=!0,n.addTo(SceneManager.main.tween),a.chain(n),n.on("end",function(){t.parent.removeChild(t)},this),this.currentTween.push(r),this.currentTween.push(a),this.currentTween.push(n)}else{this.alpha=1,this.scoreText.alpha=1,this.scoreText.text=e.toLocaleString();var r=new PIXI.tween.Tween(this);r.time=600,r.from({scale:{x:1,y:1}}),r.to({scale:{x:1.2,y:1.2}}),r.expire=!0,r.addTo(SceneManager.main.tween),r.start();var a=new PIXI.tween.Tween(this);a.delay=300,a.time=200,a.from({alpha:1}),a.to({alpha:0}),a.expire=!0,a.easing=PIXI.tween.Easing.inOutQuad(),a.addTo(SceneManager.main.tween),a.start(),a.on("end",function(){t.parent.removeChild(t)},this),this.currentTween.push(r),this.currentTween.push(a)}}},{key:"ClearTween",value:function(){this.currentTween.length>0&&(this.currentTween.forEach(function(e){e.stop(),e.clear(),e.remove()}),this.currentTween=[])}}],[{key:"NewScoreFlyer",value:function(){var e=SceneManager.main.poolManager.Get("score_flyer");return Util.isNullOrUndefined(e)&&(e=new t),e.ClearTween(),e}}]),t}(),TextOptions=function e(){_classCallCheck(this,e),this.position=new PIXI.Point(0,0),this.scale=new PIXI.Point(1,1)},DuelRadioButton=function(e){function t(e,i,n){_classCallCheck(this,t);var r=null;null!=n&&(r=PIXI.Sprite.fromImage(n));var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a._sprite=r;var s=e.toString();return a.scene=e,a.groupName=i,a.interactive=!0,a.buttonMode=!0,null==t.group[s]&&(t.group[s]={}),null==t.group[s][i]?t.group[s][i]=[a]:t.group[s][i].push(a),a.isBeingPressed=!1,a._isSelected=!1,a.on("pointerdown",a.onPointerDown,a).on("pointerup",a.onPointerUp,a).on("pointerover",a.onPointerOver,a).on("pointerout",a.onPointerOut,a).on("pointermove",a.onPointerMove,a),a.addChild(a._sprite),a._sprite.anchor.set(.5),a._enabled=!0,a}return _inherits(t,TextOverlayContainer),_createClass(t,[{key:"select",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=0;i<t.group[this.scene.toString()][this.groupName].length;i++){var n=t.group[this.scene.toString()][this.groupName][i];n!=this&&n.onUnSelected()}this.onSelected(),e&&null!=this.onSelect&&this.onSelect.call(this.onSelectContext)}},{key:"setOnUnselected",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.onUnselect=e,this.onUnselectContext=t}},{key:"setOnSelected",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.onSelect=e,this.onSelectContext=t}},{key:"onPointerOver",value:function(){}},{key:"onPointerOut",value:function(){this.isBeingPressed=!1}},{key:"onPointerDown",value:function(e){this.enabled&&(this.isBeingPressed=!0,this.lastMousePosition=e.data.global.clone())}},{key:"onPointerUp",value:function(){this.isBeingPressed&&this.select(!0),this.isBeingPressed=!1}},{key:"onPointerMove",value:function(e){null!=this.lastMousePosition&&(Math.abs(this.lastMousePosition.x-e.data.global.x)<20*Util.pixelRatio&&Math.abs(this.lastMousePosition.y-e.data.global.y)<20*Util.pixelRatio||(this.isBeingPressed=!1))}},{key:"onUnSelected",value:function(){this._isSelected=!1,this.interactive=!0,this.buttonMode=!0,null!=this.onUnselect&&this.onUnselect.call(this.onUnselectContext,this)}},{key:"onSelected",value:function(){this._isSelected=!0,this.interactive=!1,this.buttonMode=!1}},{key:"onEnabled",value:function(){this.interactive=this.buttonMode=!this._isSelected}},{key:"onDisabled",value:function(){this.interactive=this.buttonMode=!1}},{key:"sprite",get:function(){return this._sprite}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e,e?(this.alpha=1,this.onEnabled()):(this.alpha=.25,this.onDisabled())}},{key:"isSelected",get:function(){return this._isSelected}}]),t}();DuelRadioButton.group={};var ShopItem=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"assets/upgrades/upgrade_list_bg.png",0,0));i.upgrade=e,i.sprite.anchor.set(0,0);var n=new PIXI.Sprite(e.sprite);n.x=10,n.y=10,n.width=e.sprite.width,n.height=e.sprite.height,i.addChild(n),i.upgradeName=new PIXI.extras.BitmapText(e.name+" Lv."+e.currentLevel,{font:"14px mini-wakuwaku-maru",align:"left",tint:16101737}),i.upgradeName.x=n.width+n.x+5,i.upgradeName.y=10,i.addChild(i.upgradeName),i.description=new PIXI.extras.BitmapText(e.descriptions[0],{font:"11px mini-wakuwaku-maru",align:"left",tint:10000536}),i.description.x=n.width+n.x+5,i.description.y=50,i.addChild(i.description),i.coinIcon=PIXI.Sprite.fromImage("assets/upgrades/coin.png"),i.coinIcon.scale.set(.5),i.coinIcon.anchor.set(1,1),i.coinIcon.position.set(337,103),i.addChild(i.coinIcon),i.cost=new PIXI.extras.BitmapText(e.costs[e.currentLevel-1].toString(),{font:"13px mini-wakuwaku-maru",align:"right",tint:16777215}),i.cost.anchor=new PIXI.Point(1,1),i.cost.position.set(312,99),i.addChild(i.cost),i.upgradeButton=new DuelBrightnessButton("assets/upgrades/claim_btn_2.png",.25,-.25),i.upgradeButton.position.set(307,46),i.upgradeButton.setOnClick(i.upgradeButtonClick,i),i.addChild(i.upgradeButton);var r=PIXI.Sprite.fromImage("assets/upgrades/bar_upgrade_gray.png");return r.x=n.width+n.x+5,r.y=31,i.addChild(r),i.barForeground=PIXI.Sprite.fromImage("assets/upgrades/bar_upgrade_green.png"),i.barForeground.x=r.x,i.barForeground.y=r.y,i.addChild(i.barForeground),i.progress=PIXI.Sprite.fromImage("assets/game/WhiteRectangle.png"),i.progress.width=0,i.progress.height=r.height,i.progress.tint=16777215,i.progress.x=r.x,i.progress.y=r.y,i.barForeground.mask=i.progress,i.addChild(i.progress),i.maxText=new PIXI.extras.BitmapText("MAX",{font:"10px mini-wakuwaku-maru",tint:16777215,align:"center"}),i.maxText.anchor=new PIXI.Point(.5,0),i.maxText.x=r.x+r.width/2,i.maxText.y=r.y,i.addChild(i.maxText),i.maxText.visible=!1,i.enabled=!1,i}return _inherits(t,DuelBrightnessButton),_createClass(t,[{key:"upgradeButtonClick",value:function(){this.upgrade.currentLevel>=this.upgrade.costs.length||(this.upgrade.upgrade(),this.upgrade.save(),null!=this.onUpgrade&&this.onUpgrade.call(this.onUpgradeContext,this.upgrade))}},{key:"setOnUpgrade",value:function(e,t){this.onUpgrade=e,this.onUpgradeContext=t}},{key:"refresh",value:function(e){this.upgradeName.text=this.upgrade.name+" Lv."+this.upgrade.currentLevel,this.description.text=this.upgrade.descriptions[this.upgrade.currentLevel-1],this.upgrade.currentLevel>=this.upgrade.costs.length?(this.upgradeButton.enabled=!0,this.upgradeButton.sprite.texture=PIXI.Texture.fromImage("assets/upgrades/claim_btn_1.png"),this.cost.alpha=1):e<this.upgrade.costs[this.upgrade.currentLevel-1]?(this.upgradeButton.enabled=!1,this.cost.alpha=.5,this.upgradeButton.sprite.texture=PIXI.Texture.fromImage("assets/upgrades/claim_btn_2.png")):(this.upgradeButton.enabled=!0,this.cost.alpha=1,this.upgradeButton.sprite.texture=PIXI.Texture.fromImage("assets/upgrades/claim_btn_1.png")),this.upgrade.currentLevel<this.upgrade.costs.length?(this.cost.text=this.upgrade.costs[this.upgrade.currentLevel-1].toString(),this.coinIcon.visible=!0,this.upgradeButton.visible=!0,this.barForeground.texture=PIXI.Texture.fromImage("assets/upgrades/bar_upgrade_green.png"),this.maxText.visible=!1):(this.cost.text="",this.coinIcon.visible=!1,this.upgradeButton.visible=!1,this.barForeground.texture=PIXI.Texture.fromImage("assets/upgrades/bar_upgrade_yellow.png"),this.maxText.visible=!0),this.progress.width=this.barForeground.width*(this.upgrade.currentLevel/this.upgrade.values.length)}}]),t}(),ShopUI=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0,.77));i.backgroundSprite=PIXI.Sprite.fromImage("assets/upgrades/Upgrade_bg.png"),i.backgroundSprite.anchor.set(.5,.5),i.backgroundSprite.position.set(270,480),i.backgroundSprite.alpha=1,i.backgroundSprite.interactive=!0,i.addChild(i.backgroundSprite),i.scroller=new Scroller(new PIXI.Rectangle(0,0,373,496)),i.scroller.x=-177,i.scroller.y=-168,i.backgroundSprite.addChild(i.scroller);var n=new DuelBrightnessButton(PIXI.loader.resources[Const.path.ui.closeButton].texture,.15,-.15);n.position.set(220,-360),n.setOnClick(i.close,i),i.backgroundSprite.addChild(n);var r=PIXI.Sprite.fromImage("assets/upgrades/coin.png");r.y=10,r.x=530-r.width,i.addChild(r),i.coinText=new PIXI.extras.BitmapText("123,456",{font:"30px mini-wakuwaku-maru",align:"center",tint:16777215}),i.coinText.anchor=new PIXI.Point(1,0),i.coinText.y=20,i.coinText.x=520-r.width,i.addChild(i.coinText);var a=e.upgradeManager.getAllUpgrades();i.shopItems=[];for(var s=0;s<a.length;s++){var o=new ShopItem(a[s]);o.y=s*(o.height+8),i.scroller.content.addChild(o),i.shopItems.push(o),o.setOnUpgrade(i.refresh,i)}return i}return _inherits(t,BubblePopup),_createClass(t,[{key:"show",value:function(){var e=new PIXI.tween.Tween(this.backgroundSprite,SceneManager.main.tween);e.from({y:560}),e.to({y:480}),e.time=100,e.easing=PIXI.tween.Easing.inQuad();var t=new PIXI.tween.Tween(this.backgroundSprite,SceneManager.main.tween);t.from({y:-400}),t.to({y:560}),t.easing=PIXI.tween.Easing.outQuad(),t.time=150,t.chain(e),t.start()}},{key:"update",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),this.scroller.update()}},{key:"refresh",value:function(){var e=SaveLoadManager.GetSaveData("Player").coin||0;this.coinText.text=e.toLocaleString(void 0,{useGrouping:!0});for(var t=0;t<this.shopItems.length;t++)this.shopItems[t].refresh(e)}},{key:"close",value:function(){var e=new PIXI.tween.Tween(this.backgroundSprite,SceneManager.main.tween);e.from({y:560}),e.to({y:-400}),e.easing=PIXI.tween.Easing.inQuad(),e.time=150,e.once("end",function(){this.parent.removeChild(this)},this);var t=new PIXI.tween.Tween(this.backgroundSprite,SceneManager.main.tween);t.from({y:480}),t.to({y:560}),t.easing=PIXI.tween.Easing.outQuad(),t.time=100,t.chain(e),t.start()}}]),t}(),TextField=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.scene=e;var n=new DuelBrightnessButton(PIXI.Texture.fromImage("assets/tutorial/textinput_bg.png"),0,0);i.addChild(n),n.sprite.anchor.set(.5,.5),n.position.set(270,380),n.setOnClick(i.onFocused,i),i.caret=PIXI.Sprite.fromImage("assets/tutorial/caret.png"),n.addChild(i.caret),i.caret.anchor.set(.5,.5),i.caret.position.set(0,14),i.caret.visible=!1,i.focused=!1,i.bitmapText=new PIXI.extras.BitmapText("",{font:"25px mini-wakuwaku-maru",align:"center",tint:16777215}),i.bitmapText.anchor=new PIXI.Point(.5,.5),i.bitmapText.position.set(270,394),i.addChild(i.bitmapText),i.keyboardBackground=PIXI.Sprite.fromImage("assets/tutorial/text field/keyboard_bg.png"),i.keyboardBackground.anchor.set(.5,1),i.keyboardBackground.position.set(270,960),i.keyboardBackground.interactive=!0,i.addChild(i.keyboardBackground),i.keyboardBackground.visible=!1,i.keyboardContainer=new PIXI.Container,i.addChild(i.keyboardContainer);var r=function(e,t,i){for(var n=(540-50*e.length)/2+25,r=[],a=0;a<e.length;a++){var s=this.createButton(e.charAt(a),i[a]);s.position.set(50*a+n,t),this.keyboardContainer.addChild(s),r.push(s)}return r};r.call(i,"0123456789",600,[PIXI.Texture.fromImage("assets/tutorial/text field/0.png"),PIXI.Texture.fromImage("assets/tutorial/text field/1.png"),PIXI.Texture.fromImage("assets/tutorial/text field/2.png"),PIXI.Texture.fromImage("assets/tutorial/text field/3.png"),PIXI.Texture.fromImage("assets/tutorial/text field/4.png"),PIXI.Texture.fromImage("assets/tutorial/text field/5.png"),PIXI.Texture.fromImage("assets/tutorial/text field/6.png"),PIXI.Texture.fromImage("assets/tutorial/text field/7.png"),PIXI.Texture.fromImage("assets/tutorial/text field/8.png"),PIXI.Texture.fromImage("assets/tutorial/text field/9.png")]),i.nonCapitalLetters=[],i.nonCapitalLetters=i.nonCapitalLetters.concat(r.call(i,"qwertyuiop",690,[PIXI.Texture.fromImage("assets/tutorial/text field/q.png"),PIXI.Texture.fromImage("assets/tutorial/text field/w.png"),PIXI.Texture.fromImage("assets/tutorial/text field/e.png"),PIXI.Texture.fromImage("assets/tutorial/text field/r.png"),PIXI.Texture.fromImage("assets/tutorial/text field/t.png"),PIXI.Texture.fromImage("assets/tutorial/text field/y.png"),PIXI.Texture.fromImage("assets/tutorial/text field/u.png"),PIXI.Texture.fromImage("assets/tutorial/text field/i.png"),PIXI.Texture.fromImage("assets/tutorial/text field/o.png"),PIXI.Texture.fromImage("assets/tutorial/text field/p.png")]),r.call(i,"asdfghjkl",765,[PIXI.Texture.fromImage("assets/tutorial/text field/a.png"),PIXI.Texture.fromImage("assets/tutorial/text field/s.png"),PIXI.Texture.fromImage("assets/tutorial/text field/d.png"),PIXI.Texture.fromImage("assets/tutorial/text field/f.png"),PIXI.Texture.fromImage("assets/tutorial/text field/g.png"),PIXI.Texture.fromImage("assets/tutorial/text field/h.png"),PIXI.Texture.fromImage("assets/tutorial/text field/j.png"),PIXI.Texture.fromImage("assets/tutorial/text field/k.png"),PIXI.Texture.fromImage("assets/tutorial/text field/l.png")]),r.call(i,"zxcvbnm",840,[PIXI.Texture.fromImage("assets/tutorial/text field/z.png"),PIXI.Texture.fromImage("assets/tutorial/text field/x.png"),PIXI.Texture.fromImage("assets/tutorial/text field/c.png"),PIXI.Texture.fromImage("assets/tutorial/text field/v.png"),PIXI.Texture.fromImage("assets/tutorial/text field/b.png"),PIXI.Texture.fromImage("assets/tutorial/text field/n.png"),PIXI.Texture.fromImage("assets/tutorial/text field/m.png")])),i.capitalLetters=[],i.capitalLetters=i.capitalLetters.concat(r.call(i,"QWERTYUIOP",690,[PIXI.Texture.fromImage("assets/tutorial/text field/Qq.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Ww.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Ee.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Rr.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Tt.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Yy.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Uu.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Ii.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Oo.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Pp.png")]),r.call(i,"ASDFGHJKL",765,[PIXI.Texture.fromImage("assets/tutorial/text field/Aa.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Ss.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Dd.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Ff.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Gg.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Hh.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Jj.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Kk.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Ll.png")]),r.call(i,"ZXCVBNM",840,[PIXI.Texture.fromImage("assets/tutorial/text field/Zz.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Xx.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Cc.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Vv.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Bb.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Nn.png"),PIXI.Texture.fromImage("assets/tutorial/text field/Mm.png")]));for(var a=0;a<i.capitalLetters.length;a++)i.capitalLetters[a].visible=!1;i.shiftButton=i.createButton("SH",PIXI.Texture.fromImage("assets/tutorial/text field/shift3.png")),i.shiftButton.position.set(51,840),i.keyboardContainer.addChild(i.shiftButton);var s=i.createButton("BK",PIXI.Texture.fromImage("assets/tutorial/text field/backspace.png"));s.position.set(485,840),i.keyboardContainer.addChild(s);var o=i.createButton("-",PIXI.Texture.fromImage("assets/tutorial/text field/dash.png"));o.position.set(45,915),i.keyboardContainer.addChild(o);var u=i.createButton(".",PIXI.Texture.fromImage("assets/tutorial/text field/dot.png"));u.position.set(95,915),i.keyboardContainer.addChild(u);var l=i.createButton("DONE",PIXI.Texture.fromImage("assets/tutorial/text field/done.png"));l.position.set(467,915),i.keyboardContainer.addChild(l);var h=i.createButton("_",PIXI.Texture.fromImage("assets/tutorial/text field/spacebar.png"));return h.position.set(266,915),i.keyboardContainer.addChild(h),i.confirmButton=new DuelBrightnessButton("assets/tutorial/tutorial_confirm_btn.png",.25,-.25),i.confirmButton.position.set(353,500),i.confirmButton.setOnClick(function(){0!=this.text.length&&(this.close(),this.emit("complete"))},i),i.confirmButton.enabled=!1,i.confirmButton.alpha=.5,i.addChild(i.confirmButton),i.keyboardContainer.visible=!1,i.lockCapital=!1,i.lastShift=null,i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"toggleShift",value:function(e){var t=!this.isShowingCapitalLetters;null!=this.lastShift&&Date.now()-this.lastShift<500?(this.lockCapital=!0,t=!0,this.lastShift=null):(this.lockCapital=!1,this.lastShift=Date.now()),t?this.lockCapital?e.sprite.texture=PIXI.Texture.fromImage("assets/tutorial/text field/shift2.png"):e.sprite.texture=PIXI.Texture.fromImage("assets/tutorial/text field/shift1.png"):e.sprite.texture=PIXI.Texture.fromImage("assets/tutorial/text field/shift3.png");for(var i=0;i<this.capitalLetters.length;i++)this.capitalLetters[i].visible=t,this.nonCapitalLetters[i].visible=!this.capitalLetters[i].visible}},{key:"addCharacter",value:function(e){if(!(this.bitmapText.text.length>=10)&&(this.bitmapText.text+=e,this.caret.x=this.bitmapText.width/2+2,this.confirmButton.alpha=1,this.confirmButton.enabled=!0,!this.lockCapital&&this.isShowingCapitalLetters)){for(var t=0;t<this.capitalLetters.length;t++)this.capitalLetters[t].visible=!1,this.nonCapitalLetters[t].visible=!0;this.shiftButton.sprite.texture=PIXI.Texture.fromImage("assets/tutorial/text field/shift3.png")}}},{key:"removeLastCharacter",value:function(){if(""!=this.bitmapText.text){var e=this.bitmapText.text.substr(0,this.bitmapText.text.length-1).trim();this.bitmapText.text=e,this.caret.x=this.bitmapText.width/2+2,""==e&&(this.confirmButton.enabled=!1,this.confirmButton.alpha=.5)}}},{key:"onFocused",value:function(){this.focused||(this.focused=!0,this.keyboardBackground.visible=!0,this.keyboardContainer.visible=!0,this.switchCaretVisibility(this),this.scene.once("backgroundclicked",this.close,this))}},{key:"close",value:function(){if(0!=this.text.length){this.caret.visible=!1,this.focused=!1,this.keyboardBackground.visible=!1,this.keyboardContainer.visible=!1,this.emit("collapsed"),null!=this.caretBlink&&(clearTimeout(this.caretBlink),this.caretBlink=null),this.scene.off("backgroundclicked",this.close,this);for(var e=0;e<this.capitalLetters.length;e++)this.capitalLetters[e].visible=!1,this.nonCapitalLetters[e].visible=!this.capitalLetters[e].visible;this.shiftButton.sprite.texture=PIXI.Texture.fromImage("assets/tutorial/text field/shift3.png")}}},{key:"createButton",value:function(e,t){var i=new DuelBrightnessButton(t,.25,-.25);return i.setOnClick(function(){"SH"==e?this.toggleShift(i):"BK"==e?this.removeLastCharacter():"SPACE"==e?this.bitmapText.text.length>0&&this.addCharacter(" "):"DONE"==e?this.close():this.addCharacter(e)},this),i}},{key:"switchCaretVisibility",value:function(e){e.caretBlink=null,e.focused?(e.caret.visible=!e.caret.visible,e.caretBlink=setTimeout(e.switchCaretVisibility,500,e)):e.caret.visible=!1}},{key:"isShowingCapitalLetters",get:function(){return this.capitalLetters[0].visible}},{key:"text",get:function(){return this.bitmapText.text.trim()}}]),t}(),Dialogue=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.dialogue={s:null,m:null,l:null},e.dialogueComponents={s:{text:null},m:{text:null},l:{text:null,image:null}},e.dialogue.l=PIXI.Sprite.fromImage("assets/tutorial/btn_speechballoon_l.png"),e.dialogue.l.anchor.set(.5,1),e.dialogue.l.position.set(270,700),e.addChild(e.dialogue.l),e.dialogue.m=PIXI.Sprite.fromImage("assets/tutorial/btn_speechballoon_m.png"),e.dialogue.m.anchor.set(0,1),e.dialogue.m.position.set(180,700),e.addChild(e.dialogue.m),e.dialogue.s=PIXI.Sprite.fromImage("assets/tutorial/btn_speechballoon_s.png"),e.dialogue.s.anchor.set(0,1),e.dialogue.s.position.set(180,700),e.addChild(e.dialogue.s),e.bear=PIXI.Sprite.fromImage("assets/tutorial/head_chef.png"),e.bear.anchor.set(0,.5),e.bear.position.set(0,860),e.addChild(e.bear),e.dialogueComponents.s.text=new PIXI.extras.BitmapText("TEXT",{font:"26px mini-wakuwaku-maru",tint:0,align:"left"}),e.dialogueComponents.s.text.position.set(32,28-e.dialogue.s.height),e.dialogue.s.addChild(e.dialogueComponents.s.text),e.dialogueComponents.m.text=new PIXI.extras.BitmapText("TEXT",{font:"26px mini-wakuwaku-maru",tint:0,align:"left"}),e.dialogueComponents.m.text.position.set(32,32-e.dialogue.m.height),e.dialogue.m.addChild(e.dialogueComponents.m.text),e.dialogueComponents.l.text=new PIXI.extras.BitmapText("TEXT",{font:"26px mini-wakuwaku-maru",tint:0,align:"center"}),e.dialogueComponents.l.text.anchor=new PIXI.Point(.5,.5),e.dialogueComponents.l.text.position.set(0,70-e.dialogue.l.height),e.dialogue.l.addChild(e.dialogueComponents.l.text),e.dialogueComponents.l.image=PIXI.Sprite.fromImage("assets/tutorial/tutorial_guide_01_01.png"),e.dialogueComponents.l.image.anchor.set(.5,1),e.dialogueComponents.l.image.position.set(0,-100),e.dialogue.l.addChild(e.dialogueComponents.l.image),e.dialogue.l.visible=!1,e.dialogue.m.visible=!1,e.dialogue.s.visible=!1,e.continueButton=new DuelBrightnessButton("assets/tutorial/tutorial_play_btn.png",.25,-.25),e.continueButton.position.set(395,720),e.addChild(e.continueButton),e.continueButton.visible=!1,e.tapPanel=PIXI.Sprite.fromImage("assets/game/WhiteRectangle.png"),e.tapPanel.width=540,e.tapPanel.height=960,e.tapPanel.alpha=0,e.tapPanel.interactive=!0,e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"show",value:function(e){this.queue=e,this.bear.x=-this.bear.width;var t=new PIXI.tween.Tween(this.bear,SceneManager.main.tween);t.delay=500,t.from({x:-this.bear.width}),t.to({x:-this.bear.width/3}),t.time=300,t.start(),t.once("end",function(){this.showInQueue()},this)}},{key:"showInQueue",value:function(){if(0==this.queue.length)return(s=new PIXI.tween.Tween(this.bear,SceneManager.main.tween)).delay=500,s.from({x:-this.bear.width/3}),s.to({x:-this.bear.width}),s.time=300,s.start(),void s.once("end",function(){this.parent.removeChild(this),this.emit("complete")},this);var e=this.queue.shift(),t=this.dialogue.s,i=this.dialogueComponents.s.text;if(null!=e.image){t=this.dialogue.l,i=this.dialogueComponents.l.text;var n=this.dialogueComponents.l.image;if(e.image.length>1){var r=null;(r=function(i,a){a>=e.image.length&&(a-=e.image.length),n.texture=e.image[a],setTimeout(function(e){t.visible&&r(e,a+1)},500,i)})(this,0)}else n.texture=e.image[0]}else e.text.split("\n").length>=3&&(t=this.dialogue.m,i=this.dialogueComponents.m.text);null!=e.textOffset&&(i.position.x+=e.textOffset.x,i.position.y+=e.textOffset.y),t.visible=!0,i.text=e.text,this.currentDialogue=e,t.scale.x=.1,t.scale.y=.1;var a=new PIXI.tween.Tween(t,SceneManager.main.tween);a.time=50,a.easing=PIXI.tween.Easing.linear(),a.from({scale:{x:1.1,y:1.1}}),a.to({scale:{x:1,y:1}});var s=new PIXI.tween.Tween(t,SceneManager.main.tween);s.easing=PIXI.tween.Easing.outQuad(),s.from({scale:{x:.1,y:.1}}),s.to({scale:{x:1.1,y:1.1}}),s.time=150,s.chain(a),s.start(),"panel"==e.progressMethod?(this.addChild(this.tapPanel),this.tapPanel.once("pointerdown",function(){null!=e.textOffset&&(i.position.x-=e.textOffset.x,i.position.y-=e.textOffset.y),t.visible=!1,this.removeChild(this.tapPanel),this.showInQueue()},this)):("play"==e.progressMethod?this.continueButton.sprite.texture=PIXI.Texture.fromImage("assets/tutorial/tutorial_play_btn.png"):"ok"==e.progressMethod&&(this.continueButton.sprite.texture=PIXI.Texture.fromImage("assets/tutorial/tutorial_ok_btn.png")),this.continueButton.visible=!0,this.continueButton.setOnClick(function(){null!=e.textOffset&&(i.position.x-=e.textOffset.x,i.position.y-=e.textOffset.y),this.continueButton.visible=!1,this.continueButton.setOnClick(null,null),t.visible=!1,this.showInQueue()},this))}}]),t}(),DialogueSequence=function e(){_classCallCheck(this,e)},AchievementManager=function(){function e(){_classCallCheck(this,e),this.load()}return _createClass(e,[{key:"load",value:function(){this.achievements={};for(var e=0;e<Achievements.Achievements.length;e++)this.achievements[Achievements.Achievements[e].id]=new Achievement(Achievements.Achievements[e])}},{key:"checkAchievements",value:function(e){var t=[];for(var i in this.achievements)this.achievements[i].check(e)&&t.push(this.achievements[i]),this.achievements[i].save();return t}},{key:"getAllAchievements",value:function(){var e=[];for(var t in this.achievements)e.push(this.achievements[t]);return e}}]),e}(),Achievement=function(){function e(t){_classCallCheck(this,e),this.id=t.id,this.name=t.name,this.descriptions=t.descriptions.concat(),this.valueToCheck=t.valueToCheck,this.values=t.values.concat(),this.level=SaveLoadManager.GetAchievementLevel("Player",t.id)||0,this.progress=SaveLoadManager.GetAchievementProgress("Player",t.id),null!=t.displayValues&&(this.displayValues=t.displayValues.concat()),this.progress||(">="==t.operator?this.progress=0:this.progress=1/0),this.sprites=[],this.operator=t.operator,this.rewards=t.rewards.concat();for(var i=0;i<t.sprites.length;i++)this.sprites.push(PIXI.Sprite.fromImage(t.sprites[i]))}return _createClass(e,[{key:"claimReward",value:function(){this.claimable&&(GameAnalytics("addResourceEvent",gameanalytics.EGAResourceFlowType.Source,"coin",this.rewards[this.level],"achievement",this.id),SaveLoadManager.AddCoin("Player",this.rewards[this.level]),this.level++,SaveLoadManager.SaveAchievement("Player",this))}},{key:"claimableAt",value:function(e){switch(this.operator){case">=":return this.progress>=this.values[e];case"<=":return this.progress<=this.values[e];default:return!1}}},{key:"check",value:function(e){var t=!1,i=!1,n=this.values[this.level];switch(this.operator){case">=":t=this.progress>=n,i=e[this.valueToCheck]>=n,this.progress=Math.max(this.progress,e[this.valueToCheck]);break;case"<=":t=this.progress<=n,i=e[this.valueToCheck]<=n,this.progress=Math.min(this.progress,e[this.valueToCheck])}return i&&!t}},{key:"save",value:function(){SaveLoadManager.SaveAchievement("Player",this)}},{key:"claimable",get:function(){switch(this.operator){case">=":return this.progress>=this.values[this.level];case"<=":return this.progress<=this.values[this.level];default:return!1}}}]),e}(),UpgradeManager=function(){function e(){_classCallCheck(this,e),this.load()}return _createClass(e,[{key:"load",value:function(){this.upgrades={};for(var e=SaveLoadManager.GetSaveData("Player"),t=0;t<Upgrades.Upgrades.length;t++){var i=new Upgrade(Upgrades.Upgrades[t],e);this.upgrades[Upgrades.Upgrades[t].id]=i}}},{key:"getById",value:function(e){return this.upgrades[e]}},{key:"getAllUpgrades",value:function(){var e=[];for(var t in this.upgrades)e.push(this.upgrades[t]);return e}}]),e}(),Upgrade=function(){function e(t,i){_classCallCheck(this,e),this.id=t.id,this.name=t.name,this.values=t.values.concat(),this.descriptions=t.descriptions.concat(),this.maxLevel=t.costs.length,this.costs=t.costs.concat(),this.currentLevel=i.upgrades[this.id]||1,this.sprite=PIXI.Texture.fromImage(t.sprite)}return _createClass(e,[{key:"upgrade",value:function(){this.currentLevel>=this.maxLevel||(GameAnalytics("addResourceEvent",gameanalytics.EGAResourceFlowType.Sink,"coin",this.costs[this.currentLevel-1],"upgrade",this.id),SaveLoadManager.DeductCoin("Player",this.costs[this.currentLevel-1]),this.currentLevel++)}},{key:"save",value:function(){SaveLoadManager.SaveUpgrade("Player",this)}},{key:"currentValue",get:function(){return this.values[this.currentLevel-1]||0}}]),e}(),RequirementUI=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.isPrime=!1,e.currentTween=[],e.matchedTween=[],e.Create(),e.displayGroup=new PIXI.display.DisplayGroup(350,!1),e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"SetOnFadedIn",value:function(e,t){this.onFadedIn=e,this.onFadedInContext=t}},{key:"Hide",value:function(){this.bg.visible=!1}},{key:"Create",value:function(){this.type=BubbleType.red;var e=new PIXI.Sprite(PIXI.Texture.fromImage(Const.path.nigiriRequestPath[BubbleType[this.type]]));e.anchor.set(.5,.5),e.position.set(2,8),e.displayGroup=new PIXI.DisplayGroup(351,!1),e.scale.set(1/.9,1/.9),this.sushiIcon=e;var t=new PIXI.extras.BitmapText("24",{font:"26px mini-wakuwaku-maru-request-counter",align:"center"});t.anchor=new PIXI.Point(.5,.5),t.scale.set(1.25/.9,1.25/.9),t.position.set(5,34),t.displayGroup=new PIXI.DisplayGroup(352,!1),this.amountText=t,this.CreateReq()}},{key:"CreateReq",value:function(){var e=new PIXI.Sprite;(e=PIXI.Sprite.fromImage("assets/game/request_balloon.png")).anchor.set(.45,.5),e.position.set(0,0),e.scale.set(.9,.9),this.bg=this.addChild(e),this.bg.displayGroup=new PIXI.DisplayGroup(350,!1),e.addChild(this.sushiIcon),e.addChild(this.amountText)}},{key:"ShowHeart",value:function(e){this.CleanTween(),this.amountText.alpha=0,this.sushiIcon.texture=PIXI.Texture.fromImage("assets/game/icon_heart.png"),this.sushiIcon.position.set(this.heartPosition.x,this.heartPosition.y);var t=new PIXI.tween.Tween(this.sushiIcon);t.time=250,t.from({scale:{x:0,y:0}}),t.to({scale:{x:1/.9,y:1.25}}),t.easing=PIXI.tween.Easing.outBack(),t.expire=!0,t.start(),t.addTo(SceneManager.main.tween),this.currentTween.push(t),t.once("end",function(){null!=e&&e()})}},{key:"NewRequirement",value:function(e,t){this.type=e,this.amount=t,this.startAmount=t,this.sushiIcon.texture=PIXI.Texture.fromImage(Const.path.nigiriRequestPath[BubbleType[this.type]]),this.sushiIcon.position.set(0,8),this.UpdateAmount()}},{key:"UpdateAmount",value:function(){this.amountText.text=this.amount.toString(),this.CleanMatchedTween();var e=new PIXI.tween.Tween(this.bg);e.time=200,e.from({scale:{x:.95,y:.95}}),e.to({scale:{x:.9,y:.9}}),e.easing=PIXI.tween.Easing.outQuad(),e.expire=!0,e.start(),e.addTo(SceneManager.main.tween),this.matchedTween.push(e)}},{key:"FadeIn",value:function(){this.bg.visible=!0,this.CleanTween(),this.amountText.alpha=1,this.sushiIcon.position.set(0,-5),this.bg.alpha=1,this.bg.scale.y=1,this.bg.position.set(0,0),Util.assert(null!=Const.path.nigiriRequestPath[BubbleType[this.type]],"Can't find path for nigiri or bubble type "+this.type),this.sushiIcon.texture=PIXI.Texture.fromImage(Const.path.nigiriRequestPath[BubbleType[this.type]]);var e=new PIXI.tween.Tween(this.bg);e.time=200,e.from({scale:{x:0,y:0}}),e.to({scale:{x:.9,y:.9}}),e.expire=!0;var t=new PIXI.tween.Tween(this.bg);t.time=300,t.from({scale:{x:1,y:1}}),t.to({scale:{x:.9,y:.9}}),t.on("end",function(){null!=this.onFadedIn&&this.onFadedIn.call(this.onFadedInContext)},this),t.expire=!0,e.chain(t),e.addTo(SceneManager.main.tween),this.currentTween.push(e),this.currentTween.push(t),e.start();var i=Math.random();i<.333333333?SoundManager.playSound("assets/sfx/cat_order01_tuberatanka.mp3"):i<.666666666667?SoundManager.playSound("assets/sfx/cat_order02_department64.wav"):SoundManager.playSound("assets/sfx/cat_order03_nekoninja.wav")}},{key:"FadeOut",value:function(e){this.CleanTween();var t=new PIXI.tween.Tween(this.bg);t.time=250,t.from({scale:{x:1,y:1},alpha:1}),t.to({scale:{x:1.2,y:1.2},alpha:1}),t.expire=!0;var i=new PIXI.tween.Tween(this.bg);i.time=250,i.from({scale:{x:1.2,y:1.2},alpha:1}),i.to({scale:{x:0,y:0},alpha:0}),i.expire=!0,t.chain(i),t.addTo(SceneManager.main.tween),this.currentTween.push(t),this.currentTween.push(i),t.start(),i.on("end",function(){null!=e&&e()})}},{key:"CleanTween",value:function(){this.currentTween.length>0&&(this.currentTween.forEach(function(e){e.stop(),e.clear(),e.remove()}),this.currentTween=[])}},{key:"CleanMatchedTween",value:function(){this.matchedTween.length>0&&(this.matchedTween.forEach(function(e){e.stop(),e.clear(),e.remove()}),this.matchedTween=[])}},{key:"heartPosition",get:function(){return new PIXI.Point(0,5)}}]),t}(),Cat=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.currentTween=[],i.Create(e),i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"Create",value:function(e){this.bodyType=e;var t=new PIXI.Sprite;t.anchor.set(.5,.5),this.sprite=this.addChild(t)}},{key:"CleanTween",value:function(){this.currentTween.length>0&&(this.currentTween.forEach(function(e){e.stop(),e.clear(),e.remove()}),this.currentTween=[])}}]),t}(),Patron=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.catType=e,i.nameTag=new PIXI.extras.BitmapText("LSDJFLSJ",{font:"30px mini-wakuwaku-maru",align:"center",tint:16711680}),i.nameTag.anchor=new PIXI.Point(.5,.5),i.powerUp=null,i}return _inherits(t,Cat),_createClass(t,[{key:"MoveOut",value:function(e){var t=this,i=new PIXI.tween.Tween(this);i.time=e,i.from({x:this.position.x}),i.to({x:this.position.x-500}),i.expire=!0,i.on("end",function(){t.Destroy()},this),i.addTo(SceneManager.main.tween),i.start(),this.currentTween.push(i)}},{key:"ComeIn",value:function(e,t,i){this.CleanTween();var n=new PIXI.tween.Tween(this);n.time=i,n.from({pos:{x:e.x,y:e.y},scale:{x:.9,y:.9}}),n.to({pos:{x:t.x,y:t.y},scale:{x:1,y:1}}),n.expire=!0,n.addTo(SceneManager.main.tween),n.start(),this.currentTween.push(n)}},{key:"UpdateExpression",value:function(){}},{key:"MoveTo",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.CleanTween();var r=new PIXI.tween.Tween(this);r.expire=!0,r.delay=n,r.time=i,r.from({x:this.x,y:this.y,scale:{x:this.scale.x,y:this.scale.y}}),r.to({x:e.x,y:e.y,scale:{x:t.x,y:t.y}}),r.addTo(SceneManager.main.tween),r.start(),this.currentTween.push(r)}},{key:"Destroy",value:function(){this.CleanTween(),this.visible=!1,SceneManager.main.poolManager.Add("cat_"+this.catType,this)}},{key:"currentPowerUp",get:function(){return this.powerUp}}],[{key:"NewPatron",value:function(e){var i=SceneManager.main.poolManager.Get("cat_"+e);Util.isNullOrUndefined(i)&&(i=new t(e)),i.CleanTween(),i.visible=!0,i.alpha=1,i.worldAlpha=1;Math.random();return i.sprite.texture=PIXI.loader.resources[Const.path.cats[CatType[e]].path].texture,i.nameTag.text=Const.path.cats[CatType[e]].name,i.powerUp=Const.path.cats[CatType[e]].powerUp,i}}]),t}(),PatronManager=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.queue=[],i.isPause=!1,i.isEven=!0,i.minShownCat=3,i.requests=[],i.customerOffset=20,i.isInitialized=!1,i.inTransition=!1,i.delayStartTime=0,i.gameManager=e,i.requirementUI=i.addChild(new RequirementUI),i.requirementUI.position.set(i.requirementPos.x,i.requirementPos.y),i.requirementUI.SetOnFadedIn(function(){},i),i.inTransition=!0,i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"Update",value:function(e,t){this.isInitialized&&(e-this.delayStartTime<1e3&&t-this.delayStartTime>=1e3&&(this.requirementUI.NewRequirement(this.requests[0].type,this.requests[0].amount),this.UpdateQueuePosition()),e-this.delayStartTime<2e3&&t-this.delayStartTime>=2e3&&(this.requirementUI.SetOnFadedIn(function(){this.inTransition=!1},this),this.requirementUI.FadeIn(),this.customerStartTime=t))}},{key:"Start",value:function(e){this.Reset(),this.requirementUI.Hide(),(!e||"undefined"!=typeof skipTutorial&&!0===skipTutorial)&&this.InitialRequest()}},{key:"UpdateQueueDisplay",value:function(){for(var e=0;e<this.queue.length;e++)2==e?(null!=this.queue[e]&&(this.queue[e].displayGroup=new PIXI.DisplayGroup(138-e,!1)),this.queue[e].sprite.tint=2500134,this.queue[e].visible=!0):1==e?(this.queue[e].displayGroup=new PIXI.DisplayGroup(138,!1),this.queue[e].sprite.tint=5000268,this.queue[e].visible=!0):0==e?(this.queue[e].displayGroup=new PIXI.DisplayGroup(140,!1),this.queue[e].sprite.tint=16777215,this.queue[e].visible=!0):this.queue[e].visible=!1}},{key:"UpdateQueuePosition",value:function(){for(var e=0;e<this.queue.length;e++)if(2==e){var t,i;t=this.isEven?new PIXI.Point(SceneManager.main.gameWidth/2+25,725-this.customerOffset):new PIXI.Point(SceneManager.main.gameWidth/2-25,725-this.customerOffset),i=new PIXI.Point(.82,.82),null!=this.queue[e]&&(this.queue[e].displayGroup=new PIXI.DisplayGroup(138-e,!1),this.queue[e].MoveTo(t,i,500,1e3)),this.queue[e].sprite.tint=2500134,this.queue[e].visible=!0}else 1==e?(t=this.isEven?new PIXI.Point(SceneManager.main.gameWidth/2-30,745-this.customerOffset):new PIXI.Point(SceneManager.main.gameWidth/2+30,745-this.customerOffset),i=new PIXI.Point(.88,.88),this.queue[e].displayGroup=new PIXI.DisplayGroup(138,!1),this.queue[e].MoveTo(t,i,500,1e3),this.queue[e].sprite.tint=5000268,this.queue[e].visible=!0):0==e?(i=new PIXI.Point(1,1),t=new PIXI.Point(SceneManager.main.gameWidth/2,765-this.customerOffset),this.queue[e].displayGroup=new PIXI.DisplayGroup(140,!1),this.queue[e].MoveTo(t,i,500,500),this.queue[e].sprite.tint=16777215,this.queue[e].visible=!0):this.queue[e].visible=!1}},{key:"DeductRequirement",value:function(e){this.IsRequirementMatched(e)&&(this.requirementUI.amount--,this.requirementUI.amount<=0&&(this.requirementUI.amount=0,this.CompleteRequest(function(){this.gameManager.coin.completeRequest(this.requirementUI.startAmount)},this)),this.requirementUI.UpdateAmount())}},{key:"IsRequirementMatched",value:function(e){return!this.inTransition&&e==this.requirementUI.type}},{key:"CheckRequirement",value:function(e,t){!this.isPause&&t>0&&(this.requirementUI.amount-t<=0?(this.requirementUI.amount=0,this.CompleteRequest(function(){this.gameManager.coin.completeRequest(this.requirementUI.startAmount)},this)):this.requirementUI.amount-=t,this.requirementUI.UpdateAmount())}},{key:"CheckRequirementSure",value:function(e){var t=this;if(!this.inTransition){if(this.isPause)return;var i=0;e.forEach(function(e){e==t.requirementUI.type&&i++}),this.CheckRequirement(this.requirementUI.type,i)}}},{key:"CompleteRequest",value:function(e,t){var i=this;if(!this.inTransition){this.inTransition=!0;this.gameManager.score.CompleteRequest(),this.gameManager.ingameStatTracker.RequestComplete++,this.gameManager.ingameStatTracker.MinRequestTime=Math.min(this.gameManager.gameTime-this.customerStartTime,this.gameManager.ingameStatTracker.MinRequestTime),this.gameManager.ingameStatTracker.RequestBubbleCount+=this.requirementUI.startAmount,Math.random()<.5?SoundManager.playSound("assets/sfx/cat_happy01_steffcaffrey.mp3"):SoundManager.playSound("assets/sfx/cat_happy02_aminut.wav"),this.emit("completerequest");var n=2==this.gameManager.tutorialProgress;this.requirementUI.ShowHeart(function(){setTimeout(function(t){t.requirementUI.FadeOut(function(){if(t.currentCustomer=t.queue.splice(0,1)[0],t.currentCustomer.displayGroup=new PIXI.DisplayGroup(141,!1),t.currentCustomer.MoveOut(1e3),t.gameManager.powerUpManager.ActivateFeverTime(),null!=t.currentCustomer.currentPowerUp){var i=t.gameManager.grid.GetRandomBubbleSlot();t.ApplyPowerUpOnSlot(i,t.currentCustomer.currentPowerUp)}null!=e&&e.call(t),n||t.gameManager.SetTimeout(function(e){e.NextRequest()},1e3,t,t)})},350,i)}),this.isPause=!0,this.isEven=!this.isEven,this.currentCustomer=null}}},{key:"Reset",value:function(){var e=this;null!=this.queue&&this.queue.length>0&&(this.queue.forEach(function(t){null!=t&&(t.Destroy(),e.removeChild(t))},this),this.queue=[]),null!=this.requests&&this.requests.length>0&&(this.requests=[]),this.requirementUI.type=null,this.isInitialized=!1,this.inTransition=!0}},{key:"InitialRequest",value:function(){this.isInitialized=!0,this.delayStartTime=this.gameManager.gameTime;for(var e=0;e<this.minShownCat;e++){for(var i=this.gameManager.grid.spawnBubbleTypes[Math.floor(Math.random()*this.gameManager.grid.spawnBubbleTypes.length)],n=0,r=0;r<Const.requestLevel.length;r++)n<=0?n=Const.requestLevel[r]:Const.requestLevel[r]<n&&(n=Const.requestLevel[r]);this.requests.push({type:i,amount:n});var a=Util.GetRandomInt(0,7),s=Patron.NewPatron(a);s.position=new PIXI.Point(t.spawnPosX,t.spawnPosY),s.scale=new PIXI.Point(t.spawnScaleX,t.spawnScaleY),this.queue.push(this.addChild(s))}this.UpdateQueueDisplay()}},{key:"NextRequest",value:function(){this.FadeInRequirementUI(),this.requests.splice(0,1);var e=this.gameManager.grid.spawnBubbleTypes[Math.floor(Math.random()*this.gameManager.grid.spawnBubbleTypes.length)],i=Const.requestLevel[Math.floor(Math.random()*Const.requestLevel.length)];this.requests.push({type:e,amount:i});var n=Util.GetRandomInt(0,7),r=Patron.NewPatron(n);r.position=new PIXI.Point(t.spawnPosX,t.spawnPosY),r.scale=new PIXI.Point(t.spawnScaleX,t.spawnScaleY),this.queue.push(this.addChild(r));var a=this.requests[0];this.requirementUI.NewRequirement(a.type,a.amount),this.UpdateQueuePosition(),setTimeout(function(e){e.isPause=!1,e.inTransition=!1},1e3,this)}},{key:"ApplyPowerUpOnSlot",value:function(e,t){if(null!=e){var i=Particle.NewParticle("particle_X2path",PIXI.loader.resources[Const.path.particle.whiteCircle].texture,PIXI.loader.resources["assets/particles/milky way.json"].data);i.con.displayGroup=new PIXI.display.DisplayGroup(451,!1),this.addChild(i.con),i.Play();var n=Particle.NewParticle("particle_X2arrive",PIXI.loader.resources["assets/particles/glow44x44.png"].texture,PIXI.loader.resources["assets/particles/sunny.json"].data);n.con.displayGroup=new PIXI.display.DisplayGroup(451,!1),this.addChild(n.con);var r=0,a=new PIXI.tween.Tween(i.spawnPos);a.time=1e3,a.from({y:this.requirementPos.y}),a.to({y:e.position.y}),a.addTo(SceneManager.main.tween),a.expire=!0;var s=new PIXI.tween.Tween(i.spawnPos);r+=s.time=600,s.easing=PIXI.tween.Easing.inOutQuad(),s.from({x:this.requirementPos.x}),s.to({x:SceneManager.main.gameWidth-100}),s.addTo(SceneManager.main.tween),s.expire=!0;var o=new PIXI.tween.Tween(i.spawnPos);r+=o.time=500,o.easing=PIXI.tween.Easing.inOutSine(),o.to({x:e.position.x}),o.addTo(SceneManager.main.tween),o.expire=!0,s.chain(o),i.currentTween.push(s),i.currentTween.push(o),i.currentTween.push(a),a.start(),s.start(),e.bubble.AddPowerup(t,!1),this.completeRequirementTimer=setTimeout(function(e,t,i,n,r){i.Pool("particle_X2path"),n.spawnPos.set(e.position.x,e.position.y),n.Play(),null!=e.bubble&&t.gameManager.powerUpManager.SetSlotBubbleSpecial(e,r)},r,e,this,i,n,t)}}},{key:"FadeInRequirementUI",value:function(){setTimeout(function(e){e.requirementUI.FadeIn(),e.customerStartTime=e.gameManager.gameTime},1500,this)}},{key:"CreateDebugUI",value:function(){var e=this,t=new RoundedRectBtn(70,870,100,40,22,16777215);t.setOnClick(function(){var t=e.gameManager.grid.GetRandomBubbleSlot(),i=e.GeneratePowerUpType();e.ApplyPowerUpOnSlot(t,i)},this),t.setOverlayBitmapText("Efx",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),this.gameManager.DebugContainer.addChild(t),(t=new RoundedRectBtn(170,870,100,40,22,16777215)).setOnClick(function(){this.CompleteRequest()},this),t.setOverlayBitmapText("Complete req",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),this.gameManager.DebugContainer.addChild(t)}},{key:"GeneratePowerUpType",value:function(){var e,t=Util.GetRandomInt(0,100),i=this.gameManager.grid.firstBubbleRow;return GameSetting.lastVisibleRow+1-i>2?Util.IsInbetween(t,0,82)?e=PowerUpType.X2:Util.IsInbetween(t,83,94)?e=PowerUpType.knife:Util.IsInbetween(t,95,100)&&(e=PowerUpType.pushBack):e=PowerUpType.X2,e}},{key:"requirementPos",get:function(){return new PIXI.Point(100,750-this.customerOffset)}}]),t}();PatronManager.spawnPosX=GameSetting.gameWidth/2,PatronManager.spawnPosY=750,PatronManager.spawnScaleX=.81,PatronManager.spawnScaleY=.81;var SoundManager=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"stopSound",value:function(t){t.stop(),e._sounds.splice(e._sounds.indexOf(t),1)}},{key:"loadSounds",value:function(e,t,i,n){if(0!=e.length){var r=0;!function a(){new Howl({src:e[r]}).on("load",function(){r++,i.call(n,r/e.length),r>=e.length?t.call(n):a()}).on("loaderror",function(e,t){})}()}else t.call(n)}},{key:"playSound",value:function(t){var i={src:t,loop:arguments.length>1&&void 0!==arguments[1]&&arguments[1],mute:e.isMutingSfx},n=new Howl(i);return n.play(),e._sounds.push(n),n.once("end",function(t){e._sounds.splice(e._sounds.indexOf(n),1)}),n}},{key:"play",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.mute=e.isMutingSfx,t.loop=i;var n=new Howl(t);return n.play(),e._sounds.push(n),n.once("end",function(t){e._sounds.splice(e._sounds.indexOf(n),1)}),n}},{key:"playBgm",value:function(t,i){var n={src:t,volume:i,loop:!0,mute:e.isMutingBgm};null!=e.bgm&&(e.bgm.stop(),e.bgm.fade(e.bgm.volume(),0,1e3)),e.bgm=new Howl(n),e.bgm.play(),e.bgm.fade(0,i,1e3)}},{key:"stopBgm",value:function(){Util.assert(null!=e.bgm,"Trying to stop BGM when there's none playing"),e.bgm.stop(),e.bgm.fade(1,0,1e3),e.bgm=null}},{key:"isMutingBgm",set:function(t){e._isMutingBgm=t,null!=e.bgm&&e.bgm.mute(t)},get:function(){return e._isMutingBgm}},{key:"isMutingSfx",set:function(t){e._isMutingSfx=t;for(var i=0;i<e._sounds.length;i++)e._sounds[i].mute(t)},get:function(){return e._isMutingSfx}},{key:"isPlayingBgm",get:function(){return null!=e.bgm&&e.bgm.playing()}}]),e}();SoundManager.bgm=null,SoundManager._isMutingBgm=!1,SoundManager._isMutingSfx=!1,SoundManager._sounds=[];var Index=function e(t,i){_classCallCheck(this,e),this.row=t,this.col=i},InGameStatTracker=function(){function e(t){_classCallCheck(this,e);var i=SaveLoadManager.GetSaveData("Player");this.gameManager=t,this.score=0,this.highestCombo=0,this.mouseKnockout=0,this.requestComplete=0,this.disconnectedBubble=0,this.catSwipeTriggerCount=0,this.matchedBubble=0,this.matchedBubblePerType=[],this.bounceMatches=0,this.quickMouseKnockout=0,this.catSwipeBubbleCount={},this.preGameOverCount=0,this.swapMatchedBubble=0,this.highestQuickCombo=0,this.totalGameTime=0,this.maxFeverScore=0,this.totalScore=parseInt(i.score)||0,this.totalBubbleMatches=parseInt(i.totalBubbleMatched)||0,this.totalBounceMatches=parseInt(i.totalBounceMatches)||0,this.totalCatSwipeTrigger=parseInt(i.totalCatSwipeTrigger)||0,this.totalDisconnectedBubble=parseInt(i.totalDisconnectedBubble)||0,this.totalMouseKnockout=parseInt(i.totalMouseKnockout)||0,this.totalRequestComplete=parseInt(i.totalRequestComplete)||0,this.minRequestTime=i.minRequestTime||1/0}return _createClass(e,[{key:"SetMatchedBubblePerType",value:function(e,t){this.matchedBubblePerType[e]=t}},{key:"GetMatchedBubblePerType",value:function(e){return this.matchedBubblePerType[e]||0}},{key:"TakedownMouse",value:function(e){this.mouseKnockout++,e<=1e3*Achievements.QuickMouseTakeoutTime&&this.quickMouseKnockout++}},{key:"AddCatSwipe",value:function(e){null==this.catSwipeBubbleCount[e]?this.catSwipeBubbleCount[e]=1:this.catSwipeBubbleCount[e]++}},{key:"Reset",value:function(){this.totalScore+=this.score,this.totalBubbleMatches+=this.matchedBubble,this.totalMouseKnockout+=this.mouseKnockout,this.totalCatSwipeTrigger+=this.catSwipeTriggerCount,this.totalBounceMatches+=this.bounceMatches,this.totalRequestComplete+=this.requestComplete,this.totalDisconnectedBubble+=this.disconnectedBubble,this.requestBubbleCount=0,this.score=0,this.highestCombo=0,this.mouseKnockout=0,this.requestComplete=0,this.disconnectedBubble=0,this.catSwipeTriggerCount=0,this.matchedBubble=0,this.matchedBubblePerType=[],this.bounceMatches=0,this.minRequestTime=1/0,this.catSwipeBubbleCount={},this.quickMouseKnockout=0,this.preGameOverCount=0,this.swapMatchedBubble=0,this.highestQuickCombo=0,this.totalGameTime=0,this.maxFeverScore=0}},{key:"RequestBubbleCount",set:function(e){this.requestBubbleCount=e},get:function(){return this.requestBubbleCount}},{key:"MinRequestTimeSecond",get:function(){return this.minRequestTime/1e3}},{key:"MinRequestTime",get:function(){return this.minRequestTime},set:function(e){this.minRequestTime=e}},{key:"TotalScore",get:function(){return this.totalScore+this.score}},{key:"TotalBubbleMatches",get:function(){return this.totalBubbleMatches+this.matchedBubble}},{key:"TotalBounceMatches",get:function(){return this.totalBounceMatches+this.bounceMatches}},{key:"TotalCatSwipeTriggered",get:function(){return this.totalCatSwipeTrigger+this.catSwipeTriggerCount}},{key:"TotalDisconnectedBubble",get:function(){return this.totalDisconnectedBubble+this.disconnectedBubble}},{key:"TotalMouseKnockout",get:function(){return this.totalMouseKnockout+this.mouseKnockout}},{key:"TotalRequestComplete",get:function(){return this.totalRequestComplete+this.requestComplete}},{key:"Score",set:function(e){this.score=e},get:function(){return this.score}},{key:"PreGameOverCount",set:function(e){this.preGameOverCount=e},get:function(){return this.preGameOverCount}},{key:"TotalGameTime",set:function(e){this.totalGameTime=e},get:function(){return this.totalGameTime}},{key:"TotalGameTimeInMinutes",get:function(){return Math.ceil(this.totalGameTime/1e3/60)}},{key:"SwapMatched",set:function(e){this.swapMatchedBubble=e},get:function(){return this.swapMatchedBubble}},{key:"BounceMatches",set:function(e){this.bounceMatches=e},get:function(){return this.bounceMatches}},{key:"HighestQuickCombo",set:function(e){this.highestQuickCombo=e},get:function(){return this.highestQuickCombo}},{key:"HighestCombo",set:function(e){this.highestCombo=e},get:function(){return this.highestCombo}},{key:"MatchedBubble",set:function(e){this.matchedBubble=e},get:function(){return this.matchedBubble}},{key:"MouseKnockout",get:function(){return this.mouseKnockout||0}},{key:"RequestComplete",set:function(e){this.requestComplete=e},get:function(){return this.requestComplete||0}},{key:"DisconnectedBubble",set:function(e){this.disconnectedBubble=e},get:function(){return this.disconnectedBubble||0}},{key:"CatSwipeTriggered",set:function(e){this.catSwipeTriggerCount=e},get:function(){return this.catSwipeTriggerCount||0}},{key:"QuickMouseKnockout",get:function(){return this.quickMouseKnockout}},{key:"MaxFeverScore",set:function(e){this.maxFeverScore=e},get:function(){return this.maxFeverScore}},{key:"EpicCatSwipeCount",get:function(){var e=0;for(var t in this.catSwipeBubbleCount)parseInt(t)<Achievements.MinBubbleForEpicSwipe||(e+=this.catSwipeBubbleCount[t]);return e}}]),e}(),TextInput=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.container=new PIXI.Container,e.txt=new PIXI.Text("Name",{fill:2236962,fontSize:24}),e.bg=new PIXI.Graphics,e.domField=document.createElement("input"),e.bg.beginFill(16777215),e.bg.drawRect(0,0,160,30),e.bg.endFill(),e.bg.cacheAsBitmap=!0,e.bg.visible=!1,e.domField.type="text",e.domField.style.position="absolute",e.domField.style.alignContent="center",e.domField.style.top="65vh",e.domField.style.left="0%",e.domField.style.textAlign="center",document.body.appendChild(e.domField),e.container.addChild(e.bg),e.container.addChild(e.txt);var i=e;return e.domField.onkeyup=function(){i.txt.text=i.domField.value;var e=12*i.domField.value.length/2;i.txt.position.set(i.bg.width/2-e,0)},e.bg.interactive=!0,e.bg.on("pointerup",e.Click,e),e.addChild(e.container),e.domField.hidden=!1,e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"HideFillField",value:function(){Util.isNullOrUndefined(this.domField)||(this.domField.hidden=!0)}},{key:"ShowFillField",value:function(){Util.isNullOrUndefined(this.domField)||(this.domField.hidden=!1)}},{key:"Click",value:function(){this.ShowFillField(),this.domField.focus()}}]),t}(),BubbleShooter=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.currentTween=[],i.currentBubblePos=new PIXI.Point(SceneManager.main.gameWidth/2,SceneManager.main.gameHeight-100),i.nextBubblePos=new PIXI.Point(SceneManager.main.gameWidth/2-150,SceneManager.main.gameHeight-75),i.isTouch=!1,i.isFiring=!1,i.isCancelledAimming=!1,i.bubbleSpeed=32,i.epsilon=.85,i.dotSize=5,i.easyArrow=!1,i.easyArrowFx=new PIXI.Container,i.easyArrowTween=[],i.sparklingEyesSprite=new PIXI.Container,i.sprites=[],i.guideWarningTriggered=!1,i.gameTimeAtStartWarning=0,i.guideWarningOn=!0,i.isNervous=!1,i.swapBubbleTweensArr=[],i.isSwapping=!1,i.touchArea=e.gameScene.bg,i.gameManager=e,i.grid=e.grid,i.displayGroup=new PIXI.display.DisplayGroup(450,!1),i.swappedBubble=!1,i._lastResetFireTime=0,i._allowFire=!0,i.CreateCatHand(),i}return _inherits(t,PIXI.Sprite),_createClass(t,[{key:"CheckAndChangeCurrentAndNextBubble",value:function(e,t){if(!this.gameManager.grid.ContainsBubbleTypeInRow(this.currentBubble.type,e,t)&&null!=(i=this.gameManager.grid.GetRandomBubbleSlot(t))){n=this.currentBubble;(r=Bubble.NewBubble(i.bubble.type)).position=new PIXI.Point(n.position.x,n.position.y),r.scale.set(1.2,1.2),n.powerUpType!=PowerUpType.none&&r.AddPowerup(n.powerUpType),this.addChild(r),this.removeChild(n),this.currentBubble=r}if(!this.gameManager.grid.ContainsBubbleTypeInRow(this.nextBubble.type,e,t)){var i=this.gameManager.grid.GetRandomBubbleSlot(t);if(null!=i){var n=this.nextBubble,r=Bubble.NewBubble(i.bubble.type);r.position=new PIXI.Point(n.position.x,n.position.y),r.scale.set(1.2,1.2),n.powerUpType!=PowerUpType.none&&r.AddPowerup(n.powerUpType),this.addChild(r),this.removeChild(n),this.nextBubble=r}}}},{key:"stop",value:function(){window.onpointerup=null,window.onpointerdown=null}},{key:"CreatePath",value:function(){var e=new PIXI.Container,t=new Particle(e,PIXI.loader.resources["assets/particles/glow44x44.png"].texture,PIXI.loader.resources["assets/particles/shoot path.json"].data);t.con.displayGroup=new PIXI.display.DisplayGroup(400,!1),this.addChild(t.con),this.pathParticle=t,this.pathParticle.Play()}},{key:"CreateCatHand",value:function(){var e=this,t=new PIXI.Sprite(PIXI.loader.resources["assets/game/cat_hand_right.png"].texture);t.x=GameSetting.gameWidth/2,t.y=1020,t.anchor.set(.5,1),this.rightHandPosition=new PIXI.Point(GameSetting.gameWidth/2,1020),this.rightHand=this.addChild(t),(t=new PIXI.Sprite(PIXI.loader.resources["assets/game/cat_hand_right.png"].texture)).x=120,t.y=1040,t.anchor.set(.5,1),t.scale.set(-1,1),this.leftHand=this.addChild(t);var i=new SwipeButton(this);i.alpha=0,i.position.set((this.nextBubblePos.x+this.currentBubblePos.x)/2,(this.nextBubblePos.y+this.currentBubblePos.y)/2),i.width=220,i.height=120,i.setOnClick(function(){e.SwitchBubble(function(){})},this),this.addChild(i);var n=PIXI.Sprite.fromImage("assets/game/icon_swap.png");n.anchor.set(.5,.5),n.position.set((this.nextBubblePos.x+this.currentBubblePos.x)/2,(this.nextBubblePos.y+this.currentBubblePos.y)/2),this.bubbleSwapSprite=this.addChild(n),this.CreateSweatEfx()}},{key:"StartSwapBubbleTween",value:function(){this.swapBubbleTween=new PIXI.tween.Tween(this.bubbleSwapSprite),this.swapBubbleTween.time=1e3,this.swapBubbleTween.from({scale:{x:1,y:1}}),this.swapBubbleTween.to({scale:{x:1.1,y:1.1}}),this.swapBubbleTween.pingPong=!0,this.swapBubbleTween.loop=!0,this.swapBubbleTween.start(),this.swapBubbleTween.addTo(SceneManager.main.tween)}},{key:"HaltSwapBubbleTween",value:function(){this.swapBubbleTween.pingPong=!1,this.swapBubbleTween.loop=!1,this.swapBubbleTween.stop(),this.swapBubbleTween.clear(),this.swapBubbleTween.remove()}},{key:"CreateShooter",value:function(){null==this.arrow?(this.arrow=new PIXI.Graphics,this.arrow.moveTo(this.currentBubblePos.x,this.currentBubblePos.y),this.addChild(this.arrow),this.InitTouchAreaEvent(),this.Reset()):this.Reset()}},{key:"SetBubbleSpeed",value:function(e){this.bubbleSpeed=e}},{key:"Update",value:function(){if(0!=this.gameManager.powerUpManager.guideTimer.GetDuration()&&this.gameManager.powerUpManager.guideTimer.GetDuration()<Const.powerUpTime.guide/10&&!this.guideWarningTriggered?(this.guideWarningTriggered=!0,this.gameTimeAtStartWarning=this.gameManager.gameTime+200):this.guideWarningTriggered&&(this.gameManager.gameTime>this.gameTimeAtStartWarning+200&&(this.gameTimeAtStartWarning=this.gameManager.gameTime,this.guideWarningOn=!this.guideWarningOn,this.DrawArrow(this.gameManager.touchPosition,this.easyArrow)),0==this.gameManager.powerUpManager.guideTimer.GetDuration()&&(this.guideWarningTriggered=!1)),this.isFiring){var e=this.loadedBubble.position,t=e.x,i=e.y,n=this.IsFinalParkingState(this.bubbleSpeed,GameSetting.bubbleNormalEpsilon,t,i,this.dx,this.dy);this.dx=n.dx,this.dy=n.dy,t=n.x,i=n.y,n.bounceWall&&(null!=this.loadedBubble&&(this.loadedBubble.bounced=!0),SoundManager.playSound("assets/game/SFX_BubbleBounce.wav")),n.final?(this.isFiring=!1,this._lastResetFireTime=this.gameManager.gameTime,this.swappedBubble=!1):(this.loadedBubble.position.set(t,i),null!=this.pathParticle&&this.pathParticle.updateSpawnPos(t,i))}}},{key:"GenerateNewShooter",value:function(){if(Util.isNullOrUndefined(this.currentBubble)||(SceneManager.main.poolManager.Add(BubbleType[this.currentBubble.type],this.currentBubble),this.currentBubble.visible=!1),Util.isNullOrUndefined(this.nextBubble)||(SceneManager.main.poolManager.Add(BubbleType[this.nextBubble.type],this.nextBubble),this.nextBubble.visible=!1),this.grid.spawnBubbleTypes.length>0)e=this.grid.spawnBubbleTypes[Math.floor(Math.random()*this.grid.spawnBubbleTypes.length)];else var e=0;this.nextBubble=Bubble.NewBubble(e),this.LoadRandomBubbleBaseOnRemaining(),this.currentBubble.position.set(this.currentBubblePos.x,this.currentBubblePos.y),this.nextBubble.position.set(this.nextBubblePos.x,this.nextBubblePos.y+100),this.nextBubble.scale.set(1.2,1.2),this.addChild(this.currentBubble),this.addChild(this.nextBubble)}},{key:"ActiveEasyArrow",value:function(){this.easyArrow=!0,this.guideWarningOn=!0,this.easyArrowTween=[],this.SetBubbleSpeed(GameSetting.bubbleHighSpeed),this.InitEasyArrow(),this.ActivateCatSparklingEyes()}},{key:"InitEasyArrow",value:function(){var e=this,t=PIXI.Sprite.fromImage("assets/particles/cat_eye/FX_GradientWhite_Thick.png");t.anchor.set(0,1),t.scale.set(.2,.2),t.width=540,t.position.set(0,960),this.sprites.push(t),this.easyArrowFx.addChild(t);var i=PIXI.Sprite.fromImage("assets/particles/cat_eye/FX_GradientWhite_Thick.png");i.anchor.set(0,1),i.scale.set(.2,.2),i.width=960,i.rotation=90*PIXI.DEG_TO_RAD,i.position.set(0,0),this.sprites.push(i),this.easyArrowFx.addChild(i);var n=PIXI.Sprite.fromImage("assets/particles/cat_eye/FX_GradientWhite_Thick.png");n.anchor.set(0,1),n.scale.set(.2,.2),n.width=960,n.rotation=270*PIXI.DEG_TO_RAD,n.position.set(540,960),this.sprites.push(n),this.easyArrowFx.addChild(n);var r=PIXI.Sprite.fromImage("assets/particles/cat_eye/FX_GradientWhite_Thick.png");r.anchor.set(0,1),r.scale.set(.2,.2),r.width=540,r.rotation=180*PIXI.DEG_TO_RAD,r.position.set(540,98),this.sprites.push(r),this.easyArrowFx.addChild(r),this.sprites.forEach(function(t){t.tint=10482175;var i=new PIXI.tween.Tween(t);i.time=1e3,i.from({alpha:0}),i.to({alpha:1}),i.expire=!0,i.start(),i.addTo(SceneManager.main.tween),e.easyArrowTween.push(i)}),setTimeout(function(e,t){e.forEach(function(e){var i=new PIXI.tween.Tween(e);i.time=1e3,i.from({alpha:1}),i.to({alpha:.6}),i.loop=!0,i.pingPong=!0,i.expire=!0,i.start(),i.addTo(SceneManager.main.tween),t.push(i)})},1e3,this.sprites,this.easyArrowTween),this.easyArrowFx.displayGroup=new PIXI.DisplayGroup(451,!1),this.addChild(this.easyArrowFx)}},{key:"ActivateCatSparklingEyes",value:function(){var e=new PIXI.Sprite;(e=PIXI.Sprite.fromImage("assets/particles/cat_eye/FX_CatEye_Eye.png")).position.set(245,68),e.anchor.set(.5,.5),this.sparklingEyesSprite.addChild(e);var t=new PIXI.tween.Tween(e);t.time=270,t.from({rotation:0*PIXI.DEG_TO_RAD,scale:{x:0,y:0}}),t.to({rotation:359*PIXI.DEG_TO_RAD,scale:{x:.8,y:.8}}),t.expire=!0,this.easyArrowTween.push(t);var i=new PIXI.tween.Tween(e);i.delay=270,i.time=150,i.from({scale:{x:.8,y:.8}}),i.to({scale:{x:.65,y:.65}}),i.pingPong=!0,i.loop=!0,i.expire=!0,this.easyArrowTween.push(i);var n=new PIXI.Sprite;(n=PIXI.Sprite.fromImage("assets/particles/cat_eye/FX_CatEye_Eye.png")).position.set(295,68),n.anchor.set(.5,.5),this.sparklingEyesSprite.addChild(n);var r=new PIXI.tween.Tween(n);r.time=270,r.from({rotation:0*PIXI.DEG_TO_RAD,scale:{x:0,y:0}}),r.to({rotation:359*PIXI.DEG_TO_RAD,scale:{x:.8,y:.8}}),r.expire=!0,this.easyArrowTween.push(r);var a=new PIXI.tween.Tween(n);a.delay=270,a.time=150,a.from({scale:{x:.8,y:.8}}),a.to({scale:{x:.65,y:.65}}),a.pingPong=!0,a.loop=!0,a.expire=!0,this.easyArrowTween.push(a),this.sparklingEyesSprite.displayGroup=new PIXI.DisplayGroup(800,!1),this.addChild(this.sparklingEyesSprite),t.chain(i),t.addTo(SceneManager.main.tween),t.start(),r.chain(a),r.addTo(SceneManager.main.tween),r.start()}},{key:"DeactivateCatSparklingEyes",value:function(){}},{key:"CleanUpEasyArrow",value:function(){this.sprites.forEach(function(e){e.destroy(!0)}),this.sprites=[],this.easyArrowFx.destroy(!0),this.easyArrowFx=new PIXI.Container}},{key:"DeactivateEasyArrow",value:function(){this.easyArrow=!1,this.SetBubbleSpeed(GameSetting.bubbleNormalSpeed),Util.isNullOrUndefined(this.gameManager.touchPosition)||this.DrawArrow(this.gameManager.touchPosition,this.easyArrow),this.easyArrowTween.forEach(function(e){e.pingPong=!1,e.loop=!1,e.stop(),e.clear(),e.remove()}),this.CleanUpEasyArrow(),this.sparklingEyesSprite.destroy(!0),this.sparklingEyesSprite=new PIXI.Container,this.easyArrowTween=[],this.DeactivateCatSparklingEyes()}},{key:"CancelShooting",value:function(){this.isFiring=!1,this.loadedBubble.BounceOff(new PIXI.Point(-this.dx,-this.dy)),this.DestroyPathParticle()}},{key:"InitTouchAreaEvent",value:function(){this.touchArea.interactive=!0,this.touchArea.on("pointerdown",this.OnPointerDown,this).on("pointerup",this.OnPointerUp,this).on("pointermove",this.OnPointerMove,this)}},{key:"OnPointerDown",value:function(e){this.gameManager.isGameOver||this.gameManager.isPause||!this.allowFire||(this.isTouch=!0,this.gameManager.touchPosition=null!=e?e.data.getLocalPosition(this):SceneManager.main.game.renderer.plugins.interaction.mouse.global,this.shootingAngle=Math.atan2(this.currentBubblePos.y-this.gameManager.touchPosition.y,this.gameManager.touchPosition.x-this.currentBubblePos.x)*PIXI.RAD_TO_DEG,this.DrawArrow(this.gameManager.touchPosition,this.easyArrow))}},{key:"OnPointerUp",value:function(e){if(!this.gameManager.isGameOver&&!this.gameManager.isPause&&this.isTouch&&this.allowFire){if(this.isCancelledAimming)return this.isCancelledAimming=!1,this.isTouch=!1,void this.RemoveArrow();if(null!=e&&(this.gameManager.touchPosition=e.data.getLocalPosition(this)),this.isTouch=!1,this.RemoveArrow(),this.isSwapping){this.isSwapping=!1;for(var t=0;t<this.swapBubbleTweensArr.length;t++)this.swapBubbleTweensArr[t].emit("end"),this.swapBubbleTweensArr[t].pingPong=!1,this.swapBubbleTweensArr[t].loop=!1,this.swapBubbleTweensArr[t].stop(),this.swapBubbleTweensArr[t].clear(),this.swapBubbleTweensArr[t].remove(),this.bubbleSwapSprite.scale.set(1,1),this.bubbleSwapSprite.rotation=180*PIXI.DEG_TO_RAD;this.swapBubbleTweensArr=[]}this.isFiring||(this.shootingAngle=Math.atan2(this.currentBubblePos.y-this.gameManager.touchPosition.y,this.gameManager.touchPosition.x-this.currentBubblePos.x)*PIXI.RAD_TO_DEG,this.StartFire())}}},{key:"OnPointerOver",value:function(){}},{key:"OnPointerOut",value:function(){}},{key:"OnPointerMove",value:function(e){this.gameManager.isGameOver||this.gameManager.isPause||this.isTouch&&(this.gameManager.touchPosition=e.data.getLocalPosition(this),this.shootingAngle=Math.atan2(this.currentBubblePos.y-this.gameManager.touchPosition.y,this.gameManager.touchPosition.x-this.currentBubblePos.x)*PIXI.RAD_TO_DEG,this.isFiring||this.gameManager.isGameOver||this.DrawArrow(this.gameManager.touchPosition,this.easyArrow))}},{key:"LoadNewBubble",value:function(e){var t=this;this.currentBubble=this.nextBubble,this.TweenCurrentBubbleToMainHand(),this.addChild(this.currentBubble),this.currentBubble.scale.set(1.2,1.2),this.nextBubble=Bubble.NewBubble(e),this.nextBubble.scale.set(1.2,1.2),this.nextBubble.position.set(this.nextBubblePos.x,this.nextBubblePos.y),this.addChild(this.nextBubble);var i=new PIXI.tween.Tween(this.nextBubble);i.time=200,i.from({x:this.nextBubblePos.x-120}),i.to({x:this.nextBubblePos.x}),i.expire=!0;var n=new PIXI.tween.Tween(this.nextBubble);n.time=150,n.from({y:this.nextBubblePos.y+100}),n.to({y:this.nextBubblePos.y-30}),n.expire=!0;var r=new PIXI.tween.Tween(this.nextBubble);r.time=50,r.to({y:this.nextBubblePos.y}),r.expire=!0;i.time;i.start(),n.chain(r),n.start(),n.addTo(SceneManager.main.tween),r.addTo(SceneManager.main.tween),i.addTo(SceneManager.main.tween),i.on("end",function(){t.ClearIdvTween(i),t.ClearIdvTween(n),t.ClearIdvTween(r)})}},{key:"ClearIdvTween",value:function(e){e.stop(),e.clear(),e.remove()}},{key:"TweenCurrentBubbleToMainHand",value:function(){this.currentBubble.position.set(this.nextBubblePos.x,this.nextBubblePos.y);var e=new PIXI.tween.Tween(this.currentBubble);e.easing=PIXI.tween.Easing.inOutQuad(),e.time=150,e.from({x:this.currentBubble.x}),e.to({x:this.currentBubblePos.x}),e.expire=!0;var t=new PIXI.tween.Tween(this.currentBubble);t.time=110,t.from({y:this.currentBubble.y}),t.to({y:this.currentBubblePos.y-30}),t.expire=!0;var i=new PIXI.tween.Tween(this.currentBubble);i.time=40,i.to({y:this.currentBubblePos.y}),i.expire=!0,e.addTo(SceneManager.main.tween),t.chain(i),t.addTo(SceneManager.main.tween),this.currentTween.push(e),e.start(),t.start()}},{key:"LoadRandomBubbleBaseOnRemaining",value:function(){if(this.grid.spawnBubbleTypes.length>0)e=this.grid.spawnBubbleTypes[Math.floor(Math.random()*this.grid.spawnBubbleTypes.length)];else var e=0;this.LoadNewBubble(e)}},{key:"StartFire",value:function(){this.shootingAngle=Misc.GetShootingAngle(this.shootingAngle),this.dx=-Math.cos(this.shootingAngle*PIXI.DEG_TO_RAD),this.dy=Math.sin(this.shootingAngle*PIXI.DEG_TO_RAD),this.PlayShootTween(this.dx,this.shootingAngle),this.loadedBubble=this.currentBubble,this.loadedBubble.scale.set(1,1),this.easyArrow&&this.CreatePath(),this.currentBubble=null,this.isFiring=!0,this.LoadRandomBubbleBaseOnRemaining(),SoundManager.playSound(Const.path.sound.fireSound,!1)}},{key:"PlayShootTween",value:function(e,t){this.ClearTween(),this.rightHand.position=this.rightHandPosition;var i=new PIXI.tween.Tween(this.rightHand);i.pingPong=!0,i.time=200,i.from({y:this.rightHand.y,rotation:0}),i.to({y:this.rightHand.y-10,rotation:-(-90+this.shootingAngle)*PIXI.DEG_TO_RAD/8}),i.expire=!0,i.addTo(SceneManager.main.tween),this.currentTween.push(i),i.start()}},{key:"IsColliding",value:function(e,t){for(var i=Math.max(this.grid.firstBubbleRow-1,0);i<this.grid.totalRow;i++)for(var n=0;n<this.grid.bubbleSlot[i].length;n++){var r=this.grid.Get(i,n);if(!Util.isNullOrUndefined(r.bubble)&&Misc.IsCloseEnough(e,r.position,this.grid.bubbleRadius,t))return!0}return!1}},{key:"DrawArrow",value:function(e,t){if(e.y>this.currentBubble.y-5)return this.RemoveArrow(),void(this.isCancelledAimming=!0);if(this.isCancelledAimming=!1,this.arrow.clear(),t){if(!this.guideWarningOn)return void this.RemoveArrow();for(var i=-Math.cos(this.shootingAngle*PIXI.DEG_TO_RAD),n=Math.sin(this.shootingAngle*PIXI.DEG_TO_RAD),r=12,a=new PIXI.Point(this.currentBubblePos.x-i*r,this.currentBubblePos.y-n*r),s=[],o=0;!this.IsColliding(a,this.epsilon);)if(a.set(a.x-i*r,a.y-n*r),this.arrow.clear(),this.arrow.lineStyle(8,Const.arrowColor[BubbleType[this.currentBubble.type]],1),this.arrow.moveTo(this.currentBubblePos.x,this.currentBubblePos.y),a.x<this.grid.bubbleRadius)a.x=this.grid.bubbleRadius,i*=-1,s[o]=new PIXI.Point(a.x,a.y),o++;else if(a.x>this.grid.realWidth-this.grid.bubbleRadius)a.x=this.grid.realWidth-this.grid.bubbleRadius,i*=-1,s[o]=new PIXI.Point(a.x,a.y),o++;else{if(a.y<this.grid.top-this.grid.bubbleRadius){this.RemoveArrow();break}for(var u=0;u<o;u++)this.arrow.lineTo(s[u].x,s[u].y);this.arrow.lineTo(a.x,a.y)}}else{var l=new PIXI.Point(this.currentBubblePos.x,this.currentBubblePos.y),i=-Math.cos(this.shootingAngle*PIXI.DEG_TO_RAD),n=Math.sin(this.shootingAngle*PIXI.DEG_TO_RAD),r=28;for(this.arrow.beginFill(Const.arrowColor[BubbleType[this.currentBubble.type]],1),this.arrow.moveTo(this.currentBubblePos.x,this.currentBubblePos.y);l.y>e.y-112*n;)l.set(l.x-i*r,l.y-n*r),l.x<20?(l.x=20-l.x+20,i*=-1):l.x>524&&(l.x=524-(l.x-524),i*=-1),this.arrow.drawCircle(l.x,l.y,this.dotSize)}this.arrow.endFill()}},{key:"RemoveArrow",value:function(){this.arrow.clear()}},{key:"IsFinalParkingState",value:function(e,t,i,n,r,a){var s=!1,o=!1;n-=a*e,(i-=r*e)<this.grid.bubbleRadius&&(i=this.grid.bubbleRadius,r*=-1,o=!0),i>this.grid.realWidth-this.grid.bubbleRadius&&(i=this.grid.realWidth-this.grid.bubbleRadius,r*=-1,o=!0),n<this.grid.top-this.grid.bubbleRadius&&(n=this.grid.top-this.grid.bubbleRadius,s=!0);var u=new PIXI.Point(i,n),l=new PIXI.Point(i-.8*this.grid.bubbleRadius*r,n-.8*this.grid.bubbleRadius*a);if(!s&&this.IsColliding(u,t)){if(!this.IsColliding(l,GameSetting.bubbleSmallEpsilon))return{bounceWall:o,final:s,x:i,y:n,dx:r,dy:a};s=!0}if(s)if(null!=(h=this.grid.GetSlotFromPosition(new PIXI.Point(i,n),this.epsilon)))this.FindParkingSlot(h,i,n,r,a,t);else for(;;){i-=-2*r,n-=-2*a;var h=this.grid.GetSlotFromPosition(new PIXI.Point(i,n),this.epsilon);if(!Util.isNullOrUndefined(h)){this.FindParkingSlot(h,i,n,r,a,t);break}}return{bounceWall:o,final:s,x:i,y:n,dx:r,dy:a}}},{key:"FindParkingSlot",value:function(e,t,i,n,r,a){var s;if(Util.isNullOrUndefined(e.bubble))this.ParkBubble(e);else{s=e;do{(t-=-1*n)<this.grid.bubbleRadius?(t=this.grid.bubbleRadius,n*=-1):t>this.grid.realWidth-this.grid.bubbleRadius&&(t=this.grid.realWidth-this.grid.bubbleRadius,n*=-1),i-=-1*r-this.grid.deltaDistance}while(this.IsColliding(new PIXI.Point(t,i),a));null!=(e=this.grid.GetSlotFromPosition(new PIXI.Point(t,i),a))&&this.grid.IsValidIndex(e.index)?Util.isNullOrUndefined(e.bubble)?this.ParkBubble(e):this.FindParkingSlot(e,t,i,n,r,a):i>this.grid.bubbleSlot[0][0].y?(this.loadedBubble.powerUpType==PowerUpType.swipe?this.gameManager.powerUpManager.ActivateSwipe(s.index):this.loadedBubble.type==s.bubble.type?this.grid.UnlinkMatch(s.index,2):this.grid.Bounce(s.index,1),this.CancelShooting()):this.gameManager.OnGameOver()}}},{key:"ParkBubble",value:function(e){e.AddBubble(this.loadedBubble),this.loadedBubble.setParent(e),this.loadedBubble.position.set(0,0),this.loadedBubble.powerUpType==PowerUpType.swipe?(this.gameManager.powerUpManager.ActivateSwipe(e.index),e.PlayCatSwipeFx()):this.grid.UnlinkMatch(e.index,3),e.index.row<this.grid.firstBubbleRow&&(this.grid.firstBubbleRow=e.index.row),this.loadedBubble=null,this.DestroyPathParticle()}},{key:"DestroyPathParticle",value:function(){null!=this.pathParticle&&(this.pathParticle.Destroy(this.pathParticle.maxLifetime),this.pathParticle=null)}},{key:"SwitchBubble",value:function(e){var t=this;if(!this.gameManager.isPause&&!this.isSwapping){this.isSwapping=!0,this.swappedBubble=!this.swappedBubble,SoundManager.playSound(Const.path.sound.fireSound);var i=new PIXI.tween.Tween(this.bubbleSwapSprite);i.time=200,i.from({scale:{x:1,y:1},rotation:0*PIXI.DEG_TO_RAD}),i.to({scale:{x:1.5,y:1.5},rotation:90*PIXI.DEG_TO_RAD}),i.easing=PIXI.tween.Easing.outQuad(),i.expire=!0;var n=new PIXI.tween.Tween(this.bubbleSwapSprite,SceneManager.main.tween);n.time=200,n.from({scale:{x:1.5,y:1.5},rotation:90*PIXI.DEG_TO_RAD}),n.to({scale:{x:1,y:1},rotation:180*PIXI.DEG_TO_RAD}),n.easing=PIXI.tween.Easing.inQuad(),n.expire=!0;var r=new PIXI.tween.TweenPath;r.moveTo(this.currentBubblePos.x,this.currentBubblePos.y),r.bezierCurveTo(this.currentBubblePos.x,this.currentBubblePos.y,(this.currentBubblePos.x+this.nextBubblePos.x)/2,(this.currentBubblePos.y+this.nextBubblePos.y)/2+100,this.nextBubblePos.x,this.nextBubblePos.y);var a=new PIXI.tween.Tween(this.currentBubble);a.time=200,a.path=r,a.easing=PIXI.tween.Easing.inOutSine(),a.expire=!0;var s=new PIXI.tween.TweenPath;s.moveTo(this.nextBubblePos.x,this.nextBubblePos.y),s.bezierCurveTo(this.nextBubblePos.x,this.nextBubblePos.y,(this.currentBubblePos.x+this.nextBubblePos.x)/2,(this.currentBubblePos.y+this.nextBubblePos.y)/2-100,this.currentBubblePos.x,this.currentBubblePos.y);var o=new PIXI.tween.Tween(this.nextBubble);o.time=200,o.path=s,o.easing=PIXI.tween.Easing.inOutSine(),o.expire=!0;a.time;a.start(),a.addTo(SceneManager.main.tween),o.start(),o.addTo(SceneManager.main.tween),i.chain(n),i.start(),i.addTo(SceneManager.main.tween),n.once("end",function(){t.ClearSwapBubbleTween(),t.isSwapping=!1,null!=e&&e()}),this.swapBubbleTweensArr.push(a),this.swapBubbleTweensArr.push(o),this.swapBubbleTweensArr.push(i),this.swapBubbleTweensArr.push(n),this.tempBubble=this.currentBubble,this.currentBubble=this.nextBubble,this.nextBubble=this.tempBubble}}},{key:"ClearSwapBubbleTween",value:function(){if(this.swapBubbleTweensArr.length>0)for(var e=0;e<this.swapBubbleTweensArr.length;e++)this.swapBubbleTweensArr[e].pingPong=!1,this.swapBubbleTweensArr[e].loop=!1,this.swapBubbleTweensArr[e].stop(),this.swapBubbleTweensArr[e].clear(),this.swapBubbleTweensArr[e].remove()}},{key:"Reset",value:function(){this.RemoveArrow(),this.isCancelledAimming=!1,this.isTouch=!1,this.swappedBubble=!1,this.StopNervous();var e=this;window.onpointerup=function(){var t=SceneManager.main.game.renderer.plugins.interaction.mouse.global;(t.x<0||t.x>540)&&e.OnPointerUp(null)},window.onpointerdown=function(){}}},{key:"CreateDebugUI",value:function(){var e=this,t=new PIXI.Container;t.displayGroup=new PIXI.DisplayGroup(650,!1);var i=new RoundedRectBtn(70,820,100,40,22,16777215);i.setOnClick(function(){e.pathParticle.con.displayGroup=new PIXI.display.DisplayGroup(1e3,!1),e.pathParticle.Play()},this),i.setOverlayBitmapText("Play efx",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),t.addChild(i),(i=new RoundedRectBtn(170,870,100,40,22,16777215)).setOnClick(function(){e.gameManager.score.AddScore(1e4)},this),i.setOverlayBitmapText("Score tw",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),t.addChild(i),this.addChild(t)}},{key:"ClearTween",value:function(){this.currentTween.length>0&&(this.currentTween.forEach(function(e){e.stop(),e.clear(),e.remove()}),this.currentTween=[])}},{key:"Nervous",value:function(){this.isNervous||(this.isNervous=!0,this.rightSweat.Play())}},{key:"StopNervous",value:function(){this.isNervous=!1,this.rightSweat.Stop()}},{key:"CreateSweatEfx",value:function(){var e=Particle.NewParticle("particle_sweat",PIXI.loader.resources["assets/particles/sweat_rev2.png"].texture,PIXI.loader.resources["assets/particles/sweat.json"].data);this.addChild(e.con),e.spawnPos.set(this.rightHand.position.x+25,this.rightHand.position.y-182),e.con.displayGroup=new PIXI.display.DisplayGroup(440,!1),this.rightSweat=e,PIXI.loader.resources["assets/particles/sweat.json"].data.angleStart=180}},{key:"CreateCatSwipeTriggerFx",value:function(e,t){var i=new PIXI.Container,n=Particle.NewParticle("particle_cat_swipe",PIXI.loader.resources["assets/particles/FX_WhiteCircle.png"].texture,PIXI.loader.resources["assets/particles/FX_ParticleBurst_Yellow.json"].data);i.addChild(n.con),n.startScale=2,n.spawnPos.set(this.currentBubblePos.x,this.currentBubblePos.y),n.Play();var r=Particle.NewParticle("particle_cat_paw_burst",PIXI.loader.resources["assets/particles/FX_Paw.png"].texture,PIXI.loader.resources["assets/particles/FX_CatPawBurst_Purple.json"].data);i.addChild(r.con),r.spawnPos.set(this.currentBubblePos.x,this.currentBubblePos.y),r.Play();var a=new PIXI.Sprite;(a=PIXI.Sprite.fromImage(Const.path.particle.outerCircle)).position.set(this.currentBubblePos.x,this.currentBubblePos.y),a.anchor.set(.5,.5),a.tint=10027212,i.addChild(a);var s=new PIXI.tween.Tween(a);s.time=250,s.from({scale:{x:.1,y:.1},alpha:1}),s.to({scale:{x:3,y:3},alpha:.7}),s.easing=PIXI.tween.Easing.outCirc(),s.expire=!0,s.start(),s.addTo(SceneManager.main.tween);var o=new PIXI.tween.Tween(a);o.time=400,o.from({scale:{x:3,y:3},alpha:.7}),o.to({scale:{x:3.05,y:3.05},alpha:.6}),o.expire=!0,s.chain(o);var u=new PIXI.tween.Tween(a);u.time=440,u.from({scale:{x:3.05,y:3.05},alpha:.6}),u.to({scale:{x:3.13,y:3.13},alpha:0}),u.expire=!0,o.chain(u);var l=PIXI.Sprite.fromImage("assets/particles/FX_SpeedLine.png");l.position.set(this.currentBubblePos.x,this.currentBubblePos.y),l.anchor.set(.5,.5),i.addChild(l);var h=new PIXI.tween.Tween(l);h.time=420,h.from({scale:{x:8,y:8}}),h.to({scale:{x:0,y:0}}),h.easing=PIXI.tween.Easing.outCubic(),h.expire=!0,h.start(),h.addTo(SceneManager.main.tween);var c=PIXI.Sprite.fromImage("assets/particles/FX_Light.png");c.position.set(this.currentBubblePos.x,this.currentBubblePos.y),c.anchor.set(.5,.5),i.addChild(c);var d=new PIXI.tween.Tween(c);d.time=420,d.from({scale:{x:9,y:9},alpha:1}),d.to({scale:{x:0,y:0},alpha:0}),d.easing=PIXI.tween.Easing.outCubic(),d.expire=!0,d.start(),d.addTo(SceneManager.main.tween),setTimeout(function(e){e.alpha=0},h.time,l);var p=PIXI.Sprite.fromImage("assets/particles/FX_WhiteCircle.png");p.position.set(this.currentBubblePos.x,this.currentBubblePos.y),p.anchor.set(.5,.5),p.scale=new PIXI.Point(1.8,1.8),i.addChild(p);var f=new PIXI.tween.Tween(p);f.time=380,f.from({alpha:1}),f.to({alpha:0}),f.easing=PIXI.tween.Easing.inCubic(),f.expire=!0,f.start(),f.addTo(SceneManager.main.tween);var g=PIXI.Sprite.fromImage("assets/particles/FX_WhiteCircle.png");g.position.set(this.nextBubblePos.x,this.nextBubblePos.y),g.anchor.set(.5,.5),g.scale=new PIXI.Point(1.8,1.8),i.addChild(g);var m=new PIXI.tween.Tween(g);m.time=380,m.from({alpha:1}),m.to({alpha:0}),m.easing=PIXI.tween.Easing.inCubic(),m.expire=!0,m.start(),m.addTo(SceneManager.main.tween);var v=new PIXI.Sprite;(v=PIXI.Sprite.fromImage(Const.path.particle.outerCircle)).position.set(e.x,e.y),v.anchor.set(.5,.5),v.tint=10027212,i.addChild(v);var y=new PIXI.tween.Tween(v);y.time=250,y.from({scale:{x:.3,y:.3},alpha:0}),y.to({scale:{x:.7,y:.7},alpha:1}),y.easing=PIXI.tween.Easing.outExpo(),y.expire=!0,y.start(),y.addTo(SceneManager.main.tween);var b=new PIXI.tween.Tween(v);b.time=400,b.from({scale:{x:.7,y:.7},alpha:.7}),b.to({scale:{x:.75,y:.75},alpha:.6}),b.expire=!0,y.chain(b);var _=new PIXI.tween.Tween(v);_.time=440,_.from({scale:{x:.75,y:.75},alpha:.7}),_.to({scale:{x:.83,y:.83},alpha:0}),_.expire=!0,b.chain(_),this.addChild(i),setTimeout(function(e){e.Destroy},1e3,i)}},{key:"allowFire",set:function(e){this._allowFire=e},get:function(){return this._allowFire}},{key:"bubbleSwapped",get:function(){return this.swappedBubble}},{key:"lastResetFireTime",get:function(){return this._lastResetFireTime}}]),t}(),SwipeButton=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"assets/game/WhiteRectangle.png",1.5,.5));return i._shooter=e,i}return _inherits(t,DuelBrightnessButton),_createClass(t,[{key:"onPointerDown",value:function(e){this.isBeingPressed=!0,this.lastMousePosition=e.data.global.clone()}}]),t}(),PowerUpTimer=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.max=0,i.duration=0,i.powerUpManager=e,i.isActivating=!1;var n=new PIXI.TextStyle({fontFamily:"Arial",fontSize:24});return i.description=new PIXI.Text("description",n),i.timeleft=new PIXI.Text("timeleft",n),i.description.x=-80,i.timeleft.x=270,i.timeleft.anchor.set(.5,0),i.timeleft.displayGroup=new PIXI.DisplayGroup(1501,!1),i.powerUpSlider=new PowerUpSlider,i.powerUpSlider.position.set(0,0),i.addChild(i.powerUpSlider),i.addChild(i.description),i.addChild(i.timeleft),i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"AddDuration",value:function(e){this.duration+e>Const.powerUpTime[PowerUpType[this.type]]?this.max=this.duration=Const.powerUpTime[PowerUpType[this.type]]:(this.duration+=e,this.max+=e)}},{key:"UpdateTime",value:function(e){this.duration-e>=0?(this.duration-=e,this.powerUpSlider.setValue(this.duration,this.max)):this.visible&&(this.powerUpManager.OnPowerUpTimeOut(this.type),this.max=this.duration=0,this.visible=!1,this.isActivating=!1),this.UpdateText()}},{key:"UpdateText",value:function(){this.timeleft.text=Math.round(this.duration).toString()}},{key:"Set",value:function(e,t){this.type=e,this.AddDuration(t),this.visible=!0,this.isActivating=!0,this.description.text=PowerUpType[e]}},{key:"GetDuration",value:function(){return this.duration}}]),t}(),PowerUpIcon=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.totalDistance=Math.abs(i.emptyPosition-i.startPosition),i.specialItemManager=e;new PIXI.TextStyle({fontFamily:"Arial",fontSize:12});return i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"AddItem",value:function(e){this.itemSprite[PowerUpType[e]]=new PIXI.Sprite(PIXI.Texture.fromImage(""))}},{key:"RemoveItem",value:function(e){this.itemSprite[PowerUpType[e]].destroy()}},{key:"CreateGraphics",value:function(){var e=new PIXI.Sprite(PIXI.Texture.fromImage("assets/game/Sushi_sauce_bottle_mask.png"));e.anchor.set(.5,.5),e.position.set(0,60),this.addChild(e);var t=new PIXI.Sprite(PIXI.Texture.fromImage("assets/game/Sushi_sauce_liquid.png"));t.anchor.set(.5,.5),t.position.set(0,70),t.mask=e,this.fill=t,this.startPosition=t.position.y,this.addChild(t),(t=new PIXI.Sprite(PIXI.Texture.fromImage("assets/game/Sushi_sauce_bottle.png"))).anchor.set(.5,.5),t.position.set(0,60),this.emptyPosition=t.position.y+100,this.addChild(t),(t=new PIXI.Sprite(PIXI.Texture.fromImage("assets/game/Sushi_sauce_cap.png"))).anchor.set(.5,.5),t.position.set(0,0),this.addChild(t)}},{key:"UpdateFill",value:function(e,t){var i=100*e/t,n=this.startPosition+this.totalDistance*(100-i)/100;this.fill.position.y=n}}]),t}(),PowerUpSlider=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Const.powerUpTime.x2Timer));return e.shape=new PIXI.Graphics,e.shape.beginFill(10027212),e.shape.drawRect(0,0,0,30),e.shape.endFill(),e.shape.displayGroup=new PIXI.DisplayGroup(1500,!1),e.addChild(e.shape),e}return _inherits(t,Slider),_createClass(t,[{key:"setValue",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e,i),this.shape.clear(),this.shape.beginFill(10027212),this.shape.drawRect(0,0,this.value/this.max*540,30),this.shape.endFill()}}]),t}(),PowerUpManager=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.gameManager=e,i.Init(),i.knifingEfx=i.addChild(new KnifingEfx(i.gameManager)),i.knifingEfx.x=250,i.knifingEfx.y=500,i.flashEfx=i.addChild(new FlashScreenFx),i.feverTimeStart=0,i.leftFire=[],i.rightFire=[];for(var n=0;n<15;n++){var r=Particle.NewParticle("leftFire",PIXI.loader.resources["assets/particles/FX_Paw_left.png"].texture,PIXI.loader.resources["assets/particles/fever_left.json"].data);r.con.y=64*n,i.leftFire.push(r);var a=Particle.NewParticle("rightFire",PIXI.loader.resources["assets/particles/FX_Paw_right.png"].texture,PIXI.loader.resources["assets/particles/fever_right.json"].data);a.con.y=64*n,i.rightFire.push(a),r.con.displayGroup=a.con.displayGroup=new PIXI.DisplayGroup(149,!1)}i.leftLight=PIXI.Sprite.fromImage("assets/particles/light_left.png"),i.rightLight=PIXI.Sprite.fromImage("assets/particles/light_right.png"),i.rightLight.anchor.set(1,0),i.rightLight.position.set(540,0),i.leftLight.displayGroup=i.rightLight.displayGroup=new PIXI.DisplayGroup(148,!1);var s=PIXI.loader.resources["assets/spines/hammer.json"].spineData;return i.pushEffect=new PIXI.spine.Spine(s),i.pushEffect.autoUpdate=!1,i.pushEffect.displayGroup=new PIXI.DisplayGroup(500,!1),i.pushEffect.position.set(SceneManager.main.gameWidth/2,SceneManager.main.gameHeight/2),i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"ActivatingMultiplier",get:function(){var e=[];return this.x2Timer.isActivating&&e.push(this.x2Timer.type),this.x3Timer.isActivating&&e.push(this.x3Timer.type),this.x4Timer.isActivating&&e.push(this.x4Timer.type),e}}]),_createClass(t,[{key:"reset",value:function(){if(this.IsOnFeverTime&&this.StopFeverTime(),this.x2Timer.isActivating&&this.RemovePowerUp(PowerUpType.X2),this.x3Timer.isActivating&&this.RemovePowerUp(PowerUpType.X3),this.x4Timer.isActivating&&this.RemovePowerUp(PowerUpType.X4),this.guideTimer.isActivating&&this.RemovePowerUp(PowerUpType.guide),null!=this.pushEffect.parent){this.removeChild(this.pushEffect);for(var e=this.pushEffect.state.listeners,t=0;t<e.length;t++)this.pushEffect.state.removeListener(e[t])}}},{key:"Init",value:function(){e=new PowerUpIcon(this);this.guideIcon=this.addChild(e),this.guideIcon.visible=!0,e.position.set(SceneManager.main.gameWidth-130,SceneManager.main.gameHeight-160);var e=new PowerUpIcon(this);this.multiplyIcon=this.addChild(e),e.position.set(SceneManager.main.gameWidth-80,SceneManager.main.gameHeight-150);var t=new PowerUpTimer(this);t.position.set(SceneManager.main.gameWidth-100,SceneManager.main.gameHeight-100),t.type=PowerUpType.guide,this.guideTimer=this.addChild(t),(t=new PowerUpTimer(this)).position.set(0,80),t.type=PowerUpType.X2,this.x2Timer=this.addChild(t),(t=new PowerUpTimer(this)).position.set(0,60),this.x3Timer=this.addChild(t),t.type=PowerUpType.X3,(t=new PowerUpTimer(this)).position.set(0,40),this.x4Timer=this.addChild(t),t.type=PowerUpType.X4}},{key:"ActivateFeverTime",value:function(){this.feverTimeStart=this.gameManager.gameTime;for(e=0;e<this.leftFire.length;e++)null==this.leftFire[e].con.parent&&(this.gameManager.gameScene.addChild(this.leftFire[e].con),this.leftFire[e].Play());for(var e=0;e<this.rightFire.length;e++)null==this.rightFire[e].con.parent&&(this.gameManager.gameScene.addChild(this.rightFire[e].con),this.rightFire[e].Play());if(null==this.leftLight.parent&&(this.gameManager.gameScene.addChild(this.leftLight),(t=new PIXI.tween.Tween(this.leftLight,SceneManager.main.tween)).from({alpha:0}),t.to({alpha:1}),t.time=500,t.start()),null==this.rightLight.parent){this.gameManager.gameScene.addChild(this.rightLight);var t=new PIXI.tween.Tween(this.rightLight,SceneManager.main.tween);t.from({alpha:0}),t.to({alpha:1}),t.time=500,t.start()}}},{key:"StopFeverTime",value:function(){this.feverTimeStart=0,null!=this.onFeverTimeOver&&this.onFeverTimeOver.call(this.onFeverTimeOverContext);for(var e=function(e){this.gameManager.gameScene.removeChild(e.con)},t=0;t<this.leftFire.length;t++)null!=this.leftFire[t].con.parent&&(this.leftFire[t].Stop(),this.gameManager.SetTimeout(e,500,this,this.leftFire[t]));for(t=0;t<this.rightFire.length;t++)null!=this.rightFire[t].con.parent&&(this.rightFire[t].Stop(),this.gameManager.SetTimeout(e,500,this,this.rightFire[t]));if(null!=this.leftLight.parent&&((i=new PIXI.tween.Tween(this.leftLight,SceneManager.main.tween)).from({alpha:1}),i.to({alpha:0}),i.time=500,i.start(),i.once("end",function(){this.gameManager.gameScene.removeChild(this.leftLight)},this)),null!=this.rightLight.parent){var i=new PIXI.tween.Tween(this.rightLight,SceneManager.main.tween);i.from({alpha:1}),i.to({alpha:0}),i.time=500,i.start(),i.once("end",function(){this.gameManager.gameScene.removeChild(this.rightLight)},this)}}},{key:"SetOnFeverTimeOver",value:function(e,t){this.onFeverTimeOver=e,this.onFeverTimeOverContext=t}},{key:"Update",value:function(){var e=SceneManager.main.game.ticker.elapsedMS;this.guideTimer.UpdateTime(e),this.x2Timer.UpdateTime(e),this.x3Timer.UpdateTime(e),this.x4Timer.UpdateTime(e),this.feverTimeStart>0&&this.gameManager.gameTime-this.feverTimeStart>5e3&&this.StopFeverTime(),null!=this.pushEffect.parent&&this.pushEffect.update(.016666666666666666)}},{key:"Add",value:function(e,t,i){var n=this.GetPowerupIcon(t);null==n?this.ActivatePowerUp(e,t):n.duration>0?n.AddDuration(i):(n.Set(t,i),this.ActivatePowerUp(e,t))}},{key:"GetPowerupIcon",value:function(e){return e==PowerUpType.X2?this.x2Timer:e==PowerUpType.X3?this.x3Timer:e==PowerUpType.X4?this.x4Timer:e==PowerUpType.guide?this.guideTimer:null}},{key:"OnPowerUpTimeOut",value:function(e){this.RemovePowerUp(e),e!=PowerUpType.X2&&e!=PowerUpType.X3&&e!=PowerUpType.X4||this.gameManager.score.multiplier<=1&&(this.multiplyIcon.visible=!1)}},{key:"GetTotalMultiplePowerup",value:function(){var e=0;return 0==e?e=1:e}},{key:"ActivatePowerUp",value:function(e,t){t==PowerUpType.pushBack?this.ActivatePush(e):t==PowerUpType.guide?this.ActivateGuide(e):t==PowerUpType.knife&&this.ActivateKnife(e)}},{key:"ActivateGuide",value:function(e){this.gameManager.shooter.ActiveEasyArrow()}},{key:"ActivatePush",value:function(e){this.gameManager.grid.ActivePushBack(),this.pushEffect.skeleton.setToSetupPose(),this.pushEffect.state.setAnimation(0,"animation3",!1),this.addChild(this.pushEffect);var t=this,i={complete:function(e){t.removeChild(t.pushEffect),t.pushEffect.state.removeListener(i)}};SoundManager.playSound("assets/game/215018__taira-komori__flinging.mp3",!1),this.pushEffect.state.addListener(i)}},{key:"ActivateSwipe",value:function(e){this.gameManager.ingameStatTracker.AddCatSwipe(this.gameManager.grid.Bomb(e,2))}},{key:"ActivateKnife",value:function(e){this.gameManager.grid.Knifing(e,1),this.knifingEfx.position.y=this.gameManager.grid.bubbleSlot[e.row][e.col].y,this.knifingEfx.Play(),this.flashEfx.Play()}},{key:"ActivateFreeze",value:function(e){this.gameManager.grid.isFreeze=!0}},{key:"RemovePowerUp",value:function(e){e==PowerUpType.guide?this.gameManager.shooter.DeactivateEasyArrow():e==PowerUpType.X2?this.gameManager.score.multiplier=this.gameManager.score.multiplier-2:e==PowerUpType.X3?this.gameManager.score.multiplier=this.gameManager.score.multiplier-3:e==PowerUpType.X4&&(this.gameManager.score.multiplier=this.gameManager.score.multiplier-4)}},{key:"SetNextBubbleSpecial",value:function(e){this.gameManager.shooter.nextBubble.AddPowerup(e)}},{key:"SetShooterBubbleSpecial",value:function(e,t,i){this.gameManager.shooter.currentBubble.AddPowerup(e),e==PowerUpType.swipe&&(this.gameManager.shooter.nextBubble.AddPowerup(e),this.gameManager.shooter.CreateCatSwipeTriggerFx(t,i),SoundManager.playSound("assets/game/SFX_CatSwipeTrigger.wav"),SoundManager.playSound("assets/game/SFX_CatMeow.wav"))}},{key:"SetSlotBubbleSpecial",value:function(e,t){null!=e&&(t==PowerUpType.knife?this.ActivateKnife(e.index):t==PowerUpType.pushBack?(this.ActivatePush(e.index),e.bubble.RemovePowerUp()):null!=e.bubble&&e.bubble.AddPowerupSprite(t),this.arriveFx=this.addChild(new PowerUpArriveFx),this.arriveFx.position.set(e.position.x,e.position.y),this.arriveFx.PlayArrivedTween(new PIXI.Point(e.position.x,e.position.y)))}},{key:"SetRandomBubbleSpecial",value:function(e){var t=this.gameManager.grid.GetRandomBubbleSlot();null!=t.bubble&&t.bubble.AddPowerup(e)}},{key:"CreateDebugMenu",value:function(){var e=this;this.DebugContainer=new PIXI.Container,this.DebugContainer.displayGroup=new PIXI.DisplayGroup(650,!1);new PIXI.TextStyle({fontFamily:"mini-wakuwaku-maru",fontSize:14,fill:"brown",align:"right"});var t=new RoundedRectBtn(490,610,80,40,22,15316824);t.setOnClick(function(){},this),t.setOverlayBitmapText("CatSwpFx",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),this.DebugContainer.addChild(t),(t=new RoundedRectBtn(490,655,80,40,22,15316824)).setOnClick(function(){e.knifingEfx.Play()},this),t.setOverlayBitmapText("cut",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),this.DebugContainer.addChild(t),(t=new RoundedRectBtn(490,700,80,40,22,15316824)).setOnClick(function(){e.gameManager.shooter.currentBubble.AddPowerup(PowerUpType.X2)},this),t.setOverlayBitmapText("X2",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),this.DebugContainer.addChild(t),(t=new RoundedRectBtn(490,745,80,40,22,15316824)).setOnClick(function(){e.gameManager.shooter.currentBubble.AddPowerup(PowerUpType.knife)},this),t.setOverlayBitmapText("Knife",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),this.DebugContainer.addChild(t),(t=new RoundedRectBtn(490,790,80,40,22,15316824)).setOnClick(function(){e.gameManager.shooter.currentBubble.AddPowerup(PowerUpType.swipe)},this),t.setOverlayBitmapText("Swipe",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),this.DebugContainer.addChild(t),(t=new RoundedRectBtn(490,835,80,40,22,15316824)).setOnClick(function(){e.gameManager.shooter.currentBubble.AddPowerup(PowerUpType.guide)},this),t.setOverlayBitmapText("Guide",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),this.DebugContainer.addChild(t),(t=new RoundedRectBtn(490,880,80,40,22,15316824)).setOnClick(function(){e.gameManager.shooter.currentBubble.AddPowerup(PowerUpType.pushBack)},this),t.setOverlayBitmapText("Push",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),this.DebugContainer.addChild(t),this.addChild(this.DebugContainer),this.DebugContainer.visible=!0}},{key:"IsOnFeverTime",get:function(){return this.feverTimeStart>0&&this.gameManager.gameTime-this.feverTimeStart<5e3}}]),t}(),PowerUpArriveFx=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.currentTween=[],e.Create(),e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"Create",value:function(){this.con=new PIXI.Container,this.spr=PIXI.Sprite.fromImage(Const.path.particle.outerCircle),this.spr.tint=16439074,this.spr.anchor.set(.5,.5),this.spr.displayGroup=new PIXI.DisplayGroup(401,!1),this.con.addChild(this.spr),this.addChild(this.con)}},{key:"PlayArrivedTween",value:function(e){var t=this,i=new PIXI.tween.Tween(this.spr);i.time=200,i.from({scale:{x:.1,y:.1}}),i.to({scale:{x:.5,y:.5}}),i.easing=PIXI.tween.Easing.outQuad(),i.start(),i.addTo(SceneManager.main.tween),this.currentTween.push(i);var n=new PIXI.tween.Tween(this.spr);n.time=400,n.from({scale:{x:.5,y:.5},alpha:1}),n.to({scale:{x:.62,y:.62},alpha:0}),i.chain(n),this.currentTween.push(n),n.on("end",function(){i.stop(),i.clear(),i.remove(),n.stop(),n.clear(),n.remove(),null!=t.con&&t.removeChild(t.con)})}}]),t}(),KnifingEfx=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.Create(),i.displayGroup=new PIXI.DisplayGroup(260,!1),i.gameManager=e,i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"Create",value:function(){var e=new PIXI.Sprite(PIXI.loader.resources["assets/particles/diamond.png"].texture);e.x=0,e.y=0,e.anchor.x=.5,e.anchor.y=.5,this.midDiamond=this.addChild(e),this.midDiamond.alpha=0}},{key:"Play",value:function(){this.gameManager.grid.isHolding||this.gameManager.grid.HoldGrid();var e=[],t=new PIXI.tween.Tween(this.midDiamond);t.time=60,t.from({scale:{x:1,y:3},alpha:1}),t.to({scale:{x:3,y:.8},alpha:1}),t.expire=!0,e.push(t);var i=new PIXI.tween.Tween(this.midDiamond);i.time=120,i.from({scale:{x:3,y:.8}}),i.to({scale:{x:40,y:.6}}),i.expire=!0,e.push(i);var n=new PIXI.tween.Tween(this.midDiamond);n.time=60,n.from({scale:{x:40,y:.6}}),n.to({scale:{x:55,y:.01}}),n.expire=!0,e.push(n),t.chain(i),i.chain(n),t.addTo(SceneManager.main.tween),t.start(),setTimeout(function(e,t){e.forEach(function(e){e.stop(),e.clear(),e.remove()}),t.alpha=0,e=[]},240,e,this.midDiamond),setTimeout(function(e){e.grid.isHold=!1},350,this.gameManager)}}]),t}(),FlashScreenFx=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.Create(),e.displayGroup=new PIXI.DisplayGroup(499,!1),e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"Create",value:function(){var e=new PIXI.Graphics;e.beginFill(16777215,1),e.drawRect(0,0,SceneManager.main.gameWidth,SceneManager.main.gameHeight),e.endFill(),e.alpha=0,this.bg=this.addChild(e)}},{key:"Play",value:function(){var e=new PIXI.tween.Tween(this.bg);e.time=180,e.easing=PIXI.tween.Easing.inCubic(),e.from({alpha:1}),e.to({alpha:0}),e.expire=!0,e.addTo(SceneManager.main.tween),e.start()}}]),t}(),BubbleScore=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.score=0,i.shownScore=0,i.mouse=0,i.customer=0,i.combo=0,i.mul=0,i.currentTween=[],i.gameManager=e,i.currentFeverScore=0,i.scoreBg=new PIXI.Sprite(PIXI.Texture.fromImage("assets/game/gui_score_bg.png")),i.scoreBg.anchor.set(0,.5),i.scoreBg.position.set(30,40),i.scoreText=new PIXI.extras.BitmapText("0",{font:"18px mini-wakuwaku-maru",align:"left",tint:16777215}),i.scoreText.anchor=new PIXI.Point(0,.5),i.scoreText.position.set(50,40),i.highScoreText=new PIXI.extras.BitmapText("0",{font:"18px mini-wakuwaku-maru",align:"left",tint:2738055}),i.highScoreText.anchor=new PIXI.Point(0,.5),i.highScoreText.position.set(55,75),i.scoreAddText=new PIXI.extras.BitmapText("",{font:"12px mini-wakuwaku-maru",align:"left",tint:12576837}),i.scoreAddText.anchor=new PIXI.Point(1,.5),i.scoreAddText.position.set(160,70),i.addChild(i.scoreBg),i.addChild(i.scoreText),i.addChild(i.scoreAddText),i.displayGroup=new PIXI.display.DisplayGroup(496,!1),i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"ComputeScore",value:function(e,t,i,n,r,a){var s=this;this.mul=0,this.gameManager.powerUpManager.IsOnFeverTime&&(this.mul=this.gameManager.gameScene.upgradeManager.getById("FEVERTIME_MULTIPLIER").currentValue),this.gameManager.powerUpManager.ActivatingMultiplier.forEach(function(e){e==PowerUpType.X2?s.mul+=2:e==PowerUpType.X3?s.mul+=3:e==PowerUpType.X4&&(s.mul+=4)}),this.mul<=0&&(this.mul=1);var o=e.length*(this.gameManager.gameScene.upgradeManager.getById("BUBBLE_SCORE").currentValue+this.gameManager.gameScene.upgradeManager.getById("COMBO_SCORE").currentValue*(this.gameManager.combo.combo-1))*this.mul;this.gameManager.powerUpManager.IsOnFeverTime?(this.currentFeverScore+=o,this.gameManager.ingameStatTracker.MaxFeverScore=Math.max(this.gameManager.ingameStatTracker.MaxFeverScore,this.currentFeverScore)):this.currentFeverScore=0,this.AddScoreWithFlyer(o,n,r,a,this.mul)}},{key:"AddScoreWithFlyer",value:function(e,t,i,n){var r=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;n.forEach(function(e){var t=r.gameManager.gameScene.upgradeManager.getById("BUBBLE_SCORE").currentValue+r.gameManager.gameScene.upgradeManager.getById("COMBO_SCORE").currentValue*(r.gameManager.combo.combo-1);r.ShowScoreFlyer(t,r.gameManager.grid.bubbleSlot[e.row][e.col].position.x,r.gameManager.grid.bubbleSlot[e.row][e.col].position.y,a)}),this.AddScore(e)}},{key:"AddScore",value:function(e){this.score+=e,PIXI.ticker.shared.add(this.RuningScore,this),this.gameManager.ingameStatTracker.Score=this.GetTotalScore()}},{key:"ShowScoreFlyer",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=ScoreFlyerUI.NewScoreFlyer();r.position.x=t,r.position.y=i,r.Show(e,n),this.addChild(r)}},{key:"RuningScore",value:function(){var e=Math.abs(this.shownScore-this.score);this.shownScore<this.score?this.shownScore+=Math.ceil(e*PIXI.ticker.shared.elapsedMS*.02):(this.shownScore=this.score,PIXI.ticker.shared.remove(this.RuningScore,this)),this.shownScore=Math.round(this.shownScore),this.scoreText.text=this.shownScore.toLocaleString()}},{key:"Reset",value:function(){this.score=0,this.customer=0,this.mouse=0;var e=this.score.toString();this.scoreText.text=e;var t=SaveLoadManager.GetSaveData("Player").score||"0";t=t.replace(/\B(?=(\d{3})+(?!\d))/g,","),this.highScoreText.text="Hi: "+t.toLocaleString()}},{key:"ShowAddScore",value:function(e,t,i){this.ClearTween();var n="",r="";t>0&&(n+=" (+"+t+")"),i>1&&(r+=" x"+i),this.scoreAddText.text="+"+e+n+r;var a=new PIXI.tween.Tween(this.scoreAddText);a.time=500,a.from({alpha:0}),a.to({alpha:1}),a.expire=!0;var s=new PIXI.tween.Tween(this.scoreAddText);s.delay=500,s.time=200,s.expire=!0,s.from({alpha:1}),s.to({alpha:0}),a.chain(s),a.addTo(SceneManager.main.tween),a.start(),this.currentTween.push(a),this.currentTween.push(s)}},{key:"ShowCoinEfx",value:function(){}},{key:"CompleteRequest",value:function(){var e=this.gameManager.gameScene.upgradeManager.getById("REQUEST_SCORE").currentValue,t=(GameSetting.Score.customer+GameSetting.Score.customerBonus*this.customer)*e;this.customer++,this.AddScore(t)}},{key:"HitMouse",value:function(e,t){this.mouse++,this.AddScore(this.gameManager.gameScene.upgradeManager.getById("TAKEDOWN_SCORE").currentValue),this.ShowScoreFlyer(this.gameManager.gameScene.upgradeManager.getById("TAKEDOWN_SCORE").currentValue,e,t)}},{key:"GetTotalScore",value:function(){return Math.floor(this.score+this.mouse*this.gameManager.gameScene.upgradeManager.getById("TAKEDOWN_SCORE").currentValue+this.customer*GameSetting.Score.customer+this.playTimeScore)}},{key:"ClearTween",value:function(){this.currentTween.length>0&&(this.currentTween.forEach(function(e){e.stop(),e.clear(),e.remove()}),this.currentTween=[])}},{key:"multiplier",get:function(){return this.mul},set:function(e){this.mul=e}},{key:"playTimeScore",get:function(){return GameSetting.Score.time*this.gameManager.gameScene.upgradeManager.getById("PLAYTIME_SCORE").currentValue*Math.floor(this.gameManager.gameTime/1e3)}}]),t}(),BubbleCoin=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.upgradeManager=e;var n=PIXI.Sprite.fromImage("assets/game/gui_coin_bg.png");return n.anchor.set(.5,.5),n.position.set(250,40),i.addChild(n),i.text=new PIXI.extras.BitmapText("0",{font:"18px mini-wakuwaku-maru",tint:16777215,align:"left"}),i.text.anchor=new PIXI.Point(0,.5),i.text.position.set(240,40),i.addChild(i.text),i.displayGroup=new PIXI.display.DisplayGroup(496,!1),i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"completeRequest",value:function(e){null!=this.textTween&&(this.textTween.stop(),this.text.text=Math.ceil(this.currentCoin).toString());var t=this.currentCoin;this.currentCoin+=Math.ceil(e*(this.upgradeManager.getById("REQUEST_SCORE").currentValue/2));var i=this.currentCoin;this.textTween=new PIXI.tween.Tween(this.text,SceneManager.main.tween),this.textTween.from({}),this.textTween.to({}),this.textTween.time=500,this.textTween.on("update",function(e){var n=(500-e)/500,r=Math.ceil(n*t+(1-n)*i);this.text.text=r.toString()},this),this.textTween.once("end",function(){this.textTween=null},this),this.textTween.start()}},{key:"reset",value:function(){this.currentCoin=0,this.text.text="0"}},{key:"totalCoin",get:function(){return this.currentCoin}}]),t}(),Mouse=function(e){function t(e,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.flyingAngle=35,n.speed=4,n.turningDelay=300,n.isTurning=!1,n.isDying=!1,n.colSizeMultiplier=1.5,n.gameManager=e,n.ResetMouse(i),n.displayGroup=new PIXI.display.DisplayGroup(480,!1),n}return _inherits(t,PIXI.Container),_createClass(t,[{key:"ResetMouse",value:function(e){this.speed=e,this.isDying=!1,this.onMouseDie=null,this.onMouseReachTop=null,this.startTime=this.gameManager.gameTime,null!=this.currentBubble&&this.ghostSprite.removeChild(this.currentBubble),Util.isNullOrUndefined(SceneManager.main.poolManager.Get("mouse"))||(this.gameManager.mouse=SceneManager.main.poolManager.Get("mouse")),this.dx=-Math.cos(this.flyingAngle*PIXI.DEG_TO_RAD),this.dy=Math.sin(this.flyingAngle*PIXI.DEG_TO_RAD),this.currentBubble=new Bubble(this.gameManager.grid.NextBubbleTypeToAdd()),this.currentBubble.position.set(-12.5,32),this.MouseImage(),this.scale.set(-1,1)}},{key:"Update",value:function(){if(!this.isDying){if(this.turningTimer>0)return this.turningTimer-=SceneManager.main.game.ticker.elapsedMS,void(this.turningTimer<0&&this.MouseImage());if(Util.isNullOrUndefined(this.gameManager.shooter.loadedBubble)||!Misc.IsCloseEnough(this.gameManager.mouse.position,this.gameManager.shooter.loadedBubble.position,this.gameManager.grid.bubbleRadius*this.colSizeMultiplier,1)){var e=this.IsFinalParkingState(this.gameManager.mouse.position.x,this.gameManager.mouse.position.y,this.dx,this.dy);this.dx=e.dx,this.dy=e.dy,e.final?(null!=this.onMouseReachTop&&this.onMouseReachTop(),SoundManager.playSound("assets/sfx/rat_reachtop_cabled-mess.wav"),SoundManager.playSound("assets/sfx/rat_laugh_zyrytsounds.wav"),this.gameManager.grid.AddMoreBubbleType(),this.gameManager.grid.ResetRushOffset(),this.gameManager.mouseManager.ResetSpeed(),this.RemoveMouse()):this.position.set(e.x,e.y)}else this.gameManager.score.HitMouse(this.x,this.y),this.gameManager.ingameStatTracker.TakedownMouse(this.gameManager.gameTime-this.startTime),this.gameManager.shooter.CancelShooting(),this.DieMouseImage(),SoundManager.playSound("assets/sfx/rat_gethit_psychentist.mp3"),SoundManager.playSound("assets/game/SFX_BubbleImpact.wav")}}},{key:"RemoveMouse",value:function(){this.gameManager.mouseManager.LaunchingDone(),this.isDying=!1,this.gameManager.gameScene.removeChild(this),null!=this.gameManager.mouse&&(SceneManager.main.poolManager.Add("mouse",this.gameManager.mouse),this.gameManager.mouse.visible=!1,this.gameManager.mouse=null)}},{key:"IsFinalParkingState",value:function(e,t,i,n){var r=!1,a=!1;return e-=i*this.speed,t-=n*this.speed,e<2*this.gameManager.grid.bubbleRadius&&(e=2*this.gameManager.grid.bubbleRadius,i*=-1,a=!0,this.FlipMouseImage()),e>this.gameManager.grid.realWidth-2*this.gameManager.grid.bubbleRadius&&(e=this.gameManager.grid.realWidth-2*this.gameManager.grid.bubbleRadius,i*=-1,a=!0,this.FlipMouseImage()),t<this.gameManager.grid.top+3*this.gameManager.grid.bubbleRadius&&(r=!0),{bounceWall:a,final:r,x:e,y:t,dx:i,dy:n}}},{key:"FlipMouseImage",value:function(){null!=this.currentBubble&&this.ghostSprite.removeChild(this.currentBubble),null!=this.ghostSprite&&this.removeChild(this.ghostSprite),this.turningTimer=this.turningDelay,this.ghostSprite=PIXI.Sprite.fromImage("assets/game/mouse_flip.png"),this.ghostSprite.anchor.set(.5,.5),this.dx>0?this.scale.set(-1,1):this.scale.set(1,1),this.addChild(this.ghostSprite),this.ghostSprite.addChild(this.currentBubble),this.currentBubble.scale.x=this.ghostSprite.scale.x,SoundManager.playSound("assets/sfx/grabwall.wav")}},{key:"DieMouseImage",value:function(){var e=this;this.isDying=!0,null!=this.ghostSprite&&this.removeChild(this.ghostSprite),null!=this.onMouseDie&&this.onMouseDie(),this.onMouseDie=null,null!=this.currentBubble&&this.ghostSprite.removeChild(this.currentBubble),this.ghostSprite=PIXI.Sprite.fromImage("assets/game/mouse_fall.png"),this.ghostSprite.anchor.set(.5,.5),this.ghostSprite.addChild(this.currentBubble),this.addChild(this.ghostSprite);var t=new PIXI.tween.Tween(this);t.time=1e3,t.from({x:this.position.x,y:this.position.y}),t.to({x:this.position.x,y:SceneManager.main.gameHeight+100}),t.easing=PIXI.tween.Easing.outQuart(),t.expire=!0;var i=t.time;t.start(),t.addTo(SceneManager.main.tween),setTimeout(function(){e.RemoveMouse()},i,this)}},{key:"MouseImage",value:function(){Util.isNullOrUndefined(this.ghostSprite)||(null!=this.currentBubble&&this.ghostSprite.removeChild(this.currentBubble),null!=this.ghostSprite&&this.removeChild(this.ghostSprite)),this.ghostSprite=PIXI.Sprite.fromImage("assets/game/mouse.png"),this.ghostSprite.anchor.set(.5,.5),this.dx>0?this.scale.set(1,1):this.scale.set(-1,1),this.addChild(this.ghostSprite),null!=this.currentBubble&&(this.currentBubble.scale.x=1,this.ghostSprite.addChild(this.currentBubble))}}]),t}(),MouseSpeedLevel;!function(e){e[e.LevelOne=4.4]="LevelOne",e[e.LevelTwo=5.72]="LevelTwo",e[e.LevelThree=7.04]="LevelThree",e[e.LevelFour=8.36]="LevelFour",e[e.LevelFive=9.68]="LevelFive",e[e.LevelSix=11]="LevelSix",e[e.LevelSeven=12.32]="LevelSeven"}(MouseSpeedLevel||(MouseSpeedLevel={}));var MouseManager=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.speedLevel=MouseSpeedLevel.LevelOne,i.numberOfBallLaunched=0,i.launching=!1,i.warningTimer=!1,i.flicker=!1,i.flickerDelay=100,i.flickerTeasing=!1,i.teased=!1,i.isMouseCountdownPaused=!1,i.mouseCountDownPausedTime=0,i.FxOuterCircleTweens=[],i.backgroundSprite=PIXI.Sprite.fromImage("assets/game/WhiteRectangle.png"),i.backgroundSprite.alpha=.66,i.backgroundSprite.tint=0,i.backgroundSprite.position.set(43,0),i.backgroundSprite.width=454,i.backgroundSprite.height=830,i.backgroundSprite.displayGroup=new PIXI.DisplayGroup(10,!1),i.gameManager=e,i.warningSprite=PIXI.Sprite.fromImage("assets/game/mouse_warning.png"),i.warningSprite.alpha=0,i.warningSprite.anchor.set(.5,.5),i.warningSprite.position.set(270,220),i.warningSprite.displayGroup=new PIXI.DisplayGroup(475,!1),i.addChild(i.warningSprite),i.mouseTimer=new PIXI.Text("",{fill:"black",fontSize:18}),i.mouseTimer.position.set(300,930),i.mouseTimer.anchor.set(0,.5),i.addChild(i.mouseTimer),i.displayGroup=new PIXI.display.DisplayGroup(480,!1),i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"SetOnMouseLaunched",value:function(e,t){this.onMouseLaunched=e,this.onMouseLaunchedContext=t}},{key:"SetOnMouseEscaped",value:function(e){this.onMouseEscaped=e}},{key:"SetOnMouseDie",value:function(e){this.onMouseDie=e}},{key:"StartWarning",value:function(){this.warningTimer=!0,this.timeWhenStart=this.gameManager.gameTime,this.flickerTime=this.gameManager.gameTime+this.flickerDelay,this.WarningFlicker(!1),SoundManager.playSound("assets/sfx/rat_alert_willy.wav")}},{key:"Update",value:function(){if(!this.gameManager.grid.NoNextBuble()){this.isMouseCountdownPaused&&(this.mouseCountDownPausedTime+=Math.min(500,SceneManager.main.game.ticker.elapsedMS));var e=(this.numberOfBallLaunched+1)*GameSetting.mouseSpawnTime+this.mouseCountDownPausedTime;this.mouseCountownTime=Math.round((e-this.gameManager.gameTime)/1e3),this.gameManager.gameTime>e&&!this.warningTimer&&(this.warningTimer=!0,this.timeWhenStart=this.gameManager.gameTime,this.flickerTime=this.gameManager.gameTime+this.flickerDelay,this.WarningFlicker(!1),SoundManager.playSound("assets/sfx/rat_alert_willy.wav")),this.warningTimer&&(this.timeWhenStart+850>this.gameManager.gameTime?this.flickerTime<this.gameManager.gameTime&&(this.WarningFlicker(this.flicker),this.flicker=!this.flicker,this.flickerTime=this.gameManager.gameTime+this.flickerDelay):this.launching||(this.warningTimer=!1,this.LaunchMouse())),this.mouseCountownTime<=15&&0==this.teased&&(this.teased=!0)}}},{key:"PauseMouseCountdown",value:function(){this.isMouseCountdownPaused=!0}},{key:"ResumeMouseCountdown",value:function(){this.isMouseCountdownPaused=!1}},{key:"LaunchMouse",value:function(){var e=this;null!=this.onMouseLaunched&&this.onMouseLaunched.call(this.onMouseLaunchedContext),this.WarningFlicker(!1),this.launching=!0,this.numberOfBallLaunched++,this.flickerTeasing=!1,this.WarningFlicker(!1),Util.isNullOrUndefined(SceneManager.main.poolManager.Get("mouse"))||(this.gameManager.mouse=SceneManager.main.poolManager.Get("mouse")),Util.isNullOrUndefined(this.gameManager.mouse)&&(this.gameManager.mouse=new Mouse(this.gameManager,this.speedLevel)),this.gameManager.gameScene.addChild(this.gameManager.mouse),this.gameManager.mouse.visible=!0,this.ghostSound=SoundManager.playSound("assets/game/taira-komori__shuriken3_mix02.wav",!0),this.ghostSound.fade(0,1,1750),this.gameManager.mouse.ResetMouse(this.speedLevel),this.gameManager.mouse.position.set(this.getRandomInt(this.gameManager.grid.left,this.gameManager.grid.realWidth),980),this.gameManager.mouse.onMouseDie=function(){e.WarningFlicker(!1),SoundManager.stopSound(e.ghostSound),e.ghostSound=null,null!=e.onMouseDie&&e.onMouseDie()},this.gameManager.mouse.onMouseReachTop=function(){SoundManager.stopSound(e.ghostSound),e.ghostSound=null,e.gameManager.gameScene.Pause(!0),e.WarningFlicker(!1),e.PlayReachTopFx(),e.addChild(e.backgroundSprite);var t=e.gameManager.grid.NextBubbleTypeToAdd();setTimeout(function(e){e.removeChild(e.backgroundSprite)},1300,e),setTimeout(function(e,t){var i=e.gameManager.grid.GetRandomBubbleSlots(8);if(null!=i)for(var n=0;n<i.length;n++){var r=i[n].bubble,a=Bubble.NewBubble(t);e.swapBubbles(i[n],r,a)}else e.ResumeGame()},700,e,t),null!=e.onMouseEscaped&&e.onMouseEscaped()},this.speedLevel<MouseSpeedLevel.LevelSeven&&this.speedLevel++}},{key:"ResumeGame",value:function(){this.gameManager.pauseUI.IsShowing||(this.gameManager.gameScene.Pause(!1),setTimeout(function(e){e.WarningFlicker(!1)},100,this))}},{key:"PlayReachTopFx",value:function(){var e=this;this.ClearFxOuterCircleTween();var t=PIXI.Sprite.fromImage(Const.path.particle.outerCircle);t.position.set(this.gameManager.mouse.position.x,this.gameManager.mouse.position.y+60),t.tint=10027212,t.anchor.set(.5,.5),t.alpha=1,t.displayGroup=new PIXI.DisplayGroup(451,!1),this.addChild(t);var i=new PIXI.tween.Tween(t);i.time=250,i.from({scale:{x:0,y:0}}),i.to({scale:{x:.6,y:.6}}),i.expire=!0,i.addTo(SceneManager.main.tween),this.FxOuterCircleTweens.push(i);var n=new PIXI.tween.Tween(t);n.time=100,n.from({scale:{x:.6,y:.6},alpha:1}),n.to({scale:{x:.7,y:.7},alpha:.25}),n.expire=!0,n.addTo(SceneManager.main.tween),this.FxOuterCircleTweens.push(n),i.start(),i.chain(n),n.on("end",function(){e.ClearFxOuterCircleTween(),null!=t&&e.removeChild(t)})}},{key:"ClearFxOuterCircleTween",value:function(){this.FxOuterCircleTweens.length>0&&this.FxOuterCircleTweens.forEach(function(e){e.stop(),e.clear(),e.remove()})}},{key:"LightsOnOff",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t!=2*e?(this.flickerTeasing?(this.WarningFlicker(!1),this.flickerTeasing=!1):(this.WarningFlicker(!0),this.flickerTeasing=!0),setTimeout(function(i){i.LightsOnOff(e,t+=1)},100,this)):this.WarningFlicker(!1)}},{key:"swapBubbles",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(6==n)return e.AddBubble(i),void this.ResumeGame();e.bubble==i?e.AddBubble(t):e.AddBubble(i),setTimeout(function(r){r.swapBubbles(e,t,i,n+=1)},100,this)}},{key:"ResetBallsTracker",value:function(){this.numberOfBallLaunched=0}},{key:"ResetSpeed",value:function(){this.speedLevel=MouseSpeedLevel.LevelOne}},{key:"LaunchingDone",value:function(){this.launching=!1,this.warningTimer=!1,this.teased=!1}},{key:"getRandomInt",value:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}},{key:"WarningFlicker",value:function(e,t){this.warningSprite.alpha=e?null!=t?t:1:0}},{key:"Reset",value:function(){this.launching=!1,this.warningTimer=!1,this.flicker=!1,this.teased=!1,this.isMouseCountdownPaused=!1,this.ResetBallsTracker(),this.ResetSpeed(),this.LaunchingDone(),this.WarningFlicker(!1),Util.isNullOrUndefined(this.gameManager.mouse)||this.gameManager.mouse.RemoveMouse(),null!=this.ghostSound&&(SoundManager.stopSound(this.ghostSound),this.ghostSound=null)}},{key:"timeLeft",get:function(){return((this.numberOfBallLaunched+1)*GameSetting.mouseSpawnTime-this.gameManager.gameTime)/1e3}}]),t}(),Nigiri=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.type=e;var n=new PIXI.Sprite(PIXI.loader.resources[Const.path.nigiriPath[BubbleType[e]]].texture);return n.anchor.set(.5,.5),i.sprite=i.addChild(n),i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"Falling",value:function(){this.alpha=1;var e=new PIXI.tween.Tween(this);e.time=100,e.from({scale:{x:0,y:0},alpha:0}),e.to({scale:{x:1,y:1},alpha:1}),e.expire=!0;var t=new PIXI.tween.Tween(this);t.delay=300,t.time=300,t.from({alpha:1}),t.to({alpha:0}),t.expire=!0,e.chain(t),e.addTo(SceneManager.main.tween),this.currentTween=e,e.start();var i=e.time+t.time+t.delay;this.currentTimeout=setTimeout(function(e){e.visible=!1,SceneManager.main.poolManager.Add(BubbleType[e.type]+"_nigiri",e),e.parent.removeChild(e)},i+100,this)}},{key:"FlyToPlate",value:function(e,t){var i=this;this.alpha=1;var n=new PIXI.tween.Tween(this);n.time=100,n.from({scale:{x:0,y:0},alpha:0}),n.to({scale:{x:1,y:1},alpha:1}),n.expire=!0;var r=new PIXI.tween.Tween(this);r.time=Util.GetRandomInt(600,900),r.from({position:{x:this.position.x,y:this.position.y}}),r.to({position:{x:e.x,y:e.y}}),r.easing=PIXI.tween.Easing.inBack(),r.expire=!0,n.chain(r),n.addTo(SceneManager.main.tween),this.currentTween=n,n.start();n.time,r.time,r.delay;r.on("end",function(){null!=t&&t(),i.visible=!1,SceneManager.main.poolManager.Add(BubbleType[i.type]+"_nigiri",i),null!=i.parent&&i.parent.removeChild(i)})}}],[{key:"NewNigiri",value:function(e){var i=SceneManager.main.poolManager.Get(BubbleType[e]+"_nigiri");return null==i&&(i=new t(e)),null!=i.currentTween&&(i.currentTween.stop(),i.currentTween.clear(),i.currentTween.remove(),i.currentTween=null),null!=i.currentTimeout&&(clearTimeout(i.currentTimeout),i.currentTimeout=null),i.position.set(0,0),i.visible=!0,i.alpha=1,i.worldAlpha=1,i.scale.set(1,1),i}}]),t}(),Bubble=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.powerUpType=PowerUpType.none,i.attachParticles=[],i.currentTween=[],i.shiningSprites=[],i.type=e,i.sprite=new PIXI.Sprite(PIXI.loader.resources[Const.path.bubblePath[BubbleType[e]]].texture),i.sprite.anchor.set(.5,.5),i.sprite.scale.set(56/i.sprite.width,56/i.sprite.height),i.addChild(i.sprite),i.bounced=!1,i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"Disconnect",value:function(){this.isShake&&this.RemoveShake(),this.setParent(SceneManager.main.currentScene),this.ClearTween();for(var e=0;e<this.shiningSprites.length;e++)this.removeChild(this.shiningSprites[e]);this.shiningSprites=[],this.DisconnectTween()}},{key:"Match",value:function(){this.Destroy()}},{key:"Destroy",value:function(){null!=this.parent&&this.parent.removeChild(this),this.isShake&&this.RemoveShake(),SceneManager.main.poolManager.Add(BubbleType[this.type],this),this.ClearTween();for(var e=0;e<this.shiningSprites.length;e++)null!=this.shiningSprites[e]&&this.removeChild(this.shiningSprites[e]);this.shiningSprites=[],this.visible=!1}},{key:"RemovePowerUp",value:function(){this.sprite.texture=PIXI.loader.resources[Const.path.bubblePath[BubbleType[this.type]]].texture,this.sprite.scale.set(56/this.sprite.texture.width,56/this.sprite.texture.height),this.powerUpType=PowerUpType.none,this.attachParticles.forEach(function(e){e.Pool(e.poolName)}),null!=this.powerup_icon&&(this.powerup_icon.visible=!1)}},{key:"AddPowerup",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.RemovePowerUp(),this.powerUpType=e,e!=PowerUpType.swipe&&SoundManager.playSound("assets/game/SFX_RewardPowerUp.wav"),e==PowerUpType.swipe){this.sprite.texture=PIXI.loader.resources[Const.path.powerUpPath.catswipe].texture;var i=Particle.NewParticle("particle_superball",PIXI.loader.resources["assets/particles/FX_OuterCircle.png"].texture,PIXI.loader.resources["assets/particles/super ball.json"].data);i.con.displayGroup=new PIXI.DisplayGroup(451,!1),this.attachParticles.push(i),this.addChild(i.con),i.Play()}t&&this.AddPowerupSprite(e)}},{key:"AddPowerupSprite",value:function(e){e==PowerUpType.swipe||(this.sprite.texture=PIXI.loader.resources[Const.path.powerUpPath[BubbleType[this.type]]].texture,this.ApplyShinyFx()),this.sprite.scale.set(56/this.sprite.texture.width,56/this.sprite.texture.height),null==this.powerup_icon&&(this.powerup_icon=new PIXI.Sprite,this.powerup_icon.anchor.set(.5,.5),this.powerup_icon.displayGroup=new PIXI.DisplayGroup(452,!1),this.addChild(this.powerup_icon)),Util.assert(!Util.isNullOrUndefined(PIXI.loader.resources[Const.path.powerUpIcon[PowerUpType[e]]]),"Power up type "+e+" doesn't have texture"),this.powerup_icon.texture=PIXI.loader.resources[Const.path.powerUpIcon[PowerUpType[e]]].texture,this.powerup_icon.visible=!0}},{key:"ApplyShinyFx",value:function(){var e=new PIXI.Sprite(PIXI.Texture.fromImage(Const.path.powerUpPath[BubbleType[this.type]]));e.anchor.set(.5,.5),this.addChild(e),this.shiningSprites.push(e);var t=PIXI.Sprite.fromImage(Const.path.ui.simpleRectangle);t.rotation=45*PIXI.DEG_TO_RAD,t.width=40,t.height=100,t.anchor.set(.5,.5),t.position.set(-154,-154),t.mask=e,this.addChild(t),this.shiningSprites.push(t);var i=new PIXI.tween.Tween(t);i.time=1e3,i.from({position:{x:-35,y:-35}}),i.to({position:{x:35,y:35}}),i.expire=!0,i.loop=!0,i.addTo(SceneManager.main.tween),this.currentTween.push(i),i.start()}},{key:"DisconnectTween",value:function(){var e=this,t=(GameSetting.gameHeight-200+2*GameSetting.bubbleRadius-this.y)/Util.GetRandomArbitrary(1.2,1.4),i=new PIXI.tween.Tween(this);i.time=t;i.easing=PIXI.tween.Easing.inQuad(),i.to({y:GameSetting.gameHeight-Util.GetRandomInt(180,250)+2*GameSetting.bubbleRadius}),i.expire=!0,i.addTo(SceneManager.main.tween),i.id="disconnect.tween",i.on("end",function(){SceneManager.main.poolManager.Add(BubbleType[e.type],e),null!=e.parent&&e.parent.removeChild(e),e.visible=!1,i.remove()},this);var n=new PIXI.tween.Tween(this),r=.55*t;n.time=t-r,n.delay=r,n.to({alpha:0}),n.expire=!0,n.addTo(SceneManager.main.tween),n.on("end",function(){n.stop(),n.clear(),n.remove()},this),n.id="disconnect.tween2",i.start(),n.start(),this.currentTween.push(i),this.currentTween.push(n),this.displayGroup=new PIXI.DisplayGroup(450,!1)}},{key:"BounceOff",value:function(e){var t=this,i=new PIXI.tween.Tween(this);i.time=Math.round(200*Math.random()+100);i.to({y:SceneManager.main.gameHeight+2*GameSetting.bubbleRadius}),i.expire=!0,i.addTo(SceneManager.main.tween),i.start(),this.currentTween.push(i),i.on("end",function(){SceneManager.main.poolManager.Add(BubbleType[t.type],t),null!=t.parent&&t.parent.removeChild(t),t.visible=!1,i.remove()},this),i.id="bounceOff.tween",SoundManager.playSound("assets/game/SFX_BubbleBounce.wav")}},{key:"Bomb",value:function(){this.Destroy()}},{key:"Knifing",value:function(){this.Destroy()}},{key:"Bounce",value:function(){var e=Particle.NewParticle("particle_water_splash",PIXI.loader.resources["assets/particles/FX_WhiteCircle.png"].texture,PIXI.loader.resources["assets/particles/FX_BubbleImpact.json"].data);this.addChild(e.con),e.spawnPos.set(this.position.x,this.position.y),e.Play();var t=new PIXI.tween.Tween(this);t.time=150,t.from({scale:{x:.9,y:.9}}),t.to({scale:{x:1,y:1}}),t.expire=!0,t.on("end",function(){t.stop(),t.clear(),t.remove()},this),t.id="bounce.tween",this.currentTween.push(t),t.addTo(SceneManager.main.tween),t.start()}},{key:"AddShake",value:function(){this.isShake||(this.isShake=!0,PIXI.ticker.shared.add(this.Shake,this))}},{key:"RemoveShake",value:function(){PIXI.ticker.shared.remove(this.Shake,this)}},{key:"Shake",value:function(){this.x=Math.sin(100*PIXI.ticker.shared.elapsedMS)}},{key:"ClearTween",value:function(){this.currentTween.forEach(function(e){e.pingPong=!1,e.loop=!1,e.stop(),e.clear(),e.remove()})}}],[{key:"TypeToColor",value:function(e){return Const.bubbleColor[BubbleType[e]]}},{key:"NewBubble",value:function(e){var i=SceneManager.main.poolManager.Get(BubbleType[e]);return Util.isNullOrUndefined(i)?i=new t(e):i.RemovePowerUp(),i.currentTween.length>0&&(i.currentTween.forEach(function(e){e.stop(),e.clear()}),i.currentTween=[]),null!=i.currentTimeout&&(clearTimeout(i.currentTimeout),i.currentTimeout=null),i.position.set(0,0),i.visible=!0,i.alpha=1,i.worldAlpha=1,i.scale.set(1,1),i.bounced=!1,i}}]),t}(),BubbleSlot=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.bubbleGrid=e,i.displayGroup=new PIXI.display.DisplayGroup(250,!1),i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"AddBubble",value:function(e){null!=this.bubble&&this.removeChild(this.bubble),this.bubble=e,this.addChild(e)}},{key:"RemoveBubble",value:function(){Util.isNullOrUndefined(this.bubble)||(this.bubble.Destroy(),this.bubble=null)}},{key:"Reset",value:function(){}},{key:"MatchBubble",value:function(e){var t=this;if(!Util.isNullOrUndefined(this.bubble)){if(this.index.row<GameSetting.defaultRow-3){var i=this.bubble.type;this.PlaySmokeFx(),this.PlayBubbleFx();var n=Nigiri.NewNigiri(i);n.visible=!1,this.nigiri=this.addChild(n),this.nigiriTimer=setTimeout(function(e,i){n.visible=!0,t.NigiriFalling(e,i,n)},150,i,this.bubbleGrid,e)}this.bubble.Match(),this.bubble=null}}},{key:"NigiriFalling",value:function(e,t,i){if(t.gameManager.patreonManager.IsRequirementMatched(e)){var n=new PIXI.Point(t.gameManager.plateUI.plate.x-this.position.x,t.gameManager.plateUI.plate.y-50-this.position.y);i.FlyToPlate(n,function(){SoundManager.playSound("assets/game/SFX_FoodImpact.wav"),t.gameManager.patreonManager.DeductRequirement(e),t.gameManager.plateUI.SpawnReward(e)})}else i.Falling()}},{key:"BombBubble",value:function(){var e=this;if(!Util.isNullOrUndefined(this.bubble)){if(this.index.row<GameSetting.defaultRow-3){this.PlaySmokeFx(),this.PlayImpactFx();var t=this.bubble.type,i=Nigiri.NewNigiri(t);i.visible=!1,this.nigiri=this.addChild(i),this.nigiriTimer=setTimeout(function(t,n,r){i.visible=!0,e.NigiriFalling(t,n,i)},150,t,this.bubbleGrid)}this.bubble.Bomb(),this.bubble=null}}},{key:"Bounce",value:function(){Util.isNullOrUndefined(this.bubble)||this.bubble.Bounce()}},{key:"DisconnectBubble",value:function(){Util.isNullOrUndefined(this.bubble)||(this.bubble.Disconnect(),this.bubble.position=this.position,this.bubble=null)}},{key:"Knifing",value:function(){var e=this;if(!Util.isNullOrUndefined(this.bubble)){this.bubble.Knifing(),this.PlaySmokeFx(),this.PlayImpactFx();var t=this.bubble.type,i=Nigiri.NewNigiri(t);i.visible=!1,this.nigiri=this.addChild(i),this.nigiriTimer=setTimeout(function(t,n,r){i.visible=!0,e.NigiriFalling(t,n,i)},150,t,this.bubbleGrid),this.bubble=null}}},{key:"EnableDebugMode",value:function(){var e=this;this.interactive=!0,this.buttonMode=!0,this.on("pointerdown",function(){Util.isNullOrUndefined(e.bubble)||e.bubble.AddShake()})}},{key:"PlayCatSwipeFx",value:function(){var e=PIXI.Sprite.fromImage("assets/particles/FX_Claw_Single.png");e.anchor.set(.5,.5),e.scale=new PIXI.Point(.5,.5);var t=PIXI.Sprite.fromImage("assets/particles/FX_Claw_Double.png");t.anchor.set(.5,.5),t.scale=new PIXI.Point(.5,.5);var i=new PIXI.Sprite;(i=PIXI.Sprite.fromImage("assets/particles/FX_Claw_Double.png")).anchor.set(.5,.5),i.scale=new PIXI.Point(.5,.5),i.tint=11285205,i.alpha=.66,this.addChild(e),this.addChild(t),this.addChild(i);var n=new PIXI.tween.Tween(e);n.time=160,n.from({rotation:0*PIXI.DEG_TO_RAD}),n.to({rotation:60*PIXI.DEG_TO_RAD}),n.easing=PIXI.tween.Easing.outCubic(),n.expire=!0,n.addTo(SceneManager.main.tween);var r=new PIXI.tween.Tween(e);r.time=330,r.from({alpha:1}),r.to({alpha:0}),r.expire=!0,r.addTo(SceneManager.main.tween);var a=new PIXI.tween.Tween(t);a.time=330,a.from({alpha:1}),a.to({alpha:0}),a.expire=!0,a.addTo(SceneManager.main.tween);var s=new PIXI.tween.Tween(t);s.time=160,s.delay=16,s.from({rotation:-180*PIXI.DEG_TO_RAD}),s.to({rotation:-120*PIXI.DEG_TO_RAD}),s.easing=PIXI.tween.Easing.outCubic(),s.expire=!0,s.addTo(SceneManager.main.tween);var o=new PIXI.tween.Tween(i);o.time=260,o.from({rotation:45*PIXI.DEG_TO_RAD,alpha:.66}),o.to({rotation:180*PIXI.DEG_TO_RAD,alpha:0}),o.easing=PIXI.tween.Easing.outCubic(),o.expire=!0,o.addTo(SceneManager.main.tween),n.start(),s.start(),o.start();var u=s.time+s.delay,l=u+a.time;setTimeout(function(e,t){e.start(),t.start()},u,a,r),setTimeout(function(e,t,i){},l,e,t,i)}},{key:"PlaySmokeFx",value:function(){var e=Particle.NewParticle("particle_smoke",PIXI.loader.resources["assets/particles/smok.png"].texture,PIXI.loader.resources["assets/particles/smoke.json"].data);e.startColor=Const.bubbleEfxColorMidTone[BubbleType[this.bubble.type]],e.endColor=Const.bubbleEfxColorLight[BubbleType[this.bubble.type]],this.addChild(e.con),e.Play()}},{key:"PlayBubbleFx",value:function(){var e=Particle.NewParticle("particle_bubble",PIXI.loader.resources["assets/particles/bubble64x64.png"].texture,PIXI.loader.resources["assets/particles/bubble once.json"].data);e.startColor=Const.bubbleEfxColorMidTone[BubbleType[this.bubble.type]],e.endColor=Const.bubbleEfxColorLight[BubbleType[this.bubble.type]],this.addChild(e.con),e.Play()}},{key:"PlayImpactFx",value:function(){var e=Particle.NewParticle("particle_bubble_big",PIXI.loader.resources["assets/particles/ring64x64.png"].texture,PIXI.loader.resources["assets/particles/big bubble.json"].data);e.startColor=Const.bubbleEfxColorMidTone[BubbleType[this.bubble.type]],e.endColor=Const.bubbleEfxColorLight[BubbleType[this.bubble.type]],this.addChild(e.con),e.Play()}},{key:"Shake",value:function(){null!=this.bubble&&this.bubble.AddShake()}},{key:"StopShake",value:function(){null!=this.bubble&&this.bubble.RemoveShake()}}]),t}();BubbleSlot.slotPath="assets/square.jpg";var BubbleGrid=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.isDebug=!0,i.totalRow=GameSetting.defaultRow,i.totalCols=GameSetting.defaultCol,i.bubbleRadius=GameSetting.bubbleRadius,i.disconnectedBubbles=0,i.topOffset=10,i.botOffset=200,i.leftOffset=15,i.bot=GameSetting.overOffsetY,i.left=i.leftOffset,i.top=i.bot-(GameSetting.defaultRow-1)*(2*GameSetting.bubbleRadius-2*i.bubbleRadius*.13),i.realWidth=i.totalCols*i.bubbleRadius*2+2*i.left,i.realHeight=Math.sqrt(3)*(i.totalRow-1)*i.bubbleRadius+2*i.bubbleRadius,i.rectLeft=-i.realWidth/2,i.rectBottom=-i.realHeight/2,i.rushOffsetY=GameSetting.rushOffsetStart,i.xShift=i.bubbleRadius,i.yDis=2*i.bubbleRadius*GameSetting.bubbleNormalEpsilon,i.xDis=2*i.bubbleRadius,i.foundFirstBubble=!1,i.ySpeed=GameSetting.gridSpeedY,i.ySpeedRush=GameSetting.rushGridSpeedY,i.isClearOverStopOffset=!0,i.isReachStopOffset=!1,i.gameOverCountDown=0,i.zeroIsEven=!1,i.spawnBubbleTypes=[],i.nextBubbleIndexToAdd=0,i.allBubbleType=GameSetting.bubbleTypes,i.bubbleToAdd=[BubbleType.yellow,BubbleType.orange],i.isHold=!1,i.currentHoldTime=0,i.isFreeze=!1,i.currentFreezeTime=0,i.isPush=!1,i.currentPushTime=0,i.isInpl=!1,i.shakeSlot=[],i.intpTIme=0,i.displayGroup=new PIXI.display.DisplayGroup(250,!1),i.gameManager=e,i.interactive=!1,i.CreateRushOffsetGraphic(),i.CreateSwapOffsetGraphic(),i.deltaDistance=0,i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"GetSideSlot",value:function(){for(var e=[],t=0;t<this.bubbleSlot.length;t++)e.push(this.bubbleSlot[t][0]),e.push(this.bubbleSlot[t][this.bubbleSlot[t].length-1]);return e}},{key:"GetLesserSideSlot",value:function(e,t){var i=[];if(this.zeroIsEven)for(n=0;n<this.bubbleSlot.length;n+=2)n>e&&n<t&&(i.push(this.bubbleSlot[n][0]),i.push(this.bubbleSlot[n][this.bubbleSlot[n].length-1]));else for(var n=1;n<this.bubbleSlot.length;n+=2)n>e&&n<t&&(i.push(this.bubbleSlot[n][0]),i.push(this.bubbleSlot[n][this.bubbleSlot[n].length-1]));return i}},{key:"Get",value:function(e,t){return this.bubbleSlot[e][t]}},{key:"NewGrid",value:function(e){this.rushOffsetY=GameSetting.rushOffsetStart,this.isPause=!1,this.isPush=!1,this.isReachStopOffset=!1,this.isReachingOverOffset=!1,null!=this.nervousSound&&SoundManager.stopSound(this.nervousSound),this.gameOverCountDown=0,this.disconnectedBubbles=0,this.zeroIsEven=!1,this.foundFirstBubble=!1,this.firstBubbleRow=GameSetting.startInitRow,this.NextBubbleListInit(Const.startTypeAmount[GameDifficulty[e]]),this.RemoveAllSlot(),this.CreateAllSlot(GameSetting.startInitRow)}},{key:"NextBubbleListInit",value:function(e){if(!(e>this.allBubbleType.length)){this.bubbleToAdd=[];for(var t=0;t<e;t++)this.bubbleToAdd.push(this.allBubbleType[t]);this.nextBubbleIndexToAdd=e}}},{key:"NextBubbleTypeToAdd",value:function(){return this.allBubbleType[this.nextBubbleIndexToAdd]}},{key:"AddMoreBubbleType",value:function(){this.bubbleToAdd.push(this.allBubbleType[this.nextBubbleIndexToAdd]),this.nextBubbleIndexToAdd++,this.NoNextBuble()}},{key:"NoNextBuble",value:function(){return this.nextBubbleIndexToAdd>=this.allBubbleType.length}},{key:"stop",value:function(){null!=this.nervousSound&&(SoundManager.stopSound(this.nervousSound),this.nervousSound=null)}},{key:"RemoveAllSlot",value:function(){if(!Util.isNullOrUndefined(this.bubbleSlot))for(var e=0;e<this.totalRow;e++)for(var t=0;t<this.bubbleSlot[e].length;t++)null!=this.bubbleSlot[e][t]&&(this.bubbleSlot[e][t].destroy(),this.removeChild(this.bubbleSlot[e][t]))}},{key:"CreateAllSlot",value:function(e){this.bubbleSlot=[];for(var t=0;t<this.totalRow;t++){this.bubbleSlot[t]=[];for(var i=0;i<this.totalCols;i++)if(t%2==0||i!=this.totalCols-1){var n=new BubbleSlot(this);if(n.y=this.bot-this.yDis*t,n.x=this.left+this.xDis*i+this.bubbleRadius,t%2!=0&&(n.x+=this.xShift),this.bubbleSlot[t][i]=n,t>e){var r=this.bubbleToAdd[Math.floor(Math.random()*this.bubbleToAdd.length)],a=Bubble.NewBubble(r);n.AddBubble(a)}n.index=new Index(t,i),n.bubbleGrid=this,this.addChild(n)}}this.CheckRemainingType()}},{key:"HoldGrid",value:function(){this.currentHoldTime=0,this.isHold=!0}},{key:"CancelHoldGrid",value:function(){this.currentHoldTime=0,this.isHold=!1}},{key:"SetToCheckPopInRow",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];null==t||0==t.length?this.checkBubbleInRow=null:this.checkBubbleInRow=t}},{key:"Update",value:function(){var e=SceneManager.main.game.ticker.elapsedMS;if(!this.isPause)if(this.isPush)this.currentPushTime>GameSetting.pushBackTime?(this.isPush=!1,this.isHold=!0,this.currentPushTime=0,this.currentHoldTime=0):(this.PushBackUpdate(GameSetting.pushBackSpeed,e),this.currentPushTime+=e);else if(this.isHold)this.currentHoldTime>GameSetting.holdBackTime?(this.isHold=!1,this.currentHoldTime=0):this.currentHoldTime+=e;else if(this.isFreeze)this.currentFreezeTime>GameSetting.FreezeTime?(this.isFreeze=!1,this.currentFreezeTime=0):this.currentFreezeTime+=e;else if(this.isReachingOverOffset)this.gameManager.UpdateOverTimer(e)&&SoundManager.stopSound(this.nervousSound);else{var t;t=!Util.isNullOrUndefined(this.firstBubbleRow)&&this.bubbleSlot[this.firstBubbleRow][0].y<this.rushOffsetY?GameSetting.rushGridSpeedY:GameSetting.gridSpeedY,this.deltaDistance=.0166666667*t,this.SlideDown(.0166666667*t);var i=this.bot-GameSetting.gameoverOffsetAtFullAlpha-this.bubbleSlot[this.firstBubbleRow][0].y,n=(GameSetting.gameOverOffsetStartAppear-i)/GameSetting.gameOverOffsetStartAppear;i<GameSetting.gameOverOffsetStartAppear?this.gameOverOffsetGraphic.alpha=Math.min(n,1):this.gameOverOffsetGraphic.alpha=0,this.foundFirstBubble=!1}}},{key:"SlideDown",value:function(e){for(var t=this,i=0;i<this.bubbleSlot.length;i++)for(var n=0;n<this.bubbleSlot[i].length;n++){if(this.foundFirstBubble||Util.isNullOrUndefined(this.bubbleSlot[i][n].bubble)||(this.foundFirstBubble=!0,this.firstBubbleRow=i),0==i&&this.bubbleSlot[i][n].y+GameSetting.bubbleRadius>this.bot){if(this.IsBubbleInRow(i))return this.isReachingOverOffset=!0,this.nervousSound=SoundManager.playSound("assets/game/SFX_PreGameOver.wav",!0),this.gameManager.ingameStatTracker.PreGameOverCount++,this.gameManager.shooter.Nervous(),void this.bubbleSlot[i].forEach(function(e){t.shakeSlot.push(e),e.Shake()});this.SwapToLastRow(),this.RandomAddBubblesLastRow(this.bubbleToAdd)}this.bubbleSlot[i][n].y+=e}}},{key:"CheckRemainingType",value:function(){this.spawnBubbleTypes=[];for(var e=0;e<this.bubbleSlot.length;e++)for(var t=0;t<this.bubbleSlot[e].length;t++)Util.isNullOrUndefined(this.bubbleSlot[e][t].bubble)||Util.isNullOrUndefined(this.bubbleSlot[e][t].bubble.type)||this.AddNewType(this.bubbleSlot[e][t].bubble.type)}},{key:"AddNewType",value:function(e){for(var t=0;t<this.spawnBubbleTypes.length;t++)if(e==this.spawnBubbleTypes[t])return;this.spawnBubbleTypes.push(e)}},{key:"IsBubbleInRow",value:function(e){for(var t=0;t<this.bubbleSlot[e].length;t++)if(!Util.isNullOrUndefined(this.bubbleSlot[e][t].bubble))return!0;return!1}},{key:"SwapToLastRow",value:function(){for(var e=this.bubbleSlot.length-1,t=this.bubbleSlot[0],i=t.length,n=0;n<i;n++)t[n].position.y=this.bubbleSlot[e][0].y-2*this.bubbleRadius+2*this.bubbleRadius*.13,t[n].index.row=e;for(n=0;n<e;n++)this.bubbleSlot[n]=this.bubbleSlot[n+1],this.bubbleSlot[n].forEach(function(e){e.index.row--});this.zeroIsEven=!this.zeroIsEven,this.bubbleSlot[e]=t,this.CheckRemainingType()}},{key:"SwapToFirstRow",value:function(){for(var e=this.bubbleSlot.length-1,t=this.bubbleSlot[e],i=t.length,n=0;n<i;n++)t[n].Reset(),t[n].DisconnectBubble(),t[n].position.y=this.bubbleSlot[0][0].y+2*GameSetting.bubbleRadius-2*this.bubbleRadius*.13,t[n].index=new Index(0,t[n].index.col);for(n=e;n>0;n--)this.bubbleSlot[n]=this.bubbleSlot[n-1],this.bubbleSlot[n].forEach(function(e){e.index=new Index(e.index.row+1,e.index.col)});this.zeroIsEven=!this.zeroIsEven,this.bubbleSlot[0]=t}},{key:"Print",value:function(){for(var e=0;e<this.bubbleSlot.length;e++){for(var t=0;t<this.bubbleSlot[e].length;t++)"["+e+" "+t+"] ";"\n"}}},{key:"CreateSwapOffsetGraphic",value:function(){var e=new PIXI.Sprite;(e=PIXI.Sprite.fromImage("assets/game/gameover_offset.png")).anchor.set(.5,.5),e.position.set(270,this.bot),this.gameOverOffsetGraphic=this.addChild(e)}},{key:"CreateRushOffsetGraphic",value:function(){var e=new PIXI.Graphics;e.drawRect(SceneManager.main.gameWidth/2,this.rushOffsetY,SceneManager.main.gameWidth,4),e.pivot.set(SceneManager.main.gameWidth/2),e.endFill(),e.displayGroup=new PIXI.display.DisplayGroup(139,!1),this.rushOffsetGraphic=this.addChild(e),this.rushOffsetGraphic.visible=!1,this.UpdateRushOffsetGraphic()}},{key:"Pause",value:function(){this.isPause=!0}},{key:"Resume",value:function(){this.isPause=!1}},{key:"RemoveBubbles",value:function(e){}},{key:"RandomAddBubblesLastRow",value:function(e){for(var t=0;t<this.bubbleSlot[this.bubbleSlot.length-1].length;t++){var i=this.bubbleSlot[this.bubbleSlot.length-1][t],n=this.bubbleToAdd[Math.floor(Math.random()*this.bubbleToAdd.length)],r=Bubble.NewBubble(n);Util.isNullOrUndefined(i.bubble)||i.bubble.Destroy(),i.AddBubble(r)}}},{key:"NewVisitList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.bubbleSlot.length;this.isVisited=[];for(var t=0;t<e;t++)for(var i=0;i<this.bubbleSlot[t].length;i++)this.isVisited[t]=[],this.isVisited[t][i]=!1;this.PrintVisitedList()}},{key:"PrintVisitedList",value:function(){}},{key:"UnlinkMatch",value:function(e,t){var i=this;this.NewVisitList();var n=this.FindMatchingNeighbor(e),r=n.length,a=new Array,s=new Array;return r>=t?(this.bubbleSlot[e.row][e.col].bubble.bounced&&this.gameManager.ingameStatTracker.BounceMatches++,this.gameManager.shooter.bubbleSwapped&&this.gameManager.ingameStatTracker.SwapMatched++,n.forEach(function(e){var t=i.bubbleSlot[e.row][e.col].bubble;a.push(t.type),t.powerUpType!=PowerUpType.none&&s.push({type:t.powerUpType,origin:e}),i.gameManager.ingameStatTracker.SetMatchedBubblePerType(t.type,i.gameManager.ingameStatTracker.GetMatchedBubblePerType(t.type)+1),i.bubbleSlot[e.row][e.col].MatchBubble()}),this.gameManager.ingameStatTracker.MatchedBubble+=n.length,SoundManager.playSound("assets/game/SFX_BubbleMatch.wav"),this.gameManager.OnMatchBubble(e,a,s,n)):(this.Bounce(e,1),this.gameManager.combo.InterruptCombo()),SoundManager.playSound("assets/game/SFX_BubbleImpact.wav"),r}},{key:"ContainsBubbleInRow",value:function(e,t){for(var i=e;i<=t;i++)for(var n=0;n<this.bubbleSlot[i].length;n++)if(!Util.isNullOrUndefined(this.bubbleSlot[i][n].bubble))return!0;return!1}},{key:"ContainsBubbleTypeInRow",value:function(e,t,i){for(var n=t;n<=i;n++)for(var r=0;r<this.bubbleSlot[n].length;r++)if(null!=this.bubbleSlot[n][r].bubble&&this.bubbleSlot[n][r].bubble.type==e)return!0;return!1}},{key:"DisconnectBubble",value:function(){var e=this;this.NewVisitList();for(var t=new Array,i=new Array,n=0;n<this.bubbleSlot[this.totalRow-1].length;n++)Util.isNullOrUndefined(this.bubbleSlot[this.totalRow-1][n].bubble)||(t.push(new Index(this.totalRow-1,n)),this.isVisited[this.totalRow-1][n]=!0);for(;0!=t.length;){var r=t[0];t.splice(0,1),this.GetNeighbors(r).forEach(function(i){e.IsValidIndex(i)&&!e.isVisited[i.row][i.col]&&(Util.isNullOrUndefined(e.bubbleSlot[i.row][i.col].bubble)||(t.push(i),e.isVisited[i.row][i.col]=!0))})}for(n=0;n<this.isVisited.length;n++)for(var a=0;a<this.isVisited[n].length;a++)Util.isNullOrUndefined(this.bubbleSlot[n][a].bubble)||this.isVisited[n][a]||(i.push(this.bubbleSlot[n][a].bubble.type),this.bubbleSlot[n][a].DisconnectBubble(),this.disconnectedBubbles++,this.gameManager.ingameStatTracker.DisconnectedBubble++);return i}},{key:"FindMatchingNeighbor",value:function(e){var t=this,i=[],n=this.GetNeighbors(e),r=this.bubbleSlot[e.row][e.col].bubble.type;return n.forEach(function(e){t.IsValidIndex(e)&&!Util.isNullOrUndefined(t.bubbleSlot[e.row][e.col].bubble)&&(null!=t.checkBubbleInRow&&t.checkBubbleInRow.indexOf(e.row)<0||t.isVisited[e.row][e.col]||t.bubbleSlot[e.row][e.col].bubble.type!=r||(i.push(e),t.isVisited[e.row][e.col]=!0,i=i.concat(t.FindMatchingNeighbor(e))))}),i}},{key:"GetNeighbors",value:function(e){var t=e.row,i=e.col;return this.zeroIsEven?t%2==0?[new Index(t-1,i),new Index(t-1,i+1),new Index(t,i-1),new Index(t,i+1),new Index(t+1,i),new Index(t+1,i+1)]:[new Index(t-1,i-1),new Index(t-1,i),new Index(t,i-1),new Index(t,i+1),new Index(t+1,i-1),new Index(t+1,i)]:t%2==0?[new Index(t-1,i-1),new Index(t-1,i),new Index(t,i-1),new Index(t,i+1),new Index(t+1,i-1),new Index(t+1,i)]:[new Index(t-1,i),new Index(t-1,i+1),new Index(t,i-1),new Index(t,i+1),new Index(t+1,i),new Index(t+1,i+1)]}},{key:"IsValidIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.totalRow,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.totalCols;if(e.row>t||e.col>i)return!1;var n;return n=this.zeroIsEven?e.row%2==0?e.col<this.totalCols-1:e.col<this.totalCols:e.row%2==0?e.col<this.totalCols:e.col<this.totalCols-1,e.row>=0&&e.row<this.totalRow&&e.col>=0&&n}},{key:"CreateDebugUI",value:function(){var e=this;this.DebugContainer=new PIXI.Container,this.DebugContainer.displayGroup=new PIXI.DisplayGroup(650,!1);var t=new RoundedRectBtn(70,930,100,40,22,16777215);t.setOnClick(this.Pause,this),t.setOverlayBitmapText("Pause grid",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),this.DebugContainer.addChild(t),(t=new RoundedRectBtn(170,930,100,40,22,16777215)).setOnClick(this.RemoveBubble,this),t.setOverlayBitmapText("Clear bubble",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),this.DebugContainer.addChild(t),(t=new RoundedRectBtn(270,930,100,40,22,16777215)).setOnClick(function(){e.GetLesserSideSlot(0,GameSetting.lastVisibleRow+1)},this),t.setOverlayBitmapText("Get lesser",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),this.DebugContainer.addChild(t),(t=new RoundedRectBtn(370,930,100,40,22,16777215)).setOnClick(function(){e.gameManager.OnGameOver()},this),t.setOverlayBitmapText("Gameover",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),this.DebugContainer.addChild(t),(t=new RoundedRectBtn(470,930,100,40,22,16777215)).setOnClick(function(){e.gameManager.resultUI.Hide()},this),t.setOverlayBitmapText("Res hide",{font:"14px mini-wakuwaku-maru",align:"center",tint:9265728}),this.DebugContainer.addChild(t),this.addChild(this.DebugContainer)}},{key:"RemoveBubble",value:function(){for(var e=0;e<12;e++)for(var t=0;t<this.bubbleSlot[e].length;t++)this.bubbleSlot[e][t].MatchBubble();this.gameManager.RemoveOverAlert()}},{key:"GetSlotFromPosition",value:function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=0;n<this.totalRow;n++)for(var r=0;r<this.bubbleSlot[n].length;r++){var a=this.Get(n,r);if(!i||Util.isNullOrUndefined(a.bubble)){var s=a.position;if(Misc.IsCloseEnough(e,s,this.bubbleRadius,t))return a}}return null}},{key:"LowerRushOffset",value:function(){this.rushOffsetY+GameSetting.rushOffsetRate<=GameSetting.rushOffsetMax&&(this.rushOffsetY+=GameSetting.rushOffsetRate),this.UpdateRushOffsetGraphic()}},{key:"PushbackRushOffset",value:function(){this.rushOffsetY-GameSetting.pushBackRushOffset>=GameSetting.rushOffsetStart?(this.rushOffsetY-=GameSetting.pushBackRushOffset,this.gameManager.ResetRushOffsetCooldown()):(this.rushOffsetY=GameSetting.rushOffsetStart,this.gameManager.ResetRushOffsetCooldown()),this.UpdateRushOffsetGraphic()}},{key:"ResetRushOffset",value:function(){this.rushOffsetY=GameSetting.rushOffsetStart,this.UpdateRushOffsetGraphic()}},{key:"UpdateRushOffsetGraphic",value:function(){this.rushOffsetGraphic.position.y=this.rushOffsetY}},{key:"ActivePushBack",value:function(){this.gameManager.RemoveOverAlert(),this.PushbackRushOffset(),this.isPush=!0,SoundManager.playSound("assets/sfx/smash.wav")}},{key:"PushBackUpdate",value:function(e,t){for(var t=SceneManager.main.game.ticker.elapsedMS,i=0;i<this.bubbleSlot.length;i++){for(var n=0;n<this.bubbleSlot[i].length;n++)this.bubbleSlot[i][n].y-=e*t*.001;i==this.bubbleSlot.length-1&&this.bubbleSlot[this.bubbleSlot.length-1][0].y<this.top&&this.SwapToFirstRow()}}},{key:"Bomb",value:function(e,t){var i=this;this.NewVisitList();var n=this.FindNeighborInCircle(e,e,t),r=[],a=(n.length,new Array),s=new Array;SoundManager.playSound("assets/game/SFX_CatSwipeHit.wav");var o=0;return n.forEach(function(e){var t=i.bubbleSlot[e.row][e.col].bubble;null!=t&&(t.powerUpType!=PowerUpType.none?s.push({type:t.powerUpType,origin:e}):a.push(t.type),r.push(i.bubbleSlot[e.row][e.col].index),i.bubbleSlot[e.row][e.col].BombBubble(),o++)}),this.gameManager.OnMatchBubble(e,a,s,r),o}},{key:"Bounce",value:function(e,t){var i=this;this.NewVisitList(),this.FindNeighborInCircle(e,e,t).forEach(function(e){i.bubbleSlot[e.row][e.col].Bounce()})}},{key:"FindNeighborInCircle",value:function(e,t,i){var n=this,r=[];return this.GetNeighbors(e).forEach(function(e){n.IsValidIndex(e)&&!n.isVisited[e.row][e.col]&&n.IsInCircleRange(e,t,i)&&(r.push(e),n.isVisited[e.row][e.col]=!0,r=r.concat(n.FindNeighborInCircle(e,t,i)))}),r}},{key:"IsInCircleRange",value:function(e,t,i){var n=t.row-i,r=t.row+i,a=t.col-i,s=t.col+i,o=t.row%2==0;if(e.row!=t.row){this.zeroIsEven||(o=!o);var u=Math.abs(e.row-t.row);o?(s-=u-1,a+=1):(s-=Math.round(.5*u),a+=Math.floor(.5*u))}return e.row<=r&&e.row>=n&&e.col<=s&&e.col>=a}},{key:"Knifing",value:function(e,t){var i=new Array,n=this.FindNeighborInCircle(e,e,t),r=[],a=new Array,s=e.row;s>=0&&this.bubbleSlot[s].forEach(function(e){var t=e.bubble;null!=t&&(i.push(t.type),t.powerUpType!=PowerUpType.none&&a.push({type:t.powerUpType,origin:e.index}),r.push(e.index),e.Knifing())}),n.forEach(function(e){r.push(e)}),SoundManager.playSound("assets/game/SFX_KnifeHit.wav"),this.gameManager.OnMatchBubble(e,i,a,r)}},{key:"GetRandomBubbleSlot",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GameSetting.lastVisibleRow,t=new Array,i=e,n=this.firstBubbleRow;n<i+1;n++)for(var r=0;r<this.bubbleSlot[n].length;r++)Util.isNullOrUndefined(this.bubbleSlot[n][r].bubble)||t.push(new Index(n,r));if(0==t.length)return null;var a=Math.random(),s=Math.floor(a*(t.length-0)+0);return this.bubbleSlot[t[s].row][t[s].col]}},{key:"GetRandomBubbleSlots",value:function(e){for(var t=new Array,i=this.firstBubbleRow,n=GameSetting.lastVisibleRow,r=i;r<n+1;r++)for(var a=0;a<this.bubbleSlot[r].length;a++)Util.isNullOrUndefined(this.bubbleSlot[r][a].bubble)||t.push(new Index(r,a));if(t.length<e)return null;for(var s=[],r=0;r<e;r++){var o=Math.random(),u=Math.floor(o*(t.length-0)+0),l=t.splice(u,1)[0],h=this.bubbleSlot[l.row][l.col];s.push(h)}return s}},{key:"GetRamdomBottomBubbleRow",value:function(){for(var e,t=new Array,i=this.firstBubbleRow,n=GameSetting.lastVisibleRow,r=n+1-i,a=Math.ceil(100/r),s=[],o=n;o>i-1;o--)s[o]=a;for(o=i;o<n+1;o++)for(p=o+1;p<n+1;p++){var u=-.1*s[p];s[o]-=Math.floor(u),s[p]+=Math.floor(u)}var l=0;s.forEach(function(e){l+=e});for(var h=Util.GetRandomInt(0,99),c=0,d=!1,o=i;!d;o++)Util.IsInbetween(h,c,c+s[o])?(e=o,d=!0):s[o]+1>0?c+=s[o]+1:(e=o-1,d=!0);i>=n&&(e=i);for(var p=0;p<this.bubbleSlot[e].length;p++)Util.isNullOrUndefined(this.bubbleSlot[e][p].bubble)||t.push(new Index(e,p));if(0==t.length)return this.GetRandomBubbleSlot();var f=Math.floor(Math.random()*(t.length-0)+0);return this.bubbleSlot[t[f].row][t[f].col]}},{key:"GetRamdomTopBubbleRow",value:function(){for(var e,t=new Array,i=this.firstBubbleRow,n=GameSetting.lastVisibleRow,r=(new Array,n+1-i),a=Math.ceil(100/r),s=[],o=n;o>i-1;o--)s[o]=a;for(o=n;o>i-1;o--)for(p=o-1;p>i-1;p--){var u=.1*s[p];s[o]+=Math.ceil(u),s[p]-=Math.ceil(u)}var l=0;s.forEach(function(e){l+=e});for(var h=Util.GetRandomInt(0,99),c=0,d=!1,o=n;!d;o--)Util.IsInbetween(h,c,c+s[o])?(e=o,d=!0):s[o]-1>0?c+=s[o]-1:(e=o+1,d=!0);i>=n&&(e=i);for(var p=0;p<this.bubbleSlot[e].length;p++)Util.isNullOrUndefined(this.bubbleSlot[e][p].bubble)||t.push(new Index(e,p));if(0==t.length)return this.GetRandomBubbleSlot();var f=Math.floor(Math.random()*(t.length-0)+0);return this.bubbleSlot[t[f].row][t[f].col]}},{key:"EscapeGameover",value:function(){this.isReachingOverOffset=!1,SoundManager.stopSound(this.nervousSound),this.nervousSound=null,this.gameManager.shooter.StopNervous(),this.StopAllShakeSlot()}},{key:"StopAllShakeSlot",value:function(){this.shakeSlot.forEach(function(e){e.StopShake()}),this.shakeSlot=[]}},{key:"isHolding",get:function(){return this.isHold}},{key:"GetDisconnectedBubbles",get:function(){return this.disconnectedBubbles}}]),t}(),ComboUI=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.currentTween=[],e.displayGroup=new PIXI.DisplayGroup(460,!1),e.Create(),e}return _inherits(t,PIXI.Container),_createClass(t,[{key:"Create",value:function(){var e=new PIXI.Sprite(PIXI.Texture.fromImage("assets/game/combo_bg.png"));e.anchor.set(.5,.5),e.y=0,this.comboBg=this.addChild(e),(e=new PIXI.Sprite(PIXI.Texture.fromImage("assets/game/combo.png"))).anchor.set(.5,.5),e.y=20,this.comboText=this.addChild(e);var t=new PIXI.extras.BitmapText("120",{font:"40px mini-wakuwaku-maru-combo",align:"center"});t.y=-10,t.anchor=new PIXI.Point(.5,.5),this.comboNumber=this.addChild(t)}},{key:"Show",value:function(e,t){this.comboNumber.text=e.toString(),this.position=t,this.PlayTween(e,t)}},{key:"PlayTween",value:function(e,t){this.ClearTween();var i=1.02,n=1;e>=5&&(i=1.2,n=1.15);var r=new PIXI.tween.Tween(this.comboBg);r.expire=!0,r.from({alpha:0,scale:{x:.8,y:.8}}),r.to({alpha:1,scale:{x:i,y:i}}),r.time=75;var a=new PIXI.tween.Tween(this.comboBg);a.expire=!0,a.delay=75,a.from({scale:{x:i,y:i}}),a.to({scale:{x:n,y:n}}),a.time=75;var s=new PIXI.tween.Tween(this.comboBg);s.expire=!0,s.delay=400,s.from({alpha:1}),s.to({alpha:0}),s.time=200,r.chain(a),a.chain(s),r.addTo(SceneManager.main.tween),r.start();var o=new PIXI.tween.Tween(this.comboText);o.expire=!0,o.from({alpha:0,scale:{x:.8,y:.8}}),o.to({alpha:1,scale:{x:i,y:i}}),o.time=75;var u=new PIXI.tween.Tween(this.comboText);u.expire=!0,u.delay=75,u.from({scale:{x:i,y:i}}),u.to({scale:{x:n,y:n}}),u.time=75;var l=new PIXI.tween.Tween(this.comboText);l.expire=!0,l.delay=400,l.from({alpha:1}),l.to({alpha:0}),l.time=200,o.chain(u),u.chain(l),o.addTo(SceneManager.main.tween),o.start();var h=new PIXI.tween.Tween(this.comboNumber);h.expire=!0,h.from({alpha:0,scale:{x:.8,y:.8}}),h.to({alpha:1,scale:{x:i,y:i}}),h.time=75;var c=new PIXI.tween.Tween(this.comboNumber);c.expire=!0,c.delay=75,c.from({scale:{x:i,y:i}}),c.to({scale:{x:n,y:n}}),c.time=75;var d=new PIXI.tween.Tween(this.comboNumber);d.expire=!0,d.delay=400,d.from({alpha:1}),d.to({alpha:0}),d.time=200,h.chain(c),c.chain(d),h.addTo(SceneManager.main.tween),h.start(),this.currentTween.push(r),this.currentTween.push(a),this.currentTween.push(o),this.currentTween.push(l),this.currentTween.push(h),this.currentTween.push(d),this.currentTween.push(s),this.currentTween.push(u),this.currentTween.push(c)}},{key:"ClearTween",value:function(){this.currentTween.length>0&&(this.currentTween.forEach(function(e){e.stop(),e.clear(),e.remove()}),this.currentTween=[])}}]),t}(),BubbleCombo=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.combo=0,i.nextComboSpecial=5,i.hiCombo=0,i.quickCombo=0,i.gameManager=e,i.comboUI=i.addChild(new ComboUI),i.comboUI.visible=!1,i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"AddCombo",value:function(e,i,n){var r=this;this.combo++,this.gameManager.gameTime-this.gameManager.shooter.lastResetFireTime<=1e3*Achievements.QuickComboTime&&(this.quickCombo++,this.gameManager.ingameStatTracker.HighestQuickCombo=Math.max(this.gameManager.ingameStatTracker.HighestQuickCombo,this.quickCombo));for(var a=!1,s=0;s<n.length;s++)if(n[s].type==PowerUpType.swipe){a=!0;break}if(!a)if(this.nextComboSpecial-1==0){this.gameManager.ingameStatTracker.CatSwipeTriggered=this.gameManager.ingameStatTracker.CatSwipeTriggered+1;var o=new PIXI.Container,u=Particle.NewParticle("particle_cat_swipe_combo",PIXI.loader.resources["assets/particles/FX_WhiteCircle.png"].texture,PIXI.loader.resources["assets/particles/FX_ParticleBurst_Yellow_combo.json"].data);o.addChild(u.con),u.startScale=1,u.spawnPos.set(e.x,e.y),u.Play();c=Particle.NewParticle("particle_cat_paw_burst_combo",PIXI.loader.resources["assets/particles/FX_Paw.png"].texture,PIXI.loader.resources["assets/particles/FX_CatPawBurst_Purple_combo.json"].data);o.addChild(c.con),c.startScale=.5,c.spawnPos.set(e.x,e.y),c.Play(),setTimeout(function(e,t,i,n){null!=e&&t.removeChild(e),i.Pool("particle_cat_swipe_combo"),n.Pool("particle_cat_paw_burst_combo")},1e3,o,this,u,c);var l=new PIXI.Sprite;(l=PIXI.Sprite.fromImage(Const.path.particle.outerCircle)).position.set(e.x,e.y),l.anchor.set(.5,.5),l.tint=10027212,o.addChild(l);var h=new PIXI.tween.Tween(l);h.time=250,h.from({scale:{x:.1,y:.1},alpha:1}),h.to({scale:{x:4,y:4},alpha:.3}),h.easing=PIXI.tween.Easing.outCubic(),h.expire=!0,h.start(),h.addTo(SceneManager.main.tween),h.on("end",function(){h.stop(),h.clear(),h.remove(),null!=o&&r.removeChild(o)}),o.displayGroup=new PIXI.DisplayGroup(451,!1),this.addChild(o),this.gameManager.powerUpManager.SetShooterBubbleSpecial(PowerUpType.swipe,e,i),this.nextComboSpecial=t.comboToSpecial}else{o=new PIXI.Container;if(this.nextComboSpecial-1==1){u=Particle.NewParticle("particle_cat_swipe_combo",PIXI.loader.resources["assets/particles/FX_WhiteCircle.png"].texture,PIXI.loader.resources["assets/particles/FX_ParticleBurst_Yellow_combo.json"].data);SoundManager.playSound("assets/game/SFX_PreCatSwipe_02.wav"),o.addChild(u.con),u.startScale=1,u.spawnPos.set(e.x,e.y),u.Play();var c=Particle.NewParticle("particle_cat_paw_burst_combo",PIXI.loader.resources["assets/particles/FX_Paw.png"].texture,PIXI.loader.resources["assets/particles/FX_CatPawBurst_Purple_combo.json"].data);o.addChild(c.con),c.startScale=.5,c.spawnPos.set(e.x,e.y),c.Play(),o.displayGroup=new PIXI.DisplayGroup(451,!1),this.addChild(o),setTimeout(function(e,t,i,n){null!=e&&t.removeChild(e),i.Pool("particle_cat_swipe_combo"),n.Pool("particle_cat_paw_burst_combo")},1e3,o,this,u,c)}else if(this.nextComboSpecial-1==2){u=Particle.NewParticle("particle_cat_swipe_combo",PIXI.loader.resources["assets/particles/FX_WhiteCircle.png"].texture,PIXI.loader.resources["assets/particles/FX_ParticleBurst_Yellow_combo.json"].data);SoundManager.playSound("assets/game/SFX_PreCatSwipe_01.wav"),this.addChild(u.con),u.startScale=1,u.spawnPos.set(e.x,e.y),u.Play(),u.con.displayGroup=new PIXI.DisplayGroup(451,!1),setTimeout(function(e,t){null!=t.con&&e.removeChild(t.con),t.Pool("particle_cat_swipe_combo")},1e3,this,u)}this.nextComboSpecial--}this.combo>1&&(this.comboUI.visible=!0,this.comboUI.Show(this.combo,e)),this.combo>this.hiCombo&&(this.hiCombo=this.combo,this.gameManager.ingameStatTracker.HighestCombo=this.combo)}},{key:"InterruptCombo",value:function(){this.combo=0,this.quickCombo=0,this.nextComboSpecial=t.comboToSpecial}},{key:"Reset",value:function(){this.combo=0,this.hiCombo=0,this.quickCombo=0,this.nextComboSpecial=t.comboToSpecial}},{key:"highestCombo",get:function(){return this.hiCombo}}]),t}();BubbleCombo.comboToSpecial=5;var PlateUI=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.gameManager=e,i.displayGroup=new PIXI.display.DisplayGroup(155,!1),i.Create(),i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"Create",value:function(){var e=new PIXI.Sprite;e.anchor.set(.5,.5),e.x=270,e.y=840,e.displayGroup=new PIXI.display.DisplayGroup(355,!1),this.plate=this.addChild(e)}},{key:"SpawnReward",value:function(e){var t=Nigiri.NewNigiri(e);t.displayGroup=new PIXI.DisplayGroup(356,!1),this.plate.addChild(t),this.FallOnToPlate(t)}},{key:"FallOnToPlate",value:function(e){e.alpha=1,e.scale.set(1.4),e.position.set(0,-30);var t=new PIXI.tween.Tween(e);t.time=200,t.from({scale:{x:1.4,y:1.4}}),t.to({scale:{x:1,y:1}}),t.easing=PIXI.tween.Easing.outQuad(),t.expire=!0;var i=new PIXI.tween.Tween(e);i.delay=200,i.time=270,i.from({alpha:1}),i.to({alpha:0}),i.expire=!0,t.chain(i),t.addTo(SceneManager.main.tween),this.currentTween=t,t.start();var n=t.time+i.time+i.delay;this.currentTimeout=setTimeout(function(t){t.visible=!1,SceneManager.main.poolManager.Add(BubbleType[t.type]+"_nigiri",e)},n,e)}}]),t}(),Tutorial=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=new PIXI.Graphics;return n.beginFill(0,.5),n.drawRect(0,0,SceneManager.main.gameWidth,SceneManager.main.gameHeight),n.endFill(),n.interactive=!0,i.transparentBg=i.addChild(n),i.displayGroup=new PIXI.DisplayGroup(591,!1),i.gameManager=e,i.objectiveLabelCon=new PIXI.Container,i.objectiveTextCon=new PIXI.Container,i.addChild(i.objectiveLabelCon),i.objectiveLabelBgSprite=new PIXI.Sprite(PIXI.loader.resources["assets/tutorial/textbox_01.png"].texture),i.objectiveLabelBgSprite.anchor.set(.5,.5),i.objectiveLabelBgSprite.displayGroup=new PIXI.DisplayGroup(591,!1),i.objectiveLabelBgSprite.position.set(0,0),i.objectiveText=new PIXI.extras.BitmapText("Finish the game!",{font:"20px mini-wakuwaku-maru",align:"left",tint:16777215}),i.objectiveText.anchor=new PIXI.Point(0,.5),i.objectiveText.position.set(10,0),i.objectiveText.displayGroup=new PIXI.DisplayGroup(591,!1),i.objectiveLabelCon.position.set(270,240),i.objectiveThumbnails=new PIXI.Sprite(PIXI.loader.resources["assets/game/check_green.png"].texture),i.objectiveThumbnails.anchor.set(.5,.5),i.objectiveThumbnails.displayGroup=new PIXI.DisplayGroup(591,!1),i.objectiveThumbnails.position.set(-16,0),i.objectiveTextCon.addChild(i.objectiveThumbnails),i.objectiveTextCon.addChild(i.objectiveText),i.objectiveLabelCon.addChild(i.objectiveLabelBgSprite),i.objectiveLabelCon.addChild(i.objectiveTextCon),i.ShowHideObjectiveLabel(!1),i.dialogue=new Dialogue,i.textField=new TextField(e.gameScene),i}return _inherits(t,PIXI.Container),_createClass(t,[{key:"startPhase1",value:function(){var e=new PIXI.tween.Tween(this.transparentBg,SceneManager.main.tween);e.time=250,e.from({alpha:0}),e.to({alpha:1}),e.start(),e.once("end",function(){this.addChild(this.dialogue),this.dialogue.show([{text:"Welcome, my new\nassistant!",progressMethod:"panel"},{text:"Please help me clear\nup these bubbles!",progressMethod:"panel"},{text:"Hold to aim\nRelease to shoot",progressMethod:"play",image:[PIXI.Texture.fromImage("assets/tutorial/tutorial_guide_01_01.png"),PIXI.Texture.fromImage("assets/tutorial/tutorial_guide_01_02.png")]}]),this.dialogue.once("complete",function(){(e=new PIXI.tween.Tween(this.transparentBg,SceneManager.main.tween)).time=250,e.from({alpha:1}),e.to({alpha:0}),e.start(),e.once("end",function(){this.ShowHideObjectiveLabel(!0),this.ChangeObjectiveThumbnail(PIXI.Sprite.fromImage("assets/leaderboard/caution-sign.png")),this.ChangeObjectiveText(-110,"Clear leftover bubbles"),this.emit("phase1complete"),this.transparentBg.visible=!1,setTimeout(function(e){e.ShowHideObjectiveLabel(!1)},3e3,this)},this)},this)},this)}},{key:"startPhase2",value:function(){this.ShowHideObjectiveLabel(!0),this.ChangeObjectiveText(-110,"Clear leftover bubbles"),this.ChangeObjectiveThumbnail(PIXI.Sprite.fromImage("assets/tutorial/check_green.png")),setTimeout(function(e){e.transparentBg.visible=!0;var t=new PIXI.tween.Tween(e.transparentBg,SceneManager.main.tween);t.time=250,t.from({alpha:0}),t.to({alpha:1}),t.start(),e.ShowHideObjectiveLabel(!1),t.once("end",function(){this.addChild(this.dialogue),this.dialogue.show([{text:"Complete a request to\nactivate Fever Time!",image:[PIXI.Texture.fromImage("assets/tutorial/tutorial_guide_02.png")],progressMethod:"ok"},{text:"TIP Make 5 COMBOs to\ntrigger power-ups!",image:[PIXI.Texture.fromImage("assets/tutorial/tutorial_guide_03.png")],progressMethod:"play"}]),this.dialogue.once("complete",function(){(t=new PIXI.tween.Tween(this.transparentBg,SceneManager.main.tween)).time=250,t.from({alpha:1}),t.to({alpha:0}),t.start(),t.once("end",function(){this.ShowHideObjectiveLabel(!0),this.objectiveLabelBgSprite.texture=PIXI.Texture.fromImage("assets/tutorial/textbox_02.png"),this.objectiveLabelBgSprite.width=this.objectiveLabelBgSprite.texture.width,this.ChangeObjectiveThumbnail(PIXI.Sprite.fromImage("assets/leaderboard/caution-sign.png")),this.ChangeObjectiveText(-130,"Complete customer request"),this.emit("phase2complete"),this.transparentBg.visible=!1,setTimeout(function(e){e.ShowHideObjectiveLabel(!1),e.parent.removeChild(e)},3e3,this)},this)},this)},e)},2e3,this)}},{key:"startPhase3",value:function(){this.transparentBg.visible=!0;var e=new PIXI.tween.Tween(this.transparentBg,SceneManager.main.tween);e.time=250,e.from({alpha:0}),e.to({alpha:1}),e.start(),e.once("end",function(){this.addChild(this.dialogue),this.dialogue.show([{text:"Shoot the ninja down\nbefore it reaches the top!",image:[PIXI.Texture.fromImage("assets/tutorial/tutorial_guide_04_01.png")],progressMethod:"ok"},{text:"If it reaches the top,\nanother bubble color\nwill be added!",image:[PIXI.Texture.fromImage("assets/tutorial/tutorial_guide_04_02.png")],progressMethod:"play"}]),this.dialogue.once("complete",function(){(e=new PIXI.tween.Tween(this.transparentBg,SceneManager.main.tween)).time=250,e.from({alpha:1}),e.to({alpha:0}),e.start(),e.once("end",function(){this.transparentBg.visible=!1,this.parent.removeChild(this),this.emit("phase3complete")},this)},this)},this)}},{key:"startPhase4",value:function(e){this.transparentBg.visible=!0;var t=new PIXI.tween.Tween(this.transparentBg,SceneManager.main.tween);t.time=250,t.from({alpha:0}),t.to({alpha:1}),t.start(),t.once("end",function(){this.addChild(this.dialogue),e?this.dialogue.show([{text:"Nice! Uh.. What's\nyour name again?",progressMethod:"panel"}]):this.dialogue.show([{text:"Well, better luck\nnext time!",progressMethod:"panel"},{text:"Uh... What's your\nname again?",progressMethod:"panel"}]),this.dialogue.once("complete",function(){this.addChild(this.textField),this.textField.once("complete",function(){SaveLoadManager.SetDisplayName("Player",this.textField.text),this.removeChild(this.textField),this.addChild(this.dialogue),this.dialogue.show([{text:"Okay, "+this.textField.text+"!\nI'll leave the rest\nto you.",progressMethod:"panel"},{text:"     Good luck!",progressMethod:"panel",textOffset:new PIXI.Point(0,11)}]),this.dialogue.once("complete",function(){(t=new PIXI.tween.Tween(this.transparentBg,SceneManager.main.tween)).time=250,t.from({alpha:1}),t.to({alpha:0}),t.start(),t.once("end",function(){this.transparentBg.visible=!1,this.parent.removeChild(this),this.emit("phase4complete")},this)},this)},this)},this)},this)}},{key:"ShowHideObjectiveLabel",value:function(e){if(e)this.objectiveLabelCon.visible=!0,this.objectiveLabelCon.scale.set(.1,.1),(t=new PIXI.tween.Tween(this.objectiveLabelCon,SceneManager.main.tween)).time=100,t.from({scale:{x:1.1,y:1.1}}),t.to({scale:{x:1,y:1}}),(i=new PIXI.tween.Tween(this.objectiveLabelCon,SceneManager.main.tween)).time=150,i.from({scale:{x:.1,y:.1}}),i.to({scale:{x:1.1,y:1.1}}),i.chain(t),i.start();else{this.objectiveLabelCon.scale.set(.1,.1);var t=new PIXI.tween.Tween(this.objectiveLabelCon,SceneManager.main.tween);t.time=150,t.from({scale:{x:1.1,y:1.1}}),t.to({scale:{x:.1,y:.1}}),t.on("end",function(){this.objectiveLabelCon.visible=!1},this);var i=new PIXI.tween.Tween(this.objectiveLabelCon,SceneManager.main.tween);i.time=100,i.from({scale:{x:1,y:1}}),i.to({scale:{x:1.1,y:1.1}}),i.chain(t),i.start()}}},{key:"ChangeObjectiveThumbnail",value:function(e){this.objectiveThumbnails.texture=e.texture}},{key:"ChangeObjectiveText",value:function(e,t){this.objectiveTextCon.position.set(e,0),this.objectiveText.text=t}}]),t}(),Misc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"PositionToIndex",value:function(e,t){var i,n,r=t.x-e.left,a=t.y-e.realHeight;return(i=Math.trunc(Math.floor(e.height-e.bubbleRadius-a+Math.sqrt(3)/2*e.bubbleRadius)/(Math.sqrt(3)*e.bubbleRadius)))%2==0?(r<0&&(r=0),n=Math.floor(r/(2*e.bubbleRadius))):(r<e.bubbleRadius&&(r=e.bubbleRadius),(n=Math.floor((r-e.bubbleRadius)/(2*e.bubbleRadius)))>=e.totalCols-1&&(n=e.totalCols-2)),new Index(i,n)}},{key:"IsCloseEnough",value:function(e,t,i,n){var r=e.x-t.x,a=e.y-t.y;return r*r+a*a<=2*i*n*(2*i*n)}},{key:"GetShootingAngle",value:function(e){return e>=0?-e<GameSetting.minAngle?e=-GameSetting.minAngle:-e>GameSetting.maxAngle&&(e=-GameSetting.maxAngle):e=e<-90?-GameSetting.minAngle:-GameSetting.maxAngle,e}}]),e}(),GameManager=function(){function e(t){_classCallCheck(this,e),this.isGameOver=!1,this.isPause=!1,this.gameTime=0,this.timeTicker=0,this.currentWarningGradientTime=0,this.gameOverCountDown=0,this.rushOffsetCountDown=0,this.rushOffsetIsPaused=!1,this.isDebugVisible=!0,this.gameScene=t,this.timeoutFunctions={},this.ingameStatTracker=new InGameStatTracker(this),this.grid=t.addChild(new BubbleGrid(this)),this.shooter=t.addChild(new BubbleShooter(this)),this.score=t.addChild(new BubbleScore(this)),this.coin=t.addChild(new BubbleCoin(t.upgradeManager)),this.powerUpManager=t.addChild(new PowerUpManager(this)),this.mouseManager=t.addChild(new MouseManager(this)),this.patreonManager=t.addChild(new PatronManager(this)),this.combo=t.addChild(new BubbleCombo(this)),this.plateUI=t.addChild(new PlateUI(this)),this.resultUI=t.addChild(new ResultUI(this)),this.pauseUI=t.addChild(new PauseUI(this)),this.chefUI=t.addChild(new ChefUI(this)),this.tutorialManager=new Tutorial(this),this.adsSDKWrapper=new AdsSDKWrapper,this.chefUI.position.set(GameSetting.gameWidth/2,45),this.CreateGameOverWarningGradient()}return _createClass(e,[{key:"SetOnMatchedBubble",value:function(e,t){this.onMatchedBubble=e,this.onMatchedBubbleContext=t}},{key:"OnMatchBubble",value:function(e,t,i,n){var r=this;if(0!=t.length){Util.isNullOrUndefined(i)||i.forEach(function(e){r.powerUpManager.Add(e.origin,e.type,Const.powerUpTime[PowerUpType[e.type]])});var a=this.grid.DisconnectBubble(),s=this.grid.bubbleSlot[e.row][e.col].position;this.combo.AddCombo(s,n,i),this.score.ComputeScore(t,a,i,s.x,s.y,n),this.grid.IsBubbleInRow(0)||this.RemoveOverAlert(),null!=this.onMatchedBubble&&this.onMatchedBubble.call(this.onMatchedBubbleContext)}}},{key:"RemoveOverAlert",value:function(){this.grid.isReachingOverOffset&&(this.grid.EscapeGameover(),this.gameOverCountDown=0,this.currentWarningGradientTime=0,this.warningGradient.visible=!1)}},{key:"CreateGameOverWarningGradient",value:function(){this.warningGradient=new PIXI.Sprite,this.warningGradient=PIXI.Sprite.fromImage("assets/game/warning_gradient.png"),this.warningGradient.anchor.set(.5),this.warningGradient.position.set(270,480),this.warningGradient.displayGroup=new PIXI.DisplayGroup(490,!1),this.warningGradient.visible=!1,this.gameScene.addChild(this.warningGradient)}},{key:"UpdateOverTimer",value:function(e){return this.gameOverCountDown+=e,this.gameOverCountDown>this.currentWarningGradientTime+300&&(this.warningGradient.visible=!this.warningGradient.visible,this.currentWarningGradientTime+=300),!this.isGameOver&&this.gameOverCountDown>GameSetting.gameOverTime&&(this.OnGameOver(),!0)}},{key:"SetTimeout",value:function(e,t,i,n){null==this.timeoutFunctions[t+this.gameTime]?this.timeoutFunctions[t+this.gameTime]=[{context:i,func:e,param:n}]:this.timeoutFunctions[t+this.gameTime].push({context:i,func:e,param:n})}},{key:"restart",value:function(){this.powerUpManager.reset(),this.StartNewGame(GameDifficulty.easy)}},{key:"StartNewGame",value:function(e){this.timeoutFunctions={};t=SaveLoadManager.GetSaveData("Player");this.isGameOver=!1,this.gameTime=0,this.score.Reset(),this.coin.reset(),this.isPause=!1,this.gameOverCountDown=0,this.currentWarningGradientTime=0,this.rushOffsetCountDown=0,this.rushOffsetIsPaused=!1,this.warningGradient.visible=!1,this.grid.NewGrid(e),this.shooter.CreateShooter(),this.mouseManager.Reset(),this.patreonManager.Start(!t.completedTutorial||"undefined"!=typeof skipTutorial&&!0===skipTutorial),this.combo.Reset(),this.ingameStatTracker.Reset(),Util.isNullOrUndefined(this.shooter)||this.shooter.GenerateNewShooter(),Util.isNullOrUndefined(this.mouseManager)||(this.mouseManager.ResetSpeed(),this.mouseManager.ResetBallsTracker()),SoundManager.isPlayingBgm||SoundManager.playBgm("assets/sfx/bgm.mp3",1);var t=SaveLoadManager.GetSaveData("Player");GameAnalytics("addDesignEvent","gameplay:easy:start");var i=parseInt(t.score);null!=i&&i>0&&adsSDKWrapper.AddScore(i),adsSDKWrapper.CacheInterstitialAds(),this.gameScene.PauseButtonVisible(t.completedTutorial||"undefined"!=typeof skipTutorial&&!0===skipTutorial),this.shooter.allowFire=!0,t.completedTutorial||"undefined"!=typeof skipTutorial&&!0===skipTutorial?(this.mouseManager.ResumeMouseCountdown(),this.ResetRushOffsetCooldown(),this.grid.Resume(),this.grid.SetToCheckPopInRow(),this.tutorialPhase=0,GameAnalytics("addProgressionEvent",gameanalytics.EGAProgressionStatus.Start,"game"),GameAnalytics("addDesignEvent","gameplay:Start_Second")):(this.grid.SlideDown(84),this.grid.Update(),this.mouseManager.PauseMouseCountdown(),this.PauseRushOffset(),this.grid.Pause(),this.StartTutorialPhase1(),this.SetOnMatchedBubble(function(){1==this.tutorialPhase&&(this.grid.ContainsBubbleInRow(9,10)?this.shooter.CheckAndChangeCurrentAndNextBubble(9,10):this.StartTutorialPhase2())},this))}},{key:"StartTutorialPhase1",value:function(){GameAnalytics("addDesignEvent","gameplay:Tutorial_Welcome"),this.tutorialPhase=1,this.shooter.allowFire=!1,this.grid.SetToCheckPopInRow(0,1,2,3,4,5,6,7,8,9,10),setTimeout(function(e){e.gameScene.addChild(e.tutorialManager),e.tutorialManager.startPhase1(),e.tutorialManager.once("phase1complete",function(){this.shooter.allowFire=!0},e)},1e3,this)}},{key:"StartTutorialPhase2",value:function(){GameAnalytics("addDesignEvent","gameplay:Tutorial_ClearBubble"),this.tutorialPhase=2,this.gameScene.addChild(this.tutorialManager),this.tutorialManager.startPhase2(),this.shooter.allowFire=!1,this.grid.SetToCheckPopInRow(),this.tutorialManager.once("phase2complete",function(){this.patreonManager.once("completerequest",function(){this.gameScene.addChild(this.tutorialManager),this.tutorialManager.ShowHideObjectiveLabel(!0),this.tutorialManager.ChangeObjectiveThumbnail(PIXI.Sprite.fromImage("assets/tutorial/check_green.png")),GameAnalytics("addDesignEvent","gameplay:Tutorial_CustomerRequest"),setTimeout(function(e){e.tutorialManager.ShowHideObjectiveLabel(!1)},2e3,this)},this),this.shooter.allowFire=!0,this.grid.Resume(),this.patreonManager.InitialRequest(),this.powerUpManager.SetOnFeverTimeOver(function(){this.powerUpManager.SetOnFeverTimeOver(null,null),setTimeout(function(e){e.StartTutorialPhase3()},1e3,this)},this)},this)}},{key:"StartTutorialPhase3",value:function(){this.tutorialPhase=3,this.mouseManager.StartWarning(),this.mouseManager.SetOnMouseLaunched(function(){this.mouseManager.SetOnMouseLaunched(null,null),this.gameScene.Pause(!0),this.tutorialManager.startPhase3(),this.tutorialManager.once("phase3complete",function(){this.gameScene.Pause(!1);var e=this,t=function(t){setTimeout(function(){e.StartTutorialPhase4(t)},t?500:2e3),GameAnalytics("addDesignEvent","gameplay:Tutorial_MouseTakedown",t?1:0),e.mouseManager.SetOnMouseDie(null),e.mouseManager.SetOnMouseEscaped(null)};this.mouseManager.SetOnMouseDie(function(){t(!0)}),this.mouseManager.SetOnMouseEscaped(function(){t(!1)})},this)},this)}},{key:"StartTutorialPhase4",value:function(e){this.tutorialPhase=4,this.gameScene.addChild(this.tutorialManager),this.tutorialManager.startPhase4(e),this.grid.Pause(),this.shooter.allowFire=!1,this.tutorialManager.once("phase4complete",function(){GameAnalytics("addDesignEvent","gameplay:Tutorial_NameInput"),this.grid.Resume(),this.shooter.allowFire=!0,this.mouseManager.ResumeMouseCountdown(),this.PauseRushOffset(),this.patreonManager.NextRequest(),this.gameScene.PauseButtonVisible(!0),SaveLoadManager.CompleteTutorial("Player"),GameAnalytics("addProgressionEvent",gameanalytics.EGAProgressionStatus.Start,"game"),this.tutorialPhase=0},this)}},{key:"Update",value:function(){if(this.isGameOver)this.resultUI.update();else if(!this.isPause){var e=this.gameTime;this.timeTicker=Math.min(500,SceneManager.main.game.ticker.elapsedMS),this.gameTime+=this.timeTicker,this.shooter.Update(),this.grid.Update(),this.mouseManager.Update(),this.patreonManager.Update(e,this.gameTime);for(var t in this.timeoutFunctions)if(parseInt(t)<this.gameTime){for(var i=0;i<this.timeoutFunctions[t].length;i++)this.timeoutFunctions[t][i].func.call(this.timeoutFunctions[t][i].context,this.timeoutFunctions[t][i].param);delete this.timeoutFunctions[t]}Util.isNullOrUndefined(this.mouse)||this.mouse.Update(),this.powerUpManager.Update(),this.rushOffsetCountDown>GameSetting.rushOffsetTime?(this.ResetRushOffsetCooldown(),this.grid.LowerRushOffset()):this.rushOffsetIsPaused||(this.rushOffsetCountDown+=SceneManager.main.game.ticker.elapsedMS)}}},{key:"PauseRushOffset",value:function(){this.rushOffsetIsPaused&&this.ResetRushOffsetCooldown(),this.rushOffsetIsPaused=!this.rushOffsetIsPaused}},{key:"ResetRushOffsetCooldown",value:function(){this.rushOffsetCountDown=0}},{key:"OnGameOver",value:function(){if(this.isGameOver=!0,Util.isNullOrUndefined(this.shooter.loadedBubble)||(this.shooter.isFiring=!1,SceneManager.main.poolManager.Add(BubbleType[this.shooter.loadedBubble.type],this.shooter.loadedBubble),this.shooter.loadedBubble.visible=!1),this.powerUpManager.IsOnFeverTime&&this.powerUpManager.StopFeverTime(),this.ingameStatTracker.TotalGameTime=this.gameTime,Util.isNullOrUndefined(this.mouse)||this.mouse.RemoveMouse(),Util.isNullOrUndefined(this.shooter)||this.shooter.RemoveArrow(),backend.BackendManager.sendScore(SaveLoadManager.GetSaveData("Player").displayName,this.score.GetTotalScore(),function(e){e?backend.BackendManager.getRankWeekly(this.resultUI.setRank,this.resultUI):this.resultUI.setRank(null)},this),SaveLoadManager.GetSaveData("Player").completedTutorial){GameAnalytics("addDesignEvent","endgame:easy:score",this.score.GetTotalScore()),GameAnalytics("addDesignEvent","endgame:easy:playtime",this.gameTime/1e3/60),GameAnalytics("addDesignEvent","endgame:easy:bubblecolor",this.grid.nextBubbleIndexToAdd),GameAnalytics("addDesignEvent","endgame:easy:ghosttakedown",this.score.mouse),GameAnalytics("addDesignEvent","endgame:easy:highestcombo",this.combo.highestCombo),GameAnalytics("addDesignEvent","endgame:easy:customerrequest",this.score.customer);var e=parseInt(SaveLoadManager.GetSaveData("Player").score),t=this.score.GetTotalScore()>(e||0);t&&GameAnalytics("addDesignEvent","endgame:easy:newhighscore",this.score.GetTotalScore()),SaveLoadManager.SaveScore("Player",this.score.GetTotalScore()),SaveLoadManager.SaveTotalCatSwipeTrigger("Player",this.ingameStatTracker.CatSwipeTriggered),SaveLoadManager.SaveTotalDisconnectedBubble("Player",this.ingameStatTracker.DisconnectedBubble),SaveLoadManager.SaveTotalMouseKnockout("Player",this.ingameStatTracker.MouseKnockout),SaveLoadManager.SaveTotalRequestComplete("Player",this.ingameStatTracker.RequestComplete),SaveLoadManager.SaveTotalBubbleMatched("Player",this.ingameStatTracker.MatchedBubble),SaveLoadManager.SaveTotalBounceMatches("Player",this.ingameStatTracker.BounceMatches),SaveLoadManager.SaveMinRequestTime("Player",this.ingameStatTracker.MinRequestTime);var i=this.coin.totalCoin;SaveLoadManager.AddCoin("Player",i),GameAnalytics("addResourceEvent",gameanalytics.EGAResourceFlowType.Source,"coin",i,"endGame","endGame"),this.resultUI.setCoinReceived(i);for(var n=this.gameScene.achievementManager.checkAchievements(this.ingameStatTracker),r=0;r<n.length;r++){GameAnalytics("addProgressionEvent",gameanalytics.EGAProgressionStatus.Complete,"achievement",n[r].id,n[r].level.toString());for(var a=n[r].level+1;n[r].claimableAt(a);)GameAnalytics("addProgressionEvent",gameanalytics.EGAProgressionStatus.Complete,"achievement",n[r].id,a.toString()),a++}this.resultUI.Show(t,n,e);for(r=0;r<7;r++)SaveLoadManager.SaveTotalBubbleMatchedPerColor("Player",r,this.ingameStatTracker.GetMatchedBubblePerType(r));null!=this.score.GetTotalScore()&&this.score.GetTotalScore()>0&&adsSDKWrapper.AddScore(this.score.GetTotalScore())}else this.resultUI.setCoinReceived(0),this.resultUI.Show(!1,[],null)}},{key:"stop",value:function(){this.mouseManager.Reset(),this.shooter.stop(),this.grid.stop()}},{key:"DebugMenuToggle",value:function(){this.powerUpManager.DebugContainer.visible=!this.isDebugVisible,this.grid.DebugContainer.visible=!this.isDebugVisible,this.DebugContainer.visible=!this.isDebugVisible,this.mouseManager.mouseTimer.visible=!this.isDebugVisible,this.grid.rushOffsetGraphic.visible=!this.isDebugVisible,null!=this.gameScene.fps&&(this.isDebugVisible?this.gameScene.fps.HideFps():this.gameScene.fps.ShowFps()),this.isDebugVisible=!this.isDebugVisible}},{key:"CreateDebugMenu",value:function(){var e=this;this.DebugContainer=new PIXI.Container,this.DebugContainer.displayGroup=new PIXI.DisplayGroup(650,!1),this.gameScene.addChild(this.DebugContainer);var t=new RoundedRectBtn(100,800,100,50,20,16777215);t.setOverlayText("ChefUI"),t.setOnClick(function(){e.chefUI.MouseAlert()},this),this.DebugContainer.addChild(t),(t=new RoundedRectBtn(385,40,100,50,20,16777215)).setOverlayText("Debug"),t.setOnClick(function(){e.DebugMenuToggle()},this),t.displayGroup=new PIXI.DisplayGroup(650,!1),this.gameScene.addChild(t),this.patreonManager.CreateDebugUI(),this.grid.CreateDebugUI(),this.powerUpManager.CreateDebugMenu()}},{key:"tutorialProgress",get:function(){return this.tutorialPhase}}]),e}();adsSDKWrapper=new AdsSDKWrapper,adsSDKWrapper.Init();var Main=function(){function e(){_classCallCheck(this,e),this.size=[GameSetting.gameWidth,GameSetting.gameHeight],this.ratio=this.size[0]/this.size[1],this.tween=new PIXI.tween.TweenManager,this.game=new PIXI.Application(this.size[0],this.size[1],{backgroundColor:0,antialias:!0},!1),this.game.stage.displayList=new PIXI.DisplayList,this._achievementManager=new AchievementManager,this._upgradeManager=new UpgradeManager,document.getElementById("content").appendChild(this.game.view),this.resize(),this.game.ticker.add(this.update,this),this.game.stage.interactive=!1,this.poolManager=new PoolManager}return _createClass(e,[{key:"update",value:function(){this.currentScene.update(),this.tween.update(Math.min(.5,this.game.ticker.elapsedMS/1e3))}},{key:"setScene",value:function(e){null!=this.currentScene&&(this.currentScene.stop(),this.game.stage.removeChild(this.currentScene),this.game.ticker.remove(this.currentScene.update,this.currentScene)),this.currentScene=e,this.game.stage.addChildAt(this.currentScene,0),this.currentScene.start()}},{key:"setBgColor",value:function(e){this.game.renderer.backgroundColor=e}},{key:"resize",value:function(){if(window.innerWidth/window.innerHeight>=this.ratio)var e=window.innerHeight*this.ratio,t=window.innerHeight;else var e=window.innerWidth,t=window.innerWidth/this.ratio;this.game.renderer.view.style.width=e+"px",this.game.renderer.view.style.height=t+"px";var i=document.getElementById("content");i.style.width=e+"px",i.style.height=t+"px"}},{key:"achievementManager",get:function(){return this._achievementManager}},{key:"upgradeManager",get:function(){return this._upgradeManager}},{key:"gameWidth",get:function(){return this.game.renderer.width}},{key:"gameHeight",get:function(){return this.game.renderer.height}}]),e}();window.onload=function(){null==SceneManager.main&&(GameAnalytics("setEnabledInfoLog",!1),GameAnalytics("configureAvailableResourceCurrencies",["coin"]),GameAnalytics("configureAvailableResourceItemTypes",["endGame","achievement","upgrade"]),GameAnalytics("initialize","86d846f202c57af405db5b6f4d5ed5b8","49280e87b18e56b75559d09043a35d64f7313d50"),GameAnalytics("addDesignEvent","gameplay:loading"),SceneManager.main=new Main,SceneManager.goToScene("mainMenu"))},window.onresize=function(e){SceneManager.main.resize()},window.onblur=function(){SceneManager.main.currentScene.OnBlur()},window.onfocus=function(){};